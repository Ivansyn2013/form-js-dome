(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function dL(n,e){return e={exports:{}},n(e,e.exports),e.exports}var pL=dL(function(n){var e=n.exports=function(t,r){if(r||(r=16),t===void 0&&(t=128),t<=0)return"0";for(var i=Math.log(Math.pow(2,t))/Math.log(r),s=2;i===1/0;s*=2)i=Math.log(Math.pow(2,t/s))/Math.log(r)*s;for(var o=i-Math.floor(i),a="",s=0;s<Math.floor(i);s++){var u=Math.floor(Math.random()*r).toString(r);a=u+a}if(o){var f=Math.pow(r,o),u=Math.floor(Math.random()*f).toString(r);a=u+a}var h=parseInt(a,r);return h!==1/0&&h>=Math.pow(2,t)?e(t,r):a};e.rack=function(t,r,i){var s=function(a){var u=0;do{if(u++>10)if(i)t+=i;else throw new Error("too many ID collisions, use more bits");var f=e(t,r)}while(Object.hasOwnProperty.call(o,f));return o[f]=a,f},o=s.hats={};return s.get=function(a){return s.hats[a]},s.set=function(a,u){return s.hats[a]=u,s},s.bits=t||128,s.base=r||16,s}});function Sr(n){if(!(this instanceof Sr))return new Sr(n);n=n||[128,36,1],this._seed=n.length?pL.rack(n[0],n[1],n[2]):n}Sr.prototype.next=function(n){return this._seed(n||!0)};Sr.prototype.nextPrefixed=function(n,e){var t;do t=n+this.next(!0);while(this.assigned(t));return this.claim(t,e),t};Sr.prototype.claim=function(n,e){this._seed.set(n,e||!0)};Sr.prototype.assigned=function(n){return this._seed.get(n)||!1};Sr.prototype.unclaim=function(n){delete this._seed.hats[n]};Sr.prototype.clear=function(){var n=this._seed.hats,e;for(e in n)this.unclaim(e)};const $u=Object.prototype.toString,gL=Object.prototype.hasOwnProperty;function Xi(n){return n===void 0}function y2(n){return n!==void 0}function go(n){return n==null}function mo(n){return $u.call(n)==="[object Array]"}function rs(n){return $u.call(n)==="[object Object]"}function Ts(n){return $u.call(n)==="[object Number]"}function Sh(n){const e=$u.call(n);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function Jr(n){return $u.call(n)==="[object String]"}function b2(n,e){return!go(n)&&gL.call(n,e)}function mL(n,e){const t=x2(e);let r;return vo(n,function(i,s){if(t(i,s))return r=i,!1}),r}function vL(n,e){const t=x2(e);let r=mo(n)?-1:void 0;return vo(n,function(i,s){if(t(i,s))return r=s,!1}),r}function vo(n,e){let t,r;if(Xi(n))return;const i=mo(n)?xL:OL;for(let s in n)if(b2(n,s)&&(t=n[s],r=e(t,i(s)),r===!1))return t}function yL(n,e,t){return vo(n,function(r,i){t=e(t,r,i)}),t}function bL(n,e){return!!mL(n,e)}function w2(n,e){let t=[];return vo(n,function(r,i){t.push(e(r,i))}),t}function wL(n){return w2(n,e=>e)}function _2(n,e,t={}){return e=O2(e),vo(n,function(r){let i=e(r)||"_",s=t[i];s||(s=t[i]=[]),s.push(r)}),t}function _L(n,...e){n=O2(n);let t={};return vo(e,i=>_2(i,n,t)),w2(t,function(i,s){return i[0]})}function O2(n){return Sh(n)?n:e=>e[n]}function x2(n){return Sh(n)?n:e=>e===n}function OL(n){return n}function xL(n){return Number(n)}function kL(n,e){return n.bind(e)}function SL(n,...e){return Object.assign(n,...e)}function tr(n,e,t){let r=n;return vo(e,function(i,s){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let o=e[s+1],a=r[i];y2(o)&&go(a)&&(a=r[i]=isNaN(+o)?{}:[]),Xi(o)?Xi(t)?delete r[i]:r[i]=t:r=a}),n}function nn(n,e,t){let r=n;return vo(e,function(i){if(go(r))return r=void 0,!1;r=r[i]}),Xi(r)?t:r}var CL=20,TL=1,ol=1e6,EL=1e6,AL=-7,ML=21,DL=!1,Nu="[big.js] ",ea=Nu+"Invalid ",Ch=ea+"decimal places",RL=ea+"rounding mode",k2=Nu+"Division by zero",pt={},ts=void 0,IL=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function S2(){function n(e){var t=this;if(!(t instanceof n))return e===ts?S2():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(ea+"value");e=e===0&&1/e<0?"-0":String(e)}PL(t,e)}t.constructor=n}return n.prototype=pt,n.DP=CL,n.RM=TL,n.NE=AL,n.PE=ML,n.strict=DL,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function PL(n,e){var t,r,i;if(!IL.test(e))throw Error(ea+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),i=e.length,r=0;r<i&&e.charAt(r)=="0";)++r;if(r==i)n.c=[n.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(n.e=t-r-1,n.c=[],t=0;r<=i;)n.c[t++]=+e.charAt(r++)}return n}function ta(n,e,t,r){var i=n.c;if(t===ts&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(RL);if(e<1)r=t===3&&(r||!!i[0])||e===0&&(t===1&&i[0]>=5||t===2&&(i[0]>5||i[0]===5&&(r||i[1]!==ts))),i.length=1,r?(n.e=n.e-e+1,i[0]=1):i[0]=n.e=0;else if(e<i.length){if(r=t===1&&i[e]>=5||t===2&&(i[e]>5||i[e]===5&&(r||i[e+1]!==ts||i[e-1]&1))||t===3&&(r||!!i[0]),i.length=e,r){for(;++i[--e]>9;)if(i[e]=0,e===0){++n.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return n}function na(n,e,t){var r=n.e,i=n.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>s)for(r-=s;r--;)i+="0";else r<s&&(i=i.slice(0,r)+"."+i.slice(r));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return n.s<0&&t?"-"+i:i}pt.abs=function(){var n=new this.constructor(this);return n.s=1,n};pt.cmp=function(n){var e,t=this,r=t.c,i=(n=new t.constructor(n)).c,s=t.s,o=n.s,a=t.e,u=n.e;if(!r[0]||!i[0])return r[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=u)return a>u^e?1:-1;for(o=(a=r.length)<(u=i.length)?a:u,s=-1;++s<o;)if(r[s]!=i[s])return r[s]>i[s]^e?1:-1;return a==u?0:a>u^e?1:-1};pt.div=function(n){var e=this,t=e.constructor,r=e.c,i=(n=new t(n)).c,s=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>ol)throw Error(Ch);if(!i[0])throw Error(k2);if(!r[0])return n.s=s,n.c=[n.e=0],n;var a,u,f,h,p,g=i.slice(),m=a=i.length,y=r.length,b=r.slice(0,a),O=b.length,C=n,M=C.c=[],T=0,S=o+(C.e=e.e-n.e)+1;for(C.s=s,s=S<0?0:S,g.unshift(0);O++<a;)b.push(0);do{for(f=0;f<10;f++){if(a!=(O=b.length))h=a>O?1:-1;else for(p=-1,h=0;++p<a;)if(i[p]!=b[p]){h=i[p]>b[p]?1:-1;break}if(h<0){for(u=O==a?i:g;O;){if(b[--O]<u[O]){for(p=O;p&&!b[--p];)b[p]=9;--b[p],b[O]+=10}b[O]-=u[O]}for(;!b[0];)b.shift()}else break}M[T++]=h?f:++f,b[0]&&h?b[O]=r[m]||0:b=[r[m]]}while((m++<y||b[0]!==ts)&&s--);return!M[0]&&T!=1&&(M.shift(),C.e--,S--),T>S&&ta(C,S,t.RM,b[0]!==ts),C};pt.eq=function(n){return this.cmp(n)===0};pt.gt=function(n){return this.cmp(n)>0};pt.gte=function(n){return this.cmp(n)>-1};pt.lt=function(n){return this.cmp(n)<0};pt.lte=function(n){return this.cmp(n)<1};pt.minus=pt.sub=function(n){var e,t,r,i,s=this,o=s.constructor,a=s.s,u=(n=new o(n)).s;if(a!=u)return n.s=-u,s.plus(n);var f=s.c.slice(),h=s.e,p=n.c,g=n.e;if(!f[0]||!p[0])return p[0]?n.s=-u:f[0]?n=new o(s):n.s=1,n;if(a=h-g){for((i=a<0)?(a=-a,r=f):(g=h,r=p),r.reverse(),u=a;u--;)r.push(0);r.reverse()}else for(t=((i=f.length<p.length)?f:p).length,a=u=0;u<t;u++)if(f[u]!=p[u]){i=f[u]<p[u];break}if(i&&(r=f,f=p,p=r,n.s=-n.s),(u=(t=p.length)-(e=f.length))>0)for(;u--;)f[e++]=0;for(u=e;t>a;){if(f[--t]<p[t]){for(e=t;e&&!f[--e];)f[e]=9;--f[e],f[t]+=10}f[t]-=p[t]}for(;f[--u]===0;)f.pop();for(;f[0]===0;)f.shift(),--g;return f[0]||(n.s=1,f=[g=0]),n.c=f,n.e=g,n};pt.mod=function(n){var e,t=this,r=t.constructor,i=t.s,s=(n=new r(n)).s;if(!n.c[0])throw Error(k2);return t.s=n.s=1,e=n.cmp(t)==1,t.s=i,n.s=s,e?new r(t):(i=r.DP,s=r.RM,r.DP=r.RM=0,t=t.div(n),r.DP=i,r.RM=s,this.minus(t.times(n)))};pt.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};pt.plus=pt.add=function(n){var e,t,r,i=this,s=i.constructor;if(n=new s(n),i.s!=n.s)return n.s=-n.s,i.minus(n);var o=i.e,a=i.c,u=n.e,f=n.c;if(!a[0]||!f[0])return f[0]||(a[0]?n=new s(i):n.s=i.s),n;if(a=a.slice(),e=o-u){for(e>0?(u=o,r=f):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-f.length<0&&(r=f,f=a,a=r),e=f.length,t=0;e;a[e]%=10)t=(a[--e]=a[e]+f[e]+t)/10|0;for(t&&(a.unshift(t),++u),e=a.length;a[--e]===0;)a.pop();return n.c=a,n.e=u,n};pt.pow=function(n){var e=this,t=new e.constructor("1"),r=t,i=n<0;if(n!==~~n||n<-1e6||n>EL)throw Error(ea+"exponent");for(i&&(n=-n);n&1&&(r=r.times(e)),n>>=1,!!n;)e=e.times(e);return i?t.div(r):r};pt.prec=function(n,e){if(n!==~~n||n<1||n>ol)throw Error(ea+"precision");return ta(new this.constructor(this),n,e)};pt.round=function(n,e){if(n===ts)n=0;else if(n!==~~n||n<-1e6||n>ol)throw Error(Ch);return ta(new this.constructor(this),n+this.e+1,e)};pt.sqrt=function(){var n,e,t,r=this,i=r.constructor,s=r.s,o=r.e,a=new i("0.5");if(!r.c[0])return new i(r);if(s<0)throw Error(Nu+"No square root");s=Math.sqrt(+na(r,!0,!0)),s===0||s===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):n=new i(s+""),o=n.e+(i.DP+=4);do t=n,n=a.times(t.plus(r.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return ta(n,(i.DP-=4)+n.e+1,i.RM)};pt.times=pt.mul=function(n){var e,t=this,r=t.constructor,i=t.c,s=(n=new r(n)).c,o=i.length,a=s.length,u=t.e,f=n.e;if(n.s=t.s==n.s?1:-1,!i[0]||!s[0])return n.c=[n.e=0],n;for(n.e=u+f,o<a&&(e=i,i=s,s=e,f=o,o=a,a=f),e=new Array(f=o+a);f--;)e[f]=0;for(u=a;u--;){for(a=0,f=o+u;f>u;)a=e[f]+s[u]*i[f-u-1]+a,e[f--]=a%10,a=a/10|0;e[f]=a}for(a?++n.e:e.shift(),u=e.length;!e[--u];)e.pop();return n.c=e,n};pt.toExponential=function(n,e){var t=this,r=t.c[0];if(n!==ts){if(n!==~~n||n<0||n>ol)throw Error(Ch);for(t=ta(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return na(t,!0,!!r)};pt.toFixed=function(n,e){var t=this,r=t.c[0];if(n!==ts){if(n!==~~n||n<0||n>ol)throw Error(Ch);for(t=ta(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return na(t,!1,!!r)};pt[Symbol.for("nodejs.util.inspect.custom")]=pt.toJSON=pt.toString=function(){var n=this,e=n.constructor;return na(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};pt.toNumber=function(){var n=+na(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(Nu+"Imprecise conversion");return n};pt.toPrecision=function(n,e){var t=this,r=t.constructor,i=t.c[0];if(n!==ts){if(n!==~~n||n<1||n>ol)throw Error(ea+"precision");for(t=ta(new r(t),n,e);t.c.length<n;)t.c.push(0)}return na(t,n<=t.e||t.e<=r.NE||t.e>=r.PE,!!i)};pt.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(Nu+"valueOf disallowed");return na(n,n.e<=e.NE||n.e>=e.PE,!0)};var Yi=S2(),to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cp={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Iw;function LL(){return Iw||(Iw=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(cp)),cp.exports}var $L=LL();const wt=C2($L);var Th,Fe,T2,Ho,Pw,E2,A2,M2,X1,Xm,Gm,D2,Ou={},R2=[],NL=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Fu=Array.isArray;function xs(n,e){for(var t in e)n[t]=e[t];return n}function G1(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function J(n,e,t){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Th.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]==null&&(o[s]=n.defaultProps[s]);return Df(n,o,r,i,null)}function Df(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++T2,__i:-1,__u:0};return i==null&&Fe.vnode!=null&&Fe.vnode(s),s}function On(n){return n.children}function Es(n,e){this.props=n,this.context=e}function qa(n,e){if(e==null)return n.__?qa(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?qa(n):null}function I2(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return I2(n)}}function Zm(n){(!n.__d&&(n.__d=!0)&&Ho.push(n)&&!Yf.__r++||Pw!=Fe.debounceRendering)&&((Pw=Fe.debounceRendering)||E2)(Yf)}function Yf(){for(var n,e,t,r,i,s,o,a=1;Ho.length;)Ho.length>a&&Ho.sort(A2),n=Ho.shift(),a=Ho.length,n.__d&&(t=void 0,i=(r=(e=n).__v).__e,s=[],o=[],e.__P&&((t=xs({},r)).__v=r.__v+1,Fe.vnode&&Fe.vnode(t),Z1(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,s,i??qa(r),!!(32&r.__u),o),t.__v=r.__v,t.__.__k[t.__i]=t,$2(s,t,o),t.__e!=i&&I2(t)));Yf.__r=0}function P2(n,e,t,r,i,s,o,a,u,f,h){var p,g,m,y,b,O,C=r&&r.__k||R2,M=e.length;for(u=FL(t,e,C,u,M),p=0;p<M;p++)(m=t.__k[p])!=null&&(g=m.__i==-1?Ou:C[m.__i]||Ou,m.__i=p,O=Z1(n,m,g,i,s,o,a,u,f,h),y=m.__e,m.ref&&g.ref!=m.ref&&(g.ref&&K1(g.ref,null,m),h.push(m.ref,m.__c||y,m)),b==null&&y!=null&&(b=y),4&m.__u||g.__k===m.__k?u=L2(m,u,n):typeof m.type=="function"&&O!==void 0?u=O:y&&(u=y.nextSibling),m.__u&=-7);return t.__e=b,u}function FL(n,e,t,r,i){var s,o,a,u,f,h=t.length,p=h,g=0;for(n.__k=new Array(i),s=0;s<i;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(u=s+g,(o=n.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Df(null,o,null,null,null):Fu(o)?Df(On,{children:o},null,null,null):o.constructor==null&&o.__b>0?Df(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,a=null,(f=o.__i=BL(o,t,u,p))!=-1&&(p--,(a=t[f])&&(a.__u|=2)),a==null||a.__v==null?(f==-1&&(i>h?g--:i<h&&g++),typeof o.type!="function"&&(o.__u|=4)):f!=u&&(f==u-1?g--:f==u+1?g++:(f>u?g--:g++,o.__u|=4))):n.__k[s]=null;if(p)for(s=0;s<h;s++)(a=t[s])!=null&&(2&a.__u)==0&&(a.__e==r&&(r=qa(a)),F2(a,a));return r}function L2(n,e,t){var r,i;if(typeof n.type=="function"){for(r=n.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=n,e=L2(r[i],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=qa(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Xf(n,e){return e=e||[],n==null||typeof n=="boolean"||(Fu(n)?n.some(function(t){Xf(t,e)}):e.push(n)),e}function BL(n,e,t,r){var i,s,o=n.key,a=n.type,u=e[t];if(u===null&&n.key==null||u&&o==u.key&&a==u.type&&(2&u.__u)==0)return t;if(r>(u!=null&&(2&u.__u)==0?1:0))for(i=t-1,s=t+1;i>=0||s<e.length;){if(i>=0){if((u=e[i])&&(2&u.__u)==0&&o==u.key&&a==u.type)return i;i--}if(s<e.length){if((u=e[s])&&(2&u.__u)==0&&o==u.key&&a==u.type)return s;s++}}return-1}function Lw(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||NL.test(e)?t:t+"px"}function zc(n,e,t,r,i){var s;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Lw(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Lw(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(M2,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r?t.u=r.u:(t.u=X1,n.addEventListener(e,s?Gm:Xm,s)):n.removeEventListener(e,s?Gm:Xm,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function $w(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=X1++;else if(e.t<t.u)return;return t(Fe.event?Fe.event(e):e)}}}function Z1(n,e,t,r,i,s,o,a,u,f){var h,p,g,m,y,b,O,C,M,T,S,R,$,L,V,X,K,H=e.type;if(e.constructor!=null)return null;128&t.__u&&(u=!!(32&t.__u),s=[a=e.__e=t.__e]),(h=Fe.__b)&&h(e);e:if(typeof H=="function")try{if(C=e.props,M="prototype"in H&&H.prototype.render,T=(h=H.contextType)&&r[h.__c],S=h?T?T.props.value:h.__:r,t.__c?O=(p=e.__c=t.__c).__=p.__E:(M?e.__c=p=new H(C,S):(e.__c=p=new Es(C,S),p.constructor=H,p.render=HL),T&&T.sub(p),p.props=C,p.state||(p.state={}),p.context=S,p.__n=r,g=p.__d=!0,p.__h=[],p._sb=[]),M&&p.__s==null&&(p.__s=p.state),M&&H.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=xs({},p.__s)),xs(p.__s,H.getDerivedStateFromProps(C,p.__s))),m=p.props,y=p.state,p.__v=e,g)M&&H.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),M&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(M&&H.getDerivedStateFromProps==null&&C!==m&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(C,S),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(C,p.__s,S)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(p.props=C,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Y){Y&&(Y.__=e)}),R=0;R<p._sb.length;R++)p.__h.push(p._sb[R]);p._sb=[],p.__h.length&&o.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(C,p.__s,S),M&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(m,y,b)})}if(p.context=S,p.props=C,p.__P=n,p.__e=!1,$=Fe.__r,L=0,M){for(p.state=p.__s,p.__d=!1,$&&$(e),h=p.render(p.props,p.state,p.context),V=0;V<p._sb.length;V++)p.__h.push(p._sb[V]);p._sb=[]}else do p.__d=!1,$&&$(e),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++L<25);p.state=p.__s,p.getChildContext!=null&&(r=xs(xs({},r),p.getChildContext())),M&&!g&&p.getSnapshotBeforeUpdate!=null&&(b=p.getSnapshotBeforeUpdate(m,y)),X=h,h!=null&&h.type===On&&h.key==null&&(X=N2(h.props.children)),a=P2(n,Fu(X)?X:[X],e,t,r,i,s,o,a,u,f),p.base=e.__e,e.__u&=-161,p.__h.length&&o.push(p),O&&(p.__E=p.__=null)}catch(Y){if(e.__v=null,u||s!=null)if(Y.then){for(e.__u|=u?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(K=s.length;K--;)G1(s[K]);else e.__e=t.__e,e.__k=t.__k;Fe.__e(Y,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=zL(t.__e,e,t,r,i,s,o,u,f);return(h=Fe.diffed)&&h(e),128&e.__u?void 0:a}function $2(n,e,t){for(var r=0;r<t.length;r++)K1(t[r],t[++r],t[++r]);Fe.__c&&Fe.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(s){s.call(i)})}catch(s){Fe.__e(s,i.__v)}})}function N2(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Fu(n)?n.map(N2):xs({},n)}function zL(n,e,t,r,i,s,o,a,u){var f,h,p,g,m,y,b,O=t.props,C=e.props,M=e.type;if(M=="svg"?i="http://www.w3.org/2000/svg":M=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(f=0;f<s.length;f++)if((m=s[f])&&"setAttribute"in m==!!M&&(M?m.localName==M:m.nodeType==3)){n=m,s[f]=null;break}}if(n==null){if(M==null)return document.createTextNode(C);n=document.createElementNS(i,M,C.is&&C),a&&(Fe.__m&&Fe.__m(e,s),a=!1),s=null}if(M==null)O===C||a&&n.data==C||(n.data=C);else{if(s=s&&Th.call(n.childNodes),O=t.props||Ou,!a&&s!=null)for(O={},f=0;f<n.attributes.length;f++)O[(m=n.attributes[f]).name]=m.value;for(f in O)if(m=O[f],f!="children"){if(f=="dangerouslySetInnerHTML")p=m;else if(!(f in C)){if(f=="value"&&"defaultValue"in C||f=="checked"&&"defaultChecked"in C)continue;zc(n,f,null,m,i)}}for(f in C)m=C[f],f=="children"?g=m:f=="dangerouslySetInnerHTML"?h=m:f=="value"?y=m:f=="checked"?b=m:a&&typeof m!="function"||O[f]===m||zc(n,f,m,O[f],i);if(h)a||p&&(h.__html==p.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),e.__k=[];else if(p&&(n.innerHTML=""),P2(e.type=="template"?n.content:n,Fu(g)?g:[g],e,t,r,M=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:t.__k&&qa(t,0),a,u),s!=null)for(f=s.length;f--;)G1(s[f]);a||(f="value",M=="progress"&&y==null?n.removeAttribute("value"):y!=null&&(y!==n[f]||M=="progress"&&!y||M=="option"&&y!=O[f])&&zc(n,f,y,O[f],i),f="checked",b!=null&&b!=n[f]&&zc(n,f,b,O[f],i))}return n}function K1(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(i){Fe.__e(i,t)}}function F2(n,e,t){var r,i;if(Fe.unmount&&Fe.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||K1(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Fe.__e(s,e)}r.base=r.__P=null}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&F2(r[i],e,t||typeof n.type!="function");t||G1(n.__e),n.__c=n.__=n.__e=void 0}function HL(n,e,t){return this.constructor(n,t)}function Gf(n,e,t){var r,i,s,o;e==document&&(e=document.documentElement),Fe.__&&Fe.__(n,e),i=(r=!1)?null:e.__k,s=[],o=[],Z1(e,n=e.__k=J(On,null,[n]),i||Ou,Ou,e.namespaceURI,i?null:e.firstChild?Th.call(e.childNodes):null,s,i?i.__e:e.firstChild,r,o),$2(s,n,o)}function J1(n){function e(t){var r,i;return this.getChildContext||(r=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&r.forEach(function(o){o.__e=!0,Zm(o)})},this.sub=function(s){r.add(s);var o=s.componentWillUnmount;s.componentWillUnmount=function(){r&&r.delete(s),o&&o.call(s)}}),t.children}return e.__c="__cC"+D2++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}Th=R2.slice,Fe={__e:function(n,e,t,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(n)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),o=i.__d),o)return i.__E=i}catch(a){n=a}throw n}},T2=0,Es.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=xs({},this.state),typeof n=="function"&&(n=n(xs({},t),this.props)),n&&xs(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Zm(this))},Es.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Zm(this))},Es.prototype.render=On,Ho=[],E2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,A2=function(n,e){return n.__v.__b-e.__v.__b},Yf.__r=0,M2=/(PointerCapture)$|Capture$/i,X1=0,Xm=$w(!1),Gm=$w(!0),D2=0;var VL=0;function A(n,e,t,r,i,s){e||(e={});var o,a,u=e;if("ref"in u)for(a in u={},e)a=="ref"?o=e[a]:u[a]=e[a];var f={type:n,props:u,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--VL,__i:-1,__u:0,__source:i,__self:s};if(typeof n=="function"&&(o=n.defaultProps))for(a in o)u[a]===void 0&&(u[a]=o[a]);return Fe.vnode&&Fe.vnode(f),f}var Yo,Mt,fp,Nw,xu=0,B2=[],Vt=Fe,Fw=Vt.__b,Bw=Vt.__r,zw=Vt.diffed,Hw=Vt.__c,Vw=Vt.unmount,qw=Vt.__;function Bu(n,e){Vt.__h&&Vt.__h(Mt,n,xu||e),xu=0;var t=Mt.__H||(Mt.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function st(n){return xu=1,qL(z2,n)}function qL(n,e,t){var r=Bu(Yo++,2);if(r.t=n,!r.__c&&(r.__=[t?t(e):z2(void 0,e),function(a){var u=r.__N?r.__N[0]:r.__[0],f=r.t(u,a);u!==f&&(r.__N=[f,r.__[1]],r.__c.setState({}))}],r.__c=Mt,!Mt.__f)){var i=function(a,u,f){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(g){return!!g.__c});if(h.every(function(g){return!g.__N}))return!s||s.call(this,a,u,f);var p=r.__c.props!==a;return h.forEach(function(g){if(g.__N){var m=g.__[0];g.__=g.__N,g.__N=void 0,m!==g.__[0]&&(p=!0)}}),s&&s.call(this,a,u,f)||p};Mt.__f=!0;var s=Mt.shouldComponentUpdate,o=Mt.componentWillUpdate;Mt.componentWillUpdate=function(a,u,f){if(this.__e){var h=s;s=void 0,i(a,u,f),s=h}o&&o.call(this,a,u,f)},Mt.shouldComponentUpdate=i}return r.__N||r.__}function dt(n,e){var t=Bu(Yo++,3);!Vt.__s&&ev(t.__H,e)&&(t.__=n,t.u=e,Mt.__H.__h.push(t))}function WL(n,e){var t=Bu(Yo++,4);!Vt.__s&&ev(t.__H,e)&&(t.__=n,t.u=e,Mt.__h.push(t))}function Dt(n){return xu=5,Be(function(){return{current:n}},[])}function Be(n,e){var t=Bu(Yo++,7);return ev(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function Ye(n,e){return xu=8,Be(function(){return n},e)}function xn(n){var e=Mt.context[n.__c],t=Bu(Yo++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(Mt)),e.props.value):n.__}function jL(){for(var n;n=B2.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Rf),n.__H.__h.forEach(Km),n.__H.__h=[]}catch(e){n.__H.__h=[],Vt.__e(e,n.__v)}}Vt.__b=function(n){Mt=null,Fw&&Fw(n)},Vt.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),qw&&qw(n,e)},Vt.__r=function(n){Bw&&Bw(n),Yo=0;var e=(Mt=n.__c).__H;e&&(fp===Mt?(e.__h=[],Mt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Rf),e.__h.forEach(Km),e.__h=[],Yo=0)),fp=Mt},Vt.diffed=function(n){zw&&zw(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(B2.push(e)!==1&&Nw===Vt.requestAnimationFrame||((Nw=Vt.requestAnimationFrame)||UL)(jL)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),fp=Mt=null},Vt.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Rf),t.__h=t.__h.filter(function(r){return!r.__||Km(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Vt.__e(r,t.__v)}}),Hw&&Hw(n,e)},Vt.unmount=function(n){Vw&&Vw(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Rf(r)}catch(i){e=i}}),t.__H=void 0,e&&Vt.__e(e,t.__v))};var Ww=typeof requestAnimationFrame=="function";function UL(n){var e,t=function(){clearTimeout(r),Ww&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);Ww&&(e=requestAnimationFrame(t))}function Rf(n){var e=Mt,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Mt=e}function Km(n){var e=Mt;n.__c=n.__(),Mt=e}function ev(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function z2(n,e){return typeof e=="function"?e(n):e}var hp,jw;function QL(){if(jw)return hp;jw=1;function n(){this.__data__=[],this.size=0}return hp=n,hp}var dp,Uw;function H2(){if(Uw)return dp;Uw=1;function n(e,t){return e===t||e!==e&&t!==t}return dp=n,dp}var pp,Qw;function Eh(){if(Qw)return pp;Qw=1;var n=H2();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return pp=e,pp}var gp,Yw;function YL(){if(Yw)return gp;Yw=1;var n=Eh(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,o=n(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return gp=r,gp}var mp,Xw;function XL(){if(Xw)return mp;Xw=1;var n=Eh();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return mp=e,mp}var vp,Gw;function GL(){if(Gw)return vp;Gw=1;var n=Eh();function e(t){return n(this.__data__,t)>-1}return vp=e,vp}var yp,Zw;function ZL(){if(Zw)return yp;Zw=1;var n=Eh();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return yp=e,yp}var bp,Kw;function Ah(){if(Kw)return bp;Kw=1;var n=QL(),e=YL(),t=XL(),r=GL(),i=ZL();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var f=o[a];this.set(f[0],f[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,bp=s,bp}var wp,Jw;function KL(){if(Jw)return wp;Jw=1;var n=Ah();function e(){this.__data__=new n,this.size=0}return wp=e,wp}var _p,e_;function JL(){if(e_)return _p;e_=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return _p=n,_p}var Op,t_;function e$(){if(t_)return Op;t_=1;function n(e){return this.__data__.get(e)}return Op=n,Op}var xp,n_;function t$(){if(n_)return xp;n_=1;function n(e){return this.__data__.has(e)}return xp=n,xp}var kp,r_;function V2(){if(r_)return kp;r_=1;var n=typeof to=="object"&&to&&to.Object===Object&&to;return kp=n,kp}var Sp,i_;function Is(){if(i_)return Sp;i_=1;var n=V2(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Sp=t,Sp}var Cp,s_;function tv(){if(s_)return Cp;s_=1;var n=Is(),e=n.Symbol;return Cp=e,Cp}var Tp,o_;function n$(){if(o_)return Tp;o_=1;var n=tv(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(o){var a=t.call(o,i),u=o[i];try{o[i]=void 0;var f=!0}catch{}var h=r.call(o);return f&&(a?o[i]=u:delete o[i]),h}return Tp=s,Tp}var Ep,a_;function r$(){if(a_)return Ep;a_=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return Ep=t,Ep}var Ap,l_;function Mh(){if(l_)return Ap;l_=1;var n=tv(),e=n$(),t=r$(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):t(a)}return Ap=o,Ap}var Mp,u_;function q2(){if(u_)return Mp;u_=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Mp=n,Mp}var Dp,c_;function W2(){if(c_)return Dp;c_=1;var n=Mh(),e=q2(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var u=n(a);return u==r||u==i||u==t||u==s}return Dp=o,Dp}var Rp,f_;function i$(){if(f_)return Rp;f_=1;var n=Is(),e=n["__core-js_shared__"];return Rp=e,Rp}var Ip,h_;function s$(){if(h_)return Ip;h_=1;var n=i$(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Ip=t,Ip}var Pp,d_;function j2(){if(d_)return Pp;d_=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Pp=t,Pp}var Lp,p_;function o$(){if(p_)return Lp;p_=1;var n=W2(),e=s$(),t=q2(),r=j2(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,u=o.toString,f=a.hasOwnProperty,h=RegExp("^"+u.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!t(g)||e(g))return!1;var m=n(g)?h:s;return m.test(r(g))}return Lp=p,Lp}var $p,g_;function a$(){if(g_)return $p;g_=1;function n(e,t){return e?.[t]}return $p=n,$p}var Np,m_;function al(){if(m_)return Np;m_=1;var n=o$(),e=a$();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return Np=t,Np}var Fp,v_;function nv(){if(v_)return Fp;v_=1;var n=al(),e=Is(),t=n(e,"Map");return Fp=t,Fp}var Bp,y_;function Dh(){if(y_)return Bp;y_=1;var n=al(),e=n(Object,"create");return Bp=e,Bp}var zp,b_;function l$(){if(b_)return zp;b_=1;var n=Dh();function e(){this.__data__=n?n(null):{},this.size=0}return zp=e,zp}var Hp,w_;function u$(){if(w_)return Hp;w_=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Hp=n,Hp}var Vp,__;function c$(){if(__)return Vp;__=1;var n=Dh(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var o=this.__data__;if(n){var a=o[s];return a===e?void 0:a}return r.call(o,s)?o[s]:void 0}return Vp=i,Vp}var qp,O_;function f$(){if(O_)return qp;O_=1;var n=Dh(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return qp=r,qp}var Wp,x_;function h$(){if(x_)return Wp;x_=1;var n=Dh(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return Wp=t,Wp}var jp,k_;function d$(){if(k_)return jp;k_=1;var n=l$(),e=u$(),t=c$(),r=f$(),i=h$();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var f=o[a];this.set(f[0],f[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,jp=s,jp}var Up,S_;function p$(){if(S_)return Up;S_=1;var n=d$(),e=Ah(),t=nv();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Up=r,Up}var Qp,C_;function g$(){if(C_)return Qp;C_=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Qp=n,Qp}var Yp,T_;function Rh(){if(T_)return Yp;T_=1;var n=g$();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Yp=e,Yp}var Xp,E_;function m$(){if(E_)return Xp;E_=1;var n=Rh();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return Xp=e,Xp}var Gp,A_;function v$(){if(A_)return Gp;A_=1;var n=Rh();function e(t){return n(this,t).get(t)}return Gp=e,Gp}var Zp,M_;function y$(){if(M_)return Zp;M_=1;var n=Rh();function e(t){return n(this,t).has(t)}return Zp=e,Zp}var Kp,D_;function b$(){if(D_)return Kp;D_=1;var n=Rh();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return Kp=e,Kp}var Jp,R_;function U2(){if(R_)return Jp;R_=1;var n=p$(),e=m$(),t=v$(),r=y$(),i=b$();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var f=o[a];this.set(f[0],f[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,Jp=s,Jp}var eg,I_;function w$(){if(I_)return eg;I_=1;var n=Ah(),e=nv(),t=U2(),r=200;function i(s,o){var a=this.__data__;if(a instanceof n){var u=a.__data__;if(!e||u.length<r-1)return u.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(u)}return a.set(s,o),this.size=a.size,this}return eg=i,eg}var tg,P_;function _$(){if(P_)return tg;P_=1;var n=Ah(),e=KL(),t=JL(),r=e$(),i=t$(),s=w$();function o(a){var u=this.__data__=new n(a);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,tg=o,tg}var ng,L_;function O$(){if(L_)return ng;L_=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return ng=e,ng}var rg,$_;function x$(){if($_)return rg;$_=1;function n(e){return this.__data__.has(e)}return rg=n,rg}var ig,N_;function k$(){if(N_)return ig;N_=1;var n=U2(),e=O$(),t=x$();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new n;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,ig=r,ig}var sg,F_;function S$(){if(F_)return sg;F_=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return sg=n,sg}var og,B_;function C$(){if(B_)return og;B_=1;function n(e,t){return e.has(t)}return og=n,og}var ag,z_;function Q2(){if(z_)return ag;z_=1;var n=k$(),e=S$(),t=C$(),r=1,i=2;function s(o,a,u,f,h,p){var g=u&r,m=o.length,y=a.length;if(m!=y&&!(g&&y>m))return!1;var b=p.get(o),O=p.get(a);if(b&&O)return b==a&&O==o;var C=-1,M=!0,T=u&i?new n:void 0;for(p.set(o,a),p.set(a,o);++C<m;){var S=o[C],R=a[C];if(f)var $=g?f(R,S,C,a,o,p):f(S,R,C,o,a,p);if($!==void 0){if($)continue;M=!1;break}if(T){if(!e(a,function(L,V){if(!t(T,V)&&(S===L||h(S,L,u,f,p)))return T.push(V)})){M=!1;break}}else if(!(S===R||h(S,R,u,f,p))){M=!1;break}}return p.delete(o),p.delete(a),M}return ag=s,ag}var lg,H_;function T$(){if(H_)return lg;H_=1;var n=Is(),e=n.Uint8Array;return lg=e,lg}var ug,V_;function E$(){if(V_)return ug;V_=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return ug=n,ug}var cg,q_;function A$(){if(q_)return cg;q_=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return cg=n,cg}var fg,W_;function M$(){if(W_)return fg;W_=1;var n=tv(),e=T$(),t=H2(),r=Q2(),i=E$(),s=A$(),o=1,a=2,u="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",b="[object String]",O="[object Symbol]",C="[object ArrayBuffer]",M="[object DataView]",T=n?n.prototype:void 0,S=T?T.valueOf:void 0;function R($,L,V,X,K,H,Y){switch(V){case M:if($.byteLength!=L.byteLength||$.byteOffset!=L.byteOffset)return!1;$=$.buffer,L=L.buffer;case C:return!($.byteLength!=L.byteLength||!H(new e($),new e(L)));case u:case f:case g:return t(+$,+L);case h:return $.name==L.name&&$.message==L.message;case m:case b:return $==L+"";case p:var re=i;case y:var ve=X&o;if(re||(re=s),$.size!=L.size&&!ve)return!1;var Se=Y.get($);if(Se)return Se==L;X|=a,Y.set($,L);var be=r(re($),re(L),X,K,H,Y);return Y.delete($),be;case O:if(S)return S.call($)==S.call(L)}return!1}return fg=R,fg}var hg,j_;function D$(){if(j_)return hg;j_=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return hg=n,hg}var dg,U_;function rv(){if(U_)return dg;U_=1;var n=Array.isArray;return dg=n,dg}var pg,Q_;function R$(){if(Q_)return pg;Q_=1;var n=D$(),e=rv();function t(r,i,s){var o=i(r);return e(r)?o:n(o,s(r))}return pg=t,pg}var gg,Y_;function I$(){if(Y_)return gg;Y_=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var a=e[r];t(a,r,e)&&(o[s++]=a)}return o}return gg=n,gg}var mg,X_;function P$(){if(X_)return mg;X_=1;function n(){return[]}return mg=n,mg}var vg,G_;function L$(){if(G_)return vg;G_=1;var n=I$(),e=P$(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(a){return r.call(o,a)}))}:e;return vg=s,vg}var yg,Z_;function $$(){if(Z_)return yg;Z_=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return yg=n,yg}var bg,K_;function Ih(){if(K_)return bg;K_=1;function n(e){return e!=null&&typeof e=="object"}return bg=n,bg}var wg,J_;function N$(){if(J_)return wg;J_=1;var n=Mh(),e=Ih(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return wg=r,wg}var _g,eO;function F$(){if(eO)return _g;eO=1;var n=N$(),e=Ih(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return _g=s,_g}var nu={exports:{}},Og,tO;function B$(){if(tO)return Og;tO=1;function n(){return!1}return Og=n,Og}nu.exports;var nO;function Y2(){return nO||(nO=1,function(n,e){var t=Is(),r=B$(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,u=a?a.isBuffer:void 0,f=u||r;n.exports=f}(nu,nu.exports)),nu.exports}var xg,rO;function z$(){if(rO)return xg;rO=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return xg=t,xg}var kg,iO;function X2(){if(iO)return kg;iO=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return kg=e,kg}var Sg,sO;function H$(){if(sO)return Sg;sO=1;var n=Mh(),e=X2(),t=Ih(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",m="[object Set]",y="[object String]",b="[object WeakMap]",O="[object ArrayBuffer]",C="[object DataView]",M="[object Float32Array]",T="[object Float64Array]",S="[object Int8Array]",R="[object Int16Array]",$="[object Int32Array]",L="[object Uint8Array]",V="[object Uint8ClampedArray]",X="[object Uint16Array]",K="[object Uint32Array]",H={};H[M]=H[T]=H[S]=H[R]=H[$]=H[L]=H[V]=H[X]=H[K]=!0,H[r]=H[i]=H[O]=H[s]=H[C]=H[o]=H[a]=H[u]=H[f]=H[h]=H[p]=H[g]=H[m]=H[y]=H[b]=!1;function Y(re){return t(re)&&e(re.length)&&!!H[n(re)]}return Sg=Y,Sg}var Cg,oO;function V$(){if(oO)return Cg;oO=1;function n(e){return function(t){return e(t)}}return Cg=n,Cg}var ru={exports:{}};ru.exports;var aO;function q$(){return aO||(aO=1,function(n,e){var t=V2(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a}(ru,ru.exports)),ru.exports}var Tg,lO;function G2(){if(lO)return Tg;lO=1;var n=H$(),e=V$(),t=q$(),r=t&&t.isTypedArray,i=r?e(r):n;return Tg=i,Tg}var Eg,uO;function W$(){if(uO)return Eg;uO=1;var n=$$(),e=F$(),t=rv(),r=Y2(),i=z$(),s=G2(),o=Object.prototype,a=o.hasOwnProperty;function u(f,h){var p=t(f),g=!p&&e(f),m=!p&&!g&&r(f),y=!p&&!g&&!m&&s(f),b=p||g||m||y,O=b?n(f.length,String):[],C=O.length;for(var M in f)(h||a.call(f,M))&&!(b&&(M=="length"||m&&(M=="offset"||M=="parent")||y&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||i(M,C)))&&O.push(M);return O}return Eg=u,Eg}var Ag,cO;function j$(){if(cO)return Ag;cO=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return Ag=e,Ag}var Mg,fO;function U$(){if(fO)return Mg;fO=1;function n(e,t){return function(r){return e(t(r))}}return Mg=n,Mg}var Dg,hO;function Q$(){if(hO)return Dg;hO=1;var n=U$(),e=n(Object.keys,Object);return Dg=e,Dg}var Rg,dO;function Y$(){if(dO)return Rg;dO=1;var n=j$(),e=Q$(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var o=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&o.push(a);return o}return Rg=i,Rg}var Ig,pO;function X$(){if(pO)return Ig;pO=1;var n=W2(),e=X2();function t(r){return r!=null&&e(r.length)&&!n(r)}return Ig=t,Ig}var Pg,gO;function G$(){if(gO)return Pg;gO=1;var n=W$(),e=Y$(),t=X$();function r(i){return t(i)?n(i):e(i)}return Pg=r,Pg}var Lg,mO;function Z$(){if(mO)return Lg;mO=1;var n=R$(),e=L$(),t=G$();function r(i){return n(i,t,e)}return Lg=r,Lg}var $g,vO;function K$(){if(vO)return $g;vO=1;var n=Z$(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,o,a,u,f,h){var p=a&e,g=n(s),m=g.length,y=n(o),b=y.length;if(m!=b&&!p)return!1;for(var O=m;O--;){var C=g[O];if(!(p?C in o:r.call(o,C)))return!1}var M=h.get(s),T=h.get(o);if(M&&T)return M==o&&T==s;var S=!0;h.set(s,o),h.set(o,s);for(var R=p;++O<m;){C=g[O];var $=s[C],L=o[C];if(u)var V=p?u(L,$,C,o,s,h):u($,L,C,s,o,h);if(!(V===void 0?$===L||f($,L,a,u,h):V)){S=!1;break}R||(R=C=="constructor")}if(S&&!R){var X=s.constructor,K=o.constructor;X!=K&&"constructor"in s&&"constructor"in o&&!(typeof X=="function"&&X instanceof X&&typeof K=="function"&&K instanceof K)&&(S=!1)}return h.delete(s),h.delete(o),S}return $g=i,$g}var Ng,yO;function J$(){if(yO)return Ng;yO=1;var n=al(),e=Is(),t=n(e,"DataView");return Ng=t,Ng}var Fg,bO;function eN(){if(bO)return Fg;bO=1;var n=al(),e=Is(),t=n(e,"Promise");return Fg=t,Fg}var Bg,wO;function tN(){if(wO)return Bg;wO=1;var n=al(),e=Is(),t=n(e,"Set");return Bg=t,Bg}var zg,_O;function nN(){if(_O)return zg;_O=1;var n=al(),e=Is(),t=n(e,"WeakMap");return zg=t,zg}var Hg,OO;function rN(){if(OO)return Hg;OO=1;var n=J$(),e=nv(),t=eN(),r=tN(),i=nN(),s=Mh(),o=j2(),a="[object Map]",u="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",m=o(n),y=o(e),b=o(t),O=o(r),C=o(i),M=s;return(n&&M(new n(new ArrayBuffer(1)))!=g||e&&M(new e)!=a||t&&M(t.resolve())!=f||r&&M(new r)!=h||i&&M(new i)!=p)&&(M=function(T){var S=s(T),R=S==u?T.constructor:void 0,$=R?o(R):"";if($)switch($){case m:return g;case y:return a;case b:return f;case O:return h;case C:return p}return S}),Hg=M,Hg}var Vg,xO;function iN(){if(xO)return Vg;xO=1;var n=_$(),e=Q2(),t=M$(),r=K$(),i=rN(),s=rv(),o=Y2(),a=G2(),u=1,f="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,m=g.hasOwnProperty;function y(b,O,C,M,T,S){var R=s(b),$=s(O),L=R?h:i(b),V=$?h:i(O);L=L==f?p:L,V=V==f?p:V;var X=L==p,K=V==p,H=L==V;if(H&&o(b)){if(!o(O))return!1;R=!0,X=!1}if(H&&!X)return S||(S=new n),R||a(b)?e(b,O,C,M,T,S):t(b,O,L,C,M,T,S);if(!(C&u)){var Y=X&&m.call(b,"__wrapped__"),re=K&&m.call(O,"__wrapped__");if(Y||re){var ve=Y?b.value():b,Se=re?O.value():O;return S||(S=new n),T(ve,Se,C,M,S)}}return H?(S||(S=new n),r(b,O,C,M,T,S)):!1}return Vg=y,Vg}var qg,kO;function sN(){if(kO)return qg;kO=1;var n=iN(),e=Ih();function t(r,i,s,o,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,o,t,a)}return qg=t,qg}var Wg,SO;function oN(){if(SO)return Wg;SO=1;var n=sN();function e(t,r){return n(t,r)}return Wg=e,Wg}var aN=oN();const ll=C2(aN);class ra extends Error{}class lN extends ra{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class uN extends ra{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class cN extends ra{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ia extends ra{}class Z2 extends ra{constructor(e){super(`Invalid unit ${e}`)}}class An extends ra{}class Ys extends ra{constructor(){super("Zone is an abstract class")}}const le="numeric",ki="short",kr="long",Zf={year:le,month:le,day:le},K2={year:le,month:ki,day:le},fN={year:le,month:ki,day:le,weekday:ki},J2={year:le,month:kr,day:le},eC={year:le,month:kr,day:le,weekday:kr},tC={hour:le,minute:le},nC={hour:le,minute:le,second:le},rC={hour:le,minute:le,second:le,timeZoneName:ki},iC={hour:le,minute:le,second:le,timeZoneName:kr},sC={hour:le,minute:le,hourCycle:"h23"},oC={hour:le,minute:le,second:le,hourCycle:"h23"},aC={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:ki},lC={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:kr},uC={year:le,month:le,day:le,hour:le,minute:le},cC={year:le,month:le,day:le,hour:le,minute:le,second:le},fC={year:le,month:ki,day:le,hour:le,minute:le},hC={year:le,month:ki,day:le,hour:le,minute:le,second:le},hN={year:le,month:ki,day:le,weekday:ki,hour:le,minute:le},dC={year:le,month:kr,day:le,hour:le,minute:le,timeZoneName:ki},pC={year:le,month:kr,day:le,hour:le,minute:le,second:le,timeZoneName:ki},gC={year:le,month:kr,day:le,weekday:kr,hour:le,minute:le,timeZoneName:kr},mC={year:le,month:kr,day:le,weekday:kr,hour:le,minute:le,second:le,timeZoneName:kr};class zu{get type(){throw new Ys}get name(){throw new Ys}get ianaName(){return this.name}get isUniversal(){throw new Ys}offsetName(e,t){throw new Ys}formatOffset(e,t){throw new Ys}offset(e){throw new Ys}equals(e){throw new Ys}get isValid(){throw new Ys}}let jg=null;class ir extends zu{static get instance(){return jg===null&&(jg=new ir),jg}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return TC(e,t,r)}formatOffset(e,t){return du(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const Jm=new Map;function dN(n){let e=Jm.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Jm.set(n,e)),e}const pN={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function gN(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,o,a,u,f,h]=r;return[o,i,s,a,u,f,h]}function mN(n,e){const t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){const{type:s,value:o}=t[i],a=pN[s];s==="era"?r[a]=o:De(a)||(r[a]=parseInt(o,10))}return r}const Ug=new Map;class Ds extends zu{static create(e){let t=Ug.get(e);return t===void 0&&Ug.set(e,t=new Ds(e)),t}static resetCache(){Ug.clear(),Jm.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ds.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return TC(e,t,r,this.name)}formatOffset(e,t){return du(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const r=dN(this.name);let[i,s,o,a,u,f,h]=r.formatToParts?mN(r,t):gN(r,t);a==="BC"&&(i=-Math.abs(i)+1);const g=Lh({year:i,month:s,day:o,hour:u===24?0:u,minute:f,second:h,millisecond:0});let m=+t;const y=m%1e3;return m-=y>=0?y:1e3+y,(g-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let CO={};function vN(n,e={}){const t=JSON.stringify([n,e]);let r=CO[t];return r||(r=new Intl.ListFormat(n,e),CO[t]=r),r}const e0=new Map;function t0(n,e={}){const t=JSON.stringify([n,e]);let r=e0.get(t);return r===void 0&&(r=new Intl.DateTimeFormat(n,e),e0.set(t,r)),r}const n0=new Map;function yN(n,e={}){const t=JSON.stringify([n,e]);let r=n0.get(t);return r===void 0&&(r=new Intl.NumberFormat(n,e),n0.set(t,r)),r}const r0=new Map;function bN(n,e={}){const{base:t,...r}=e,i=JSON.stringify([n,r]);let s=r0.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(n,e),r0.set(i,s)),s}let iu=null;function wN(){return iu||(iu=new Intl.DateTimeFormat().resolvedOptions().locale,iu)}const i0=new Map;function vC(n){let e=i0.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),i0.set(n,e)),e}const s0=new Map;function _N(n){let e=s0.get(n);if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...yC,...e}),s0.set(n,e)}return e}function ON(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let r,i;try{r=t0(n).resolvedOptions(),i=n}catch{const u=n.substring(0,t);r=t0(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function xN(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function kN(n){const e=[];for(let t=1;t<=12;t++){const r=xe.utc(2009,t,1);e.push(n(r))}return e}function SN(n){const e=[];for(let t=1;t<=7;t++){const r=xe.utc(2016,11,13+t);e.push(n(r))}return e}function Hc(n,e,t,r){const i=n.listingMode();return i==="error"?null:i==="en"?t(e):r(e)}function CN(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||vC(n.locale).numberingSystem==="latn"}class TN{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=yN(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):lv(e,3);return Qt(t,this.padTo)}}}class EN{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Ds.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=t0(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class AN{constructor(e,t,r){this.opts={style:"long",...r},!t&&SC()&&(this.rtf=bN(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):ZN(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const yC={firstDay:1,minimalDays:4,weekend:[6,7]};class at{static fromOpts(e){return at.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,i,s=!1){const o=e||Ft.defaultLocale,a=o||(s?"en-US":wN()),u=t||Ft.defaultNumberingSystem,f=r||Ft.defaultOutputCalendar,h=a0(i)||Ft.defaultWeekSettings;return new at(a,u,f,h,o)}static resetCache(){iu=null,e0.clear(),n0.clear(),r0.clear(),i0.clear(),s0.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:i}={}){return at.create(e,t,r,i)}constructor(e,t,r,i,s){const[o,a,u]=ON(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=xN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=CN(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:at.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,a0(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Hc(this,e,MC,()=>{const r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=kN(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,t=!1){return Hc(this,e,IC,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=SN(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Hc(this,void 0,()=>PC,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[xe.utc(2016,11,13,9),xe.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Hc(this,e,LC,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[xe.utc(-40,1,1),xe.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){const i=this.dtFormatter(e,t),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new TN(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new EN(e,this.intl,t)}relFormatter(e={}){return new AN(this.intl,this.isEnglish(),e)}listFormatter(e={}){return vN(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||vC(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:CC()?_N(this.locale):yC}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Qg=null;class rn extends zu{static get utcInstance(){return Qg===null&&(Qg=new rn(0)),Qg}static instance(e){return e===0?rn.utcInstance:new rn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new rn($h(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${du(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${du(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return du(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class MN extends zu{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function eo(n,e){if(De(n)||n===null)return e;if(n instanceof zu)return n;if($N(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?ir.instance:t==="utc"||t==="gmt"?rn.utcInstance:rn.parseSpecifier(t)||Ds.create(n)}else return oo(n)?rn.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new MN(n)}const iv={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},TO={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},DN=iv.hanidec.replace(/[\[|\]]/g,"").split("");function RN(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);if(n[t].search(iv.hanidec)!==-1)e+=DN.indexOf(n[t]);else for(const i in TO){const[s,o]=TO[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const o0=new Map;function IN(){o0.clear()}function di({numberingSystem:n},e=""){const t=n||"latn";let r=o0.get(t);r===void 0&&(r=new Map,o0.set(t,r));let i=r.get(e);return i===void 0&&(i=new RegExp(`${iv[t]}${e}`),r.set(e,i)),i}let EO=()=>Date.now(),AO="system",MO=null,DO=null,RO=null,IO=60,PO,LO=null;class Ft{static get now(){return EO}static set now(e){EO=e}static set defaultZone(e){AO=e}static get defaultZone(){return eo(AO,ir.instance)}static get defaultLocale(){return MO}static set defaultLocale(e){MO=e}static get defaultNumberingSystem(){return DO}static set defaultNumberingSystem(e){DO=e}static get defaultOutputCalendar(){return RO}static set defaultOutputCalendar(e){RO=e}static get defaultWeekSettings(){return LO}static set defaultWeekSettings(e){LO=a0(e)}static get twoDigitCutoffYear(){return IO}static set twoDigitCutoffYear(e){IO=e%100}static get throwOnInvalid(){return PO}static set throwOnInvalid(e){PO=e}static resetCaches(){at.resetCache(),Ds.resetCache(),xe.resetCache(),IN()}}class _i{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const bC=[0,31,59,90,120,151,181,212,243,273,304,334],wC=[0,31,60,91,121,152,182,213,244,274,305,335];function Wr(n,e){return new _i("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function sv(n,e,t){const r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function _C(n,e,t){return t+(Hu(n)?wC:bC)[e-1]}function OC(n,e){const t=Hu(n)?wC:bC,r=t.findIndex(s=>s<e),i=e-t[r];return{month:r+1,day:i}}function ov(n,e){return(n-e+7)%7+1}function Kf(n,e=4,t=1){const{year:r,month:i,day:s}=n,o=_C(r,i,s),a=ov(sv(r,i,s),t);let u=Math.floor((o-a+14-e)/7),f;return u<1?(f=r-1,u=ku(f,e,t)):u>ku(r,e,t)?(f=r+1,u=1):f=r,{weekYear:f,weekNumber:u,weekday:a,...Nh(n)}}function $O(n,e=4,t=1){const{weekYear:r,weekNumber:i,weekday:s}=n,o=ov(sv(r,1,e),t),a=La(r);let u=i*7+s-o-7+e,f;u<1?(f=r-1,u+=La(f)):u>a?(f=r+1,u-=La(r)):f=r;const{month:h,day:p}=OC(f,u);return{year:f,month:h,day:p,...Nh(n)}}function Yg(n){const{year:e,month:t,day:r}=n,i=_C(e,t,r);return{year:e,ordinal:i,...Nh(n)}}function NO(n){const{year:e,ordinal:t}=n,{month:r,day:i}=OC(e,t);return{year:e,month:r,day:i,...Nh(n)}}function FO(n,e){if(!De(n.localWeekday)||!De(n.localWeekNumber)||!De(n.localWeekYear)){if(!De(n.weekday)||!De(n.weekNumber)||!De(n.weekYear))throw new Ia("Cannot mix locale-based week fields with ISO-based week fields");return De(n.localWeekday)||(n.weekday=n.localWeekday),De(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),De(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function PN(n,e=4,t=1){const r=Ph(n.weekYear),i=jr(n.weekNumber,1,ku(n.weekYear,e,t)),s=jr(n.weekday,1,7);return r?i?s?!1:Wr("weekday",n.weekday):Wr("week",n.weekNumber):Wr("weekYear",n.weekYear)}function LN(n){const e=Ph(n.year),t=jr(n.ordinal,1,La(n.year));return e?t?!1:Wr("ordinal",n.ordinal):Wr("year",n.year)}function xC(n){const e=Ph(n.year),t=jr(n.month,1,12),r=jr(n.day,1,Jf(n.year,n.month));return e?t?r?!1:Wr("day",n.day):Wr("month",n.month):Wr("year",n.year)}function kC(n){const{hour:e,minute:t,second:r,millisecond:i}=n,s=jr(e,0,23)||e===24&&t===0&&r===0&&i===0,o=jr(t,0,59),a=jr(r,0,59),u=jr(i,0,999);return s?o?a?u?!1:Wr("millisecond",i):Wr("second",r):Wr("minute",t):Wr("hour",e)}function De(n){return typeof n>"u"}function oo(n){return typeof n=="number"}function Ph(n){return typeof n=="number"&&n%1===0}function $N(n){return typeof n=="string"}function NN(n){return Object.prototype.toString.call(n)==="[object Date]"}function SC(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function CC(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function FN(n){return Array.isArray(n)?n:[n]}function BO(n,e,t){if(n.length!==0)return n.reduce((r,i)=>{const s=[e(i),i];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function BN(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function Wa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function a0(n){if(n==null)return null;if(typeof n!="object")throw new An("Week settings must be an object");if(!jr(n.firstDay,1,7)||!jr(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!jr(e,1,7)))throw new An("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function jr(n,e,t){return Ph(n)&&n>=e&&n<=t}function zN(n,e){return n-e*Math.floor(n/e)}function Qt(n,e=2){const t=n<0;let r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function Zs(n){if(!(De(n)||n===null||n===""))return parseInt(n,10)}function Mo(n){if(!(De(n)||n===null||n===""))return parseFloat(n)}function av(n){if(!(De(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function lv(n,e,t=!1){const r=10**e;return(t?Math.trunc:Math.round)(n*r)/r}function Hu(n){return n%4===0&&(n%100!==0||n%400===0)}function La(n){return Hu(n)?366:365}function Jf(n,e){const t=zN(e-1,12)+1,r=n+(e-t)/12;return t===2?Hu(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Lh(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function zO(n,e,t){return-ov(sv(n,1,e),t)+e-1}function ku(n,e=4,t=1){const r=zO(n,e,t),i=zO(n+1,e,t);return(La(n)-r+i)/7}function l0(n){return n>99?n:n>Ft.twoDigitCutoffYear?1900+n:2e3+n}function TC(n,e,t,r=null){const i=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function $h(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const r=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-r:r;return t*60+i}function EC(n){const e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new An(`Invalid unit value ${n}`);return e}function eh(n,e){const t={};for(const r in n)if(Wa(n,r)){const i=n[r];if(i==null)continue;t[e(r)]=EC(i)}return t}function du(n,e){const t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(e){case"short":return`${i}${Qt(t,2)}:${Qt(r,2)}`;case"narrow":return`${i}${t}${r>0?`:${r}`:""}`;case"techie":return`${i}${Qt(t,2)}${Qt(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Nh(n){return BN(n,["hour","minute","second","millisecond"])}const HN=["January","February","March","April","May","June","July","August","September","October","November","December"],AC=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],VN=["J","F","M","A","M","J","J","A","S","O","N","D"];function MC(n){switch(n){case"narrow":return[...VN];case"short":return[...AC];case"long":return[...HN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const DC=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],RC=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],qN=["M","T","W","T","F","S","S"];function IC(n){switch(n){case"narrow":return[...qN];case"short":return[...RC];case"long":return[...DC];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const PC=["AM","PM"],WN=["Before Christ","Anno Domini"],jN=["BC","AD"],UN=["B","A"];function LC(n){switch(n){case"narrow":return[...UN];case"short":return[...jN];case"long":return[...WN];default:return null}}function QN(n){return PC[n.hour<12?0:1]}function YN(n,e){return IC(e)[n.weekday-1]}function XN(n,e){return MC(e)[n.month-1]}function GN(n,e){return LC(e)[n.year<0?0:1]}function ZN(n,e,t="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const p=n==="days";switch(e){case 1:return p?"tomorrow":`next ${i[n][0]}`;case-1:return p?"yesterday":`last ${i[n][0]}`;case 0:return p?"today":`this ${i[n][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,f=i[n],h=r?u?f[1]:f[2]||f[1]:u?i[n][0]:n;return o?`${a} ${h} ago`:`in ${a} ${h}`}function HO(n,e){let t="";for(const r of n)r.literal?t+=r.val:t+=e(r.val);return t}const KN={D:Zf,DD:K2,DDD:J2,DDDD:eC,t:tC,tt:nC,ttt:rC,tttt:iC,T:sC,TT:oC,TTT:aC,TTTT:lC,f:uC,ff:fC,fff:dC,ffff:gC,F:cC,FF:hC,FFF:pC,FFFF:mC};class Rn{static create(e,t={}){return new Rn(e,t)}static parseFormat(e){let t=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),t=null,r="",i=!i):i||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return KN[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Qt(e,t);const r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(m,y)=>this.loc.extract(e,m,y),o=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",a=()=>r?QN(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(m,y)=>r?XN(e,m):s(y?{month:m}:{month:m,day:"numeric"},"month"),f=(m,y)=>r?YN(e,m):s(y?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),h=m=>{const y=Rn.macroTokenToFormatOpts(m);return y?this.formatWithSystemDefault(e,y):m},p=m=>r?GN(e,m):s({era:m},"era"),g=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(m)}};return HO(Rn.parseFormat(t),g)}formatDurationFromString(e,t){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>f=>{const h=r(f);return h?this.num(u.get(h),f.length):f},s=Rn.parseFormat(t),o=s.reduce((u,{literal:f,val:h})=>f?u:u.concat(h),[]),a=e.shiftTo(...o.map(r).filter(u=>u));return HO(s,i(a))}}const $C=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ul(...n){const e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function cl(...n){return e=>n.reduce(([t,r,i],s)=>{const[o,a,u]=s(e,i);return[{...t,...o},a||r,u]},[{},null,1]).slice(0,2)}function fl(n,...e){if(n==null)return[null,null];for(const[t,r]of e){const i=t.exec(n);if(i)return r(i)}return[null,null]}function NC(...n){return(e,t)=>{const r={};let i;for(i=0;i<n.length;i++)r[n[i]]=Zs(e[t+i]);return[r,null,t+i]}}const FC=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,JN=`(?:${FC.source}?(?:\\[(${$C.source})\\])?)?`,uv=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,BC=RegExp(`${uv.source}${JN}`),cv=RegExp(`(?:T${BC.source})?`),eF=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,tF=/(\d{4})-?W(\d\d)(?:-?(\d))?/,nF=/(\d{4})-?(\d{3})/,rF=NC("weekYear","weekNumber","weekDay"),iF=NC("year","ordinal"),sF=/(\d{4})-(\d\d)-(\d\d)/,zC=RegExp(`${uv.source} ?(?:${FC.source}|(${$C.source}))?`),oF=RegExp(`(?: ${zC.source})?`);function $a(n,e,t){const r=n[e];return De(r)?t:Zs(r)}function aF(n,e){return[{year:$a(n,e),month:$a(n,e+1,1),day:$a(n,e+2,1)},null,e+3]}function hl(n,e){return[{hours:$a(n,e,0),minutes:$a(n,e+1,0),seconds:$a(n,e+2,0),milliseconds:av(n[e+3])},null,e+4]}function Vu(n,e){const t=!n[e]&&!n[e+1],r=$h(n[e+1],n[e+2]),i=t?null:rn.instance(r);return[{},i,e+3]}function qu(n,e){const t=n[e]?Ds.create(n[e]):null;return[{},t,e+1]}const lF=RegExp(`^T?${uv.source}$`),uF=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function cF(n){const[e,t,r,i,s,o,a,u,f]=n,h=e[0]==="-",p=u&&u[0]==="-",g=(m,y=!1)=>m!==void 0&&(y||m&&h)?-m:m;return[{years:g(Mo(t)),months:g(Mo(r)),weeks:g(Mo(i)),days:g(Mo(s)),hours:g(Mo(o)),minutes:g(Mo(a)),seconds:g(Mo(u),u==="-0"),milliseconds:g(av(f),p)}]}const fF={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fv(n,e,t,r,i,s,o){const a={year:e.length===2?l0(Zs(e)):Zs(e),month:AC.indexOf(t)+1,day:Zs(r),hour:Zs(i),minute:Zs(s)};return o&&(a.second=Zs(o)),n&&(a.weekday=n.length>3?DC.indexOf(n)+1:RC.indexOf(n)+1),a}const hF=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function dF(n){const[,e,t,r,i,s,o,a,u,f,h,p]=n,g=fv(e,i,r,t,s,o,a);let m;return u?m=fF[u]:f?m=0:m=$h(h,p),[g,new rn(m)]}function pF(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const gF=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,mF=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,vF=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function VO(n){const[,e,t,r,i,s,o,a]=n;return[fv(e,i,r,t,s,o,a),rn.utcInstance]}function yF(n){const[,e,t,r,i,s,o,a]=n;return[fv(e,a,t,r,i,s,o),rn.utcInstance]}const bF=ul(eF,cv),wF=ul(tF,cv),_F=ul(nF,cv),OF=ul(BC),HC=cl(aF,hl,Vu,qu),xF=cl(rF,hl,Vu,qu),kF=cl(iF,hl,Vu,qu),SF=cl(hl,Vu,qu);function CF(n){return fl(n,[bF,HC],[wF,xF],[_F,kF],[OF,SF])}function TF(n){return fl(pF(n),[hF,dF])}function EF(n){return fl(n,[gF,VO],[mF,VO],[vF,yF])}function AF(n){return fl(n,[uF,cF])}const MF=cl(hl);function DF(n){return fl(n,[lF,MF])}const RF=ul(sF,oF),IF=ul(zC),PF=cl(hl,Vu,qu);function LF(n){return fl(n,[RF,HC],[IF,PF])}const qO="Invalid Duration",VC={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},$F={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...VC},Nr=146097/400,Oa=146097/4800,NF={years:{quarters:4,months:12,weeks:Nr/7,days:Nr,hours:Nr*24,minutes:Nr*24*60,seconds:Nr*24*60*60,milliseconds:Nr*24*60*60*1e3},quarters:{months:3,weeks:Nr/28,days:Nr/4,hours:Nr*24/4,minutes:Nr*24*60/4,seconds:Nr*24*60*60/4,milliseconds:Nr*24*60*60*1e3/4},months:{weeks:Oa/7,days:Oa,hours:Oa*24,minutes:Oa*24*60,seconds:Oa*24*60*60,milliseconds:Oa*24*60*60*1e3},...VC},jo=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],FF=jo.slice(0).reverse();function Xs(n,e,t=!1){const r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Ne(r)}function qC(n,e){let t=e.milliseconds??0;for(const r of FF.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function WO(n,e){const t=qC(n,e)<0?-1:1;jo.reduceRight((r,i)=>{if(De(e[i]))return r;if(r){const s=e[r]*t,o=n[i][r],a=Math.floor(s/o);e[i]+=a*t,e[r]-=a*o*t}return i},null),jo.reduce((r,i)=>{if(De(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*n[r][i]}return i},null)}function BF(n){const e={};for(const[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}class Ne{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let r=t?NF:$F;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||at.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return Ne.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new An(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ne({values:eh(e,Ne.normalizeUnit),loc:at.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(oo(e))return Ne.fromMillis(e);if(Ne.isDuration(e))return e;if(typeof e=="object")return Ne.fromObject(e);throw new An(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=AF(e);return r?Ne.fromObject(r,t):Ne.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=DF(e);return r?Ne.fromObject(r,t):Ne.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new An("need to specify a reason the Duration is invalid");const r=e instanceof _i?e:new _i(e,t);if(Ft.throwOnInvalid)throw new cN(r);return new Ne({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Z2(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Rn.create(this.loc,r).formatDurationFromString(this,e):qO}toHuman(e={}){if(!this.isValid)return qO;const t=jo.map(r=>{const i=this.values[r];return De(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=lv(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},xe.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?qC(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Ne.fromDurationLike(e),r={};for(const i of jo)(Wa(t.values,i)||Wa(this.values,i))&&(r[i]=t.get(i)+this.get(i));return Xs(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=Ne.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=EC(e(this.values[r],r));return Xs(this,{values:t},!0)}get(e){return this[Ne.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...eh(e,Ne.normalizeUnit)};return Xs(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r};return Xs(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return WO(this.matrix,e),Xs(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=BF(this.normalize().shiftToAll().toObject());return Xs(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ne.normalizeUnit(o));const t={},r={},i=this.toObject();let s;for(const o of jo)if(e.indexOf(o)>=0){s=o;let a=0;for(const f in r)a+=this.matrix[f][o]*r[f],r[f]=0;oo(i[o])&&(a+=i[o]);const u=Math.trunc(a);t[o]=u,r[o]=(a*1e3-u*1e3)/1e3}else oo(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(t[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return WO(this.matrix,t),Xs(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Xs(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of jo)if(!t(this.values[r],e.values[r]))return!1;return!0}}const xa="Invalid Interval";function zF(n,e){return!n||!n.isValid?Nt.invalid("missing or invalid start"):!e||!e.isValid?Nt.invalid("missing or invalid end"):e<n?Nt.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class Nt{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new An("need to specify a reason the Interval is invalid");const r=e instanceof _i?e:new _i(e,t);if(Ft.throwOnInvalid)throw new uN(r);return new Nt({invalid:r})}static fromDateTimes(e,t){const r=Bl(e),i=Bl(t),s=zF(r,i);return s??new Nt({start:r,end:i})}static after(e,t){const r=Ne.fromDurationLike(t),i=Bl(e);return Nt.fromDateTimes(i,i.plus(r))}static before(e,t){const r=Ne.fromDurationLike(t),i=Bl(e);return Nt.fromDateTimes(i.minus(r),i)}static fromISO(e,t){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=xe.fromISO(r,t),o=s.isValid}catch{o=!1}let a,u;try{a=xe.fromISO(i,t),u=a.isValid}catch{u=!1}if(o&&u)return Nt.fromDateTimes(s,a);if(o){const f=Ne.fromISO(i,t);if(f.isValid)return Nt.after(s,f)}else if(u){const f=Ne.fromISO(r,t);if(f.isValid)return Nt.before(a,f)}}return Nt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let i;return t?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,t),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Nt.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Bl).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;r.push(Nt.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const t=Ne.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(t.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(Nt.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:Nt.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Nt.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,f)=>u.time-f.time);for(const u of a)r+=u.type==="s"?1:-1,r===1?t=u.time:(t&&+t!=+u.time&&i.push(Nt.fromDateTimes(t,u.time)),t=null);return Nt.merge(i)}difference(...e){return Nt.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:xa}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Zf,t={}){return this.isValid?Rn.create(this.s.loc.clone(t),e).formatInterval(this):xa}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:xa}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:xa}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:xa}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:xa}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Ne.invalid(this.invalidReason)}mapEndpoints(e){return Nt.fromDateTimes(e(this.s),e(this.e))}}class Pa{static hasDST(e=Ft.defaultZone){const t=xe.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Ds.isValidZone(e)}static normalizeZone(e){return eo(e,Ft.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||at.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||at.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||at.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||at.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||at.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||at.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||at.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return at.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return at.create(t,null,"gregory").eras(e)}static features(){return{relative:SC(),localeWeek:CC()}}}function jO(n,e){const t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(Ne.fromMillis(r).as("days"))}function HF(n,e,t){const r=[["years",(u,f)=>f.year-u.year],["quarters",(u,f)=>f.quarter-u.quarter+(f.year-u.year)*4],["months",(u,f)=>f.month-u.month+(f.year-u.year)*12],["weeks",(u,f)=>{const h=jO(u,f);return(h-h%7)/7}],["days",jO]],i={},s=n;let o,a;for(const[u,f]of r)t.indexOf(u)>=0&&(o=u,i[u]=f(n,e),a=s.plus(i),a>e?(i[u]--,n=s.plus(i),n>e&&(a=n,i[u]--,n=s.plus(i))):n=a);return[n,i,a,o]}function VF(n,e,t,r){let[i,s,o,a]=HF(n,e,t);const u=e-i,f=t.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);f.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));const h=Ne.fromObject(s,r);return f.length>0?Ne.fromMillis(u,r).shiftTo(...f).plus(h):h}const qF="missing Intl.DateTimeFormat.formatToParts support";function rt(n,e=t=>t){return{regex:n,deser:([t])=>e(RN(t))}}const WF="",WC=`[ ${WF}]`,jC=new RegExp(WC,"g");function jF(n){return n.replace(/\./g,"\\.?").replace(jC,WC)}function UO(n){return n.replace(/\./g,"").replace(jC," ").toLowerCase()}function pi(n,e){return n===null?null:{regex:RegExp(n.map(jF).join("|")),deser:([t])=>n.findIndex(r=>UO(t)===UO(r))+e}}function QO(n,e){return{regex:n,deser:([,t,r])=>$h(t,r),groups:e}}function Vc(n){return{regex:n,deser:([e])=>e}}function UF(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function QF(n,e){const t=di(e),r=di(e,"{2}"),i=di(e,"{3}"),s=di(e,"{4}"),o=di(e,"{6}"),a=di(e,"{1,2}"),u=di(e,"{1,3}"),f=di(e,"{1,6}"),h=di(e,"{1,9}"),p=di(e,"{2,4}"),g=di(e,"{4,6}"),m=O=>({regex:RegExp(UF(O.val)),deser:([C])=>C,literal:!0}),b=(O=>{if(n.literal)return m(O);switch(O.val){case"G":return pi(e.eras("short"),0);case"GG":return pi(e.eras("long"),0);case"y":return rt(f);case"yy":return rt(p,l0);case"yyyy":return rt(s);case"yyyyy":return rt(g);case"yyyyyy":return rt(o);case"M":return rt(a);case"MM":return rt(r);case"MMM":return pi(e.months("short",!0),1);case"MMMM":return pi(e.months("long",!0),1);case"L":return rt(a);case"LL":return rt(r);case"LLL":return pi(e.months("short",!1),1);case"LLLL":return pi(e.months("long",!1),1);case"d":return rt(a);case"dd":return rt(r);case"o":return rt(u);case"ooo":return rt(i);case"HH":return rt(r);case"H":return rt(a);case"hh":return rt(r);case"h":return rt(a);case"mm":return rt(r);case"m":return rt(a);case"q":return rt(a);case"qq":return rt(r);case"s":return rt(a);case"ss":return rt(r);case"S":return rt(u);case"SSS":return rt(i);case"u":return Vc(h);case"uu":return Vc(a);case"uuu":return rt(t);case"a":return pi(e.meridiems(),0);case"kkkk":return rt(s);case"kk":return rt(p,l0);case"W":return rt(a);case"WW":return rt(r);case"E":case"c":return rt(t);case"EEE":return pi(e.weekdays("short",!1),1);case"EEEE":return pi(e.weekdays("long",!1),1);case"ccc":return pi(e.weekdays("short",!0),1);case"cccc":return pi(e.weekdays("long",!0),1);case"Z":case"ZZ":return QO(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return QO(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Vc(/[a-z_+-/]{1,256}?/i);case" ":return Vc(/[^\S\n\r]/);default:return m(O)}})(n)||{invalidReason:qF};return b.token=n,b}const YF={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function XF(n,e,t){const{type:r,value:i}=n;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=YF[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function GF(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function ZF(n,e,t){const r=n.match(e);if(r){const i={};let s=1;for(const o in t)if(Wa(t,o)){const a=t[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function KF(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,r;return De(n.z)||(t=Ds.create(n.z)),De(n.Z)||(t||(t=new rn(n.Z)),r=n.Z),De(n.q)||(n.M=(n.q-1)*3+1),De(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),De(n.u)||(n.S=av(n.u)),[Object.keys(n).reduce((s,o)=>{const a=e(o);return a&&(s[a]=n[o]),s},{}),t,r]}let Xg=null;function JF(){return Xg||(Xg=xe.fromMillis(1555555555555)),Xg}function e6(n,e){if(n.literal)return n;const t=Rn.macroTokenToFormatOpts(n.val),r=XC(t,e);return r==null||r.includes(void 0)?n:r}function UC(n,e){return Array.prototype.concat(...n.map(t=>e6(t,e)))}class QC{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=UC(Rn.parseFormat(t),e),this.units=this.tokens.map(r=>QF(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=GF(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[t,r]=ZF(e,this.regex,this.handlers),[i,s,o]=r?KF(r):[null,null,void 0];if(Wa(r,"a")&&Wa(r,"H"))throw new Ia("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function YC(n,e,t){return new QC(n,t).explainFromTokens(e)}function t6(n,e,t){const{result:r,zone:i,specificOffset:s,invalidReason:o}=YC(n,e,t);return[r,i,s,o]}function XC(n,e){if(!n)return null;const r=Rn.create(e,n).dtFormatter(JF()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>XF(o,n,s))}const Gg="Invalid DateTime",n6=864e13;function su(n){return new _i("unsupported zone",`the zone "${n.name}" is not supported`)}function Zg(n){return n.weekData===null&&(n.weekData=Kf(n.c)),n.weekData}function Kg(n){return n.localWeekData===null&&(n.localWeekData=Kf(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function Do(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new xe({...t,...e,old:t})}function GC(n,e,t){let r=n-e*60*1e3;const i=t.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=t.offset(r);return i===s?[r,i]:[n-Math.min(i,s)*60*1e3,Math.max(i,s)]}function qc(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function If(n,e,t){return GC(Lh(n),e,t)}function YO(n,e){const t=n.o,r=n.c.year+Math.trunc(e.years),i=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:r,month:i,day:Math.min(n.c.day,Jf(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ne.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Lh(s);let[u,f]=GC(a,t,n.zone);return o!==0&&(u+=o,f=n.zone.offset(u)),{ts:u,o:f}}function ka(n,e,t,r,i,s){const{setZone:o,zone:a}=t;if(n&&Object.keys(n).length!==0||e){const u=e||a,f=xe.fromObject(n,{...t,zone:u,specificOffset:s});return o?f:f.setZone(a)}else return xe.invalid(new _i("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Wc(n,e,t=!0){return n.isValid?Rn.create(at.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function Jg(n,e){const t=n.c.year>9999||n.c.year<0;let r="";return t&&n.c.year>=0&&(r+="+"),r+=Qt(n.c.year,t?6:4),e?(r+="-",r+=Qt(n.c.month),r+="-",r+=Qt(n.c.day)):(r+=Qt(n.c.month),r+=Qt(n.c.day)),r}function XO(n,e,t,r,i,s){let o=Qt(n.c.hour);return e?(o+=":",o+=Qt(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=":")):o+=Qt(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=Qt(n.c.second),(n.c.millisecond!==0||!r)&&(o+=".",o+=Qt(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!s?o+="Z":n.o<0?(o+="-",o+=Qt(Math.trunc(-n.o/60)),o+=":",o+=Qt(Math.trunc(-n.o%60))):(o+="+",o+=Qt(Math.trunc(n.o/60)),o+=":",o+=Qt(Math.trunc(n.o%60)))),s&&(o+="["+n.zone.ianaName+"]"),o}const ZC={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},r6={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},i6={ordinal:1,hour:0,minute:0,second:0,millisecond:0},KC=["year","month","day","hour","minute","second","millisecond"],s6=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],o6=["year","ordinal","hour","minute","second","millisecond"];function a6(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Z2(n);return e}function GO(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return a6(n)}}function l6(n){if(ou===void 0&&(ou=Ft.now()),n.type!=="iana")return n.offset(ou);const e=n.name;let t=u0.get(e);return t===void 0&&(t=n.offset(ou),u0.set(e,t)),t}function ZO(n,e){const t=eo(e.zone,Ft.defaultZone);if(!t.isValid)return xe.invalid(su(t));const r=at.fromObject(e);let i,s;if(De(n.year))i=Ft.now();else{for(const u of KC)De(n[u])&&(n[u]=ZC[u]);const o=xC(n)||kC(n);if(o)return xe.invalid(o);const a=l6(t);[i,s]=If(n,a,t)}return new xe({ts:i,zone:t,loc:r,o:s})}function KO(n,e,t){const r=De(t.round)?!0:t.round,i=(o,a)=>(o=lv(o,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(n,o)?0:e.startOf(o).diff(n.startOf(o),o).get(o):e.diff(n,o).get(o);if(t.unit)return i(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(n>e?-0:0,t.units[t.units.length-1])}function JO(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let ou;const u0=new Map;class xe{constructor(e){const t=e.zone||Ft.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new _i("invalid input"):null)||(t.isValid?null:su(t));this.ts=De(e.ts)?Ft.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{const a=oo(e.o)&&!e.old?e.o:t.offset(this.ts);i=qc(this.ts,a),r=Number.isNaN(i.year)?new _i("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=t,this.loc=e.loc||at.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new xe({})}static local(){const[e,t]=JO(arguments),[r,i,s,o,a,u,f]=t;return ZO({year:r,month:i,day:s,hour:o,minute:a,second:u,millisecond:f},e)}static utc(){const[e,t]=JO(arguments),[r,i,s,o,a,u,f]=t;return e.zone=rn.utcInstance,ZO({year:r,month:i,day:s,hour:o,minute:a,second:u,millisecond:f},e)}static fromJSDate(e,t={}){const r=NN(e)?e.valueOf():NaN;if(Number.isNaN(r))return xe.invalid("invalid input");const i=eo(t.zone,Ft.defaultZone);return i.isValid?new xe({ts:r,zone:i,loc:at.fromObject(t)}):xe.invalid(su(i))}static fromMillis(e,t={}){if(oo(e))return e<-864e13||e>n6?xe.invalid("Timestamp out of range"):new xe({ts:e,zone:eo(t.zone,Ft.defaultZone),loc:at.fromObject(t)});throw new An(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(oo(e))return new xe({ts:e*1e3,zone:eo(t.zone,Ft.defaultZone),loc:at.fromObject(t)});throw new An("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=eo(t.zone,Ft.defaultZone);if(!r.isValid)return xe.invalid(su(r));const i=at.fromObject(t),s=eh(e,GO),{minDaysInFirstWeek:o,startOfWeek:a}=FO(s,i),u=Ft.now(),f=De(t.specificOffset)?r.offset(u):t.specificOffset,h=!De(s.ordinal),p=!De(s.year),g=!De(s.month)||!De(s.day),m=p||g,y=s.weekYear||s.weekNumber;if((m||h)&&y)throw new Ia("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&h)throw new Ia("Can't mix ordinal dates with month/day");const b=y||s.weekday&&!m;let O,C,M=qc(u,f);b?(O=s6,C=r6,M=Kf(M,o,a)):h?(O=o6,C=i6,M=Yg(M)):(O=KC,C=ZC);let T=!1;for(const K of O){const H=s[K];De(H)?T?s[K]=C[K]:s[K]=M[K]:T=!0}const S=b?PN(s,o,a):h?LN(s):xC(s),R=S||kC(s);if(R)return xe.invalid(R);const $=b?$O(s,o,a):h?NO(s):s,[L,V]=If($,f,r),X=new xe({ts:L,zone:r,o:V,loc:i});return s.weekday&&m&&e.weekday!==X.weekday?xe.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${X.toISO()}`):X.isValid?X:xe.invalid(X.invalid)}static fromISO(e,t={}){const[r,i]=CF(e);return ka(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,i]=TF(e);return ka(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,i]=EF(e);return ka(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(De(e)||De(t))throw new An("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=at.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,f,h]=t6(o,e,t);return h?xe.invalid(h):ka(a,u,r,`format ${t}`,e,f)}static fromString(e,t,r={}){return xe.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,i]=LF(e);return ka(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new An("need to specify a reason the DateTime is invalid");const r=e instanceof _i?e:new _i(e,t);if(Ft.throwOnInvalid)throw new lN(r);return new xe({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=XC(e,at.fromObject(t));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return UC(Rn.parseFormat(e),at.fromObject(t)).map(i=>i.val).join("")}static resetCache(){ou=void 0,u0.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Zg(this).weekYear:NaN}get weekNumber(){return this.isValid?Zg(this).weekNumber:NaN}get weekday(){return this.isValid?Zg(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Kg(this).weekday:NaN}get localWeekNumber(){return this.isValid?Kg(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Kg(this).weekYear:NaN}get ordinal(){return this.isValid?Yg(this.c).ordinal:NaN}get monthShort(){return this.isValid?Pa.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Pa.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Pa.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Pa.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=Lh(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*t),a=this.zone.offset(r-s*t);if(o===a)return[this];const u=r-o*t,f=r-a*t,h=qc(u,o),p=qc(f,a);return h.hour===p.hour&&h.minute===p.minute&&h.second===p.second&&h.millisecond===p.millisecond?[Do(this,{ts:u}),Do(this,{ts:f})]:[this]}get isInLeapYear(){return Hu(this.year)}get daysInMonth(){return Jf(this.year,this.month)}get daysInYear(){return this.isValid?La(this.year):NaN}get weeksInWeekYear(){return this.isValid?ku(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ku(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:i}=Rn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(rn.instance(e),t)}toLocal(){return this.setZone(Ft.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=eo(e,Ft.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||r){const s=e.offset(this.ts),o=this.toObject();[i]=If(o,s,e)}return Do(this,{ts:i,zone:e})}else return xe.invalid(su(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return Do(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=eh(e,GO),{minDaysInFirstWeek:r,startOfWeek:i}=FO(t,this.loc),s=!De(t.weekYear)||!De(t.weekNumber)||!De(t.weekday),o=!De(t.ordinal),a=!De(t.year),u=!De(t.month)||!De(t.day),f=a||u,h=t.weekYear||t.weekNumber;if((f||o)&&h)throw new Ia("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new Ia("Can't mix ordinal dates with month/day");let p;s?p=$O({...Kf(this.c,r,i),...t},r,i):De(t.ordinal)?(p={...this.toObject(),...t},De(t.day)&&(p.day=Math.min(Jf(p.year,p.month),p.day))):p=NO({...Yg(this.c),...t});const[g,m]=If(p,this.o,this.zone);return Do(this,{ts:g,o:m})}plus(e){if(!this.isValid)return this;const t=Ne.fromDurationLike(e);return Do(this,YO(this,t))}minus(e){if(!this.isValid)return this;const t=Ne.fromDurationLike(e).negate();return Do(this,YO(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},i=Ne.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Rn.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Gg}toLocaleString(e=Zf,t={}){return this.isValid?Rn.create(this.loc.clone(t),e).formatDateTime(this):Gg}toLocaleParts(e={}){return this.isValid?Rn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=Jg(this,o);return a+="T",a+=XO(this,o,t,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?Jg(this,e==="extended"):null}toISOWeekDate(){return Wc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+XO(this,o==="extended",t,e,r,s):null}toRFC2822(){return Wc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Wc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Jg(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Wc(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Gg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return Ne.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=FN(t).map(Ne.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,f=VF(a,u,s,i);return o?f.negate():f}diffNow(e="milliseconds",t={}){return this.diff(xe.now(),e,t)}until(e){return this.isValid?Nt.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=i&&i<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||xe.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),KO(t,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?KO(e.base||xe.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(xe.isDateTime))throw new An("min requires all arguments be DateTimes");return BO(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(xe.isDateTime))throw new An("max requires all arguments be DateTimes");return BO(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=at.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return YC(o,e,t)}static fromStringExplain(e,t,r={}){return xe.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){const{locale:r=null,numberingSystem:i=null}=t,s=at.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new QC(s,e)}static fromFormatParser(e,t,r={}){if(De(e)||De(t))throw new An("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=at.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new An(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:a,zone:u,specificOffset:f,invalidReason:h}=t.explainFromTokens(e);return h?xe.invalid(h):ka(a,u,r,`format ${t.format}`,e,f)}static get DATE_SHORT(){return Zf}static get DATE_MED(){return K2}static get DATE_MED_WITH_WEEKDAY(){return fN}static get DATE_FULL(){return J2}static get DATE_HUGE(){return eC}static get TIME_SIMPLE(){return tC}static get TIME_WITH_SECONDS(){return nC}static get TIME_WITH_SHORT_OFFSET(){return rC}static get TIME_WITH_LONG_OFFSET(){return iC}static get TIME_24_SIMPLE(){return sC}static get TIME_24_WITH_SECONDS(){return oC}static get TIME_24_WITH_SHORT_OFFSET(){return aC}static get TIME_24_WITH_LONG_OFFSET(){return lC}static get DATETIME_SHORT(){return uC}static get DATETIME_SHORT_WITH_SECONDS(){return cC}static get DATETIME_MED(){return fC}static get DATETIME_MED_WITH_SECONDS(){return hC}static get DATETIME_MED_WITH_WEEKDAY(){return hN}static get DATETIME_FULL(){return dC}static get DATETIME_FULL_WITH_SECONDS(){return pC}static get DATETIME_HUGE(){return gC}static get DATETIME_HUGE_WITH_SECONDS(){return mC}}function Bl(n){if(xe.isDateTime(n))return n;if(n&&n.valueOf&&oo(n.valueOf()))return xe.fromJSDate(n);if(n&&typeof n=="object")return xe.fromObject(n);throw new An(`Unknown datetime argument: ${n}, of type ${typeof n}`)}var em=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Na={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Su={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},nr=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Fr=function(n){return n===!0?1:0};function ex(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}var tm=function(n){return n instanceof Array?n:[n]};function zn(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function it(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}function jc(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function JC(n,e){if(e(n))return n;if(n.parentNode)return JC(n.parentNode,e)}function Uc(n,e){var t=it("div","numInputWrapper"),r=it("input","numInput "+n),i=it("span","arrowUp"),s=it("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var o in e)r.setAttribute(o,e[o]);return t.appendChild(r),t.appendChild(i),t.appendChild(s),t}function dr(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var nm=function(){},th=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},u6={D:nm,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Fr(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:nm,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:nm,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Vo={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},pu={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[pu.w(n,e,t)]},F:function(n,e,t){return th(pu.n(n,e,t)-1,!1,e)},G:function(n,e,t){return nr(pu.h(n,e,t))},H:function(n){return nr(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Fr(n.getHours()>11)]},M:function(n,e){return th(n.getMonth(),!0,e)},S:function(n){return nr(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return nr(n.getFullYear(),4)},d:function(n){return nr(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return nr(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return nr(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},eT=function(n){var e=n.config,t=e===void 0?Na:e,r=n.l10n,i=r===void 0?Su:r,s=n.isMobile,o=s===void 0?!1:s;return function(a,u,f){var h=f||i;return t.formatDate!==void 0&&!o?t.formatDate(a,u,h):u.split("").map(function(p,g,m){return pu[p]&&m[g-1]!=="\\"?pu[p](a,h,t):p!=="\\"?p:""}).join("")}},c0=function(n){var e=n.config,t=e===void 0?Na:e,r=n.l10n,i=r===void 0?Su:r;return function(s,o,a,u){if(!(s!==0&&!s)){var f=u||i,h,p=s;if(s instanceof Date)h=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)h=new Date(s);else if(typeof s=="string"){var g=o||(t||Na).dateFormat,m=String(s).trim();if(m==="today")h=new Date,a=!0;else if(t&&t.parseDate)h=t.parseDate(s,g);else if(/Z$/.test(m)||/GMT$/.test(m))h=new Date(s);else{for(var y=void 0,b=[],O=0,C=0,M="";O<g.length;O++){var T=g[O],S=T==="\\",R=g[O-1]==="\\"||S;if(Vo[T]&&!R){M+=Vo[T];var $=new RegExp(M).exec(s);$&&(y=!0)&&b[T!=="Y"?"push":"unshift"]({fn:u6[T],val:$[++C]})}else S||(M+=".")}h=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),b.forEach(function(L){var V=L.fn,X=L.val;return h=V(h,X,f)||h}),h=y?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){t.errorHandler(new Error("Invalid date provided: "+p));return}return a===!0&&h.setHours(0,0,0,0),h}}};function vr(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var c6=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},rm=function(n,e,t){return n*3600+e*60+t},f6=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},h6={DAY:864e5};function im(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),s=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<s&&(t=s),e===i&&t===s&&r<o&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var a=n.maxDate.getHours(),u=n.maxDate.getMinutes();e=Math.min(e,a),e===a&&(t=Math.min(u,t)),e===a&&t===u&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=function(a){a&&Object.keys(a).forEach(function(u){return n[u]=a[u]})},i=0,s=e;i<s.length;i++){var o=s[i];r(o)}return n});var Mn=function(){return Mn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Mn.apply(this,arguments)},tx=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},d6=300;function p6(n,e){var t={config:Mn(Mn({},Na),Yt.defaultConfig),l10n:Su};t.parseDate=c0({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=b,t._setHoursFromDate=g,t._positionCalendar=ni,t.changeMonth=ke,t.changeYear=jt,t.clear=Ve,t.close=de,t.onMouseOver=kn,t._createElement=it,t.createDay=$,t.destroy=pe,t.isEnabled=mn,t.jumpToDate=M,t.updateValue=Yn,t.open=Bt,t.redraw=Ii,t.set=Li,t.setDate=ii,t.toggle=Ln;function r(){t.utils={getDaysInMonth:function(k,E){return k===void 0&&(k=t.currentMonth),E===void 0&&(E=t.currentYear),k===1&&(E%4===0&&E%100!==0||E%400===0)?29:t.l10n.daysInMonth[k]}}}function i(){t.element=t.input=n,t.isOpen=!1,yo(),Di(),Ns(),as(),r(),t.isMobile||R(),C(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&g(t.config.noCalendar?t.latestSelectedDateObj:void 0),Yn(!1)),a();var k=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&k&&ni(),Ge("onReady")}function s(){var k;return((k=t.calendarContainer)===null||k===void 0?void 0:k.getRootNode()).activeElement||document.activeElement}function o(k){return k.bind(t)}function a(){var k=t.config;k.weekNumbers===!1&&k.showMonths===1||k.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var E=(t.days.offsetWidth+1)*k.showMonths;t.daysContainer.style.width=E+"px",t.calendarContainer.style.width=E+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function u(k){if(t.selectedDates.length===0){var E=t.config.minDate===void 0||vr(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),F=im(t.config);E.setHours(F.hours,F.minutes,F.seconds,E.getMilliseconds()),t.selectedDates=[E],t.latestSelectedDateObj=E}k!==void 0&&k.type!=="blur"&&wl(k);var W=t._input.value;p(),Yn(),t._input.value!==W&&t._debouncedChange()}function f(k,E){return k%12+12*Fr(E===t.l10n.amPM[1])}function h(k){switch(k%24){case 0:case 12:return 12;default:return k%12}}function p(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var k=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,E=(parseInt(t.minuteElement.value,10)||0)%60,F=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(k=f(k,t.amPM.textContent));var W=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&vr(t.latestSelectedDateObj,t.config.minDate,!0)===0,ee=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&vr(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var oe=rm(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Me=rm(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),fe=rm(k,E,F);if(fe>Me&&fe<oe){var Pe=f6(oe);k=Pe[0],E=Pe[1],F=Pe[2]}}else{if(ee){var se=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;k=Math.min(k,se.getHours()),k===se.getHours()&&(E=Math.min(E,se.getMinutes())),E===se.getMinutes()&&(F=Math.min(F,se.getSeconds()))}if(W){var Oe=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;k=Math.max(k,Oe.getHours()),k===Oe.getHours()&&E<Oe.getMinutes()&&(E=Oe.getMinutes()),E===Oe.getMinutes()&&(F=Math.max(F,Oe.getSeconds()))}}m(k,E,F)}}function g(k){var E=k||t.latestSelectedDateObj;E&&E instanceof Date&&m(E.getHours(),E.getMinutes(),E.getSeconds())}function m(k,E,F){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(k%24,E,F||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=nr(t.config.time_24hr?k:(12+k)%12+12*Fr(k%12===0)),t.minuteElement.value=nr(E),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Fr(k>=12)]),t.secondElement!==void 0&&(t.secondElement.value=nr(F)))}function y(k){var E=dr(k),F=parseInt(E.value)+(k.delta||0);(F/1e3>1||k.key==="Enter"&&!/[^\d]/.test(F.toString()))&&jt(F)}function b(k,E,F,W){if(E instanceof Array)return E.forEach(function(ee){return b(k,ee,F,W)});if(k instanceof Array)return k.forEach(function(ee){return b(ee,E,F,W)});k.addEventListener(E,F,W),t._handlers.push({remove:function(){return k.removeEventListener(E,F,W)}})}function O(){Ge("onChange")}function C(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(F){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+F+"]"),function(W){return b(W,"click",t[F])})}),t.isMobile){$i();return}var k=ex($s,50);if(t._debouncedChange=ex(O,d6),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b(t.daysContainer,"mouseover",function(F){t.config.mode==="range"&&kn(dr(F))}),b(t._input,"keydown",Mi),t.calendarContainer!==void 0&&b(t.calendarContainer,"keydown",Mi),!t.config.inline&&!t.config.static&&b(window,"resize",k),window.ontouchstart!==void 0?b(window.document,"touchstart",Xe):b(window.document,"mousedown",Xe),b(window.document,"focus",Xe,{capture:!0}),t.config.clickOpens===!0&&(b(t._input,"focus",t.open),b(t._input,"click",t.open)),t.daysContainer!==void 0&&(b(t.monthNav,"click",Fi),b(t.monthNav,["keyup","increment"],y),b(t.daysContainer,"click",Pi)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var E=function(F){return dr(F).select()};b(t.timeContainer,["increment"],u),b(t.timeContainer,"blur",u,{capture:!0}),b(t.timeContainer,"click",T),b([t.hourElement,t.minuteElement],["focus","click"],E),t.secondElement!==void 0&&b(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&b(t.amPM,"click",function(F){u(F)})}t.config.allowInput&&b(t._input,"blur",sa)}function M(k,E){var F=k!==void 0?t.parseDate(k):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),W=t.currentYear,ee=t.currentMonth;try{F!==void 0&&(t.currentYear=F.getFullYear(),t.currentMonth=F.getMonth())}catch(oe){oe.message="Invalid date supplied: "+F,t.config.errorHandler(oe)}E&&t.currentYear!==W&&(Ge("onYearChange"),re()),E&&(t.currentYear!==W||t.currentMonth!==ee)&&Ge("onMonthChange"),t.redraw()}function T(k){var E=dr(k);~E.className.indexOf("arrow")&&S(k,E.classList.contains("arrowUp")?1:-1)}function S(k,E,F){var W=k&&dr(k),ee=F||W&&W.parentNode&&W.parentNode.firstChild,oe=oi("increment");oe.delta=E,ee&&ee.dispatchEvent(oe)}function R(){var k=window.document.createDocumentFragment();if(t.calendarContainer=it("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(k.appendChild(be()),t.innerContainer=it("div","flatpickr-innerContainer"),t.config.weekNumbers){var E=Pt(),F=E.weekWrapper,W=E.weekNumbers;t.innerContainer.appendChild(F),t.weekNumbers=W,t.weekWrapper=F}t.rContainer=it("div","flatpickr-rContainer"),t.rContainer.appendChild(_t()),t.daysContainer||(t.daysContainer=it("div","flatpickr-days"),t.daysContainer.tabIndex=-1),Y(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),k.appendChild(t.innerContainer)}t.config.enableTime&&k.appendChild(et()),zn(t.calendarContainer,"rangeMode",t.config.mode==="range"),zn(t.calendarContainer,"animate",t.config.animate===!0),zn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(k);var ee=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!ee&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var oe=it("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(oe,t.element),oe.appendChild(t.element),t.altInput&&oe.appendChild(t.altInput),oe.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function $(k,E,F,W){var ee=mn(E,!0),oe=it("span",k,E.getDate().toString());return oe.dateObj=E,oe.$i=W,oe.setAttribute("aria-label",t.formatDate(E,t.config.ariaDateFormat)),k.indexOf("hidden")===-1&&vr(E,t.now)===0&&(t.todayDateElem=oe,oe.classList.add("today"),oe.setAttribute("aria-current","date")),ee?(oe.tabIndex=-1,ai(E)&&(oe.classList.add("selected"),t.selectedDateElem=oe,t.config.mode==="range"&&(zn(oe,"startRange",t.selectedDates[0]&&vr(E,t.selectedDates[0],!0)===0),zn(oe,"endRange",t.selectedDates[1]&&vr(E,t.selectedDates[1],!0)===0),k==="nextMonthDay"&&oe.classList.add("inRange")))):oe.classList.add("flatpickr-disabled"),t.config.mode==="range"&&bl(E)&&!ai(E)&&oe.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&k!=="prevMonthDay"&&W%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(E)+"</span>"),Ge("onDayCreate",oe),oe}function L(k){k.focus(),t.config.mode==="range"&&kn(k)}function V(k){for(var E=k>0?0:t.config.showMonths-1,F=k>0?t.config.showMonths:-1,W=E;W!=F;W+=k)for(var ee=t.daysContainer.children[W],oe=k>0?0:ee.children.length-1,Me=k>0?ee.children.length:-1,fe=oe;fe!=Me;fe+=k){var Pe=ee.children[fe];if(Pe.className.indexOf("hidden")===-1&&mn(Pe.dateObj))return Pe}}function X(k,E){for(var F=k.className.indexOf("Month")===-1?k.dateObj.getMonth():t.currentMonth,W=E>0?t.config.showMonths:-1,ee=E>0?1:-1,oe=F-t.currentMonth;oe!=W;oe+=ee)for(var Me=t.daysContainer.children[oe],fe=F-t.currentMonth===oe?k.$i+E:E<0?Me.children.length-1:0,Pe=Me.children.length,se=fe;se>=0&&se<Pe&&se!=(E>0?Pe:-1);se+=ee){var Oe=Me.children[se];if(Oe.className.indexOf("hidden")===-1&&mn(Oe.dateObj)&&Math.abs(k.$i-se)>=Math.abs(E))return L(Oe)}t.changeMonth(ee),K(V(ee),0)}function K(k,E){var F=s(),W=Qn(F||document.body),ee=k!==void 0?k:W?F:t.selectedDateElem!==void 0&&Qn(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Qn(t.todayDateElem)?t.todayDateElem:V(E>0?1:-1);ee===void 0?t._input.focus():W?X(ee,E):L(ee)}function H(k,E){for(var F=(new Date(k,E,1).getDay()-t.l10n.firstDayOfWeek+7)%7,W=t.utils.getDaysInMonth((E-1+12)%12,k),ee=t.utils.getDaysInMonth(E,k),oe=window.document.createDocumentFragment(),Me=t.config.showMonths>1,fe=Me?"prevMonthDay hidden":"prevMonthDay",Pe=Me?"nextMonthDay hidden":"nextMonthDay",se=W+1-F,Oe=0;se<=W;se++,Oe++)oe.appendChild($("flatpickr-day "+fe,new Date(k,E-1,se),se,Oe));for(se=1;se<=ee;se++,Oe++)oe.appendChild($("flatpickr-day",new Date(k,E,se),se,Oe));for(var Je=ee+1;Je<=42-F&&(t.config.showMonths===1||Oe%7!==0);Je++,Oe++)oe.appendChild($("flatpickr-day "+Pe,new Date(k,E+1,Je%ee),Je,Oe));var $n=it("div","dayContainer");return $n.appendChild(oe),$n}function Y(){if(t.daysContainer!==void 0){jc(t.daysContainer),t.weekNumbers&&jc(t.weekNumbers);for(var k=document.createDocumentFragment(),E=0;E<t.config.showMonths;E++){var F=new Date(t.currentYear,t.currentMonth,1);F.setMonth(t.currentMonth+E),k.appendChild(H(F.getFullYear(),F.getMonth()))}t.daysContainer.appendChild(k),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&kn()}}function re(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var k=function(W){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&W<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&W>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var E=0;E<12;E++)if(k(E)){var F=it("option","flatpickr-monthDropdown-month");F.value=new Date(t.currentYear,E).getMonth().toString(),F.textContent=th(E,t.config.shorthandCurrentMonth,t.l10n),F.tabIndex=-1,t.currentMonth===E&&(F.selected=!0),t.monthsDropdownContainer.appendChild(F)}}}function ve(){var k=it("div","flatpickr-month"),E=window.document.createDocumentFragment(),F;t.config.showMonths>1||t.config.monthSelectorType==="static"?F=it("span","cur-month"):(t.monthsDropdownContainer=it("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),b(t.monthsDropdownContainer,"change",function(Me){var fe=dr(Me),Pe=parseInt(fe.value,10);t.changeMonth(Pe-t.currentMonth),Ge("onMonthChange")}),re(),F=t.monthsDropdownContainer);var W=Uc("cur-year",{tabindex:"-1"}),ee=W.getElementsByTagName("input")[0];ee.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&ee.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(ee.setAttribute("max",t.config.maxDate.getFullYear().toString()),ee.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var oe=it("div","flatpickr-current-month");return oe.appendChild(F),oe.appendChild(W),E.appendChild(oe),k.appendChild(E),{container:k,yearElement:ee,monthElement:F}}function Se(){jc(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var k=t.config.showMonths;k--;){var E=ve();t.yearElements.push(E.yearElement),t.monthElements.push(E.monthElement),t.monthNav.appendChild(E.container)}t.monthNav.appendChild(t.nextMonthNav)}function be(){return t.monthNav=it("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=it("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=it("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Se(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(k){t.__hidePrevMonthArrow!==k&&(zn(t.prevMonthNav,"flatpickr-disabled",k),t.__hidePrevMonthArrow=k)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(k){t.__hideNextMonthArrow!==k&&(zn(t.nextMonthNav,"flatpickr-disabled",k),t.__hideNextMonthArrow=k)}}),t.currentYearElement=t.yearElements[0],li(),t.monthNav}function et(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var k=im(t.config);t.timeContainer=it("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var E=it("span","flatpickr-time-separator",":"),F=Uc("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=F.getElementsByTagName("input")[0];var W=Uc("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=W.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=nr(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?k.hours:h(k.hours)),t.minuteElement.value=nr(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():k.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(F),t.timeContainer.appendChild(E),t.timeContainer.appendChild(W),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var ee=Uc("flatpickr-second");t.secondElement=ee.getElementsByTagName("input")[0],t.secondElement.value=nr(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():k.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(it("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(ee)}return t.config.time_24hr||(t.amPM=it("span","flatpickr-am-pm",t.l10n.amPM[Fr((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function _t(){t.weekdayContainer?jc(t.weekdayContainer):t.weekdayContainer=it("div","flatpickr-weekdays");for(var k=t.config.showMonths;k--;){var E=it("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(E)}return xt(),t.weekdayContainer}function xt(){if(t.weekdayContainer){var k=t.l10n.firstDayOfWeek,E=tx(t.l10n.weekdays.shorthand);k>0&&k<E.length&&(E=tx(E.splice(k,E.length),E.splice(0,k)));for(var F=t.config.showMonths;F--;)t.weekdayContainer.children[F].innerHTML=`
      <span class='flatpickr-weekday'>
        `+E.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Pt(){t.calendarContainer.classList.add("hasWeeks");var k=it("div","flatpickr-weekwrapper");k.appendChild(it("span","flatpickr-weekday",t.l10n.weekAbbreviation));var E=it("div","flatpickr-weeks");return k.appendChild(E),{weekWrapper:k,weekNumbers:E}}function ke(k,E){E===void 0&&(E=!0);var F=E?k:k-t.currentMonth;F<0&&t._hidePrevMonthArrow===!0||F>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=F,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Ge("onYearChange"),re()),Y(),Ge("onMonthChange"),li())}function Ve(k,E){if(k===void 0&&(k=!0),E===void 0&&(E=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,E===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var F=im(t.config),W=F.hours,ee=F.minutes,oe=F.seconds;m(W,ee,oe)}t.redraw(),k&&Ge("onChange")}function de(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Ge("onClose")}function pe(){t.config!==void 0&&Ge("onDestroy");for(var k=t._handlers.length;k--;)t._handlers[k].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var E=t.calendarContainer.parentNode;if(E.lastChild&&E.removeChild(E.lastChild),E.parentNode){for(;E.firstChild;)E.parentNode.insertBefore(E.firstChild,E);E.parentNode.removeChild(E)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(F){try{delete t[F]}catch{}})}function te(k){return t.calendarContainer.contains(k)}function Xe(k){if(t.isOpen&&!t.config.inline){var E=dr(k),F=te(E),W=E===t.input||E===t.altInput||t.element.contains(E)||k.path&&k.path.indexOf&&(~k.path.indexOf(t.input)||~k.path.indexOf(t.altInput)),ee=!W&&!F&&!te(k.relatedTarget),oe=!t.config.ignoredFocusElements.some(function(Me){return Me.contains(E)});ee&&oe&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&u(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function jt(k){if(!(!k||t.config.minDate&&k<t.config.minDate.getFullYear()||t.config.maxDate&&k>t.config.maxDate.getFullYear())){var E=k,F=t.currentYear!==E;t.currentYear=E||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),F&&(t.redraw(),Ge("onYearChange"),re())}}function mn(k,E){var F;E===void 0&&(E=!0);var W=t.parseDate(k,void 0,E);if(t.config.minDate&&W&&vr(W,t.config.minDate,E!==void 0?E:!t.minDateHasTime)<0||t.config.maxDate&&W&&vr(W,t.config.maxDate,E!==void 0?E:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(W===void 0)return!1;for(var ee=!!t.config.enable,oe=(F=t.config.enable)!==null&&F!==void 0?F:t.config.disable,Me=0,fe=void 0;Me<oe.length;Me++){if(fe=oe[Me],typeof fe=="function"&&fe(W))return ee;if(fe instanceof Date&&W!==void 0&&fe.getTime()===W.getTime())return ee;if(typeof fe=="string"){var Pe=t.parseDate(fe,void 0,!0);return Pe&&Pe.getTime()===W.getTime()?ee:!ee}else if(typeof fe=="object"&&W!==void 0&&fe.from&&fe.to&&W.getTime()>=fe.from.getTime()&&W.getTime()<=fe.to.getTime())return ee}return!ee}function Qn(k){return t.daysContainer!==void 0?k.className.indexOf("hidden")===-1&&k.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(k):!1}function sa(k){var E=k.target===t._input,F=t._input.value.trimEnd()!==Ni();E&&F&&!(k.relatedTarget&&te(k.relatedTarget))&&t.setDate(t._input.value,!0,k.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Mi(k){var E=dr(k),F=t.config.wrap?n.contains(E):E===t._input,W=t.config.allowInput,ee=t.isOpen&&(!W||!F),oe=t.config.inline&&F&&!W;if(k.keyCode===13&&F){if(W)return t.setDate(t._input.value,!0,E===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),E.blur();t.open()}else if(te(E)||ee||oe){var Me=!!t.timeContainer&&t.timeContainer.contains(E);switch(k.keyCode){case 13:Me?(k.preventDefault(),u(),Tr()):Pi(k);break;case 27:k.preventDefault(),Tr();break;case 8:case 46:F&&!t.config.allowInput&&(k.preventDefault(),t.clear());break;case 37:case 39:if(!Me&&!F){k.preventDefault();var fe=s();if(t.daysContainer!==void 0&&(W===!1||fe&&Qn(fe))){var Pe=k.keyCode===39?1:-1;k.ctrlKey?(k.stopPropagation(),ke(Pe),K(V(1),0)):K(void 0,Pe)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:k.preventDefault();var se=k.keyCode===40?1:-1;t.daysContainer&&E.$i!==void 0||E===t.input||E===t.altInput?k.ctrlKey?(k.stopPropagation(),jt(t.currentYear-se),K(V(1),0)):Me||K(void 0,se*7):E===t.currentYearElement?jt(t.currentYear-se):t.config.enableTime&&(!Me&&t.hourElement&&t.hourElement.focus(),u(k),t._debouncedChange());break;case 9:if(Me){var Oe=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Zt){return Zt}),Je=Oe.indexOf(E);if(Je!==-1){var $n=Oe[Je+(k.shiftKey?-1:1)];k.preventDefault(),($n||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(E)&&k.shiftKey&&(k.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&E===t.amPM)switch(k.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],p(),Yn();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],p(),Yn();break}(F||te(E))&&Ge("onKeyDown",k)}function kn(k,E){if(E===void 0&&(E="flatpickr-day"),!(t.selectedDates.length!==1||k&&(!k.classList.contains(E)||k.classList.contains("flatpickr-disabled")))){for(var F=k?k.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),W=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),ee=Math.min(F,t.selectedDates[0].getTime()),oe=Math.max(F,t.selectedDates[0].getTime()),Me=!1,fe=0,Pe=0,se=ee;se<oe;se+=h6.DAY)mn(new Date(se),!0)||(Me=Me||se>ee&&se<oe,se<W&&(!fe||se>fe)?fe=se:se>W&&(!Pe||se<Pe)&&(Pe=se));var Oe=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+E));Oe.forEach(function(Je){var $n=Je.dateObj,Zt=$n.getTime(),Bi=fe>0&&Zt<fe||Pe>0&&Zt>Pe;if(Bi){Je.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(on){Je.classList.remove(on)});return}else if(Me&&!Bi)return;["startRange","inRange","endRange","notAllowed"].forEach(function(on){Je.classList.remove(on)}),k!==void 0&&(k.classList.add(F<=t.selectedDates[0].getTime()?"startRange":"endRange"),W<F&&Zt===W?Je.classList.add("startRange"):W>F&&Zt===W&&Je.classList.add("endRange"),Zt>=fe&&(Pe===0||Zt<=Pe)&&c6(Zt,W,F)&&Je.classList.add("inRange"))})}}function $s(){t.isOpen&&!t.config.static&&!t.config.inline&&ni()}function Bt(k,E){if(E===void 0&&(E=t._positionElement),t.isMobile===!0){if(k){k.preventDefault();var F=dr(k);F&&F.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Ge("onOpen");return}else if(t._input.disabled||t.config.inline)return;var W=t.isOpen;t.isOpen=!0,W||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Ge("onOpen"),ni(E)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(k===void 0||!t.timeContainer.contains(k.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function Cr(k){return function(E){var F=t.config["_"+k+"Date"]=t.parseDate(E,t.config.dateFormat),W=t.config["_"+(k==="min"?"max":"min")+"Date"];F!==void 0&&(t[k==="min"?"minDateHasTime":"maxDateHasTime"]=F.getHours()>0||F.getMinutes()>0||F.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(ee){return mn(ee)}),!t.selectedDates.length&&k==="min"&&g(F),Yn()),t.daysContainer&&(Ii(),F!==void 0?t.currentYearElement[k]=F.getFullYear().toString():t.currentYearElement.removeAttribute(k),t.currentYearElement.disabled=!!W&&F!==void 0&&W.getFullYear()===F.getFullYear())}}function yo(){var k=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],E=Mn(Mn({},JSON.parse(JSON.stringify(n.dataset||{}))),e),F={};t.config.parseDate=E.parseDate,t.config.formatDate=E.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Oe){t.config._enable=os(Oe)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Oe){t.config._disable=os(Oe)}});var W=E.mode==="time";if(!E.dateFormat&&(E.enableTime||W)){var ee=Yt.defaultConfig.dateFormat||Na.dateFormat;F.dateFormat=E.noCalendar||W?"H:i"+(E.enableSeconds?":S":""):ee+" H:i"+(E.enableSeconds?":S":"")}if(E.altInput&&(E.enableTime||W)&&!E.altFormat){var oe=Yt.defaultConfig.altFormat||Na.altFormat;F.altFormat=E.noCalendar||W?"h:i"+(E.enableSeconds?":S K":" K"):oe+(" h:i"+(E.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:Cr("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:Cr("max")});var Me=function(Oe){return function(Je){t.config[Oe==="min"?"_minTime":"_maxTime"]=t.parseDate(Je,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Me("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Me("max")}),E.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,F,E);for(var fe=0;fe<k.length;fe++)t.config[k[fe]]=t.config[k[fe]]===!0||t.config[k[fe]]==="true";em.filter(function(Oe){return t.config[Oe]!==void 0}).forEach(function(Oe){t.config[Oe]=tm(t.config[Oe]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var fe=0;fe<t.config.plugins.length;fe++){var Pe=t.config.plugins[fe](t)||{};for(var se in Pe)em.indexOf(se)>-1?t.config[se]=tm(Pe[se]).map(o).concat(t.config[se]):typeof E[se]>"u"&&(t.config[se]=Pe[se])}E.altInputClass||(t.config.altInputClass=Gt().className+" "+t.config.altInputClass),Ge("onParseConfig")}function Gt(){return t.config.wrap?n.querySelector("[data-input]"):n}function Di(){typeof t.config.locale!="object"&&typeof Yt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Mn(Mn({},Yt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Yt.l10ns[t.config.locale]:void 0),Vo.D="("+t.l10n.weekdays.shorthand.join("|")+")",Vo.l="("+t.l10n.weekdays.longhand.join("|")+")",Vo.M="("+t.l10n.months.shorthand.join("|")+")",Vo.F="("+t.l10n.months.longhand.join("|")+")",Vo.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var k=Mn(Mn({},e),JSON.parse(JSON.stringify(n.dataset||{})));k.time_24hr===void 0&&Yt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=eT(t),t.parseDate=c0({config:t.config,l10n:t.l10n})}function ni(k){if(typeof t.config.position=="function")return void t.config.position(t,k);if(t.calendarContainer!==void 0){Ge("onPreCalendarPosition");var E=k||t._positionElement,F=Array.prototype.reduce.call(t.calendarContainer.children,function(ge,tt){return ge+tt.offsetHeight},0),W=t.calendarContainer.offsetWidth,ee=t.config.position.split(" "),oe=ee[0],Me=ee.length>1?ee[1]:null,fe=E.getBoundingClientRect(),Pe=window.innerHeight-fe.bottom,se=oe==="above"||oe!=="below"&&Pe<F&&fe.top>F,Oe=window.pageYOffset+fe.top+(se?-F-2:E.offsetHeight+2);if(zn(t.calendarContainer,"arrowTop",!se),zn(t.calendarContainer,"arrowBottom",se),!t.config.inline){var Je=window.pageXOffset+fe.left,$n=!1,Zt=!1;Me==="center"?(Je-=(W-fe.width)/2,$n=!0):Me==="right"&&(Je-=W-fe.width,Zt=!0),zn(t.calendarContainer,"arrowLeft",!$n&&!Zt),zn(t.calendarContainer,"arrowCenter",$n),zn(t.calendarContainer,"arrowRight",Zt);var Bi=window.document.body.offsetWidth-(window.pageXOffset+fe.right),on=Je+W>window.document.body.offsetWidth,oa=Bi+W>window.document.body.offsetWidth;if(zn(t.calendarContainer,"rightMost",on),!t.config.static)if(t.calendarContainer.style.top=Oe+"px",!on)t.calendarContainer.style.left=Je+"px",t.calendarContainer.style.right="auto";else if(!oa)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Bi+"px";else{var Fs=Ri();if(Fs===void 0)return;var bo=window.document.body.offsetWidth,aa=Math.max(0,bo/2-W/2),_l=".flatpickr-calendar.centerMost:before",we=".flatpickr-calendar.centerMost:after",N=Fs.cssRules.length,Z="{left:"+fe.left+"px;right:auto;}";zn(t.calendarContainer,"rightMost",!1),zn(t.calendarContainer,"centerMost",!0),Fs.insertRule(_l+","+we+Z,N),t.calendarContainer.style.left=aa+"px",t.calendarContainer.style.right="auto"}}}}function Ri(){for(var k=null,E=0;E<document.styleSheets.length;E++){var F=document.styleSheets[E];if(F.cssRules){try{F.cssRules}catch{continue}k=F;break}}return k??Sn()}function Sn(){var k=document.createElement("style");return document.head.appendChild(k),k.sheet}function Ii(){t.config.noCalendar||t.isMobile||(re(),li(),Y())}function Tr(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Pi(k){k.preventDefault(),k.stopPropagation();var E=function(Oe){return Oe.classList&&Oe.classList.contains("flatpickr-day")&&!Oe.classList.contains("flatpickr-disabled")&&!Oe.classList.contains("notAllowed")},F=JC(dr(k),E);if(F!==void 0){var W=F,ee=t.latestSelectedDateObj=new Date(W.dateObj.getTime()),oe=(ee.getMonth()<t.currentMonth||ee.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=W,t.config.mode==="single")t.selectedDates=[ee];else if(t.config.mode==="multiple"){var Me=ai(ee);Me?t.selectedDates.splice(parseInt(Me),1):t.selectedDates.push(ee)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=ee,t.selectedDates.push(ee),vr(ee,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Oe,Je){return Oe.getTime()-Je.getTime()}));if(p(),oe){var fe=t.currentYear!==ee.getFullYear();t.currentYear=ee.getFullYear(),t.currentMonth=ee.getMonth(),fe&&(Ge("onYearChange"),re()),Ge("onMonthChange")}if(li(),Y(),Yn(),!oe&&t.config.mode!=="range"&&t.config.showMonths===1?L(W):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Pe=t.config.mode==="single"&&!t.config.enableTime,se=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Pe||se)&&Tr()}O()}}var vn={locale:[Di,xt],showMonths:[Se,a,_t],minDate:[M],maxDate:[M],positionElement:[si],clickOpens:[function(){t.config.clickOpens===!0?(b(t._input,"focus",t.open),b(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Li(k,E){if(k!==null&&typeof k=="object"){Object.assign(t.config,k);for(var F in k)vn[F]!==void 0&&vn[F].forEach(function(W){return W()})}else t.config[k]=E,vn[k]!==void 0?vn[k].forEach(function(W){return W()}):em.indexOf(k)>-1&&(t.config[k]=tm(E));t.redraw(),Yn(!0)}function ri(k,E){var F=[];if(k instanceof Array)F=k.map(function(W){return t.parseDate(W,E)});else if(k instanceof Date||typeof k=="number")F=[t.parseDate(k,E)];else if(typeof k=="string")switch(t.config.mode){case"single":case"time":F=[t.parseDate(k,E)];break;case"multiple":F=k.split(t.config.conjunction).map(function(W){return t.parseDate(W,E)});break;case"range":F=k.split(t.l10n.rangeSeparator).map(function(W){return t.parseDate(W,E)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(k)));t.selectedDates=t.config.allowInvalidPreload?F:F.filter(function(W){return W instanceof Date&&mn(W,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(W,ee){return W.getTime()-ee.getTime()})}function ii(k,E,F){if(E===void 0&&(E=!1),F===void 0&&(F=t.config.dateFormat),k!==0&&!k||k instanceof Array&&k.length===0)return t.clear(E);ri(k,F),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),M(void 0,E),g(),t.selectedDates.length===0&&t.clear(!1),Yn(E),E&&Ge("onChange")}function os(k){return k.slice().map(function(E){return typeof E=="string"||typeof E=="number"||E instanceof Date?t.parseDate(E,void 0,!0):E&&typeof E=="object"&&E.from&&E.to?{from:t.parseDate(E.from,void 0),to:t.parseDate(E.to,void 0)}:E}).filter(function(E){return E})}function as(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var k=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);k&&ri(k,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Ns(){if(t.input=Gt(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=it(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),si()}function si(){t._positionElement=t.config.positionElement||t._input}function $i(){var k=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=it("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=k,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=k==="datetime-local"?"Y-m-d\\TH:i:S":k==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}b(t.mobileInput,"change",function(E){t.setDate(dr(E).value,!1,t.mobileFormatStr),Ge("onChange"),Ge("onClose")})}function Ln(k){if(t.isOpen===!0)return t.close();t.open(k)}function Ge(k,E){if(t.config!==void 0){var F=t.config[k];if(F!==void 0&&F.length>0)for(var W=0;F[W]&&W<F.length;W++)F[W](t.selectedDates,t.input.value,t,E);k==="onChange"&&(t.input.dispatchEvent(oi("change")),t.input.dispatchEvent(oi("input")))}}function oi(k){var E=document.createEvent("Event");return E.initEvent(k,!0,!0),E}function ai(k){for(var E=0;E<t.selectedDates.length;E++){var F=t.selectedDates[E];if(F instanceof Date&&vr(F,k)===0)return""+E}return!1}function bl(k){return t.config.mode!=="range"||t.selectedDates.length<2?!1:vr(k,t.selectedDates[0])>=0&&vr(k,t.selectedDates[1])<=0}function li(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(k,E){var F=new Date(t.currentYear,t.currentMonth,1);F.setMonth(t.currentMonth+E),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[E].textContent=th(F.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=F.getMonth().toString(),k.value=F.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function Ni(k){var E=k||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(F){return t.formatDate(F,E)}).filter(function(F,W,ee){return t.config.mode!=="range"||t.config.enableTime||ee.indexOf(F)===W}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function Yn(k){k===void 0&&(k=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Ni(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Ni(t.config.altFormat)),k!==!1&&Ge("onValueUpdate")}function Fi(k){var E=dr(k),F=t.prevMonthNav.contains(E),W=t.nextMonthNav.contains(E);F||W?ke(F?-1:1):t.yearElements.indexOf(E)>=0?E.select():E.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):E.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function wl(k){k.preventDefault();var E=k.type==="keydown",F=dr(k),W=F;t.amPM!==void 0&&F===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Fr(t.amPM.textContent===t.l10n.amPM[0])]);var ee=parseFloat(W.getAttribute("min")),oe=parseFloat(W.getAttribute("max")),Me=parseFloat(W.getAttribute("step")),fe=parseInt(W.value,10),Pe=k.delta||(E?k.which===38?1:-1:0),se=fe+Me*Pe;if(typeof W.value<"u"&&W.value.length===2){var Oe=W===t.hourElement,Je=W===t.minuteElement;se<ee?(se=oe+se+Fr(!Oe)+(Fr(Oe)&&Fr(!t.amPM)),Je&&S(void 0,-1,t.hourElement)):se>oe&&(se=W===t.hourElement?se-oe-Fr(!t.amPM):ee,Je&&S(void 0,1,t.hourElement)),t.amPM&&Oe&&(Me===1?se+fe===23:Math.abs(se-fe)>Me)&&(t.amPM.textContent=t.l10n.amPM[Fr(t.amPM.textContent===t.l10n.amPM[0])]),W.value=nr(se)}}return i(),t}function Fa(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var s=t[i];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=p6(s,e||{}),r.push(s._flatpickr)}catch(o){console.error(o)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Fa(this,n)},HTMLElement.prototype.flatpickr=function(n){return Fa([this],n)});var Yt=function(n,e){return typeof n=="string"?Fa(window.document.querySelectorAll(n),e):n instanceof Node?Fa([n],e):Fa(n,e)};Yt.defaultConfig={};Yt.l10ns={en:Mn({},Su),default:Mn({},Su)};Yt.localize=function(n){Yt.l10ns.default=Mn(Mn({},Yt.l10ns.default),n)};Yt.setDefaults=function(n){Yt.defaultConfig=Mn(Mn({},Yt.defaultConfig),n)};Yt.parseDate=c0({});Yt.formatDate=eT({});Yt.compareDates=vr;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Fa(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=Yt);function g6(n,e){for(var t in e)n[t]=e[t];return n}function nx(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function rx(n,e){this.props=n,this.context=e}(rx.prototype=new Es).isPureReactComponent=!0,rx.prototype.shouldComponentUpdate=function(n,e){return nx(this.props,n)||nx(this.state,e)};var ix=Fe.__b;Fe.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),ix&&ix(n)};var m6=Fe.__e;Fe.__e=function(n,e,t,r){if(n.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}m6(n,e,t,r)};var sx=Fe.unmount;function tT(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=g6({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return tT(r,e,t)})),n}function nT(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return nT(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function sm(){this.__u=0,this.o=null,this.__b=null}function rT(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Qc(){this.i=null,this.l=null}Fe.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),sx&&sx(n)},(sm.prototype=new Es).__c=function(n,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var i=rT(r.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=nT(u,u.__c.__P,u.__c.__O)}var f;for(r.setState({__a:r.__b=null});f=r.o.pop();)f.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(o,o)},sm.prototype.componentWillUnmount=function(){this.o=[]},sm.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=tT(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&J(On,null,n.fallback);return i&&(i.__u&=-33),[J(On,null,e.__a?null:n.children),i]};var ox=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};function v6(n){return this.getChildContext=function(){return n.context},n.children}function y6(n){var e=this,t=n.h;e.componentWillUnmount=function(){Gf(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),e.v||(e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],contains:function(){return!0},appendChild:function(r){this.childNodes.push(r),e.h.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.h.insertBefore(r,i)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.h.removeChild(r)}}),Gf(J(v6,{context:e.context},n.__v),e.v)}function b6(n,e){var t=J(y6,{__v:n,h:e});return t.containerInfo=e,t}(Qc.prototype=new Es).__a=function(n){var e=this,t=rT(e.__v),r=e.l.get(n);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),ox(e,n,r)):i()};t?t(s):s()}},Qc.prototype.render=function(n){this.i=null,this.l=new Map;var e=Xf(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},Qc.prototype.componentDidUpdate=Qc.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){ox(n,t,e)})};var w6=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,_6=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,O6=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,x6=/[A-Z0-9]/g,k6=typeof document<"u",S6=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};Es.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Es.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var ax=Fe.event;function C6(){}function T6(){return this.cancelBubble}function E6(){return this.defaultPrevented}Fe.event=function(n){return ax&&(n=ax(n)),n.persist=C6,n.isPropagationStopped=T6,n.isDefaultPrevented=E6,n.nativeEvent=n};var A6={enumerable:!1,configurable:!0,get:function(){return this.class}},lx=Fe.vnode;Fe.vnode=function(n){typeof n.type=="string"&&function(e){var t=e.props,r=e.type,i={},s=r.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||k6&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var u=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":u==="translate"&&a==="no"?a=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?o="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||S6(t.type)?u==="onfocus"?o="onfocusin":u==="onblur"?o="onfocusout":O6.test(o)&&(o=u):u=o="oninput":s&&_6.test(o)?o=o.replace(x6,"-$&").toLowerCase():a===null&&(a=void 0),u==="oninput"&&i[o=u]&&(o="oninputCapture"),i[o]=a}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Xf(t.children).forEach(function(f){f.props.selected=i.value.indexOf(f.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=Xf(t.children).forEach(function(f){f.props.selected=i.multiple?i.defaultValue.indexOf(f.props.value)!=-1:i.defaultValue==f.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",A6)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(n),n.$$typeof=w6,lx&&lx(n)};var ux=Fe.__r;Fe.__r=function(n){ux&&ux(n),n.__c};var cx=Fe.diffed;Fe.diffed=function(n){cx&&cx(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:iT,setPrototypeOf:fx,isFrozen:M6,getPrototypeOf:D6,getOwnPropertyDescriptor:R6}=Object;let{freeze:jn,seal:ei,create:sT}=Object,{apply:f0,construct:h0}=typeof Reflect<"u"&&Reflect;jn||(jn=function(e){return e});ei||(ei=function(e){return e});f0||(f0=function(e,t,r){return e.apply(t,r)});h0||(h0=function(e,t){return new e(...t)});const Yc=Un(Array.prototype.forEach),I6=Un(Array.prototype.lastIndexOf),hx=Un(Array.prototype.pop),zl=Un(Array.prototype.push),P6=Un(Array.prototype.splice),Pf=Un(String.prototype.toLowerCase),om=Un(String.prototype.toString),dx=Un(String.prototype.match),Hl=Un(String.prototype.replace),L6=Un(String.prototype.indexOf),$6=Un(String.prototype.trim),vi=Un(Object.prototype.hasOwnProperty),Hn=Un(RegExp.prototype.test),Vl=N6(TypeError);function Un(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return f0(n,e,r)}}function N6(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return h0(n,t)}}function je(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pf;fx&&fx(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(M6(e)||(e[r]=s),i=s)}n[i]=!0}return n}function F6(n){for(let e=0;e<n.length;e++)vi(n,e)||(n[e]=null);return n}function Fo(n){const e=sT(null);for(const[t,r]of iT(n))vi(n,t)&&(Array.isArray(r)?e[t]=F6(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=Fo(r):e[t]=r);return e}function ql(n,e){for(;n!==null;){const r=R6(n,e);if(r){if(r.get)return Un(r.get);if(typeof r.value=="function")return Un(r.value)}n=D6(n)}function t(){return null}return t}const px=jn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),am=jn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lm=jn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),B6=jn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),um=jn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),z6=jn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gx=jn(["#text"]),mx=jn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),cm=jn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vx=jn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xc=jn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),H6=ei(/\{\{[\w\W]*|[\w\W]*\}\}/gm),V6=ei(/<%[\w\W]*|[\w\W]*%>/gm),q6=ei(/\$\{[\w\W]*/gm),W6=ei(/^data-[\-\w.\u00B7-\uFFFF]+$/),j6=ei(/^aria-[\-\w]+$/),oT=ei(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U6=ei(/^(?:\w+script|data):/i),Q6=ei(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aT=ei(/^html$/i),Y6=ei(/^[a-z][.\w]*(-[.\w]+)+$/i);var yx=Object.freeze({__proto__:null,ARIA_ATTR:j6,ATTR_WHITESPACE:Q6,CUSTOM_ELEMENT:Y6,DATA_ATTR:W6,DOCTYPE_NAME:aT,ERB_EXPR:V6,IS_ALLOWED_URI:oT,IS_SCRIPT_OR_DATA:U6,MUSTACHE_EXPR:H6,TMPLIT_EXPR:q6});const Wl={element:1,text:3,progressingInstruction:7,comment:8,document:9},X6=function(){return typeof window>"u"?null:window},G6=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},bx=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function lT(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X6();const e=we=>lT(we);if(e.version="3.2.5",e.removed=[],!n||!n.document||n.document.nodeType!==Wl.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:u,NodeFilter:f,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:g,trustedTypes:m}=n,y=u.prototype,b=ql(y,"cloneNode"),O=ql(y,"remove"),C=ql(y,"nextSibling"),M=ql(y,"childNodes"),T=ql(y,"parentNode");if(typeof o=="function"){const we=t.createElement("template");we.content&&we.content.ownerDocument&&(t=we.content.ownerDocument)}let S,R="";const{implementation:$,createNodeIterator:L,createDocumentFragment:V,getElementsByTagName:X}=t,{importNode:K}=r;let H=bx();e.isSupported=typeof iT=="function"&&typeof T=="function"&&$&&$.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:re,TMPLIT_EXPR:ve,DATA_ATTR:Se,ARIA_ATTR:be,IS_SCRIPT_OR_DATA:et,ATTR_WHITESPACE:_t,CUSTOM_ELEMENT:xt}=yx;let{IS_ALLOWED_URI:Pt}=yx,ke=null;const Ve=je({},[...px,...am,...lm,...um,...gx]);let de=null;const pe=je({},[...mx,...cm,...vx,...Xc]);let te=Object.seal(sT(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xe=null,jt=null,mn=!0,Qn=!0,sa=!1,Mi=!0,kn=!1,$s=!0,Bt=!1,Cr=!1,yo=!1,Gt=!1,Di=!1,ni=!1,Ri=!0,Sn=!1;const Ii="user-content-";let Tr=!0,Pi=!1,vn={},Li=null;const ri=je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ii=null;const os=je({},["audio","video","img","source","image","track"]);let as=null;const Ns=je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),si="http://www.w3.org/1998/Math/MathML",$i="http://www.w3.org/2000/svg",Ln="http://www.w3.org/1999/xhtml";let Ge=Ln,oi=!1,ai=null;const bl=je({},[si,$i,Ln],om);let li=je({},["mi","mo","mn","ms","mtext"]),Ni=je({},["annotation-xml"]);const Yn=je({},["title","style","font","a","script"]);let Fi=null;const wl=["application/xhtml+xml","text/html"],k="text/html";let E=null,F=null;const W=t.createElement("form"),ee=function(N){return N instanceof RegExp||N instanceof Function},oe=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(F&&F===N)){if((!N||typeof N!="object")&&(N={}),N=Fo(N),Fi=wl.indexOf(N.PARSER_MEDIA_TYPE)===-1?k:N.PARSER_MEDIA_TYPE,E=Fi==="application/xhtml+xml"?om:Pf,ke=vi(N,"ALLOWED_TAGS")?je({},N.ALLOWED_TAGS,E):Ve,de=vi(N,"ALLOWED_ATTR")?je({},N.ALLOWED_ATTR,E):pe,ai=vi(N,"ALLOWED_NAMESPACES")?je({},N.ALLOWED_NAMESPACES,om):bl,as=vi(N,"ADD_URI_SAFE_ATTR")?je(Fo(Ns),N.ADD_URI_SAFE_ATTR,E):Ns,ii=vi(N,"ADD_DATA_URI_TAGS")?je(Fo(os),N.ADD_DATA_URI_TAGS,E):os,Li=vi(N,"FORBID_CONTENTS")?je({},N.FORBID_CONTENTS,E):ri,Xe=vi(N,"FORBID_TAGS")?je({},N.FORBID_TAGS,E):{},jt=vi(N,"FORBID_ATTR")?je({},N.FORBID_ATTR,E):{},vn=vi(N,"USE_PROFILES")?N.USE_PROFILES:!1,mn=N.ALLOW_ARIA_ATTR!==!1,Qn=N.ALLOW_DATA_ATTR!==!1,sa=N.ALLOW_UNKNOWN_PROTOCOLS||!1,Mi=N.ALLOW_SELF_CLOSE_IN_ATTR!==!1,kn=N.SAFE_FOR_TEMPLATES||!1,$s=N.SAFE_FOR_XML!==!1,Bt=N.WHOLE_DOCUMENT||!1,Gt=N.RETURN_DOM||!1,Di=N.RETURN_DOM_FRAGMENT||!1,ni=N.RETURN_TRUSTED_TYPE||!1,yo=N.FORCE_BODY||!1,Ri=N.SANITIZE_DOM!==!1,Sn=N.SANITIZE_NAMED_PROPS||!1,Tr=N.KEEP_CONTENT!==!1,Pi=N.IN_PLACE||!1,Pt=N.ALLOWED_URI_REGEXP||oT,Ge=N.NAMESPACE||Ln,li=N.MATHML_TEXT_INTEGRATION_POINTS||li,Ni=N.HTML_INTEGRATION_POINTS||Ni,te=N.CUSTOM_ELEMENT_HANDLING||{},N.CUSTOM_ELEMENT_HANDLING&&ee(N.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(te.tagNameCheck=N.CUSTOM_ELEMENT_HANDLING.tagNameCheck),N.CUSTOM_ELEMENT_HANDLING&&ee(N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(te.attributeNameCheck=N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),N.CUSTOM_ELEMENT_HANDLING&&typeof N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(te.allowCustomizedBuiltInElements=N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),kn&&(Qn=!1),Di&&(Gt=!0),vn&&(ke=je({},gx),de=[],vn.html===!0&&(je(ke,px),je(de,mx)),vn.svg===!0&&(je(ke,am),je(de,cm),je(de,Xc)),vn.svgFilters===!0&&(je(ke,lm),je(de,cm),je(de,Xc)),vn.mathMl===!0&&(je(ke,um),je(de,vx),je(de,Xc))),N.ADD_TAGS&&(ke===Ve&&(ke=Fo(ke)),je(ke,N.ADD_TAGS,E)),N.ADD_ATTR&&(de===pe&&(de=Fo(de)),je(de,N.ADD_ATTR,E)),N.ADD_URI_SAFE_ATTR&&je(as,N.ADD_URI_SAFE_ATTR,E),N.FORBID_CONTENTS&&(Li===ri&&(Li=Fo(Li)),je(Li,N.FORBID_CONTENTS,E)),Tr&&(ke["#text"]=!0),Bt&&je(ke,["html","head","body"]),ke.table&&(je(ke,["tbody"]),delete Xe.tbody),N.TRUSTED_TYPES_POLICY){if(typeof N.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof N.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=N.TRUSTED_TYPES_POLICY,R=S.createHTML("")}else S===void 0&&(S=G6(m,i)),S!==null&&typeof R=="string"&&(R=S.createHTML(""));jn&&jn(N),F=N}},Me=je({},[...am,...lm,...B6]),fe=je({},[...um,...z6]),Pe=function(N){let Z=T(N);(!Z||!Z.tagName)&&(Z={namespaceURI:Ge,tagName:"template"});const ge=Pf(N.tagName),tt=Pf(Z.tagName);return ai[N.namespaceURI]?N.namespaceURI===$i?Z.namespaceURI===Ln?ge==="svg":Z.namespaceURI===si?ge==="svg"&&(tt==="annotation-xml"||li[tt]):!!Me[ge]:N.namespaceURI===si?Z.namespaceURI===Ln?ge==="math":Z.namespaceURI===$i?ge==="math"&&Ni[tt]:!!fe[ge]:N.namespaceURI===Ln?Z.namespaceURI===$i&&!Ni[tt]||Z.namespaceURI===si&&!li[tt]?!1:!fe[ge]&&(Yn[ge]||!Me[ge]):!!(Fi==="application/xhtml+xml"&&ai[N.namespaceURI]):!1},se=function(N){zl(e.removed,{element:N});try{T(N).removeChild(N)}catch{O(N)}},Oe=function(N,Z){try{zl(e.removed,{attribute:Z.getAttributeNode(N),from:Z})}catch{zl(e.removed,{attribute:null,from:Z})}if(Z.removeAttribute(N),N==="is")if(Gt||Di)try{se(Z)}catch{}else try{Z.setAttribute(N,"")}catch{}},Je=function(N){let Z=null,ge=null;if(yo)N="<remove></remove>"+N;else{const Lt=dx(N,/^[\r\n\t ]+/);ge=Lt&&Lt[0]}Fi==="application/xhtml+xml"&&Ge===Ln&&(N='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+N+"</body></html>");const tt=S?S.createHTML(N):N;if(Ge===Ln)try{Z=new g().parseFromString(tt,Fi)}catch{}if(!Z||!Z.documentElement){Z=$.createDocument(Ge,"template",null);try{Z.documentElement.innerHTML=oi?R:tt}catch{}}const an=Z.body||Z.documentElement;return N&&ge&&an.insertBefore(t.createTextNode(ge),an.childNodes[0]||null),Ge===Ln?X.call(Z,Bt?"html":"body")[0]:Bt?Z.documentElement:an},$n=function(N){return L.call(N.ownerDocument||N,N,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Zt=function(N){return N instanceof p&&(typeof N.nodeName!="string"||typeof N.textContent!="string"||typeof N.removeChild!="function"||!(N.attributes instanceof h)||typeof N.removeAttribute!="function"||typeof N.setAttribute!="function"||typeof N.namespaceURI!="string"||typeof N.insertBefore!="function"||typeof N.hasChildNodes!="function")},Bi=function(N){return typeof a=="function"&&N instanceof a};function on(we,N,Z){Yc(we,ge=>{ge.call(e,N,Z,F)})}const oa=function(N){let Z=null;if(on(H.beforeSanitizeElements,N,null),Zt(N))return se(N),!0;const ge=E(N.nodeName);if(on(H.uponSanitizeElement,N,{tagName:ge,allowedTags:ke}),N.hasChildNodes()&&!Bi(N.firstElementChild)&&Hn(/<[/\w!]/g,N.innerHTML)&&Hn(/<[/\w!]/g,N.textContent)||N.nodeType===Wl.progressingInstruction||$s&&N.nodeType===Wl.comment&&Hn(/<[/\w]/g,N.data))return se(N),!0;if(!ke[ge]||Xe[ge]){if(!Xe[ge]&&bo(ge)&&(te.tagNameCheck instanceof RegExp&&Hn(te.tagNameCheck,ge)||te.tagNameCheck instanceof Function&&te.tagNameCheck(ge)))return!1;if(Tr&&!Li[ge]){const tt=T(N)||N.parentNode,an=M(N)||N.childNodes;if(an&&tt){const Lt=an.length;for(let Cn=Lt-1;Cn>=0;--Cn){const Er=b(an[Cn],!0);Er.__removalCount=(N.__removalCount||0)+1,tt.insertBefore(Er,C(N))}}}return se(N),!0}return N instanceof u&&!Pe(N)||(ge==="noscript"||ge==="noembed"||ge==="noframes")&&Hn(/<\/no(script|embed|frames)/i,N.innerHTML)?(se(N),!0):(kn&&N.nodeType===Wl.text&&(Z=N.textContent,Yc([Y,re,ve],tt=>{Z=Hl(Z,tt," ")}),N.textContent!==Z&&(zl(e.removed,{element:N.cloneNode()}),N.textContent=Z)),on(H.afterSanitizeElements,N,null),!1)},Fs=function(N,Z,ge){if(Ri&&(Z==="id"||Z==="name")&&(ge in t||ge in W))return!1;if(!(Qn&&!jt[Z]&&Hn(Se,Z))){if(!(mn&&Hn(be,Z))){if(!de[Z]||jt[Z]){if(!(bo(N)&&(te.tagNameCheck instanceof RegExp&&Hn(te.tagNameCheck,N)||te.tagNameCheck instanceof Function&&te.tagNameCheck(N))&&(te.attributeNameCheck instanceof RegExp&&Hn(te.attributeNameCheck,Z)||te.attributeNameCheck instanceof Function&&te.attributeNameCheck(Z))||Z==="is"&&te.allowCustomizedBuiltInElements&&(te.tagNameCheck instanceof RegExp&&Hn(te.tagNameCheck,ge)||te.tagNameCheck instanceof Function&&te.tagNameCheck(ge))))return!1}else if(!as[Z]){if(!Hn(Pt,Hl(ge,_t,""))){if(!((Z==="src"||Z==="xlink:href"||Z==="href")&&N!=="script"&&L6(ge,"data:")===0&&ii[N])){if(!(sa&&!Hn(et,Hl(ge,_t,"")))){if(ge)return!1}}}}}}return!0},bo=function(N){return N!=="annotation-xml"&&dx(N,xt)},aa=function(N){on(H.beforeSanitizeAttributes,N,null);const{attributes:Z}=N;if(!Z||Zt(N))return;const ge={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:de,forceKeepAttr:void 0};let tt=Z.length;for(;tt--;){const an=Z[tt],{name:Lt,namespaceURI:Cn,value:Er}=an,wo=E(Lt);let ln=Lt==="value"?Er:$6(Er);if(ge.attrName=wo,ge.attrValue=ln,ge.keepAttr=!0,ge.forceKeepAttr=void 0,on(H.uponSanitizeAttribute,N,ge),ln=ge.attrValue,Sn&&(wo==="id"||wo==="name")&&(Oe(Lt,N),ln=Ii+ln),$s&&Hn(/((--!?|])>)|<\/(style|title)/i,ln)){Oe(Lt,N);continue}if(ge.forceKeepAttr||(Oe(Lt,N),!ge.keepAttr))continue;if(!Mi&&Hn(/\/>/i,ln)){Oe(Lt,N);continue}kn&&Yc([Y,re,ve],xl=>{ln=Hl(ln,xl," ")});const Ol=E(N.nodeName);if(Fs(Ol,wo,ln)){if(S&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Cn)switch(m.getAttributeType(Ol,wo)){case"TrustedHTML":{ln=S.createHTML(ln);break}case"TrustedScriptURL":{ln=S.createScriptURL(ln);break}}try{Cn?N.setAttributeNS(Cn,Lt,ln):N.setAttribute(Lt,ln),Zt(N)?se(N):hx(e.removed)}catch{}}}on(H.afterSanitizeAttributes,N,null)},_l=function we(N){let Z=null;const ge=$n(N);for(on(H.beforeSanitizeShadowDOM,N,null);Z=ge.nextNode();)on(H.uponSanitizeShadowNode,Z,null),oa(Z),aa(Z),Z.content instanceof s&&we(Z.content);on(H.afterSanitizeShadowDOM,N,null)};return e.sanitize=function(we){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=null,ge=null,tt=null,an=null;if(oi=!we,oi&&(we="<!-->"),typeof we!="string"&&!Bi(we))if(typeof we.toString=="function"){if(we=we.toString(),typeof we!="string")throw Vl("dirty is not a string, aborting")}else throw Vl("toString is not a function");if(!e.isSupported)return we;if(Cr||oe(N),e.removed=[],typeof we=="string"&&(Pi=!1),Pi){if(we.nodeName){const Er=E(we.nodeName);if(!ke[Er]||Xe[Er])throw Vl("root node is forbidden and cannot be sanitized in-place")}}else if(we instanceof a)Z=Je("<!---->"),ge=Z.ownerDocument.importNode(we,!0),ge.nodeType===Wl.element&&ge.nodeName==="BODY"||ge.nodeName==="HTML"?Z=ge:Z.appendChild(ge);else{if(!Gt&&!kn&&!Bt&&we.indexOf("<")===-1)return S&&ni?S.createHTML(we):we;if(Z=Je(we),!Z)return Gt?null:ni?R:""}Z&&yo&&se(Z.firstChild);const Lt=$n(Pi?we:Z);for(;tt=Lt.nextNode();)oa(tt),aa(tt),tt.content instanceof s&&_l(tt.content);if(Pi)return we;if(Gt){if(Di)for(an=V.call(Z.ownerDocument);Z.firstChild;)an.appendChild(Z.firstChild);else an=Z;return(de.shadowroot||de.shadowrootmode)&&(an=K.call(r,an,!0)),an}let Cn=Bt?Z.outerHTML:Z.innerHTML;return Bt&&ke["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&Hn(aT,Z.ownerDocument.doctype.name)&&(Cn="<!DOCTYPE "+Z.ownerDocument.doctype.name+`>
`+Cn),kn&&Yc([Y,re,ve],Er=>{Cn=Hl(Cn,Er," ")}),S&&ni?S.createHTML(Cn):Cn},e.setConfig=function(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oe(we),Cr=!0},e.clearConfig=function(){F=null,Cr=!1},e.isValidAttribute=function(we,N,Z){F||oe({});const ge=E(we),tt=E(N);return Fs(ge,tt,Z)},e.addHook=function(we,N){typeof N=="function"&&zl(H[we],N)},e.removeHook=function(we,N){if(N!==void 0){const Z=I6(H[we],N);return Z===-1?void 0:P6(H[we],Z,1)[0]}return hx(H[we])},e.removeHooks=function(we){H[we]=[]},e.removeAllHooks=function(){H=bx()},e}var Z6=lT(),au={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var K6=au.exports,wx;function J6(){return wx||(wx=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",p=1,g=2,m=4,y=1,b=2,O=1,C=2,M=4,T=8,S=16,R=32,$=64,L=128,V=256,X=512,K=30,H="...",Y=800,re=16,ve=1,Se=2,be=3,et=1/0,_t=9007199254740991,xt=17976931348623157e292,Pt=NaN,ke=4294967295,Ve=ke-1,de=ke>>>1,pe=[["ary",L],["bind",O],["bindKey",C],["curry",T],["curryRight",S],["flip",X],["partial",R],["partialRight",$],["rearg",V]],te="[object Arguments]",Xe="[object Array]",jt="[object AsyncFunction]",mn="[object Boolean]",Qn="[object Date]",sa="[object DOMException]",Mi="[object Error]",kn="[object Function]",$s="[object GeneratorFunction]",Bt="[object Map]",Cr="[object Number]",yo="[object Null]",Gt="[object Object]",Di="[object Promise]",ni="[object Proxy]",Ri="[object RegExp]",Sn="[object Set]",Ii="[object String]",Tr="[object Symbol]",Pi="[object Undefined]",vn="[object WeakMap]",Li="[object WeakSet]",ri="[object ArrayBuffer]",ii="[object DataView]",os="[object Float32Array]",as="[object Float64Array]",Ns="[object Int8Array]",si="[object Int16Array]",$i="[object Int32Array]",Ln="[object Uint8Array]",Ge="[object Uint8ClampedArray]",oi="[object Uint16Array]",ai="[object Uint32Array]",bl=/\b__p \+= '';/g,li=/\b(__p \+=) '' \+/g,Ni=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yn=/&(?:amp|lt|gt|quot|#39);/g,Fi=/[&<>"']/g,wl=RegExp(Yn.source),k=RegExp(Fi.source),E=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oe=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fe=/[\\^$.*+?()[\]{}|]/g,Pe=RegExp(fe.source),se=/^\s+/,Oe=/\s/,Je=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$n=/\{\n\/\* \[wrapped with (.+)\] \*/,Zt=/,? & /,Bi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,on=/[()=,{}\[\]\/\s]/,oa=/\\(\\)?/g,Fs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bo=/\w*$/,aa=/^[-+]0x[0-9a-f]+$/i,_l=/^0b[01]+$/i,we=/^\[object .+?Constructor\]$/,N=/^0o[0-7]+$/i,Z=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tt=/($^)/,an=/['\n\r\u2028\u2029\\]/g,Lt="\\ud800-\\udfff",Cn="\\u0300-\\u036f",Er="\\ufe20-\\ufe2f",wo="\\u20d0-\\u20ff",ln=Cn+Er+wo,Ol="\\u2700-\\u27bf",xl="a-z\\xdf-\\xf6\\xf8-\\xff",uD="\\xac\\xb1\\xd7\\xf7",cD="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fD="\\u2000-\\u206f",hD=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fy="A-Z\\xc0-\\xd6\\xd8-\\xde",hy="\\ufe0e\\ufe0f",dy=uD+cD+fD+hD,ed="[']",dD="["+Lt+"]",py="["+dy+"]",ec="["+ln+"]",gy="\\d+",pD="["+Ol+"]",my="["+xl+"]",vy="[^"+Lt+dy+gy+Ol+xl+fy+"]",td="\\ud83c[\\udffb-\\udfff]",gD="(?:"+ec+"|"+td+")",yy="[^"+Lt+"]",nd="(?:\\ud83c[\\udde6-\\uddff]){2}",rd="[\\ud800-\\udbff][\\udc00-\\udfff]",la="["+fy+"]",by="\\u200d",wy="(?:"+my+"|"+vy+")",mD="(?:"+la+"|"+vy+")",_y="(?:"+ed+"(?:d|ll|m|re|s|t|ve))?",Oy="(?:"+ed+"(?:D|LL|M|RE|S|T|VE))?",xy=gD+"?",ky="["+hy+"]?",vD="(?:"+by+"(?:"+[yy,nd,rd].join("|")+")"+ky+xy+")*",yD="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bD="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sy=ky+xy+vD,wD="(?:"+[pD,nd,rd].join("|")+")"+Sy,_D="(?:"+[yy+ec+"?",ec,nd,rd,dD].join("|")+")",OD=RegExp(ed,"g"),xD=RegExp(ec,"g"),id=RegExp(td+"(?="+td+")|"+_D+Sy,"g"),kD=RegExp([la+"?"+my+"+"+_y+"(?="+[py,la,"$"].join("|")+")",mD+"+"+Oy+"(?="+[py,la+wy,"$"].join("|")+")",la+"?"+wy+"+"+_y,la+"+"+Oy,bD,yD,gy,wD].join("|"),"g"),SD=RegExp("["+by+Lt+ln+hy+"]"),CD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,TD=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ED=-1,kt={};kt[os]=kt[as]=kt[Ns]=kt[si]=kt[$i]=kt[Ln]=kt[Ge]=kt[oi]=kt[ai]=!0,kt[te]=kt[Xe]=kt[ri]=kt[mn]=kt[ii]=kt[Qn]=kt[Mi]=kt[kn]=kt[Bt]=kt[Cr]=kt[Gt]=kt[Ri]=kt[Sn]=kt[Ii]=kt[vn]=!1;var Ot={};Ot[te]=Ot[Xe]=Ot[ri]=Ot[ii]=Ot[mn]=Ot[Qn]=Ot[os]=Ot[as]=Ot[Ns]=Ot[si]=Ot[$i]=Ot[Bt]=Ot[Cr]=Ot[Gt]=Ot[Ri]=Ot[Sn]=Ot[Ii]=Ot[Tr]=Ot[Ln]=Ot[Ge]=Ot[oi]=Ot[ai]=!0,Ot[Mi]=Ot[kn]=Ot[vn]=!1;var AD={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},MD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},DD={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},RD={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ID=parseFloat,PD=parseInt,Cy=typeof to=="object"&&to&&to.Object===Object&&to,LD=typeof self=="object"&&self&&self.Object===Object&&self,yn=Cy||LD||Function("return this")(),sd=e&&!e.nodeType&&e,_o=sd&&!0&&n&&!n.nodeType&&n,Ty=_o&&_o.exports===sd,od=Ty&&Cy.process,Ar=function(){try{var B=_o&&_o.require&&_o.require("util").types;return B||od&&od.binding&&od.binding("util")}catch{}}(),Ey=Ar&&Ar.isArrayBuffer,Ay=Ar&&Ar.isDate,My=Ar&&Ar.isMap,Dy=Ar&&Ar.isRegExp,Ry=Ar&&Ar.isSet,Iy=Ar&&Ar.isTypedArray;function ar(B,j,q){switch(q.length){case 0:return B.call(j);case 1:return B.call(j,q[0]);case 2:return B.call(j,q[0],q[1]);case 3:return B.call(j,q[0],q[1],q[2])}return B.apply(j,q)}function $D(B,j,q,he){for(var Re=-1,nt=B==null?0:B.length;++Re<nt;){var Kt=B[Re];j(he,Kt,q(Kt),B)}return he}function Mr(B,j){for(var q=-1,he=B==null?0:B.length;++q<he&&j(B[q],q,B)!==!1;);return B}function ND(B,j){for(var q=B==null?0:B.length;q--&&j(B[q],q,B)!==!1;);return B}function Py(B,j){for(var q=-1,he=B==null?0:B.length;++q<he;)if(!j(B[q],q,B))return!1;return!0}function Bs(B,j){for(var q=-1,he=B==null?0:B.length,Re=0,nt=[];++q<he;){var Kt=B[q];j(Kt,q,B)&&(nt[Re++]=Kt)}return nt}function tc(B,j){var q=B==null?0:B.length;return!!q&&ua(B,j,0)>-1}function ad(B,j,q){for(var he=-1,Re=B==null?0:B.length;++he<Re;)if(q(j,B[he]))return!0;return!1}function At(B,j){for(var q=-1,he=B==null?0:B.length,Re=Array(he);++q<he;)Re[q]=j(B[q],q,B);return Re}function zs(B,j){for(var q=-1,he=j.length,Re=B.length;++q<he;)B[Re+q]=j[q];return B}function ld(B,j,q,he){var Re=-1,nt=B==null?0:B.length;for(he&&nt&&(q=B[++Re]);++Re<nt;)q=j(q,B[Re],Re,B);return q}function FD(B,j,q,he){var Re=B==null?0:B.length;for(he&&Re&&(q=B[--Re]);Re--;)q=j(q,B[Re],Re,B);return q}function ud(B,j){for(var q=-1,he=B==null?0:B.length;++q<he;)if(j(B[q],q,B))return!0;return!1}var BD=cd("length");function zD(B){return B.split("")}function HD(B){return B.match(Bi)||[]}function Ly(B,j,q){var he;return q(B,function(Re,nt,Kt){if(j(Re,nt,Kt))return he=nt,!1}),he}function nc(B,j,q,he){for(var Re=B.length,nt=q+(he?1:-1);he?nt--:++nt<Re;)if(j(B[nt],nt,B))return nt;return-1}function ua(B,j,q){return j===j?JD(B,j,q):nc(B,$y,q)}function VD(B,j,q,he){for(var Re=q-1,nt=B.length;++Re<nt;)if(he(B[Re],j))return Re;return-1}function $y(B){return B!==B}function Ny(B,j){var q=B==null?0:B.length;return q?hd(B,j)/q:Pt}function cd(B){return function(j){return j==null?t:j[B]}}function fd(B){return function(j){return B==null?t:B[j]}}function Fy(B,j,q,he,Re){return Re(B,function(nt,Kt,mt){q=he?(he=!1,nt):j(q,nt,Kt,mt)}),q}function qD(B,j){var q=B.length;for(B.sort(j);q--;)B[q]=B[q].value;return B}function hd(B,j){for(var q,he=-1,Re=B.length;++he<Re;){var nt=j(B[he]);nt!==t&&(q=q===t?nt:q+nt)}return q}function dd(B,j){for(var q=-1,he=Array(B);++q<B;)he[q]=j(q);return he}function WD(B,j){return At(j,function(q){return[q,B[q]]})}function By(B){return B&&B.slice(0,qy(B)+1).replace(se,"")}function lr(B){return function(j){return B(j)}}function pd(B,j){return At(j,function(q){return B[q]})}function kl(B,j){return B.has(j)}function zy(B,j){for(var q=-1,he=B.length;++q<he&&ua(j,B[q],0)>-1;);return q}function Hy(B,j){for(var q=B.length;q--&&ua(j,B[q],0)>-1;);return q}function jD(B,j){for(var q=B.length,he=0;q--;)B[q]===j&&++he;return he}var UD=fd(AD),QD=fd(MD);function YD(B){return"\\"+RD[B]}function XD(B,j){return B==null?t:B[j]}function ca(B){return SD.test(B)}function GD(B){return CD.test(B)}function ZD(B){for(var j,q=[];!(j=B.next()).done;)q.push(j.value);return q}function gd(B){var j=-1,q=Array(B.size);return B.forEach(function(he,Re){q[++j]=[Re,he]}),q}function Vy(B,j){return function(q){return B(j(q))}}function Hs(B,j){for(var q=-1,he=B.length,Re=0,nt=[];++q<he;){var Kt=B[q];(Kt===j||Kt===h)&&(B[q]=h,nt[Re++]=q)}return nt}function rc(B){var j=-1,q=Array(B.size);return B.forEach(function(he){q[++j]=he}),q}function KD(B){var j=-1,q=Array(B.size);return B.forEach(function(he){q[++j]=[he,he]}),q}function JD(B,j,q){for(var he=q-1,Re=B.length;++he<Re;)if(B[he]===j)return he;return-1}function eR(B,j,q){for(var he=q+1;he--;)if(B[he]===j)return he;return he}function fa(B){return ca(B)?nR(B):BD(B)}function ui(B){return ca(B)?rR(B):zD(B)}function qy(B){for(var j=B.length;j--&&Oe.test(B.charAt(j)););return j}var tR=fd(DD);function nR(B){for(var j=id.lastIndex=0;id.test(B);)++j;return j}function rR(B){return B.match(id)||[]}function iR(B){return B.match(kD)||[]}var sR=function B(j){j=j==null?yn:ha.defaults(yn.Object(),j,ha.pick(yn,TD));var q=j.Array,he=j.Date,Re=j.Error,nt=j.Function,Kt=j.Math,mt=j.Object,md=j.RegExp,oR=j.String,Dr=j.TypeError,ic=q.prototype,aR=nt.prototype,da=mt.prototype,sc=j["__core-js_shared__"],oc=aR.toString,ut=da.hasOwnProperty,lR=0,Wy=function(){var l=/[^.]+$/.exec(sc&&sc.keys&&sc.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),ac=da.toString,uR=oc.call(mt),cR=yn._,fR=md("^"+oc.call(ut).replace(fe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lc=Ty?j.Buffer:t,Vs=j.Symbol,uc=j.Uint8Array,jy=lc?lc.allocUnsafe:t,cc=Vy(mt.getPrototypeOf,mt),Uy=mt.create,Qy=da.propertyIsEnumerable,fc=ic.splice,Yy=Vs?Vs.isConcatSpreadable:t,Sl=Vs?Vs.iterator:t,Oo=Vs?Vs.toStringTag:t,hc=function(){try{var l=To(mt,"defineProperty");return l({},"",{}),l}catch{}}(),hR=j.clearTimeout!==yn.clearTimeout&&j.clearTimeout,dR=he&&he.now!==yn.Date.now&&he.now,pR=j.setTimeout!==yn.setTimeout&&j.setTimeout,dc=Kt.ceil,pc=Kt.floor,vd=mt.getOwnPropertySymbols,gR=lc?lc.isBuffer:t,Xy=j.isFinite,mR=ic.join,vR=Vy(mt.keys,mt),Jt=Kt.max,Tn=Kt.min,yR=he.now,bR=j.parseInt,Gy=Kt.random,wR=ic.reverse,yd=To(j,"DataView"),Cl=To(j,"Map"),bd=To(j,"Promise"),pa=To(j,"Set"),Tl=To(j,"WeakMap"),El=To(mt,"create"),gc=Tl&&new Tl,ga={},_R=Eo(yd),OR=Eo(Cl),xR=Eo(bd),kR=Eo(pa),SR=Eo(Tl),mc=Vs?Vs.prototype:t,Al=mc?mc.valueOf:t,Zy=mc?mc.toString:t;function _(l){if($t(l)&&!Ie(l)&&!(l instanceof Ue)){if(l instanceof Rr)return l;if(ut.call(l,"__wrapped__"))return Kb(l)}return new Rr(l)}var ma=function(){function l(){}return function(c){if(!Rt(c))return{};if(Uy)return Uy(c);l.prototype=c;var d=new l;return l.prototype=t,d}}();function vc(){}function Rr(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:E,evaluate:F,interpolate:W,variable:"",imports:{_}},_.prototype=vc.prototype,_.prototype.constructor=_,Rr.prototype=ma(vc.prototype),Rr.prototype.constructor=Rr;function Ue(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ke,this.__views__=[]}function CR(){var l=new Ue(this.__wrapped__);return l.__actions__=Xn(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Xn(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Xn(this.__views__),l}function TR(){if(this.__filtered__){var l=new Ue(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function ER(){var l=this.__wrapped__.value(),c=this.__dir__,d=Ie(l),v=c<0,w=d?l.length:0,x=z3(0,w,this.__views__),D=x.start,P=x.end,z=P-D,U=v?P:D-1,Q=this.__iteratees__,G=Q.length,ae=0,ye=Tn(z,this.__takeCount__);if(!d||!v&&w==z&&ye==z)return _b(l,this.__actions__);var Te=[];e:for(;z--&&ae<ye;){U+=c;for(var ze=-1,Ee=l[U];++ze<G;){var We=Q[ze],Qe=We.iteratee,fr=We.type,Bn=Qe(Ee);if(fr==Se)Ee=Bn;else if(!Bn){if(fr==ve)continue e;break e}}Te[ae++]=Ee}return Te}Ue.prototype=ma(vc.prototype),Ue.prototype.constructor=Ue;function xo(l){var c=-1,d=l==null?0:l.length;for(this.clear();++c<d;){var v=l[c];this.set(v[0],v[1])}}function AR(){this.__data__=El?El(null):{},this.size=0}function MR(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function DR(l){var c=this.__data__;if(El){var d=c[l];return d===u?t:d}return ut.call(c,l)?c[l]:t}function RR(l){var c=this.__data__;return El?c[l]!==t:ut.call(c,l)}function IR(l,c){var d=this.__data__;return this.size+=this.has(l)?0:1,d[l]=El&&c===t?u:c,this}xo.prototype.clear=AR,xo.prototype.delete=MR,xo.prototype.get=DR,xo.prototype.has=RR,xo.prototype.set=IR;function ls(l){var c=-1,d=l==null?0:l.length;for(this.clear();++c<d;){var v=l[c];this.set(v[0],v[1])}}function PR(){this.__data__=[],this.size=0}function LR(l){var c=this.__data__,d=yc(c,l);if(d<0)return!1;var v=c.length-1;return d==v?c.pop():fc.call(c,d,1),--this.size,!0}function $R(l){var c=this.__data__,d=yc(c,l);return d<0?t:c[d][1]}function NR(l){return yc(this.__data__,l)>-1}function FR(l,c){var d=this.__data__,v=yc(d,l);return v<0?(++this.size,d.push([l,c])):d[v][1]=c,this}ls.prototype.clear=PR,ls.prototype.delete=LR,ls.prototype.get=$R,ls.prototype.has=NR,ls.prototype.set=FR;function us(l){var c=-1,d=l==null?0:l.length;for(this.clear();++c<d;){var v=l[c];this.set(v[0],v[1])}}function BR(){this.size=0,this.__data__={hash:new xo,map:new(Cl||ls),string:new xo}}function zR(l){var c=Mc(this,l).delete(l);return this.size-=c?1:0,c}function HR(l){return Mc(this,l).get(l)}function VR(l){return Mc(this,l).has(l)}function qR(l,c){var d=Mc(this,l),v=d.size;return d.set(l,c),this.size+=d.size==v?0:1,this}us.prototype.clear=BR,us.prototype.delete=zR,us.prototype.get=HR,us.prototype.has=VR,us.prototype.set=qR;function ko(l){var c=-1,d=l==null?0:l.length;for(this.__data__=new us;++c<d;)this.add(l[c])}function WR(l){return this.__data__.set(l,u),this}function jR(l){return this.__data__.has(l)}ko.prototype.add=ko.prototype.push=WR,ko.prototype.has=jR;function ci(l){var c=this.__data__=new ls(l);this.size=c.size}function UR(){this.__data__=new ls,this.size=0}function QR(l){var c=this.__data__,d=c.delete(l);return this.size=c.size,d}function YR(l){return this.__data__.get(l)}function XR(l){return this.__data__.has(l)}function GR(l,c){var d=this.__data__;if(d instanceof ls){var v=d.__data__;if(!Cl||v.length<i-1)return v.push([l,c]),this.size=++d.size,this;d=this.__data__=new us(v)}return d.set(l,c),this.size=d.size,this}ci.prototype.clear=UR,ci.prototype.delete=QR,ci.prototype.get=YR,ci.prototype.has=XR,ci.prototype.set=GR;function Ky(l,c){var d=Ie(l),v=!d&&Ao(l),w=!d&&!v&&Qs(l),x=!d&&!v&&!w&&wa(l),D=d||v||w||x,P=D?dd(l.length,oR):[],z=P.length;for(var U in l)(c||ut.call(l,U))&&!(D&&(U=="length"||w&&(U=="offset"||U=="parent")||x&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||ds(U,z)))&&P.push(U);return P}function Jy(l){var c=l.length;return c?l[Md(0,c-1)]:t}function ZR(l,c){return Dc(Xn(l),So(c,0,l.length))}function KR(l){return Dc(Xn(l))}function wd(l,c,d){(d!==t&&!fi(l[c],d)||d===t&&!(c in l))&&cs(l,c,d)}function Ml(l,c,d){var v=l[c];(!(ut.call(l,c)&&fi(v,d))||d===t&&!(c in l))&&cs(l,c,d)}function yc(l,c){for(var d=l.length;d--;)if(fi(l[d][0],c))return d;return-1}function JR(l,c,d,v){return qs(l,function(w,x,D){c(v,w,d(w),D)}),v}function eb(l,c){return l&&Hi(c,un(c),l)}function e3(l,c){return l&&Hi(c,Zn(c),l)}function cs(l,c,d){c=="__proto__"&&hc?hc(l,c,{configurable:!0,enumerable:!0,value:d,writable:!0}):l[c]=d}function _d(l,c){for(var d=-1,v=c.length,w=q(v),x=l==null;++d<v;)w[d]=x?t:tp(l,c[d]);return w}function So(l,c,d){return l===l&&(d!==t&&(l=l<=d?l:d),c!==t&&(l=l>=c?l:c)),l}function Ir(l,c,d,v,w,x){var D,P=c&p,z=c&g,U=c&m;if(d&&(D=w?d(l,v,w,x):d(l)),D!==t)return D;if(!Rt(l))return l;var Q=Ie(l);if(Q){if(D=V3(l),!P)return Xn(l,D)}else{var G=En(l),ae=G==kn||G==$s;if(Qs(l))return kb(l,P);if(G==Gt||G==te||ae&&!w){if(D=z||ae?{}:qb(l),!P)return z?D3(l,e3(D,l)):M3(l,eb(D,l))}else{if(!Ot[G])return w?l:{};D=q3(l,G,P)}}x||(x=new ci);var ye=x.get(l);if(ye)return ye;x.set(l,D),yw(l)?l.forEach(function(Ee){D.add(Ir(Ee,c,d,Ee,l,x))}):mw(l)&&l.forEach(function(Ee,We){D.set(We,Ir(Ee,c,d,We,l,x))});var Te=U?z?Hd:zd:z?Zn:un,ze=Q?t:Te(l);return Mr(ze||l,function(Ee,We){ze&&(We=Ee,Ee=l[We]),Ml(D,We,Ir(Ee,c,d,We,l,x))}),D}function t3(l){var c=un(l);return function(d){return tb(d,l,c)}}function tb(l,c,d){var v=d.length;if(l==null)return!v;for(l=mt(l);v--;){var w=d[v],x=c[w],D=l[w];if(D===t&&!(w in l)||!x(D))return!1}return!0}function nb(l,c,d){if(typeof l!="function")throw new Dr(o);return Nl(function(){l.apply(t,d)},c)}function Dl(l,c,d,v){var w=-1,x=tc,D=!0,P=l.length,z=[],U=c.length;if(!P)return z;d&&(c=At(c,lr(d))),v?(x=ad,D=!1):c.length>=i&&(x=kl,D=!1,c=new ko(c));e:for(;++w<P;){var Q=l[w],G=d==null?Q:d(Q);if(Q=v||Q!==0?Q:0,D&&G===G){for(var ae=U;ae--;)if(c[ae]===G)continue e;z.push(Q)}else x(c,G,v)||z.push(Q)}return z}var qs=Ab(zi),rb=Ab(xd,!0);function n3(l,c){var d=!0;return qs(l,function(v,w,x){return d=!!c(v,w,x),d}),d}function bc(l,c,d){for(var v=-1,w=l.length;++v<w;){var x=l[v],D=c(x);if(D!=null&&(P===t?D===D&&!cr(D):d(D,P)))var P=D,z=x}return z}function r3(l,c,d,v){var w=l.length;for(d=$e(d),d<0&&(d=-d>w?0:w+d),v=v===t||v>w?w:$e(v),v<0&&(v+=w),v=d>v?0:ww(v);d<v;)l[d++]=c;return l}function ib(l,c){var d=[];return qs(l,function(v,w,x){c(v,w,x)&&d.push(v)}),d}function bn(l,c,d,v,w){var x=-1,D=l.length;for(d||(d=j3),w||(w=[]);++x<D;){var P=l[x];c>0&&d(P)?c>1?bn(P,c-1,d,v,w):zs(w,P):v||(w[w.length]=P)}return w}var Od=Mb(),sb=Mb(!0);function zi(l,c){return l&&Od(l,c,un)}function xd(l,c){return l&&sb(l,c,un)}function wc(l,c){return Bs(c,function(d){return ps(l[d])})}function Co(l,c){c=js(c,l);for(var d=0,v=c.length;l!=null&&d<v;)l=l[Vi(c[d++])];return d&&d==v?l:t}function ob(l,c,d){var v=c(l);return Ie(l)?v:zs(v,d(l))}function Nn(l){return l==null?l===t?Pi:yo:Oo&&Oo in mt(l)?B3(l):K3(l)}function kd(l,c){return l>c}function i3(l,c){return l!=null&&ut.call(l,c)}function s3(l,c){return l!=null&&c in mt(l)}function o3(l,c,d){return l>=Tn(c,d)&&l<Jt(c,d)}function Sd(l,c,d){for(var v=d?ad:tc,w=l[0].length,x=l.length,D=x,P=q(x),z=1/0,U=[];D--;){var Q=l[D];D&&c&&(Q=At(Q,lr(c))),z=Tn(Q.length,z),P[D]=!d&&(c||w>=120&&Q.length>=120)?new ko(D&&Q):t}Q=l[0];var G=-1,ae=P[0];e:for(;++G<w&&U.length<z;){var ye=Q[G],Te=c?c(ye):ye;if(ye=d||ye!==0?ye:0,!(ae?kl(ae,Te):v(U,Te,d))){for(D=x;--D;){var ze=P[D];if(!(ze?kl(ze,Te):v(l[D],Te,d)))continue e}ae&&ae.push(Te),U.push(ye)}}return U}function a3(l,c,d,v){return zi(l,function(w,x,D){c(v,d(w),x,D)}),v}function Rl(l,c,d){c=js(c,l),l=Qb(l,c);var v=l==null?l:l[Vi(Lr(c))];return v==null?t:ar(v,l,d)}function ab(l){return $t(l)&&Nn(l)==te}function l3(l){return $t(l)&&Nn(l)==ri}function u3(l){return $t(l)&&Nn(l)==Qn}function Il(l,c,d,v,w){return l===c?!0:l==null||c==null||!$t(l)&&!$t(c)?l!==l&&c!==c:c3(l,c,d,v,Il,w)}function c3(l,c,d,v,w,x){var D=Ie(l),P=Ie(c),z=D?Xe:En(l),U=P?Xe:En(c);z=z==te?Gt:z,U=U==te?Gt:U;var Q=z==Gt,G=U==Gt,ae=z==U;if(ae&&Qs(l)){if(!Qs(c))return!1;D=!0,Q=!1}if(ae&&!Q)return x||(x=new ci),D||wa(l)?zb(l,c,d,v,w,x):N3(l,c,z,d,v,w,x);if(!(d&y)){var ye=Q&&ut.call(l,"__wrapped__"),Te=G&&ut.call(c,"__wrapped__");if(ye||Te){var ze=ye?l.value():l,Ee=Te?c.value():c;return x||(x=new ci),w(ze,Ee,d,v,x)}}return ae?(x||(x=new ci),F3(l,c,d,v,w,x)):!1}function f3(l){return $t(l)&&En(l)==Bt}function Cd(l,c,d,v){var w=d.length,x=w,D=!v;if(l==null)return!x;for(l=mt(l);w--;){var P=d[w];if(D&&P[2]?P[1]!==l[P[0]]:!(P[0]in l))return!1}for(;++w<x;){P=d[w];var z=P[0],U=l[z],Q=P[1];if(D&&P[2]){if(U===t&&!(z in l))return!1}else{var G=new ci;if(v)var ae=v(U,Q,z,l,c,G);if(!(ae===t?Il(Q,U,y|b,v,G):ae))return!1}}return!0}function lb(l){if(!Rt(l)||Q3(l))return!1;var c=ps(l)?fR:we;return c.test(Eo(l))}function h3(l){return $t(l)&&Nn(l)==Ri}function d3(l){return $t(l)&&En(l)==Sn}function p3(l){return $t(l)&&Nc(l.length)&&!!kt[Nn(l)]}function ub(l){return typeof l=="function"?l:l==null?Kn:typeof l=="object"?Ie(l)?hb(l[0],l[1]):fb(l):Dw(l)}function Td(l){if(!$l(l))return vR(l);var c=[];for(var d in mt(l))ut.call(l,d)&&d!="constructor"&&c.push(d);return c}function g3(l){if(!Rt(l))return Z3(l);var c=$l(l),d=[];for(var v in l)v=="constructor"&&(c||!ut.call(l,v))||d.push(v);return d}function Ed(l,c){return l<c}function cb(l,c){var d=-1,v=Gn(l)?q(l.length):[];return qs(l,function(w,x,D){v[++d]=c(w,x,D)}),v}function fb(l){var c=qd(l);return c.length==1&&c[0][2]?jb(c[0][0],c[0][1]):function(d){return d===l||Cd(d,l,c)}}function hb(l,c){return jd(l)&&Wb(c)?jb(Vi(l),c):function(d){var v=tp(d,l);return v===t&&v===c?np(d,l):Il(c,v,y|b)}}function _c(l,c,d,v,w){l!==c&&Od(c,function(x,D){if(w||(w=new ci),Rt(x))m3(l,c,D,d,_c,v,w);else{var P=v?v(Qd(l,D),x,D+"",l,c,w):t;P===t&&(P=x),wd(l,D,P)}},Zn)}function m3(l,c,d,v,w,x,D){var P=Qd(l,d),z=Qd(c,d),U=D.get(z);if(U){wd(l,d,U);return}var Q=x?x(P,z,d+"",l,c,D):t,G=Q===t;if(G){var ae=Ie(z),ye=!ae&&Qs(z),Te=!ae&&!ye&&wa(z);Q=z,ae||ye||Te?Ie(P)?Q=P:zt(P)?Q=Xn(P):ye?(G=!1,Q=kb(z,!0)):Te?(G=!1,Q=Sb(z,!0)):Q=[]:Fl(z)||Ao(z)?(Q=P,Ao(P)?Q=_w(P):(!Rt(P)||ps(P))&&(Q=qb(z))):G=!1}G&&(D.set(z,Q),w(Q,z,v,x,D),D.delete(z)),wd(l,d,Q)}function db(l,c){var d=l.length;if(d)return c+=c<0?d:0,ds(c,d)?l[c]:t}function pb(l,c,d){c.length?c=At(c,function(x){return Ie(x)?function(D){return Co(D,x.length===1?x[0]:x)}:x}):c=[Kn];var v=-1;c=At(c,lr(Ce()));var w=cb(l,function(x,D,P){var z=At(c,function(U){return U(x)});return{criteria:z,index:++v,value:x}});return qD(w,function(x,D){return A3(x,D,d)})}function v3(l,c){return gb(l,c,function(d,v){return np(l,v)})}function gb(l,c,d){for(var v=-1,w=c.length,x={};++v<w;){var D=c[v],P=Co(l,D);d(P,D)&&Pl(x,js(D,l),P)}return x}function y3(l){return function(c){return Co(c,l)}}function Ad(l,c,d,v){var w=v?VD:ua,x=-1,D=c.length,P=l;for(l===c&&(c=Xn(c)),d&&(P=At(l,lr(d)));++x<D;)for(var z=0,U=c[x],Q=d?d(U):U;(z=w(P,Q,z,v))>-1;)P!==l&&fc.call(P,z,1),fc.call(l,z,1);return l}function mb(l,c){for(var d=l?c.length:0,v=d-1;d--;){var w=c[d];if(d==v||w!==x){var x=w;ds(w)?fc.call(l,w,1):Id(l,w)}}return l}function Md(l,c){return l+pc(Gy()*(c-l+1))}function b3(l,c,d,v){for(var w=-1,x=Jt(dc((c-l)/(d||1)),0),D=q(x);x--;)D[v?x:++w]=l,l+=d;return D}function Dd(l,c){var d="";if(!l||c<1||c>_t)return d;do c%2&&(d+=l),c=pc(c/2),c&&(l+=l);while(c);return d}function qe(l,c){return Yd(Ub(l,c,Kn),l+"")}function w3(l){return Jy(_a(l))}function _3(l,c){var d=_a(l);return Dc(d,So(c,0,d.length))}function Pl(l,c,d,v){if(!Rt(l))return l;c=js(c,l);for(var w=-1,x=c.length,D=x-1,P=l;P!=null&&++w<x;){var z=Vi(c[w]),U=d;if(z==="__proto__"||z==="constructor"||z==="prototype")return l;if(w!=D){var Q=P[z];U=v?v(Q,z,P):t,U===t&&(U=Rt(Q)?Q:ds(c[w+1])?[]:{})}Ml(P,z,U),P=P[z]}return l}var vb=gc?function(l,c){return gc.set(l,c),l}:Kn,O3=hc?function(l,c){return hc(l,"toString",{configurable:!0,enumerable:!1,value:ip(c),writable:!0})}:Kn;function x3(l){return Dc(_a(l))}function Pr(l,c,d){var v=-1,w=l.length;c<0&&(c=-c>w?0:w+c),d=d>w?w:d,d<0&&(d+=w),w=c>d?0:d-c>>>0,c>>>=0;for(var x=q(w);++v<w;)x[v]=l[v+c];return x}function k3(l,c){var d;return qs(l,function(v,w,x){return d=c(v,w,x),!d}),!!d}function Oc(l,c,d){var v=0,w=l==null?v:l.length;if(typeof c=="number"&&c===c&&w<=de){for(;v<w;){var x=v+w>>>1,D=l[x];D!==null&&!cr(D)&&(d?D<=c:D<c)?v=x+1:w=x}return w}return Rd(l,c,Kn,d)}function Rd(l,c,d,v){var w=0,x=l==null?0:l.length;if(x===0)return 0;c=d(c);for(var D=c!==c,P=c===null,z=cr(c),U=c===t;w<x;){var Q=pc((w+x)/2),G=d(l[Q]),ae=G!==t,ye=G===null,Te=G===G,ze=cr(G);if(D)var Ee=v||Te;else U?Ee=Te&&(v||ae):P?Ee=Te&&ae&&(v||!ye):z?Ee=Te&&ae&&!ye&&(v||!ze):ye||ze?Ee=!1:Ee=v?G<=c:G<c;Ee?w=Q+1:x=Q}return Tn(x,Ve)}function yb(l,c){for(var d=-1,v=l.length,w=0,x=[];++d<v;){var D=l[d],P=c?c(D):D;if(!d||!fi(P,z)){var z=P;x[w++]=D===0?0:D}}return x}function bb(l){return typeof l=="number"?l:cr(l)?Pt:+l}function ur(l){if(typeof l=="string")return l;if(Ie(l))return At(l,ur)+"";if(cr(l))return Zy?Zy.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}function Ws(l,c,d){var v=-1,w=tc,x=l.length,D=!0,P=[],z=P;if(d)D=!1,w=ad;else if(x>=i){var U=c?null:L3(l);if(U)return rc(U);D=!1,w=kl,z=new ko}else z=c?[]:P;e:for(;++v<x;){var Q=l[v],G=c?c(Q):Q;if(Q=d||Q!==0?Q:0,D&&G===G){for(var ae=z.length;ae--;)if(z[ae]===G)continue e;c&&z.push(G),P.push(Q)}else w(z,G,d)||(z!==P&&z.push(G),P.push(Q))}return P}function Id(l,c){return c=js(c,l),l=Qb(l,c),l==null||delete l[Vi(Lr(c))]}function wb(l,c,d,v){return Pl(l,c,d(Co(l,c)),v)}function xc(l,c,d,v){for(var w=l.length,x=v?w:-1;(v?x--:++x<w)&&c(l[x],x,l););return d?Pr(l,v?0:x,v?x+1:w):Pr(l,v?x+1:0,v?w:x)}function _b(l,c){var d=l;return d instanceof Ue&&(d=d.value()),ld(c,function(v,w){return w.func.apply(w.thisArg,zs([v],w.args))},d)}function Pd(l,c,d){var v=l.length;if(v<2)return v?Ws(l[0]):[];for(var w=-1,x=q(v);++w<v;)for(var D=l[w],P=-1;++P<v;)P!=w&&(x[w]=Dl(x[w]||D,l[P],c,d));return Ws(bn(x,1),c,d)}function Ob(l,c,d){for(var v=-1,w=l.length,x=c.length,D={};++v<w;){var P=v<x?c[v]:t;d(D,l[v],P)}return D}function Ld(l){return zt(l)?l:[]}function $d(l){return typeof l=="function"?l:Kn}function js(l,c){return Ie(l)?l:jd(l,c)?[l]:Zb(ot(l))}var S3=qe;function Us(l,c,d){var v=l.length;return d=d===t?v:d,!c&&d>=v?l:Pr(l,c,d)}var xb=hR||function(l){return yn.clearTimeout(l)};function kb(l,c){if(c)return l.slice();var d=l.length,v=jy?jy(d):new l.constructor(d);return l.copy(v),v}function Nd(l){var c=new l.constructor(l.byteLength);return new uc(c).set(new uc(l)),c}function C3(l,c){var d=c?Nd(l.buffer):l.buffer;return new l.constructor(d,l.byteOffset,l.byteLength)}function T3(l){var c=new l.constructor(l.source,bo.exec(l));return c.lastIndex=l.lastIndex,c}function E3(l){return Al?mt(Al.call(l)):{}}function Sb(l,c){var d=c?Nd(l.buffer):l.buffer;return new l.constructor(d,l.byteOffset,l.length)}function Cb(l,c){if(l!==c){var d=l!==t,v=l===null,w=l===l,x=cr(l),D=c!==t,P=c===null,z=c===c,U=cr(c);if(!P&&!U&&!x&&l>c||x&&D&&z&&!P&&!U||v&&D&&z||!d&&z||!w)return 1;if(!v&&!x&&!U&&l<c||U&&d&&w&&!v&&!x||P&&d&&w||!D&&w||!z)return-1}return 0}function A3(l,c,d){for(var v=-1,w=l.criteria,x=c.criteria,D=w.length,P=d.length;++v<D;){var z=Cb(w[v],x[v]);if(z){if(v>=P)return z;var U=d[v];return z*(U=="desc"?-1:1)}}return l.index-c.index}function Tb(l,c,d,v){for(var w=-1,x=l.length,D=d.length,P=-1,z=c.length,U=Jt(x-D,0),Q=q(z+U),G=!v;++P<z;)Q[P]=c[P];for(;++w<D;)(G||w<x)&&(Q[d[w]]=l[w]);for(;U--;)Q[P++]=l[w++];return Q}function Eb(l,c,d,v){for(var w=-1,x=l.length,D=-1,P=d.length,z=-1,U=c.length,Q=Jt(x-P,0),G=q(Q+U),ae=!v;++w<Q;)G[w]=l[w];for(var ye=w;++z<U;)G[ye+z]=c[z];for(;++D<P;)(ae||w<x)&&(G[ye+d[D]]=l[w++]);return G}function Xn(l,c){var d=-1,v=l.length;for(c||(c=q(v));++d<v;)c[d]=l[d];return c}function Hi(l,c,d,v){var w=!d;d||(d={});for(var x=-1,D=c.length;++x<D;){var P=c[x],z=v?v(d[P],l[P],P,d,l):t;z===t&&(z=l[P]),w?cs(d,P,z):Ml(d,P,z)}return d}function M3(l,c){return Hi(l,Wd(l),c)}function D3(l,c){return Hi(l,Hb(l),c)}function kc(l,c){return function(d,v){var w=Ie(d)?$D:JR,x=c?c():{};return w(d,l,Ce(v,2),x)}}function va(l){return qe(function(c,d){var v=-1,w=d.length,x=w>1?d[w-1]:t,D=w>2?d[2]:t;for(x=l.length>3&&typeof x=="function"?(w--,x):t,D&&Fn(d[0],d[1],D)&&(x=w<3?t:x,w=1),c=mt(c);++v<w;){var P=d[v];P&&l(c,P,v,x)}return c})}function Ab(l,c){return function(d,v){if(d==null)return d;if(!Gn(d))return l(d,v);for(var w=d.length,x=c?w:-1,D=mt(d);(c?x--:++x<w)&&v(D[x],x,D)!==!1;);return d}}function Mb(l){return function(c,d,v){for(var w=-1,x=mt(c),D=v(c),P=D.length;P--;){var z=D[l?P:++w];if(d(x[z],z,x)===!1)break}return c}}function R3(l,c,d){var v=c&O,w=Ll(l);function x(){var D=this&&this!==yn&&this instanceof x?w:l;return D.apply(v?d:this,arguments)}return x}function Db(l){return function(c){c=ot(c);var d=ca(c)?ui(c):t,v=d?d[0]:c.charAt(0),w=d?Us(d,1).join(""):c.slice(1);return v[l]()+w}}function ya(l){return function(c){return ld(Aw(Ew(c).replace(OD,"")),l,"")}}function Ll(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var d=ma(l.prototype),v=l.apply(d,c);return Rt(v)?v:d}}function I3(l,c,d){var v=Ll(l);function w(){for(var x=arguments.length,D=q(x),P=x,z=ba(w);P--;)D[P]=arguments[P];var U=x<3&&D[0]!==z&&D[x-1]!==z?[]:Hs(D,z);if(x-=U.length,x<d)return $b(l,c,Sc,w.placeholder,t,D,U,t,t,d-x);var Q=this&&this!==yn&&this instanceof w?v:l;return ar(Q,this,D)}return w}function Rb(l){return function(c,d,v){var w=mt(c);if(!Gn(c)){var x=Ce(d,3);c=un(c),d=function(P){return x(w[P],P,w)}}var D=l(c,d,v);return D>-1?w[x?c[D]:D]:t}}function Ib(l){return hs(function(c){var d=c.length,v=d,w=Rr.prototype.thru;for(l&&c.reverse();v--;){var x=c[v];if(typeof x!="function")throw new Dr(o);if(w&&!D&&Ac(x)=="wrapper")var D=new Rr([],!0)}for(v=D?v:d;++v<d;){x=c[v];var P=Ac(x),z=P=="wrapper"?Vd(x):t;z&&Ud(z[0])&&z[1]==(L|T|R|V)&&!z[4].length&&z[9]==1?D=D[Ac(z[0])].apply(D,z[3]):D=x.length==1&&Ud(x)?D[P]():D.thru(x)}return function(){var U=arguments,Q=U[0];if(D&&U.length==1&&Ie(Q))return D.plant(Q).value();for(var G=0,ae=d?c[G].apply(this,U):Q;++G<d;)ae=c[G].call(this,ae);return ae}})}function Sc(l,c,d,v,w,x,D,P,z,U){var Q=c&L,G=c&O,ae=c&C,ye=c&(T|S),Te=c&X,ze=ae?t:Ll(l);function Ee(){for(var We=arguments.length,Qe=q(We),fr=We;fr--;)Qe[fr]=arguments[fr];if(ye)var Bn=ba(Ee),hr=jD(Qe,Bn);if(v&&(Qe=Tb(Qe,v,w,ye)),x&&(Qe=Eb(Qe,x,D,ye)),We-=hr,ye&&We<U){var Ht=Hs(Qe,Bn);return $b(l,c,Sc,Ee.placeholder,d,Qe,Ht,P,z,U-We)}var hi=G?d:this,ms=ae?hi[l]:l;return We=Qe.length,P?Qe=J3(Qe,P):Te&&We>1&&Qe.reverse(),Q&&z<We&&(Qe.length=z),this&&this!==yn&&this instanceof Ee&&(ms=ze||Ll(ms)),ms.apply(hi,Qe)}return Ee}function Pb(l,c){return function(d,v){return a3(d,l,c(v),{})}}function Cc(l,c){return function(d,v){var w;if(d===t&&v===t)return c;if(d!==t&&(w=d),v!==t){if(w===t)return v;typeof d=="string"||typeof v=="string"?(d=ur(d),v=ur(v)):(d=bb(d),v=bb(v)),w=l(d,v)}return w}}function Fd(l){return hs(function(c){return c=At(c,lr(Ce())),qe(function(d){var v=this;return l(c,function(w){return ar(w,v,d)})})})}function Tc(l,c){c=c===t?" ":ur(c);var d=c.length;if(d<2)return d?Dd(c,l):c;var v=Dd(c,dc(l/fa(c)));return ca(c)?Us(ui(v),0,l).join(""):v.slice(0,l)}function P3(l,c,d,v){var w=c&O,x=Ll(l);function D(){for(var P=-1,z=arguments.length,U=-1,Q=v.length,G=q(Q+z),ae=this&&this!==yn&&this instanceof D?x:l;++U<Q;)G[U]=v[U];for(;z--;)G[U++]=arguments[++P];return ar(ae,w?d:this,G)}return D}function Lb(l){return function(c,d,v){return v&&typeof v!="number"&&Fn(c,d,v)&&(d=v=t),c=gs(c),d===t?(d=c,c=0):d=gs(d),v=v===t?c<d?1:-1:gs(v),b3(c,d,v,l)}}function Ec(l){return function(c,d){return typeof c=="string"&&typeof d=="string"||(c=$r(c),d=$r(d)),l(c,d)}}function $b(l,c,d,v,w,x,D,P,z,U){var Q=c&T,G=Q?D:t,ae=Q?t:D,ye=Q?x:t,Te=Q?t:x;c|=Q?R:$,c&=~(Q?$:R),c&M||(c&=-4);var ze=[l,c,w,ye,G,Te,ae,P,z,U],Ee=d.apply(t,ze);return Ud(l)&&Yb(Ee,ze),Ee.placeholder=v,Xb(Ee,l,c)}function Bd(l){var c=Kt[l];return function(d,v){if(d=$r(d),v=v==null?0:Tn($e(v),292),v&&Xy(d)){var w=(ot(d)+"e").split("e"),x=c(w[0]+"e"+(+w[1]+v));return w=(ot(x)+"e").split("e"),+(w[0]+"e"+(+w[1]-v))}return c(d)}}var L3=pa&&1/rc(new pa([,-0]))[1]==et?function(l){return new pa(l)}:ap;function Nb(l){return function(c){var d=En(c);return d==Bt?gd(c):d==Sn?KD(c):WD(c,l(c))}}function fs(l,c,d,v,w,x,D,P){var z=c&C;if(!z&&typeof l!="function")throw new Dr(o);var U=v?v.length:0;if(U||(c&=-97,v=w=t),D=D===t?D:Jt($e(D),0),P=P===t?P:$e(P),U-=w?w.length:0,c&$){var Q=v,G=w;v=w=t}var ae=z?t:Vd(l),ye=[l,c,d,v,w,Q,G,x,D,P];if(ae&&G3(ye,ae),l=ye[0],c=ye[1],d=ye[2],v=ye[3],w=ye[4],P=ye[9]=ye[9]===t?z?0:l.length:Jt(ye[9]-U,0),!P&&c&(T|S)&&(c&=-25),!c||c==O)var Te=R3(l,c,d);else c==T||c==S?Te=I3(l,c,P):(c==R||c==(O|R))&&!w.length?Te=P3(l,c,d,v):Te=Sc.apply(t,ye);var ze=ae?vb:Yb;return Xb(ze(Te,ye),l,c)}function Fb(l,c,d,v){return l===t||fi(l,da[d])&&!ut.call(v,d)?c:l}function Bb(l,c,d,v,w,x){return Rt(l)&&Rt(c)&&(x.set(c,l),_c(l,c,t,Bb,x),x.delete(c)),l}function $3(l){return Fl(l)?t:l}function zb(l,c,d,v,w,x){var D=d&y,P=l.length,z=c.length;if(P!=z&&!(D&&z>P))return!1;var U=x.get(l),Q=x.get(c);if(U&&Q)return U==c&&Q==l;var G=-1,ae=!0,ye=d&b?new ko:t;for(x.set(l,c),x.set(c,l);++G<P;){var Te=l[G],ze=c[G];if(v)var Ee=D?v(ze,Te,G,c,l,x):v(Te,ze,G,l,c,x);if(Ee!==t){if(Ee)continue;ae=!1;break}if(ye){if(!ud(c,function(We,Qe){if(!kl(ye,Qe)&&(Te===We||w(Te,We,d,v,x)))return ye.push(Qe)})){ae=!1;break}}else if(!(Te===ze||w(Te,ze,d,v,x))){ae=!1;break}}return x.delete(l),x.delete(c),ae}function N3(l,c,d,v,w,x,D){switch(d){case ii:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case ri:return!(l.byteLength!=c.byteLength||!x(new uc(l),new uc(c)));case mn:case Qn:case Cr:return fi(+l,+c);case Mi:return l.name==c.name&&l.message==c.message;case Ri:case Ii:return l==c+"";case Bt:var P=gd;case Sn:var z=v&y;if(P||(P=rc),l.size!=c.size&&!z)return!1;var U=D.get(l);if(U)return U==c;v|=b,D.set(l,c);var Q=zb(P(l),P(c),v,w,x,D);return D.delete(l),Q;case Tr:if(Al)return Al.call(l)==Al.call(c)}return!1}function F3(l,c,d,v,w,x){var D=d&y,P=zd(l),z=P.length,U=zd(c),Q=U.length;if(z!=Q&&!D)return!1;for(var G=z;G--;){var ae=P[G];if(!(D?ae in c:ut.call(c,ae)))return!1}var ye=x.get(l),Te=x.get(c);if(ye&&Te)return ye==c&&Te==l;var ze=!0;x.set(l,c),x.set(c,l);for(var Ee=D;++G<z;){ae=P[G];var We=l[ae],Qe=c[ae];if(v)var fr=D?v(Qe,We,ae,c,l,x):v(We,Qe,ae,l,c,x);if(!(fr===t?We===Qe||w(We,Qe,d,v,x):fr)){ze=!1;break}Ee||(Ee=ae=="constructor")}if(ze&&!Ee){var Bn=l.constructor,hr=c.constructor;Bn!=hr&&"constructor"in l&&"constructor"in c&&!(typeof Bn=="function"&&Bn instanceof Bn&&typeof hr=="function"&&hr instanceof hr)&&(ze=!1)}return x.delete(l),x.delete(c),ze}function hs(l){return Yd(Ub(l,t,tw),l+"")}function zd(l){return ob(l,un,Wd)}function Hd(l){return ob(l,Zn,Hb)}var Vd=gc?function(l){return gc.get(l)}:ap;function Ac(l){for(var c=l.name+"",d=ga[c],v=ut.call(ga,c)?d.length:0;v--;){var w=d[v],x=w.func;if(x==null||x==l)return w.name}return c}function ba(l){var c=ut.call(_,"placeholder")?_:l;return c.placeholder}function Ce(){var l=_.iteratee||sp;return l=l===sp?ub:l,arguments.length?l(arguments[0],arguments[1]):l}function Mc(l,c){var d=l.__data__;return U3(c)?d[typeof c=="string"?"string":"hash"]:d.map}function qd(l){for(var c=un(l),d=c.length;d--;){var v=c[d],w=l[v];c[d]=[v,w,Wb(w)]}return c}function To(l,c){var d=XD(l,c);return lb(d)?d:t}function B3(l){var c=ut.call(l,Oo),d=l[Oo];try{l[Oo]=t;var v=!0}catch{}var w=ac.call(l);return v&&(c?l[Oo]=d:delete l[Oo]),w}var Wd=vd?function(l){return l==null?[]:(l=mt(l),Bs(vd(l),function(c){return Qy.call(l,c)}))}:lp,Hb=vd?function(l){for(var c=[];l;)zs(c,Wd(l)),l=cc(l);return c}:lp,En=Nn;(yd&&En(new yd(new ArrayBuffer(1)))!=ii||Cl&&En(new Cl)!=Bt||bd&&En(bd.resolve())!=Di||pa&&En(new pa)!=Sn||Tl&&En(new Tl)!=vn)&&(En=function(l){var c=Nn(l),d=c==Gt?l.constructor:t,v=d?Eo(d):"";if(v)switch(v){case _R:return ii;case OR:return Bt;case xR:return Di;case kR:return Sn;case SR:return vn}return c});function z3(l,c,d){for(var v=-1,w=d.length;++v<w;){var x=d[v],D=x.size;switch(x.type){case"drop":l+=D;break;case"dropRight":c-=D;break;case"take":c=Tn(c,l+D);break;case"takeRight":l=Jt(l,c-D);break}}return{start:l,end:c}}function H3(l){var c=l.match($n);return c?c[1].split(Zt):[]}function Vb(l,c,d){c=js(c,l);for(var v=-1,w=c.length,x=!1;++v<w;){var D=Vi(c[v]);if(!(x=l!=null&&d(l,D)))break;l=l[D]}return x||++v!=w?x:(w=l==null?0:l.length,!!w&&Nc(w)&&ds(D,w)&&(Ie(l)||Ao(l)))}function V3(l){var c=l.length,d=new l.constructor(c);return c&&typeof l[0]=="string"&&ut.call(l,"index")&&(d.index=l.index,d.input=l.input),d}function qb(l){return typeof l.constructor=="function"&&!$l(l)?ma(cc(l)):{}}function q3(l,c,d){var v=l.constructor;switch(c){case ri:return Nd(l);case mn:case Qn:return new v(+l);case ii:return C3(l,d);case os:case as:case Ns:case si:case $i:case Ln:case Ge:case oi:case ai:return Sb(l,d);case Bt:return new v;case Cr:case Ii:return new v(l);case Ri:return T3(l);case Sn:return new v;case Tr:return E3(l)}}function W3(l,c){var d=c.length;if(!d)return l;var v=d-1;return c[v]=(d>1?"& ":"")+c[v],c=c.join(d>2?", ":" "),l.replace(Je,`{
/* [wrapped with `+c+`] */
`)}function j3(l){return Ie(l)||Ao(l)||!!(Yy&&l&&l[Yy])}function ds(l,c){var d=typeof l;return c=c??_t,!!c&&(d=="number"||d!="symbol"&&Z.test(l))&&l>-1&&l%1==0&&l<c}function Fn(l,c,d){if(!Rt(d))return!1;var v=typeof c;return(v=="number"?Gn(d)&&ds(c,d.length):v=="string"&&c in d)?fi(d[c],l):!1}function jd(l,c){if(Ie(l))return!1;var d=typeof l;return d=="number"||d=="symbol"||d=="boolean"||l==null||cr(l)?!0:oe.test(l)||!ee.test(l)||c!=null&&l in mt(c)}function U3(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Ud(l){var c=Ac(l),d=_[c];if(typeof d!="function"||!(c in Ue.prototype))return!1;if(l===d)return!0;var v=Vd(d);return!!v&&l===v[0]}function Q3(l){return!!Wy&&Wy in l}var Y3=sc?ps:up;function $l(l){var c=l&&l.constructor,d=typeof c=="function"&&c.prototype||da;return l===d}function Wb(l){return l===l&&!Rt(l)}function jb(l,c){return function(d){return d==null?!1:d[l]===c&&(c!==t||l in mt(d))}}function X3(l){var c=Lc(l,function(v){return d.size===f&&d.clear(),v}),d=c.cache;return c}function G3(l,c){var d=l[1],v=c[1],w=d|v,x=w<(O|C|L),D=v==L&&d==T||v==L&&d==V&&l[7].length<=c[8]||v==(L|V)&&c[7].length<=c[8]&&d==T;if(!(x||D))return l;v&O&&(l[2]=c[2],w|=d&O?0:M);var P=c[3];if(P){var z=l[3];l[3]=z?Tb(z,P,c[4]):P,l[4]=z?Hs(l[3],h):c[4]}return P=c[5],P&&(z=l[5],l[5]=z?Eb(z,P,c[6]):P,l[6]=z?Hs(l[5],h):c[6]),P=c[7],P&&(l[7]=P),v&L&&(l[8]=l[8]==null?c[8]:Tn(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=w,l}function Z3(l){var c=[];if(l!=null)for(var d in mt(l))c.push(d);return c}function K3(l){return ac.call(l)}function Ub(l,c,d){return c=Jt(c===t?l.length-1:c,0),function(){for(var v=arguments,w=-1,x=Jt(v.length-c,0),D=q(x);++w<x;)D[w]=v[c+w];w=-1;for(var P=q(c+1);++w<c;)P[w]=v[w];return P[c]=d(D),ar(l,this,P)}}function Qb(l,c){return c.length<2?l:Co(l,Pr(c,0,-1))}function J3(l,c){for(var d=l.length,v=Tn(c.length,d),w=Xn(l);v--;){var x=c[v];l[v]=ds(x,d)?w[x]:t}return l}function Qd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var Yb=Gb(vb),Nl=pR||function(l,c){return yn.setTimeout(l,c)},Yd=Gb(O3);function Xb(l,c,d){var v=c+"";return Yd(l,W3(v,eI(H3(v),d)))}function Gb(l){var c=0,d=0;return function(){var v=yR(),w=re-(v-d);if(d=v,w>0){if(++c>=Y)return arguments[0]}else c=0;return l.apply(t,arguments)}}function Dc(l,c){var d=-1,v=l.length,w=v-1;for(c=c===t?v:c;++d<c;){var x=Md(d,w),D=l[x];l[x]=l[d],l[d]=D}return l.length=c,l}var Zb=X3(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Me,function(d,v,w,x){c.push(w?x.replace(oa,"$1"):v||d)}),c});function Vi(l){if(typeof l=="string"||cr(l))return l;var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}function Eo(l){if(l!=null){try{return oc.call(l)}catch{}try{return l+""}catch{}}return""}function eI(l,c){return Mr(pe,function(d){var v="_."+d[0];c&d[1]&&!tc(l,v)&&l.push(v)}),l.sort()}function Kb(l){if(l instanceof Ue)return l.clone();var c=new Rr(l.__wrapped__,l.__chain__);return c.__actions__=Xn(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function tI(l,c,d){(d?Fn(l,c,d):c===t)?c=1:c=Jt($e(c),0);var v=l==null?0:l.length;if(!v||c<1)return[];for(var w=0,x=0,D=q(dc(v/c));w<v;)D[x++]=Pr(l,w,w+=c);return D}function nI(l){for(var c=-1,d=l==null?0:l.length,v=0,w=[];++c<d;){var x=l[c];x&&(w[v++]=x)}return w}function rI(){var l=arguments.length;if(!l)return[];for(var c=q(l-1),d=arguments[0],v=l;v--;)c[v-1]=arguments[v];return zs(Ie(d)?Xn(d):[d],bn(c,1))}var iI=qe(function(l,c){return zt(l)?Dl(l,bn(c,1,zt,!0)):[]}),sI=qe(function(l,c){var d=Lr(c);return zt(d)&&(d=t),zt(l)?Dl(l,bn(c,1,zt,!0),Ce(d,2)):[]}),oI=qe(function(l,c){var d=Lr(c);return zt(d)&&(d=t),zt(l)?Dl(l,bn(c,1,zt,!0),t,d):[]});function aI(l,c,d){var v=l==null?0:l.length;return v?(c=d||c===t?1:$e(c),Pr(l,c<0?0:c,v)):[]}function lI(l,c,d){var v=l==null?0:l.length;return v?(c=d||c===t?1:$e(c),c=v-c,Pr(l,0,c<0?0:c)):[]}function uI(l,c){return l&&l.length?xc(l,Ce(c,3),!0,!0):[]}function cI(l,c){return l&&l.length?xc(l,Ce(c,3),!0):[]}function fI(l,c,d,v){var w=l==null?0:l.length;return w?(d&&typeof d!="number"&&Fn(l,c,d)&&(d=0,v=w),r3(l,c,d,v)):[]}function Jb(l,c,d){var v=l==null?0:l.length;if(!v)return-1;var w=d==null?0:$e(d);return w<0&&(w=Jt(v+w,0)),nc(l,Ce(c,3),w)}function ew(l,c,d){var v=l==null?0:l.length;if(!v)return-1;var w=v-1;return d!==t&&(w=$e(d),w=d<0?Jt(v+w,0):Tn(w,v-1)),nc(l,Ce(c,3),w,!0)}function tw(l){var c=l==null?0:l.length;return c?bn(l,1):[]}function hI(l){var c=l==null?0:l.length;return c?bn(l,et):[]}function dI(l,c){var d=l==null?0:l.length;return d?(c=c===t?1:$e(c),bn(l,c)):[]}function pI(l){for(var c=-1,d=l==null?0:l.length,v={};++c<d;){var w=l[c];v[w[0]]=w[1]}return v}function nw(l){return l&&l.length?l[0]:t}function gI(l,c,d){var v=l==null?0:l.length;if(!v)return-1;var w=d==null?0:$e(d);return w<0&&(w=Jt(v+w,0)),ua(l,c,w)}function mI(l){var c=l==null?0:l.length;return c?Pr(l,0,-1):[]}var vI=qe(function(l){var c=At(l,Ld);return c.length&&c[0]===l[0]?Sd(c):[]}),yI=qe(function(l){var c=Lr(l),d=At(l,Ld);return c===Lr(d)?c=t:d.pop(),d.length&&d[0]===l[0]?Sd(d,Ce(c,2)):[]}),bI=qe(function(l){var c=Lr(l),d=At(l,Ld);return c=typeof c=="function"?c:t,c&&d.pop(),d.length&&d[0]===l[0]?Sd(d,t,c):[]});function wI(l,c){return l==null?"":mR.call(l,c)}function Lr(l){var c=l==null?0:l.length;return c?l[c-1]:t}function _I(l,c,d){var v=l==null?0:l.length;if(!v)return-1;var w=v;return d!==t&&(w=$e(d),w=w<0?Jt(v+w,0):Tn(w,v-1)),c===c?eR(l,c,w):nc(l,$y,w,!0)}function OI(l,c){return l&&l.length?db(l,$e(c)):t}var xI=qe(rw);function rw(l,c){return l&&l.length&&c&&c.length?Ad(l,c):l}function kI(l,c,d){return l&&l.length&&c&&c.length?Ad(l,c,Ce(d,2)):l}function SI(l,c,d){return l&&l.length&&c&&c.length?Ad(l,c,t,d):l}var CI=hs(function(l,c){var d=l==null?0:l.length,v=_d(l,c);return mb(l,At(c,function(w){return ds(w,d)?+w:w}).sort(Cb)),v});function TI(l,c){var d=[];if(!(l&&l.length))return d;var v=-1,w=[],x=l.length;for(c=Ce(c,3);++v<x;){var D=l[v];c(D,v,l)&&(d.push(D),w.push(v))}return mb(l,w),d}function Xd(l){return l==null?l:wR.call(l)}function EI(l,c,d){var v=l==null?0:l.length;return v?(d&&typeof d!="number"&&Fn(l,c,d)?(c=0,d=v):(c=c==null?0:$e(c),d=d===t?v:$e(d)),Pr(l,c,d)):[]}function AI(l,c){return Oc(l,c)}function MI(l,c,d){return Rd(l,c,Ce(d,2))}function DI(l,c){var d=l==null?0:l.length;if(d){var v=Oc(l,c);if(v<d&&fi(l[v],c))return v}return-1}function RI(l,c){return Oc(l,c,!0)}function II(l,c,d){return Rd(l,c,Ce(d,2),!0)}function PI(l,c){var d=l==null?0:l.length;if(d){var v=Oc(l,c,!0)-1;if(fi(l[v],c))return v}return-1}function LI(l){return l&&l.length?yb(l):[]}function $I(l,c){return l&&l.length?yb(l,Ce(c,2)):[]}function NI(l){var c=l==null?0:l.length;return c?Pr(l,1,c):[]}function FI(l,c,d){return l&&l.length?(c=d||c===t?1:$e(c),Pr(l,0,c<0?0:c)):[]}function BI(l,c,d){var v=l==null?0:l.length;return v?(c=d||c===t?1:$e(c),c=v-c,Pr(l,c<0?0:c,v)):[]}function zI(l,c){return l&&l.length?xc(l,Ce(c,3),!1,!0):[]}function HI(l,c){return l&&l.length?xc(l,Ce(c,3)):[]}var VI=qe(function(l){return Ws(bn(l,1,zt,!0))}),qI=qe(function(l){var c=Lr(l);return zt(c)&&(c=t),Ws(bn(l,1,zt,!0),Ce(c,2))}),WI=qe(function(l){var c=Lr(l);return c=typeof c=="function"?c:t,Ws(bn(l,1,zt,!0),t,c)});function jI(l){return l&&l.length?Ws(l):[]}function UI(l,c){return l&&l.length?Ws(l,Ce(c,2)):[]}function QI(l,c){return c=typeof c=="function"?c:t,l&&l.length?Ws(l,t,c):[]}function Gd(l){if(!(l&&l.length))return[];var c=0;return l=Bs(l,function(d){if(zt(d))return c=Jt(d.length,c),!0}),dd(c,function(d){return At(l,cd(d))})}function iw(l,c){if(!(l&&l.length))return[];var d=Gd(l);return c==null?d:At(d,function(v){return ar(c,t,v)})}var YI=qe(function(l,c){return zt(l)?Dl(l,c):[]}),XI=qe(function(l){return Pd(Bs(l,zt))}),GI=qe(function(l){var c=Lr(l);return zt(c)&&(c=t),Pd(Bs(l,zt),Ce(c,2))}),ZI=qe(function(l){var c=Lr(l);return c=typeof c=="function"?c:t,Pd(Bs(l,zt),t,c)}),KI=qe(Gd);function JI(l,c){return Ob(l||[],c||[],Ml)}function eP(l,c){return Ob(l||[],c||[],Pl)}var tP=qe(function(l){var c=l.length,d=c>1?l[c-1]:t;return d=typeof d=="function"?(l.pop(),d):t,iw(l,d)});function sw(l){var c=_(l);return c.__chain__=!0,c}function nP(l,c){return c(l),l}function Rc(l,c){return c(l)}var rP=hs(function(l){var c=l.length,d=c?l[0]:0,v=this.__wrapped__,w=function(x){return _d(x,l)};return c>1||this.__actions__.length||!(v instanceof Ue)||!ds(d)?this.thru(w):(v=v.slice(d,+d+(c?1:0)),v.__actions__.push({func:Rc,args:[w],thisArg:t}),new Rr(v,this.__chain__).thru(function(x){return c&&!x.length&&x.push(t),x}))});function iP(){return sw(this)}function sP(){return new Rr(this.value(),this.__chain__)}function oP(){this.__values__===t&&(this.__values__=bw(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function aP(){return this}function lP(l){for(var c,d=this;d instanceof vc;){var v=Kb(d);v.__index__=0,v.__values__=t,c?w.__wrapped__=v:c=v;var w=v;d=d.__wrapped__}return w.__wrapped__=l,c}function uP(){var l=this.__wrapped__;if(l instanceof Ue){var c=l;return this.__actions__.length&&(c=new Ue(this)),c=c.reverse(),c.__actions__.push({func:Rc,args:[Xd],thisArg:t}),new Rr(c,this.__chain__)}return this.thru(Xd)}function cP(){return _b(this.__wrapped__,this.__actions__)}var fP=kc(function(l,c,d){ut.call(l,d)?++l[d]:cs(l,d,1)});function hP(l,c,d){var v=Ie(l)?Py:n3;return d&&Fn(l,c,d)&&(c=t),v(l,Ce(c,3))}function dP(l,c){var d=Ie(l)?Bs:ib;return d(l,Ce(c,3))}var pP=Rb(Jb),gP=Rb(ew);function mP(l,c){return bn(Ic(l,c),1)}function vP(l,c){return bn(Ic(l,c),et)}function yP(l,c,d){return d=d===t?1:$e(d),bn(Ic(l,c),d)}function ow(l,c){var d=Ie(l)?Mr:qs;return d(l,Ce(c,3))}function aw(l,c){var d=Ie(l)?ND:rb;return d(l,Ce(c,3))}var bP=kc(function(l,c,d){ut.call(l,d)?l[d].push(c):cs(l,d,[c])});function wP(l,c,d,v){l=Gn(l)?l:_a(l),d=d&&!v?$e(d):0;var w=l.length;return d<0&&(d=Jt(w+d,0)),Fc(l)?d<=w&&l.indexOf(c,d)>-1:!!w&&ua(l,c,d)>-1}var _P=qe(function(l,c,d){var v=-1,w=typeof c=="function",x=Gn(l)?q(l.length):[];return qs(l,function(D){x[++v]=w?ar(c,D,d):Rl(D,c,d)}),x}),OP=kc(function(l,c,d){cs(l,d,c)});function Ic(l,c){var d=Ie(l)?At:cb;return d(l,Ce(c,3))}function xP(l,c,d,v){return l==null?[]:(Ie(c)||(c=c==null?[]:[c]),d=v?t:d,Ie(d)||(d=d==null?[]:[d]),pb(l,c,d))}var kP=kc(function(l,c,d){l[d?0:1].push(c)},function(){return[[],[]]});function SP(l,c,d){var v=Ie(l)?ld:Fy,w=arguments.length<3;return v(l,Ce(c,4),d,w,qs)}function CP(l,c,d){var v=Ie(l)?FD:Fy,w=arguments.length<3;return v(l,Ce(c,4),d,w,rb)}function TP(l,c){var d=Ie(l)?Bs:ib;return d(l,$c(Ce(c,3)))}function EP(l){var c=Ie(l)?Jy:w3;return c(l)}function AP(l,c,d){(d?Fn(l,c,d):c===t)?c=1:c=$e(c);var v=Ie(l)?ZR:_3;return v(l,c)}function MP(l){var c=Ie(l)?KR:x3;return c(l)}function DP(l){if(l==null)return 0;if(Gn(l))return Fc(l)?fa(l):l.length;var c=En(l);return c==Bt||c==Sn?l.size:Td(l).length}function RP(l,c,d){var v=Ie(l)?ud:k3;return d&&Fn(l,c,d)&&(c=t),v(l,Ce(c,3))}var IP=qe(function(l,c){if(l==null)return[];var d=c.length;return d>1&&Fn(l,c[0],c[1])?c=[]:d>2&&Fn(c[0],c[1],c[2])&&(c=[c[0]]),pb(l,bn(c,1),[])}),Pc=dR||function(){return yn.Date.now()};function PP(l,c){if(typeof c!="function")throw new Dr(o);return l=$e(l),function(){if(--l<1)return c.apply(this,arguments)}}function lw(l,c,d){return c=d?t:c,c=l&&c==null?l.length:c,fs(l,L,t,t,t,t,c)}function uw(l,c){var d;if(typeof c!="function")throw new Dr(o);return l=$e(l),function(){return--l>0&&(d=c.apply(this,arguments)),l<=1&&(c=t),d}}var Zd=qe(function(l,c,d){var v=O;if(d.length){var w=Hs(d,ba(Zd));v|=R}return fs(l,v,c,d,w)}),cw=qe(function(l,c,d){var v=O|C;if(d.length){var w=Hs(d,ba(cw));v|=R}return fs(c,v,l,d,w)});function fw(l,c,d){c=d?t:c;var v=fs(l,T,t,t,t,t,t,c);return v.placeholder=fw.placeholder,v}function hw(l,c,d){c=d?t:c;var v=fs(l,S,t,t,t,t,t,c);return v.placeholder=hw.placeholder,v}function dw(l,c,d){var v,w,x,D,P,z,U=0,Q=!1,G=!1,ae=!0;if(typeof l!="function")throw new Dr(o);c=$r(c)||0,Rt(d)&&(Q=!!d.leading,G="maxWait"in d,x=G?Jt($r(d.maxWait)||0,c):x,ae="trailing"in d?!!d.trailing:ae);function ye(Ht){var hi=v,ms=w;return v=w=t,U=Ht,D=l.apply(ms,hi),D}function Te(Ht){return U=Ht,P=Nl(We,c),Q?ye(Ht):D}function ze(Ht){var hi=Ht-z,ms=Ht-U,Rw=c-hi;return G?Tn(Rw,x-ms):Rw}function Ee(Ht){var hi=Ht-z,ms=Ht-U;return z===t||hi>=c||hi<0||G&&ms>=x}function We(){var Ht=Pc();if(Ee(Ht))return Qe(Ht);P=Nl(We,ze(Ht))}function Qe(Ht){return P=t,ae&&v?ye(Ht):(v=w=t,D)}function fr(){P!==t&&xb(P),U=0,v=z=w=P=t}function Bn(){return P===t?D:Qe(Pc())}function hr(){var Ht=Pc(),hi=Ee(Ht);if(v=arguments,w=this,z=Ht,hi){if(P===t)return Te(z);if(G)return xb(P),P=Nl(We,c),ye(z)}return P===t&&(P=Nl(We,c)),D}return hr.cancel=fr,hr.flush=Bn,hr}var LP=qe(function(l,c){return nb(l,1,c)}),$P=qe(function(l,c,d){return nb(l,$r(c)||0,d)});function NP(l){return fs(l,X)}function Lc(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Dr(o);var d=function(){var v=arguments,w=c?c.apply(this,v):v[0],x=d.cache;if(x.has(w))return x.get(w);var D=l.apply(this,v);return d.cache=x.set(w,D)||x,D};return d.cache=new(Lc.Cache||us),d}Lc.Cache=us;function $c(l){if(typeof l!="function")throw new Dr(o);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function FP(l){return uw(2,l)}var BP=S3(function(l,c){c=c.length==1&&Ie(c[0])?At(c[0],lr(Ce())):At(bn(c,1),lr(Ce()));var d=c.length;return qe(function(v){for(var w=-1,x=Tn(v.length,d);++w<x;)v[w]=c[w].call(this,v[w]);return ar(l,this,v)})}),Kd=qe(function(l,c){var d=Hs(c,ba(Kd));return fs(l,R,t,c,d)}),pw=qe(function(l,c){var d=Hs(c,ba(pw));return fs(l,$,t,c,d)}),zP=hs(function(l,c){return fs(l,V,t,t,t,c)});function HP(l,c){if(typeof l!="function")throw new Dr(o);return c=c===t?c:$e(c),qe(l,c)}function VP(l,c){if(typeof l!="function")throw new Dr(o);return c=c==null?0:Jt($e(c),0),qe(function(d){var v=d[c],w=Us(d,0,c);return v&&zs(w,v),ar(l,this,w)})}function qP(l,c,d){var v=!0,w=!0;if(typeof l!="function")throw new Dr(o);return Rt(d)&&(v="leading"in d?!!d.leading:v,w="trailing"in d?!!d.trailing:w),dw(l,c,{leading:v,maxWait:c,trailing:w})}function WP(l){return lw(l,1)}function jP(l,c){return Kd($d(c),l)}function UP(){if(!arguments.length)return[];var l=arguments[0];return Ie(l)?l:[l]}function QP(l){return Ir(l,m)}function YP(l,c){return c=typeof c=="function"?c:t,Ir(l,m,c)}function XP(l){return Ir(l,p|m)}function GP(l,c){return c=typeof c=="function"?c:t,Ir(l,p|m,c)}function ZP(l,c){return c==null||tb(l,c,un(c))}function fi(l,c){return l===c||l!==l&&c!==c}var KP=Ec(kd),JP=Ec(function(l,c){return l>=c}),Ao=ab(function(){return arguments}())?ab:function(l){return $t(l)&&ut.call(l,"callee")&&!Qy.call(l,"callee")},Ie=q.isArray,e5=Ey?lr(Ey):l3;function Gn(l){return l!=null&&Nc(l.length)&&!ps(l)}function zt(l){return $t(l)&&Gn(l)}function t5(l){return l===!0||l===!1||$t(l)&&Nn(l)==mn}var Qs=gR||up,n5=Ay?lr(Ay):u3;function r5(l){return $t(l)&&l.nodeType===1&&!Fl(l)}function i5(l){if(l==null)return!0;if(Gn(l)&&(Ie(l)||typeof l=="string"||typeof l.splice=="function"||Qs(l)||wa(l)||Ao(l)))return!l.length;var c=En(l);if(c==Bt||c==Sn)return!l.size;if($l(l))return!Td(l).length;for(var d in l)if(ut.call(l,d))return!1;return!0}function s5(l,c){return Il(l,c)}function o5(l,c,d){d=typeof d=="function"?d:t;var v=d?d(l,c):t;return v===t?Il(l,c,t,d):!!v}function Jd(l){if(!$t(l))return!1;var c=Nn(l);return c==Mi||c==sa||typeof l.message=="string"&&typeof l.name=="string"&&!Fl(l)}function a5(l){return typeof l=="number"&&Xy(l)}function ps(l){if(!Rt(l))return!1;var c=Nn(l);return c==kn||c==$s||c==jt||c==ni}function gw(l){return typeof l=="number"&&l==$e(l)}function Nc(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=_t}function Rt(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function $t(l){return l!=null&&typeof l=="object"}var mw=My?lr(My):f3;function l5(l,c){return l===c||Cd(l,c,qd(c))}function u5(l,c,d){return d=typeof d=="function"?d:t,Cd(l,c,qd(c),d)}function c5(l){return vw(l)&&l!=+l}function f5(l){if(Y3(l))throw new Re(s);return lb(l)}function h5(l){return l===null}function d5(l){return l==null}function vw(l){return typeof l=="number"||$t(l)&&Nn(l)==Cr}function Fl(l){if(!$t(l)||Nn(l)!=Gt)return!1;var c=cc(l);if(c===null)return!0;var d=ut.call(c,"constructor")&&c.constructor;return typeof d=="function"&&d instanceof d&&oc.call(d)==uR}var ep=Dy?lr(Dy):h3;function p5(l){return gw(l)&&l>=-9007199254740991&&l<=_t}var yw=Ry?lr(Ry):d3;function Fc(l){return typeof l=="string"||!Ie(l)&&$t(l)&&Nn(l)==Ii}function cr(l){return typeof l=="symbol"||$t(l)&&Nn(l)==Tr}var wa=Iy?lr(Iy):p3;function g5(l){return l===t}function m5(l){return $t(l)&&En(l)==vn}function v5(l){return $t(l)&&Nn(l)==Li}var y5=Ec(Ed),b5=Ec(function(l,c){return l<=c});function bw(l){if(!l)return[];if(Gn(l))return Fc(l)?ui(l):Xn(l);if(Sl&&l[Sl])return ZD(l[Sl]());var c=En(l),d=c==Bt?gd:c==Sn?rc:_a;return d(l)}function gs(l){if(!l)return l===0?l:0;if(l=$r(l),l===et||l===-1/0){var c=l<0?-1:1;return c*xt}return l===l?l:0}function $e(l){var c=gs(l),d=c%1;return c===c?d?c-d:c:0}function ww(l){return l?So($e(l),0,ke):0}function $r(l){if(typeof l=="number")return l;if(cr(l))return Pt;if(Rt(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=Rt(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=By(l);var d=_l.test(l);return d||N.test(l)?PD(l.slice(2),d?2:8):aa.test(l)?Pt:+l}function _w(l){return Hi(l,Zn(l))}function w5(l){return l?So($e(l),-9007199254740991,_t):l===0?l:0}function ot(l){return l==null?"":ur(l)}var _5=va(function(l,c){if($l(c)||Gn(c)){Hi(c,un(c),l);return}for(var d in c)ut.call(c,d)&&Ml(l,d,c[d])}),Ow=va(function(l,c){Hi(c,Zn(c),l)}),Bc=va(function(l,c,d,v){Hi(c,Zn(c),l,v)}),O5=va(function(l,c,d,v){Hi(c,un(c),l,v)}),x5=hs(_d);function k5(l,c){var d=ma(l);return c==null?d:eb(d,c)}var S5=qe(function(l,c){l=mt(l);var d=-1,v=c.length,w=v>2?c[2]:t;for(w&&Fn(c[0],c[1],w)&&(v=1);++d<v;)for(var x=c[d],D=Zn(x),P=-1,z=D.length;++P<z;){var U=D[P],Q=l[U];(Q===t||fi(Q,da[U])&&!ut.call(l,U))&&(l[U]=x[U])}return l}),C5=qe(function(l){return l.push(t,Bb),ar(xw,t,l)});function T5(l,c){return Ly(l,Ce(c,3),zi)}function E5(l,c){return Ly(l,Ce(c,3),xd)}function A5(l,c){return l==null?l:Od(l,Ce(c,3),Zn)}function M5(l,c){return l==null?l:sb(l,Ce(c,3),Zn)}function D5(l,c){return l&&zi(l,Ce(c,3))}function R5(l,c){return l&&xd(l,Ce(c,3))}function I5(l){return l==null?[]:wc(l,un(l))}function P5(l){return l==null?[]:wc(l,Zn(l))}function tp(l,c,d){var v=l==null?t:Co(l,c);return v===t?d:v}function L5(l,c){return l!=null&&Vb(l,c,i3)}function np(l,c){return l!=null&&Vb(l,c,s3)}var $5=Pb(function(l,c,d){c!=null&&typeof c.toString!="function"&&(c=ac.call(c)),l[c]=d},ip(Kn)),N5=Pb(function(l,c,d){c!=null&&typeof c.toString!="function"&&(c=ac.call(c)),ut.call(l,c)?l[c].push(d):l[c]=[d]},Ce),F5=qe(Rl);function un(l){return Gn(l)?Ky(l):Td(l)}function Zn(l){return Gn(l)?Ky(l,!0):g3(l)}function B5(l,c){var d={};return c=Ce(c,3),zi(l,function(v,w,x){cs(d,c(v,w,x),v)}),d}function z5(l,c){var d={};return c=Ce(c,3),zi(l,function(v,w,x){cs(d,w,c(v,w,x))}),d}var H5=va(function(l,c,d){_c(l,c,d)}),xw=va(function(l,c,d,v){_c(l,c,d,v)}),V5=hs(function(l,c){var d={};if(l==null)return d;var v=!1;c=At(c,function(x){return x=js(x,l),v||(v=x.length>1),x}),Hi(l,Hd(l),d),v&&(d=Ir(d,p|g|m,$3));for(var w=c.length;w--;)Id(d,c[w]);return d});function q5(l,c){return kw(l,$c(Ce(c)))}var W5=hs(function(l,c){return l==null?{}:v3(l,c)});function kw(l,c){if(l==null)return{};var d=At(Hd(l),function(v){return[v]});return c=Ce(c),gb(l,d,function(v,w){return c(v,w[0])})}function j5(l,c,d){c=js(c,l);var v=-1,w=c.length;for(w||(w=1,l=t);++v<w;){var x=l==null?t:l[Vi(c[v])];x===t&&(v=w,x=d),l=ps(x)?x.call(l):x}return l}function U5(l,c,d){return l==null?l:Pl(l,c,d)}function Q5(l,c,d,v){return v=typeof v=="function"?v:t,l==null?l:Pl(l,c,d,v)}var Sw=Nb(un),Cw=Nb(Zn);function Y5(l,c,d){var v=Ie(l),w=v||Qs(l)||wa(l);if(c=Ce(c,4),d==null){var x=l&&l.constructor;w?d=v?new x:[]:Rt(l)?d=ps(x)?ma(cc(l)):{}:d={}}return(w?Mr:zi)(l,function(D,P,z){return c(d,D,P,z)}),d}function X5(l,c){return l==null?!0:Id(l,c)}function G5(l,c,d){return l==null?l:wb(l,c,$d(d))}function Z5(l,c,d,v){return v=typeof v=="function"?v:t,l==null?l:wb(l,c,$d(d),v)}function _a(l){return l==null?[]:pd(l,un(l))}function K5(l){return l==null?[]:pd(l,Zn(l))}function J5(l,c,d){return d===t&&(d=c,c=t),d!==t&&(d=$r(d),d=d===d?d:0),c!==t&&(c=$r(c),c=c===c?c:0),So($r(l),c,d)}function e4(l,c,d){return c=gs(c),d===t?(d=c,c=0):d=gs(d),l=$r(l),o3(l,c,d)}function t4(l,c,d){if(d&&typeof d!="boolean"&&Fn(l,c,d)&&(c=d=t),d===t&&(typeof c=="boolean"?(d=c,c=t):typeof l=="boolean"&&(d=l,l=t)),l===t&&c===t?(l=0,c=1):(l=gs(l),c===t?(c=l,l=0):c=gs(c)),l>c){var v=l;l=c,c=v}if(d||l%1||c%1){var w=Gy();return Tn(l+w*(c-l+ID("1e-"+((w+"").length-1))),c)}return Md(l,c)}var n4=ya(function(l,c,d){return c=c.toLowerCase(),l+(d?Tw(c):c)});function Tw(l){return rp(ot(l).toLowerCase())}function Ew(l){return l=ot(l),l&&l.replace(ge,UD).replace(xD,"")}function r4(l,c,d){l=ot(l),c=ur(c);var v=l.length;d=d===t?v:So($e(d),0,v);var w=d;return d-=c.length,d>=0&&l.slice(d,w)==c}function i4(l){return l=ot(l),l&&k.test(l)?l.replace(Fi,QD):l}function s4(l){return l=ot(l),l&&Pe.test(l)?l.replace(fe,"\\$&"):l}var o4=ya(function(l,c,d){return l+(d?"-":"")+c.toLowerCase()}),a4=ya(function(l,c,d){return l+(d?" ":"")+c.toLowerCase()}),l4=Db("toLowerCase");function u4(l,c,d){l=ot(l),c=$e(c);var v=c?fa(l):0;if(!c||v>=c)return l;var w=(c-v)/2;return Tc(pc(w),d)+l+Tc(dc(w),d)}function c4(l,c,d){l=ot(l),c=$e(c);var v=c?fa(l):0;return c&&v<c?l+Tc(c-v,d):l}function f4(l,c,d){l=ot(l),c=$e(c);var v=c?fa(l):0;return c&&v<c?Tc(c-v,d)+l:l}function h4(l,c,d){return d||c==null?c=0:c&&(c=+c),bR(ot(l).replace(se,""),c||0)}function d4(l,c,d){return(d?Fn(l,c,d):c===t)?c=1:c=$e(c),Dd(ot(l),c)}function p4(){var l=arguments,c=ot(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var g4=ya(function(l,c,d){return l+(d?"_":"")+c.toLowerCase()});function m4(l,c,d){return d&&typeof d!="number"&&Fn(l,c,d)&&(c=d=t),d=d===t?ke:d>>>0,d?(l=ot(l),l&&(typeof c=="string"||c!=null&&!ep(c))&&(c=ur(c),!c&&ca(l))?Us(ui(l),0,d):l.split(c,d)):[]}var v4=ya(function(l,c,d){return l+(d?" ":"")+rp(c)});function y4(l,c,d){return l=ot(l),d=d==null?0:So($e(d),0,l.length),c=ur(c),l.slice(d,d+c.length)==c}function b4(l,c,d){var v=_.templateSettings;d&&Fn(l,c,d)&&(c=t),l=ot(l),c=Bc({},c,v,Fb);var w=Bc({},c.imports,v.imports,Fb),x=un(w),D=pd(w,x),P,z,U=0,Q=c.interpolate||tt,G="__p += '",ae=md((c.escape||tt).source+"|"+Q.source+"|"+(Q===W?Fs:tt).source+"|"+(c.evaluate||tt).source+"|$","g"),ye="//# sourceURL="+(ut.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ED+"]")+`
`;l.replace(ae,function(Ee,We,Qe,fr,Bn,hr){return Qe||(Qe=fr),G+=l.slice(U,hr).replace(an,YD),We&&(P=!0,G+=`' +
__e(`+We+`) +
'`),Bn&&(z=!0,G+=`';
`+Bn+`;
__p += '`),Qe&&(G+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),U=hr+Ee.length,Ee}),G+=`';
`;var Te=ut.call(c,"variable")&&c.variable;if(!Te)G=`with (obj) {
`+G+`
}
`;else if(on.test(Te))throw new Re(a);G=(z?G.replace(bl,""):G).replace(li,"$1").replace(Ni,"$1;"),G="function("+(Te||"obj")+`) {
`+(Te?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var ze=Mw(function(){return nt(x,ye+"return "+G).apply(t,D)});if(ze.source=G,Jd(ze))throw ze;return ze}function w4(l){return ot(l).toLowerCase()}function _4(l){return ot(l).toUpperCase()}function O4(l,c,d){if(l=ot(l),l&&(d||c===t))return By(l);if(!l||!(c=ur(c)))return l;var v=ui(l),w=ui(c),x=zy(v,w),D=Hy(v,w)+1;return Us(v,x,D).join("")}function x4(l,c,d){if(l=ot(l),l&&(d||c===t))return l.slice(0,qy(l)+1);if(!l||!(c=ur(c)))return l;var v=ui(l),w=Hy(v,ui(c))+1;return Us(v,0,w).join("")}function k4(l,c,d){if(l=ot(l),l&&(d||c===t))return l.replace(se,"");if(!l||!(c=ur(c)))return l;var v=ui(l),w=zy(v,ui(c));return Us(v,w).join("")}function S4(l,c){var d=K,v=H;if(Rt(c)){var w="separator"in c?c.separator:w;d="length"in c?$e(c.length):d,v="omission"in c?ur(c.omission):v}l=ot(l);var x=l.length;if(ca(l)){var D=ui(l);x=D.length}if(d>=x)return l;var P=d-fa(v);if(P<1)return v;var z=D?Us(D,0,P).join(""):l.slice(0,P);if(w===t)return z+v;if(D&&(P+=z.length-P),ep(w)){if(l.slice(P).search(w)){var U,Q=z;for(w.global||(w=md(w.source,ot(bo.exec(w))+"g")),w.lastIndex=0;U=w.exec(Q);)var G=U.index;z=z.slice(0,G===t?P:G)}}else if(l.indexOf(ur(w),P)!=P){var ae=z.lastIndexOf(w);ae>-1&&(z=z.slice(0,ae))}return z+v}function C4(l){return l=ot(l),l&&wl.test(l)?l.replace(Yn,tR):l}var T4=ya(function(l,c,d){return l+(d?" ":"")+c.toUpperCase()}),rp=Db("toUpperCase");function Aw(l,c,d){return l=ot(l),c=d?t:c,c===t?GD(l)?iR(l):HD(l):l.match(c)||[]}var Mw=qe(function(l,c){try{return ar(l,t,c)}catch(d){return Jd(d)?d:new Re(d)}}),E4=hs(function(l,c){return Mr(c,function(d){d=Vi(d),cs(l,d,Zd(l[d],l))}),l});function A4(l){var c=l==null?0:l.length,d=Ce();return l=c?At(l,function(v){if(typeof v[1]!="function")throw new Dr(o);return[d(v[0]),v[1]]}):[],qe(function(v){for(var w=-1;++w<c;){var x=l[w];if(ar(x[0],this,v))return ar(x[1],this,v)}})}function M4(l){return t3(Ir(l,p))}function ip(l){return function(){return l}}function D4(l,c){return l==null||l!==l?c:l}var R4=Ib(),I4=Ib(!0);function Kn(l){return l}function sp(l){return ub(typeof l=="function"?l:Ir(l,p))}function P4(l){return fb(Ir(l,p))}function L4(l,c){return hb(l,Ir(c,p))}var $4=qe(function(l,c){return function(d){return Rl(d,l,c)}}),N4=qe(function(l,c){return function(d){return Rl(l,d,c)}});function op(l,c,d){var v=un(c),w=wc(c,v);d==null&&!(Rt(c)&&(w.length||!v.length))&&(d=c,c=l,l=this,w=wc(c,un(c)));var x=!(Rt(d)&&"chain"in d)||!!d.chain,D=ps(l);return Mr(w,function(P){var z=c[P];l[P]=z,D&&(l.prototype[P]=function(){var U=this.__chain__;if(x||U){var Q=l(this.__wrapped__),G=Q.__actions__=Xn(this.__actions__);return G.push({func:z,args:arguments,thisArg:l}),Q.__chain__=U,Q}return z.apply(l,zs([this.value()],arguments))})}),l}function F4(){return yn._===this&&(yn._=cR),this}function ap(){}function B4(l){return l=$e(l),qe(function(c){return db(c,l)})}var z4=Fd(At),H4=Fd(Py),V4=Fd(ud);function Dw(l){return jd(l)?cd(Vi(l)):y3(l)}function q4(l){return function(c){return l==null?t:Co(l,c)}}var W4=Lb(),j4=Lb(!0);function lp(){return[]}function up(){return!1}function U4(){return{}}function Q4(){return""}function Y4(){return!0}function X4(l,c){if(l=$e(l),l<1||l>_t)return[];var d=ke,v=Tn(l,ke);c=Ce(c),l-=ke;for(var w=dd(v,c);++d<l;)c(d);return w}function G4(l){return Ie(l)?At(l,Vi):cr(l)?[l]:Xn(Zb(ot(l)))}function Z4(l){var c=++lR;return ot(l)+c}var K4=Cc(function(l,c){return l+c},0),J4=Bd("ceil"),eL=Cc(function(l,c){return l/c},1),tL=Bd("floor");function nL(l){return l&&l.length?bc(l,Kn,kd):t}function rL(l,c){return l&&l.length?bc(l,Ce(c,2),kd):t}function iL(l){return Ny(l,Kn)}function sL(l,c){return Ny(l,Ce(c,2))}function oL(l){return l&&l.length?bc(l,Kn,Ed):t}function aL(l,c){return l&&l.length?bc(l,Ce(c,2),Ed):t}var lL=Cc(function(l,c){return l*c},1),uL=Bd("round"),cL=Cc(function(l,c){return l-c},0);function fL(l){return l&&l.length?hd(l,Kn):0}function hL(l,c){return l&&l.length?hd(l,Ce(c,2)):0}return _.after=PP,_.ary=lw,_.assign=_5,_.assignIn=Ow,_.assignInWith=Bc,_.assignWith=O5,_.at=x5,_.before=uw,_.bind=Zd,_.bindAll=E4,_.bindKey=cw,_.castArray=UP,_.chain=sw,_.chunk=tI,_.compact=nI,_.concat=rI,_.cond=A4,_.conforms=M4,_.constant=ip,_.countBy=fP,_.create=k5,_.curry=fw,_.curryRight=hw,_.debounce=dw,_.defaults=S5,_.defaultsDeep=C5,_.defer=LP,_.delay=$P,_.difference=iI,_.differenceBy=sI,_.differenceWith=oI,_.drop=aI,_.dropRight=lI,_.dropRightWhile=uI,_.dropWhile=cI,_.fill=fI,_.filter=dP,_.flatMap=mP,_.flatMapDeep=vP,_.flatMapDepth=yP,_.flatten=tw,_.flattenDeep=hI,_.flattenDepth=dI,_.flip=NP,_.flow=R4,_.flowRight=I4,_.fromPairs=pI,_.functions=I5,_.functionsIn=P5,_.groupBy=bP,_.initial=mI,_.intersection=vI,_.intersectionBy=yI,_.intersectionWith=bI,_.invert=$5,_.invertBy=N5,_.invokeMap=_P,_.iteratee=sp,_.keyBy=OP,_.keys=un,_.keysIn=Zn,_.map=Ic,_.mapKeys=B5,_.mapValues=z5,_.matches=P4,_.matchesProperty=L4,_.memoize=Lc,_.merge=H5,_.mergeWith=xw,_.method=$4,_.methodOf=N4,_.mixin=op,_.negate=$c,_.nthArg=B4,_.omit=V5,_.omitBy=q5,_.once=FP,_.orderBy=xP,_.over=z4,_.overArgs=BP,_.overEvery=H4,_.overSome=V4,_.partial=Kd,_.partialRight=pw,_.partition=kP,_.pick=W5,_.pickBy=kw,_.property=Dw,_.propertyOf=q4,_.pull=xI,_.pullAll=rw,_.pullAllBy=kI,_.pullAllWith=SI,_.pullAt=CI,_.range=W4,_.rangeRight=j4,_.rearg=zP,_.reject=TP,_.remove=TI,_.rest=HP,_.reverse=Xd,_.sampleSize=AP,_.set=U5,_.setWith=Q5,_.shuffle=MP,_.slice=EI,_.sortBy=IP,_.sortedUniq=LI,_.sortedUniqBy=$I,_.split=m4,_.spread=VP,_.tail=NI,_.take=FI,_.takeRight=BI,_.takeRightWhile=zI,_.takeWhile=HI,_.tap=nP,_.throttle=qP,_.thru=Rc,_.toArray=bw,_.toPairs=Sw,_.toPairsIn=Cw,_.toPath=G4,_.toPlainObject=_w,_.transform=Y5,_.unary=WP,_.union=VI,_.unionBy=qI,_.unionWith=WI,_.uniq=jI,_.uniqBy=UI,_.uniqWith=QI,_.unset=X5,_.unzip=Gd,_.unzipWith=iw,_.update=G5,_.updateWith=Z5,_.values=_a,_.valuesIn=K5,_.without=YI,_.words=Aw,_.wrap=jP,_.xor=XI,_.xorBy=GI,_.xorWith=ZI,_.zip=KI,_.zipObject=JI,_.zipObjectDeep=eP,_.zipWith=tP,_.entries=Sw,_.entriesIn=Cw,_.extend=Ow,_.extendWith=Bc,op(_,_),_.add=K4,_.attempt=Mw,_.camelCase=n4,_.capitalize=Tw,_.ceil=J4,_.clamp=J5,_.clone=QP,_.cloneDeep=XP,_.cloneDeepWith=GP,_.cloneWith=YP,_.conformsTo=ZP,_.deburr=Ew,_.defaultTo=D4,_.divide=eL,_.endsWith=r4,_.eq=fi,_.escape=i4,_.escapeRegExp=s4,_.every=hP,_.find=pP,_.findIndex=Jb,_.findKey=T5,_.findLast=gP,_.findLastIndex=ew,_.findLastKey=E5,_.floor=tL,_.forEach=ow,_.forEachRight=aw,_.forIn=A5,_.forInRight=M5,_.forOwn=D5,_.forOwnRight=R5,_.get=tp,_.gt=KP,_.gte=JP,_.has=L5,_.hasIn=np,_.head=nw,_.identity=Kn,_.includes=wP,_.indexOf=gI,_.inRange=e4,_.invoke=F5,_.isArguments=Ao,_.isArray=Ie,_.isArrayBuffer=e5,_.isArrayLike=Gn,_.isArrayLikeObject=zt,_.isBoolean=t5,_.isBuffer=Qs,_.isDate=n5,_.isElement=r5,_.isEmpty=i5,_.isEqual=s5,_.isEqualWith=o5,_.isError=Jd,_.isFinite=a5,_.isFunction=ps,_.isInteger=gw,_.isLength=Nc,_.isMap=mw,_.isMatch=l5,_.isMatchWith=u5,_.isNaN=c5,_.isNative=f5,_.isNil=d5,_.isNull=h5,_.isNumber=vw,_.isObject=Rt,_.isObjectLike=$t,_.isPlainObject=Fl,_.isRegExp=ep,_.isSafeInteger=p5,_.isSet=yw,_.isString=Fc,_.isSymbol=cr,_.isTypedArray=wa,_.isUndefined=g5,_.isWeakMap=m5,_.isWeakSet=v5,_.join=wI,_.kebabCase=o4,_.last=Lr,_.lastIndexOf=_I,_.lowerCase=a4,_.lowerFirst=l4,_.lt=y5,_.lte=b5,_.max=nL,_.maxBy=rL,_.mean=iL,_.meanBy=sL,_.min=oL,_.minBy=aL,_.stubArray=lp,_.stubFalse=up,_.stubObject=U4,_.stubString=Q4,_.stubTrue=Y4,_.multiply=lL,_.nth=OI,_.noConflict=F4,_.noop=ap,_.now=Pc,_.pad=u4,_.padEnd=c4,_.padStart=f4,_.parseInt=h4,_.random=t4,_.reduce=SP,_.reduceRight=CP,_.repeat=d4,_.replace=p4,_.result=j5,_.round=uL,_.runInContext=B,_.sample=EP,_.size=DP,_.snakeCase=g4,_.some=RP,_.sortedIndex=AI,_.sortedIndexBy=MI,_.sortedIndexOf=DI,_.sortedLastIndex=RI,_.sortedLastIndexBy=II,_.sortedLastIndexOf=PI,_.startCase=v4,_.startsWith=y4,_.subtract=cL,_.sum=fL,_.sumBy=hL,_.template=b4,_.times=X4,_.toFinite=gs,_.toInteger=$e,_.toLength=ww,_.toLower=w4,_.toNumber=$r,_.toSafeInteger=w5,_.toString=ot,_.toUpper=_4,_.trim=O4,_.trimEnd=x4,_.trimStart=k4,_.truncate=S4,_.unescape=C4,_.uniqueId=Z4,_.upperCase=T4,_.upperFirst=rp,_.each=ow,_.eachRight=aw,_.first=nw,op(_,function(){var l={};return zi(_,function(c,d){ut.call(_.prototype,d)||(l[d]=c)}),l}(),{chain:!1}),_.VERSION=r,Mr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){_[l].placeholder=_}),Mr(["drop","take"],function(l,c){Ue.prototype[l]=function(d){d=d===t?1:Jt($e(d),0);var v=this.__filtered__&&!c?new Ue(this):this.clone();return v.__filtered__?v.__takeCount__=Tn(d,v.__takeCount__):v.__views__.push({size:Tn(d,ke),type:l+(v.__dir__<0?"Right":"")}),v},Ue.prototype[l+"Right"]=function(d){return this.reverse()[l](d).reverse()}}),Mr(["filter","map","takeWhile"],function(l,c){var d=c+1,v=d==ve||d==be;Ue.prototype[l]=function(w){var x=this.clone();return x.__iteratees__.push({iteratee:Ce(w,3),type:d}),x.__filtered__=x.__filtered__||v,x}}),Mr(["head","last"],function(l,c){var d="take"+(c?"Right":"");Ue.prototype[l]=function(){return this[d](1).value()[0]}}),Mr(["initial","tail"],function(l,c){var d="drop"+(c?"":"Right");Ue.prototype[l]=function(){return this.__filtered__?new Ue(this):this[d](1)}}),Ue.prototype.compact=function(){return this.filter(Kn)},Ue.prototype.find=function(l){return this.filter(l).head()},Ue.prototype.findLast=function(l){return this.reverse().find(l)},Ue.prototype.invokeMap=qe(function(l,c){return typeof l=="function"?new Ue(this):this.map(function(d){return Rl(d,l,c)})}),Ue.prototype.reject=function(l){return this.filter($c(Ce(l)))},Ue.prototype.slice=function(l,c){l=$e(l);var d=this;return d.__filtered__&&(l>0||c<0)?new Ue(d):(l<0?d=d.takeRight(-l):l&&(d=d.drop(l)),c!==t&&(c=$e(c),d=c<0?d.dropRight(-c):d.take(c-l)),d)},Ue.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Ue.prototype.toArray=function(){return this.take(ke)},zi(Ue.prototype,function(l,c){var d=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),w=_[v?"take"+(c=="last"?"Right":""):c],x=v||/^find/.test(c);w&&(_.prototype[c]=function(){var D=this.__wrapped__,P=v?[1]:arguments,z=D instanceof Ue,U=P[0],Q=z||Ie(D),G=function(We){var Qe=w.apply(_,zs([We],P));return v&&ae?Qe[0]:Qe};Q&&d&&typeof U=="function"&&U.length!=1&&(z=Q=!1);var ae=this.__chain__,ye=!!this.__actions__.length,Te=x&&!ae,ze=z&&!ye;if(!x&&Q){D=ze?D:new Ue(this);var Ee=l.apply(D,P);return Ee.__actions__.push({func:Rc,args:[G],thisArg:t}),new Rr(Ee,ae)}return Te&&ze?l.apply(this,P):(Ee=this.thru(G),Te?v?Ee.value()[0]:Ee.value():Ee)})}),Mr(["pop","push","shift","sort","splice","unshift"],function(l){var c=ic[l],d=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",v=/^(?:pop|shift)$/.test(l);_.prototype[l]=function(){var w=arguments;if(v&&!this.__chain__){var x=this.value();return c.apply(Ie(x)?x:[],w)}return this[d](function(D){return c.apply(Ie(D)?D:[],w)})}}),zi(Ue.prototype,function(l,c){var d=_[c];if(d){var v=d.name+"";ut.call(ga,v)||(ga[v]=[]),ga[v].push({name:c,func:d})}}),ga[Sc(t,C).name]=[{name:"wrapper",func:t}],Ue.prototype.clone=CR,Ue.prototype.reverse=TR,Ue.prototype.value=ER,_.prototype.at=rP,_.prototype.chain=iP,_.prototype.commit=sP,_.prototype.next=oP,_.prototype.plant=lP,_.prototype.reverse=uP,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=cP,_.prototype.first=_.prototype.head,Sl&&(_.prototype[Sl]=aP),_},ha=sR();_o?((_o.exports=ha)._=ha,sd._=ha):yn._=ha}).call(K6)}(au,au.exports)),au.exports}var e7=J6();const t7=/^class[ {]/;function n7(n){return t7.test(n.toString())}function hv(n){return Array.isArray(n)}function fm(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Lf(...n){n.length===1&&hv(n[0])&&(n=n[0]),n=[...n];const e=n.pop();return e.$inject=n,e}const r7=/constructor\s*[^(]*\(\s*([^)]*)\)/m,i7=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,s7=/\/\*([^*]*)\*\//m;function o7(n){if(typeof n!="function")throw new Error(`Cannot annotate "${n}". Expected a function!`);const e=n.toString().match(n7(n)?r7:i7);if(!e)return[];const t=e[1]||e[2];return t&&t.split(",").map(r=>{const i=r.match(s7);return(i&&i[1]||r).trim()})||[]}function uT(n,e){const t=e||{get:function(T,S){if(r.push(T),S===!1)return null;throw a(`No provider for "${T}"!`)}},r=[],i=this._providers=Object.create(t._providers||null),s=this._instances=Object.create(null),o=s.injector=this,a=function(T){const S=r.join(" -> ");return r.length=0,new Error(S?`${T} (Resolving: ${S})`:T)};function u(T,S){if(!i[T]&&T.includes(".")){const R=T.split(".");let $=u(R.shift());for(;R.length;)$=$[R.shift()];return $}if(fm(s,T))return s[T];if(fm(i,T)){if(r.indexOf(T)!==-1)throw r.push(T),a("Cannot resolve circular dependency!");return r.push(T),s[T]=i[T][0](i[T][1]),r.pop(),s[T]}return t.get(T,S)}function f(T,S){if(typeof S>"u"&&(S={}),typeof T!="function")if(hv(T))T=Lf(T.slice());else throw a(`Cannot invoke "${T}". Expected a function!`);const $=(T.$inject||o7(T)).map(L=>fm(S,L)?S[L]:u(L));return{fn:T,dependencies:$}}function h(T){const{fn:S,dependencies:R}=f(T),$=Function.prototype.bind.call(S,null,...R);return new $}function p(T,S,R){const{fn:$,dependencies:L}=f(T,R);return $.apply(S,L)}function g(T){return Lf(S=>T.get(S))}function m(T,S){if(S&&S.length){const R=Object.create(null),$=Object.create(null),L=[],V=[],X=[];let K,H,Y,re;for(let ve in i)K=i[ve],S.indexOf(ve)!==-1&&(K[2]==="private"?(H=L.indexOf(K[3]),H===-1?(Y=K[3].createChild([],S),re=g(Y),L.push(K[3]),V.push(Y),X.push(re),R[ve]=[re,ve,"private",Y]):R[ve]=[X[H],ve,"private",V[H]]):R[ve]=[K[2],K[1]],$[ve]=!0),(K[2]==="factory"||K[2]==="type")&&K[1].$scope&&S.forEach(Se=>{K[1].$scope.indexOf(Se)!==-1&&(R[ve]=[K[2],K[1]],$[Se]=!0)});S.forEach(ve=>{if(!$[ve])throw new Error('No provider for "'+ve+'". Cannot use provider from the parent!')}),T.unshift(R)}return new uT(T,o)}const y={factory:p,type:h,value:function(T){return T}};function b(T,S){const R=T.__init__||[];return function(){R.forEach($=>{typeof $=="string"?S.get($):S.invoke($)})}}function O(T){const S=T.__exports__;if(S){const R=T.__modules__,$=Object.keys(T).reduce((H,Y)=>(Y!=="__exports__"&&Y!=="__modules__"&&Y!=="__init__"&&Y!=="__depends__"&&(H[Y]=T[Y]),H),Object.create(null)),L=(R||[]).concat($),V=m(L),X=Lf(function(H){return V.get(H)});S.forEach(function(H){i[H]=[X,H,"private",V]});const K=(T.__init__||[]).slice();return K.unshift(function(){V.init()}),T=Object.assign({},T,{__init__:K}),b(T,V)}return Object.keys(T).forEach(function(R){if(R==="__init__"||R==="__depends__")return;const $=T[R];if($[2]==="private"){i[R]=$;return}const L=$[0],V=$[1];i[R]=[y[L],a7(L,V),L]}),b(T,o)}function C(T,S){return T.indexOf(S)!==-1||(T=(S.__depends__||[]).reduce(C,T),T.indexOf(S)!==-1)?T:T.concat(S)}function M(T){const S=T.reduce(C,[]).map(O);let R=!1;return function(){R||(R=!0,S.forEach($=>$()))}}this.get=u,this.invoke=p,this.instantiate=h,this.createChild=m,this.init=M(n)}function a7(n,e){return n!=="value"&&hv(e)&&(e=Lf(e.slice())),e}const cT=1024;let l7=0,hm=class{constructor(e,t){this.from=e,this.to=t}};class Ke{constructor(e={}){this.id=l7++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=pn.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Ke.closedBy=new Ke({deserialize:n=>n.split(" ")});Ke.openedBy=new Ke({deserialize:n=>n.split(" ")});Ke.group=new Ke({deserialize:n=>n.split(" ")});Ke.isolate=new Ke({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Ke.contextHash=new Ke({perNode:!0});Ke.lookAhead=new Ke({perNode:!0});Ke.mounted=new Ke({perNode:!0});class nh{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Ke.mounted.id]}}const u7=Object.create(null);class pn{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):u7,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new pn(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ke.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Ke.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}pn.none=new pn("",Object.create(null),0,8);class Wu{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new pn(r.name,i,r.id,r.flags):r)}return new Wu(t)}}const Gc=new WeakMap,_x=new WeakMap;var dn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(dn||(dn={}));class bt{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=nh.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new p0(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Gc.get(this)||this.topNode,s=new p0(i);return s.moveTo(e,t),Gc.set(this,s._tree),s}get topNode(){return new Gr(this,0,0,null)}resolve(e,t=0){let r=Cu(Gc.get(this)||this.topNode,e,t,!1);return Gc.set(this,r),r}resolveInner(e,t=0){let r=Cu(_x.get(this)||this.topNode,e,t,!0);return _x.set(this,r),r}resolveStack(e,t=0){return h7(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&dn.IncludeAnonymous)>0;for(let u=this.cursor(o|dn.IncludeAnonymous);;){let f=!1;if(u.from<=s&&u.to>=i&&(!a&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;f=!0}for(;f&&r&&(a||!u.type.isAnonymous)&&r(u),!u.nextSibling();){if(!u.parent())return;f=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:gv(pn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new bt(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new bt(pn.none,t,r,i)))}static build(e){return d7(e)}}bt.empty=new bt(pn.none,[],[],0);class dv{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new dv(this.buffer,this.index)}}class co{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return pn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let u=e;u!=t&&!(fT(s,i,o[u+1],o[u+2])&&(a=u,r>0));u=o[u+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,u=0;a<t;){s[u++]=i[a++],s[u++]=i[a++]-r;let f=s[u++]=i[a++]-r;s[u++]=i[a++]-e,o=Math.max(o,f)}return new co(s,o,this.set)}}function fT(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Cu(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof Gr&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:dn.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof Gr&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class hT{cursor(e=0){return new p0(this,e)}getChild(e,t=null,r=null){let i=Ox(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Ox(this,e,t,r)}resolve(e,t=0){return Cu(this,e,t,!1)}resolveInner(e,t=0){return Cu(this,e,t,!0)}matchContext(e){return d0(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class Gr extends hT{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:u}=o._tree,f=t>0?a.length:-1;e!=f;e+=t){let h=a[e],p=u[e]+o.from;if(fT(i,r,p,p+h.length)){if(h instanceof co){if(s&dn.ExcludeBuffers)continue;let g=h.findChild(0,h.buffer.length,t,r-p,i);if(g>-1)return new no(new c7(o,h,e,p),null,g)}else if(s&dn.IncludeAnonymous||!h.type.isAnonymous||pv(h)){let g;if(!(s&dn.IgnoreMounts)&&(g=nh.get(h))&&!g.overlay)return new Gr(g.tree,p,e,o);let m=new Gr(h,p,e,o);return s&dn.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(t<0?h.children.length-1:0,t,r,i)}}}if(s&dn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&dn.IgnoreOverlays)&&(i=nh.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new Gr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ox(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function d0(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class c7{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class no extends hT{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new no(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&dn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new no(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new no(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new no(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new bt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function dT(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof Gr&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new f7(i,t)}class f7{constructor(e,t){this.heads=e,this.node=t}get next(){return dT(this.heads)}}function h7(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof Gr?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=nh.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Gr(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Cu(a,e,t,!1))}}return i?dT(i):r}class p0{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Gr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Gr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&dn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&dn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&dn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&dn.IncludeAnonymous||a instanceof co||!a.type.isAnonymous||pv(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new no(this.buffer,t,this.stack[i]);return this.bufferNode=new no(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return d0(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return d0(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function pv(n){return n.children.some(e=>e instanceof co||!e.type.isAnonymous||pv(e))}function d7(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=cT,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new dv(t,t.length):t,u=r.types,f=0,h=0;function p(R,$,L,V,X,K){let{id:H,start:Y,end:re,size:ve}=a,Se=h,be=f;for(;ve<0;)if(a.next(),ve==-1){let ke=s[H];L.push(ke),V.push(Y-R);return}else if(ve==-3){f=H;return}else if(ve==-4){h=H;return}else throw new RangeError(`Unrecognized record size: ${ve}`);let et=u[H],_t,xt,Pt=Y-R;if(re-Y<=i&&(xt=O(a.pos-$,X))){let ke=new Uint16Array(xt.size-xt.skip),Ve=a.pos-xt.size,de=ke.length;for(;a.pos>Ve;)de=C(xt.start,ke,de);_t=new co(ke,re-xt.start,r),Pt=xt.start-R}else{let ke=a.pos-ve;a.next();let Ve=[],de=[],pe=H>=o?H:-1,te=0,Xe=re;for(;a.pos>ke;)pe>=0&&a.id==pe&&a.size>=0?(a.end<=Xe-i&&(y(Ve,de,Y,te,a.end,Xe,pe,Se,be),te=Ve.length,Xe=a.end),a.next()):K>2500?g(Y,ke,Ve,de):p(Y,ke,Ve,de,pe,K+1);if(pe>=0&&te>0&&te<Ve.length&&y(Ve,de,Y,te,Y,Xe,pe,Se,be),Ve.reverse(),de.reverse(),pe>-1&&te>0){let jt=m(et,be);_t=gv(et,Ve,de,0,Ve.length,0,re-Y,jt,jt)}else _t=b(et,Ve,de,re-Y,Se-re,be)}L.push(_t),V.push(Pt)}function g(R,$,L,V){let X=[],K=0,H=-1;for(;a.pos>$;){let{id:Y,start:re,end:ve,size:Se}=a;if(Se>4)a.next();else{if(H>-1&&re<H)break;H<0&&(H=ve-i),X.push(Y,re,ve),K++,a.next()}}if(K){let Y=new Uint16Array(K*4),re=X[X.length-2];for(let ve=X.length-3,Se=0;ve>=0;ve-=3)Y[Se++]=X[ve],Y[Se++]=X[ve+1]-re,Y[Se++]=X[ve+2]-re,Y[Se++]=Se;L.push(new co(Y,X[2]-re,r)),V.push(re-R)}}function m(R,$){return(L,V,X)=>{let K=0,H=L.length-1,Y,re;if(H>=0&&(Y=L[H])instanceof bt){if(!H&&Y.type==R&&Y.length==X)return Y;(re=Y.prop(Ke.lookAhead))&&(K=V[H]+Y.length+re)}return b(R,L,V,X,K,$)}}function y(R,$,L,V,X,K,H,Y,re){let ve=[],Se=[];for(;R.length>V;)ve.push(R.pop()),Se.push($.pop()+L-X);R.push(b(r.types[H],ve,Se,K-X,Y-K,re)),$.push(X-L)}function b(R,$,L,V,X,K,H){if(K){let Y=[Ke.contextHash,K];H=H?[Y].concat(H):[Y]}if(X>25){let Y=[Ke.lookAhead,X];H=H?[Y].concat(H):[Y]}return new bt(R,$,L,V,H)}function O(R,$){let L=a.fork(),V=0,X=0,K=0,H=L.end-i,Y={size:0,start:0,skip:0};e:for(let re=L.pos-R;L.pos>re;){let ve=L.size;if(L.id==$&&ve>=0){Y.size=V,Y.start=X,Y.skip=K,K+=4,V+=4,L.next();continue}let Se=L.pos-ve;if(ve<0||Se<re||L.start<H)break;let be=L.id>=o?4:0,et=L.start;for(L.next();L.pos>Se;){if(L.size<0)if(L.size==-3)be+=4;else break e;else L.id>=o&&(be+=4);L.next()}X=et,V+=ve,K+=be}return($<0||V==R)&&(Y.size=V,Y.start=X,Y.skip=K),Y.size>4?Y:void 0}function C(R,$,L){let{id:V,start:X,end:K,size:H}=a;if(a.next(),H>=0&&V<o){let Y=L;if(H>4){let re=a.pos-(H-4);for(;a.pos>re;)L=C(R,$,L)}$[--L]=Y,$[--L]=K-R,$[--L]=X-R,$[--L]=V}else H==-3?f=V:H==-4&&(h=V);return L}let M=[],T=[];for(;a.pos>0;)p(n.start||0,n.bufferStart||0,M,T,-1,0);let S=(e=n.length)!==null&&e!==void 0?e:M.length?T[0]+M[0].length:0;return new bt(u[n.topID],M.reverse(),T.reverse(),S)}const xx=new WeakMap;function $f(n,e){if(!n.isAnonymous||e instanceof co||e.type!=n)return 1;let t=xx.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof bt)){t=1;break}t+=$f(n,r)}xx.set(e,t)}return t}function gv(n,e,t,r,i,s,o,a,u){let f=0;for(let y=r;y<i;y++)f+=$f(n,e[y]);let h=Math.ceil(f*1.5/8),p=[],g=[];function m(y,b,O,C,M){for(let T=O;T<C;){let S=T,R=b[T],$=$f(n,y[T]);for(T++;T<C;T++){let L=$f(n,y[T]);if($+L>=h)break;$+=L}if(T==S+1){if($>h){let L=y[S];m(L.children,L.positions,0,L.children.length,b[S]+M);continue}p.push(y[S])}else{let L=b[T-1]+y[T-1].length-R;p.push(gv(n,y,b,S,T,R,L,null,u))}g.push(R+M-s)}}return m(e,t,r,i,0),(a||u)(p,g,o)}class Qo{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Qo(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,u=0,f=0;;a++){let h=a<t.length?t[a]:null,p=h?h.fromA:1e9;if(p-u>=r)for(;o&&o.from<p;){let g=o;if(u>=g.from||p<=g.to||f){let m=Math.max(g.from,u)-f,y=Math.min(g.to,p)-f;g=m>=y?null:new Qo(m,y,g.tree,g.offset+f,a>0,!!h)}if(g&&i.push(g),o.to>p)break;o=s<e.length?e[s++]:null}if(!h)break;u=h.toA,f=h.toA-h.toB}return i}}class mv{startParse(e,t,r){return typeof e=="string"&&(e=new p7(e)),r=r?r.length?r.map(i=>new hm(i.from,i.to)):[new hm(0,0)]:[new hm(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class p7{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ke({perNode:!0});var kx={};class rh{constructor(e,t,r,i,s,o,a,u,f,h=0,p){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=u,this.curContext=f,this.lookAhead=h,this.parent=p}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new rh(e,[],t,r,r,0,[],0,i?new Sx(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let u=this.stack.length-(r-1)*3-(e&262144?6:0),f=u?this.stack[u-2]:this.p.ranges[0].from,h=this.reducePos-f;h>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(f==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=h):this.p.lastBigReductionSize<h&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=f,this.p.lastBigReductionSize=h));let p=u?this.stack[u-1]:0,g=this.bufferBase+this.buffer.length-p;if(i<s.minRepeatTerm||e&131072){let m=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,f,m,g+4,!0)}if(e&262144)this.state=this.stack[u];else{let m=this.stack[u-3];this.state=s.getGoto(m,i,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(i,f)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==r)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let u=o;u>0&&this.buffer[u-2]>r;u-=4)if(this.buffer[u-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,r,i){e&65536?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new rh(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new g7(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let o=t[s+1];i.some((a,u)=>u&1&&a==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let u=o&65535,f=this.stack.length-a*3;if(f>=0&&e.getGoto(this.stack[f],u,!1)>=0)return a<<19|65536|u}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Sx(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Sx{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class g7{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class ih{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new ih(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ih(this.stack,this.pos,this.index)}}function Zc(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let u=o-32;if(u>=46&&(u-=46,a=!0),s+=u,a)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class Nf{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Cx=new Nf;class m7{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Cx,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Cx,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class Ba{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;v7(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}Ba.prototype.contextual=Ba.prototype.fallback=Ba.prototype.extend=!1;Ba.prototype.fallback=Ba.prototype.extend=!1;class dl{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function v7(n,e,t,r,i,s){let o=0,a=1<<r,{dialect:u}=t.p.parser;e:for(;(a&n[o])!=0;){let f=n[o+1];for(let m=o+3;m<f;m+=2)if((n[m+1]&a)>0){let y=n[m];if(u.allows(y)&&(e.token.value==-1||e.token.value==y||y7(y,e.token.value,i,s))){e.acceptToken(y);break}}let h=e.next,p=0,g=n[o+2];if(e.next<0&&g>p&&n[f+g*3-3]==65535){o=n[f+g*3-1];continue e}for(;p<g;){let m=p+g>>1,y=f+m+(m<<1),b=n[y],O=n[y+1]||65536;if(h<b)g=m;else if(h>=O)p=m+1;else{o=n[y+2],e.advance();continue e}}break}}function Tx(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function y7(n,e,t,r){let i=Tx(t,r,e);return i<0||Tx(t,r,n)<i}const pr=typeof process<"u"&&kx&&/\bparse\b/.test(kx.LOG);let dm=null;function Ex(n,e,t){let r=n.cursor(dn.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}let b7=class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Ex(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Ex(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof bt){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let u=s.prop(Ke.lookAhead);if(!u||a+u<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}};class w7{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Nf)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,u=0;for(let f=0;f<s.length;f++){if((1<<f&o)==0)continue;let h=s[f],p=this.tokens[f];if(!(r&&!h.fallback)&&((h.contextual||p.start!=e.pos||p.mask!=o||p.context!=a)&&(this.updateCachedToken(p,h,e),p.mask=o,p.context=a),p.lookAhead>p.end+25&&(u=Math.max(p.lookAhead,u)),p.value!=0)){let g=t;if(p.extended>-1&&(t=this.addActions(e,p.extended,p.end,t)),t=this.addActions(e,p.value,p.end,t),!h.extend&&(r=p,t>g))break}}for(;this.actions.length>t;)this.actions.pop();return u&&e.setLookAhead(u),!r&&e.pos==this.stream.end&&(r=new Nf,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Nf,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let u=0;u<2;u++)for(let f=o.stateSlot(s,u?2:1);;f+=3){if(a[f]==65535)if(a[f+1]==1)f=bs(a,f+2);else{i==0&&a[f+1]==2&&(i=this.putAction(bs(a,f+2),t,r,i));break}a[f]==t&&(i=this.putAction(bs(a,f+1),t,r,i))}return i}}class _7{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new m7(t,i),this.tokens=new w7(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[rh.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new b7(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let u=this.tokens.getMainToken(a);s.push(u.value,u.end)}}break}}if(!r.length){let o=i&&k7(i);if(o)return pr&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw pr&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return pr&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,u)=>u.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let u=o+1;u<r.length;u++){let f=r[u];if(a.sameState(f)||a.buffer.length>500&&f.buffer.length>500)if((a.score-f.score||a.buffer.length-f.buffer.length)>0)r.splice(u--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=pr?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let f=e.curContext&&e.curContext.tracker.strict,h=f?e.curContext.hash:0;for(let p=this.fragments.nodeAt(i);p;){let g=this.parser.nodeSet.types[p.type.id]==p.type?s.getGoto(e.state,p.type.id):-1;if(g>-1&&p.length&&(!f||(p.prop(Ke.contextHash)||0)==h))return e.useNode(p,g),pr&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(p.type.id)})`),!0;if(!(p instanceof bt)||p.children.length==0||p.positions[0]>0)break;let m=p.children[0];if(m instanceof bt&&p.positions[0]==0)p=m;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),pr&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let f=0;f<u.length;){let h=u[f++],p=u[f++],g=u[f++],m=f==u.length||!r,y=m?e:e.split(),b=this.tokens.mainToken;if(y.apply(h,p,b?b.start:y.pos,g),pr&&console.log(o+this.stackID(y)+` (via ${(h&65536)==0?"shift":`reduce of ${s.getName(h&65535)}`} for ${s.getName(p)} @ ${i}${y==e?"":", split"})`),m)return!0;y.pos>i?t.push(y):r.push(y)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Ax(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],u=t[o<<1],f=t[(o<<1)+1],h=pr?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),pr&&console.log(h+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let p=a.split(),g=h;for(let m=0;p.forceReduce()&&m<10&&(pr&&console.log(g+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,r));m++)pr&&(g=this.stackID(p)+" -> ");for(let m of a.recoverByInsert(u))pr&&console.log(h+this.stackID(m)+" (via recover-insert)"),this.advanceFully(m,r);this.stream.end>a.pos?(f==a.pos&&(f++,u=0),a.recoverByDelete(u,f),pr&&console.log(h+this.stackID(a)+` (via recover-delete ${this.parser.getName(u)})`),Ax(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),bt.build({buffer:ih.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(dm||(dm=new WeakMap)).get(e);return t||dm.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Ax(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class O7{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const pm=n=>n;class x7{constructor(e){this.start=e.start,this.shift=e.shift||pm,this.reduce=e.reduce||pm,this.reuse=e.reuse||pm,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Tu extends mv{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function s(a,u,f){i[a].push([u,u.deserialize(String(f))])}if(e.nodeProps)for(let a of e.nodeProps){let u=a[0];typeof u=="string"&&(u=Ke[u]);for(let f=1;f<a.length;){let h=a[f++];if(h>=0)s(h,u,a[f++]);else{let p=a[f+-h];for(let g=-h;g>0;g--)s(a[f++],u,p);f++}}}this.nodeSet=new Wu(t.map((a,u)=>pn.define({name:u>=this.minRepeatTerm?void 0:a,id:u,props:i[u],top:r.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=cT;let o=Zc(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(Mx),this.states=Zc(e.states,Uint32Array),this.data=Zc(e.stateData),this.goto=Zc(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Ba(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new _7(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],a=o&1,u=i[s++];if(a&&r)return u;for(let f=s+(o>>1);s<f;s++)if(i[s]==e)return u;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=bs(r,s+2)];else{if(r[s+1]==2)return bs(r,s+2);break}if(o==t||o==0)return bs(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=bs(this.data,s+2);else break;i=t(bs(this.data,s+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=bs(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(Tu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=Mx(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new O7(e,r,i)}static deserialize(e){return new Tu(e)}}function bs(n,e){return n[e]|n[e+1]<<16}function k7(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Mx(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let S7=0;class br{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=S7++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof br&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new br(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new sh(e);return r=>r.modified.indexOf(t)>-1?r:sh.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}}let C7=0;class sh{constructor(e){this.name=e,this.instances=[],this.id=C7++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&T7(t,a.modified));if(r)return r;let i=[],s=new br(e.name,i,e,t);for(let a of t)a.instances.push(s);let o=E7(t);for(let a of e.set)if(!a.modified.length)for(let u of o)i.push(sh.get(a,u));return s}}function T7(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function E7(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function ju(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let p=0;;){if(a=="..."&&p>0&&p+3==i.length){o=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!g)throw new RangeError("Invalid path: "+i);if(s.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),p+=g[0].length,p==i.length)break;let m=i[p++];if(p==i.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+i);a=i.slice(p)}let u=s.length-1,f=s[u];if(!f)throw new RangeError("Invalid path: "+i);let h=new oh(r,o,u>0?s.slice(0,u):null);e[f]=h.sort(e[f])}}return pT.add(e)}const pT=new Ke;class oh{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}oh.empty=new oh([],2,null);function gT(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let u of a.set){let f=t[u.id];if(f){o=o?o+" "+f:f;break}}return o},scope:r}}function A7(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function M7(n,e,t,r=0,i=n.length){let s=new D7(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class D7{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:u}=e;if(a>=r||u<=t)return;o.isTop&&(s=this.highlighters.filter(m=>!m.scope||m.scope(o)));let f=i,h=R7(e)||oh.empty,p=A7(s,h.tags);if(p&&(f&&(f+=" "),f+=p,h.mode==1&&(i+=(i?" ":"")+p)),this.startSpan(Math.max(t,a),f),h.opaque)return;let g=e.tree&&e.tree.prop(Ke.mounted);if(g&&g.overlay){let m=e.node.enter(g.overlay[0].from+a,1),y=this.highlighters.filter(O=>!O.scope||O.scope(g.tree.type)),b=e.firstChild();for(let O=0,C=a;;O++){let M=O<g.overlay.length?g.overlay[O]:null,T=M?M.from+a:u,S=Math.max(t,C),R=Math.min(r,T);if(S<R&&b)for(;e.from<R&&(this.highlightRange(e,S,R,i,s),this.startSpan(Math.min(R,e.to),f),!(e.to>=T||!e.nextSibling())););if(!M||T>r)break;C=M.to+a,C>t&&(this.highlightRange(m.cursor(),Math.max(t,M.from+a),Math.min(r,C),"",y),this.startSpan(Math.min(r,C),f))}b&&e.parent()}else if(e.firstChild()){g&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),f)}while(e.nextSibling());e.parent()}}}function R7(n){let e=n.type.prop(pT);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ie=br.define,Kc=ie(),Ks=ie(),Dx=ie(Ks),Rx=ie(Ks),Js=ie(),Jc=ie(Js),gm=ie(Js),Ui=ie(),Ro=ie(Ui),qi=ie(),Wi=ie(),g0=ie(),jl=ie(g0),ef=ie(),I={comment:Kc,lineComment:ie(Kc),blockComment:ie(Kc),docComment:ie(Kc),name:Ks,variableName:ie(Ks),typeName:Dx,tagName:ie(Dx),propertyName:Rx,attributeName:ie(Rx),className:ie(Ks),labelName:ie(Ks),namespace:ie(Ks),macroName:ie(Ks),literal:Js,string:Jc,docString:ie(Jc),character:ie(Jc),attributeValue:ie(Jc),number:gm,integer:ie(gm),float:ie(gm),bool:ie(Js),regexp:ie(Js),escape:ie(Js),color:ie(Js),url:ie(Js),keyword:qi,self:ie(qi),null:ie(qi),atom:ie(qi),unit:ie(qi),modifier:ie(qi),operatorKeyword:ie(qi),controlKeyword:ie(qi),definitionKeyword:ie(qi),moduleKeyword:ie(qi),operator:Wi,derefOperator:ie(Wi),arithmeticOperator:ie(Wi),logicOperator:ie(Wi),bitwiseOperator:ie(Wi),compareOperator:ie(Wi),updateOperator:ie(Wi),definitionOperator:ie(Wi),typeOperator:ie(Wi),controlOperator:ie(Wi),punctuation:g0,separator:ie(g0),bracket:jl,angleBracket:ie(jl),squareBracket:ie(jl),paren:ie(jl),brace:ie(jl),content:Ui,heading:Ro,heading1:ie(Ro),heading2:ie(Ro),heading3:ie(Ro),heading4:ie(Ro),heading5:ie(Ro),heading6:ie(Ro),contentSeparator:ie(Ui),list:ie(Ui),quote:ie(Ui),emphasis:ie(Ui),strong:ie(Ui),link:ie(Ui),monospace:ie(Ui),strikethrough:ie(Ui),inserted:ie(),deleted:ie(),changed:ie(),invalid:ie(),meta:ef,documentMeta:ie(ef),annotation:ie(ef),processingInstruction:ie(ef),definition:br.defineModifier("definition"),constant:br.defineModifier("constant"),function:br.defineModifier("function"),standard:br.defineModifier("standard"),local:br.defineModifier("local"),special:br.defineModifier("special")};for(let n in I){let e=I[n];e instanceof br&&(e.name=n)}gT([{tag:I.link,class:"tok-link"},{tag:I.heading,class:"tok-heading"},{tag:I.emphasis,class:"tok-emphasis"},{tag:I.strong,class:"tok-strong"},{tag:I.keyword,class:"tok-keyword"},{tag:I.atom,class:"tok-atom"},{tag:I.bool,class:"tok-bool"},{tag:I.url,class:"tok-url"},{tag:I.labelName,class:"tok-labelName"},{tag:I.inserted,class:"tok-inserted"},{tag:I.deleted,class:"tok-deleted"},{tag:I.literal,class:"tok-literal"},{tag:I.string,class:"tok-string"},{tag:I.number,class:"tok-number"},{tag:[I.regexp,I.escape,I.special(I.string)],class:"tok-string2"},{tag:I.variableName,class:"tok-variableName"},{tag:I.local(I.variableName),class:"tok-variableName tok-local"},{tag:I.definition(I.variableName),class:"tok-variableName tok-definition"},{tag:I.special(I.variableName),class:"tok-variableName2"},{tag:I.definition(I.propertyName),class:"tok-propertyName tok-definition"},{tag:I.typeName,class:"tok-typeName"},{tag:I.namespace,class:"tok-namespace"},{tag:I.className,class:"tok-className"},{tag:I.macroName,class:"tok-macroName"},{tag:I.propertyName,class:"tok-propertyName"},{tag:I.operator,class:"tok-operator"},{tag:I.comment,class:"tok-comment"},{tag:I.meta,class:"tok-meta"},{tag:I.invalid,class:"tok-invalid"},{tag:I.punctuation,class:"tok-punctuation"}]);var ja={};const I7=121,vv=122,mT=123,P7=124,Ix=128,L7=4,$7=131,N7=7,F7=8,B7=9,z7=10,H7=139,vT=19,V7=140,q7=23,W7=141,j7=27,U7=37,Q7=41,Y7=145,X7=146,G7=147,Z7=148,K7=47,J7=68,yT=154,bT=70,wT=155,_T=72,e8=156,t8=76,n8=161,r8=79,i8=80,s8=81,o8=167,OT=89,a8=90,l8=169,u8=97,c8=171,f8=98,h8=100,d8=101,yv=typeof process<"u"&&ja&&/\bfparse(:dbg)?\b/.test(ja.LOG),bv=typeof process<"u"&&ja&&/\bfparse:dbg\b/.test(ja.LOG),vs=typeof process<"u"&&ja&&/\bcontext\b/.test(ja.LOG),xT=[9,11,12,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],p8=kT(`
\r`),Px=42,g8=kT("'./-+*^");function kT(n){return Array.from(n).map(e=>e.charCodeAt(0))}function m8(n){return n===63||n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=55296&&n<=56319||n>=56320&&n<=57343}function v8(n){return g8.includes(n)}function y8(n){return n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}function b8(n){return xT.includes(n)}function Lx(n,e){return e.concat(n.split(/\n/g).join(`
`+e))}function w8(n,e=0){const t=n.peek(e);return t===Px&&n.peek(e+1)===Px?{offset:2,token:"**"}:v8(t)?{offset:1,token:String.fromCharCode(t)}:null}function Fh(n,e=0,t=!1){for(let r=!1,i=[],s=0;;s++){const o=n.peek(e+s);if(m8(o)||(r||t)&&y8(o))r||(r=!0),i.push(o);else return i.length?{token:String.fromCharCode(...i),offset:s}:null}}function ST(n,e){for(let t=!1,r=0;;r++){let i=n.peek(e+r);if(b8(i))t||(t=!0);else return t?{token:" ",offset:r}:null}}function _8(n,e){const t=e.contextKeys(),r=e.tokens;for(let i=0,s=[],o=null;;){const a=r.length+s.length>0,u=s.length>0,f=Fh(n,i,a)||a&&w8(n,i)||u&&ST(n,i);if(!f)return o;const{token:h,offset:p}=f;if(i+=p,h===" ")continue;s=[...s,h];const g=[...r,...s].join(" ");if(t.some(m=>m===g)){const m=s[0];o={token:m,offset:m.length,term:mT}}if(!t.some(m=>m.startsWith(g))){if($x.some(m=>m===g)){const m=s[0];o={token:m,offset:m.length,term:vv}}if(!$x.some(m=>m.startsWith(g)))return o}}}const O8={[vv]:"identifier",[mT]:"nameIdentifier"},x8=new dl((n,e)=>{bv&&console.log("%s: T <identifier | nameIdentifier>",n.pos);const t=_8(n,e.context),r=e.context.tokens,i=t||Fh(n,0,r.length>0);i&&(n.advance(i.offset),n.acceptToken(t?t.term:vv),yv&&console.log("%s: MATCH <%s> <%s>",n.pos,t?O8[t.term]:"identifier",i.token))},{contextual:!0}),k8=new dl((n,e)=>{bv&&console.log("%s: T <propertyIdentifier>",n.pos);const t=e.context.tokens,r=Fh(n,0,t.length>0);r&&(n.advance(r.offset),n.acceptToken(I7),yv&&console.log("%s: MATCH <propertyIdentifier> <%s>",n.pos,r.token))}),S8=new dl((n,e)=>{bv&&console.log("%s: T <insertSemi>",n.pos);let t,r=!1;for(t=0;;t++){const i=n.peek(t);if(!xT.includes(i)){p8.includes(i)&&(r=!0);break}}if(r){const i=Fh(n,t+1);if(ST(n,t+1)||i&&/^(then|else|return|satisfies)$/.test(i.token))return;yv&&console.log("%s: MATCH <insertSemi>",n.pos),n.acceptToken(P7)}}),C8={[e8]:"FunctionInvocation",[wT]:"FilterExpression",[yT]:"PathExpression"},T8={[c8]:"Context",[l8]:"FunctionDefinition",[$7]:"ForExpression",[o8]:"List",[V7]:"IfExpression",[W7]:"QuantifiedExpression"},E8={[u8]:"Context",[a8]:"FunctionDefinition",[L7]:"ForExpression",[OT]:"List",[vT]:"IfExpression",[q7]:"QuantifiedExpression",[J7]:"PathExpression",[_T]:"FunctionInvocation",[bT]:"FilterExpression",[Q7]:"ArithmeticExpression"};class Ua{constructor(e){this.fn=e}get(e){return this.fn(e)}static of(e){return new Ua(e)}}const A8={"date and time":1,date:1,time:1,duration:1},$x=Object.keys(A8);class M8{constructor(e={}){this.value=e}getKeys(){return Object.keys(this.value)}get(e){const t=this.value[e],r=this.constructor;return r.isAtomic(t)?t:r.of(t)}set(e,t){return this.constructor.of({...this.value,[e]:t})}merge(e){const t=this.constructor;return new t(t.__merge(this.value,e))}static isAtomic(e){return!e||e instanceof this||e instanceof Ua||typeof e!="object"}static of(...e){return e.reduce((t,r)=>t.merge(r),new this({}))}static __unwrap(e){return e?e instanceof this?e.value:typeof e!="object"?{}:{...e}:{}}static __merge(e,t){return yL(this.__unwrap(t),(r,i,s)=>i instanceof Ua?{...r,[s]:i}:(i=this.__unwrap(i),b2(r,s)&&(i=this.__merge(this.__unwrap(r[s]),i)),{...r,[s]:i}),this.__unwrap(e))}}class gu{constructor({name:e="Expressions",tokens:t=[],children:r=[],parent:i=null,context:s,value:o,raw:a}){this.name=e,this.tokens=t,this.children=r,this.parent=i,this.context=s,this.value=o,this.raw=a}enterScope(e){const t=this.of({name:e,parent:this});return vs&&console.log("[%s] enter",t.path,t.context),t}exitScope(e){return this.parent?(vs&&console.log(`[%s] exit %o
%s`,this.path,this.context,Lx(e,"  ")),this.parent.pushChild(this)):(vs&&console.log(`[%s] NO exit %o
%s`,this.path,this.context,Lx(e,"  ")),this)}token(e){return vs&&console.log("[%s] token <%s> + <%s>",this.path,this.tokens.join(" "),e),this.assign({tokens:[...this.tokens,e]})}literal(e){return vs&&console.log("[%s] literal %o",this.path,e),this.pushChild(this.of({name:"Literal",value:e}))}computedValue(){for(let e=this;;e=Da(e.children)){if(!e)return null;if(e.value)return e.value}}contextKeys(){return this.context.getKeys().map(ao)}get path(){return this.parent?.path?.concat(" > ",this.name)||this.name}get(e){const t=[e,e&&ao(e)],r=this.context.getKeys().find(s=>t.includes(ao(s)));if(typeof r>"u")return;const i=this.context.get(r);return i instanceof Ua?i.get(this):i}resolveName(){const e=this.tokens.join(" "),t=[],r=this.assign({tokens:t}),i=this.of({name:"VariableName",parent:r,value:this.get(e),raw:e});return vs&&console.log("[%s] resolve name <%s=%s>",i.path,e,this.get(e)),r.pushChild(i)}pushChild(e){if(!e)return this;const t=this.assign({children:[...this.children,e]});return e.parent=t,t}pushChildren(e){let t=this;for(const r of e)t=t.pushChild(r);return t}declareName(){if(this.tokens.length===0)throw Error("no tokens to declare name");const e=this.tokens.join(" ");return vs&&console.log("[%s] declareName <%s>",this.path,e),this.assign({tokens:[]}).pushChild(this.of({name:"Name",value:e}))}define(e,t){if(typeof e!="string")return vs&&console.log("[%s] no define <%s=%s>",this.path,e,t),this;vs&&console.log("[%s] define <%s=%s>",this.path,e,t);const r=this.context.set(e,t);return this.assign({context:r})}assign(e={}){return gu.of({...this,...e})}of(e={}){const t={context:this.context,parent:this.parent};return gu.of({...t,...e})}static of(e){const{name:t,tokens:r=[],children:i=[],parent:s=null,context:o,value:a,raw:u}=e;if(!o)throw new Error("must provide <context>");return new gu({name:t,tokens:[...r],children:[...i],context:o,parent:s,value:a,raw:u})}}function ao(n){return n.replace(/\s*([./\-'+]|\*\*?)\s*/g," $1 ").replace(/\s{2,}/g," ").trim()}function Nx(n,e,t){const r=n.children.filter(f=>f.name!==e),i=n.children.filter(f=>f.name===e),s=r[0],o=r[Math.max(1,r.length-1)],a=s?.computedValue(),u=o?.computedValue()||null;return n.assign({children:i}).enterScope(e).pushChildren(r).exitScope(t).define(a,u)}function Uu(n={},e=M8){const t=gu.of({context:e.of(n)});return new x7({start:t,reduce(r,i,s,o){if(i===vT){const[p,g]=r.children.slice(-2);r=r.assign({value:e.of(p?.computedValue(),g?.computedValue())})}if(i===OT&&(r=r.assign({value:e.of(...r.children.map(p=>p?.computedValue()))})),i===bT){const[p,g]=r.children.slice(-2);r=r.assign({value:p?.computedValue()})}if(i===_T){const[p,...g]=r.children;p?.raw==="get value"&&(r=R8(r,g))}const a=T8[i];if(a)return r.enterScope(a);const u=C8[i];if(u){const{children:p,context:g}=r,m=p.slice(0,-1),y=Da(p);let b=null;return i===yT&&(b=e.of(y?.computedValue())),i===wT&&(b=e.of(g,y?.computedValue()).set("item",y?.computedValue())),r.assign({children:m}).enterScope(u).pushChild(y).assign({context:b||g})}const f=o.read(o.pos,s.pos);if(E8[i])return r.exitScope(f);if(i===f8){const p=r.children.filter(y=>y.name!=="ContextEntry"),g=p[0],m=Da(p);return Nx(r,"ContextEntry",f).assign({value:e.of(r.value).set(g?.computedValue(),m?.computedValue())})}if(i===N7||i===j7)return Nx(r,"InExpression",f);if(i===H7)return r.define("partial",Ua.of(p=>Da(p.children)?.computedValue()));if(i===t8){const p=Da(r.children).computedValue();return r.define(p,1)}if(i===Y7||i===X7||i===G7){const p=r.children.slice(0,-1),g=Da(r.children);return r.assign({children:p}).enterScope("ArithmeticExpression").pushChild(g)}if(i===Z7)return r.enterScope("ArithmeticExpression");if(i===B7||i===z7||i===d8)return r.token(f);if(i===i8)return r.literal(f.replace(/^"|"$/g,""));if(i===s8)return r.literal(f==="true");if(i===r8)return r.literal(parseFloat(f));if(i===n8)return r.literal(null);if(i===K7)return r.resolveName();if(i===F7||i===h8)return r.declareName();if((i===Ix||i===U7)&&r.tokens.length>0)throw new Error("uncleared name");if(i===Ix){let p=r;for(;p.parent;)p=p.exitScope(f);return p}return r}})}const D8=Uu({});function R8(n,e){if(!e.length)return n.assign({value:null});if(e[0].name==="Name"&&(e=I8(e,["m","key"])),e.length!==2)return n.assign({value:null});const[t,r]=e,i=r?.computedValue(),s=t?.computedValue();return!s||typeof s!="object"||typeof i!="string"?n.assign({value:null}):n.assign({value:[ao(i),i].reduce((o,a)=>s.get(a)||o,null)})}function I8(n,e){const t={};for(let r=0;r<n.length;r+=2){const[i,s]=n.slice(r,r+2);t[i.value]=s}return e.map(r=>t[r])}function Da(n){return n[n.length-1]}const P8=ju({StringLiteral:I.string,NumericLiteral:I.number,BooleanLiteral:I.bool,"AtLiteral!":I.special(I.string),CompareOp:I.compareOperator,ArithOp:I.arithmeticOperator,"for if then else some every satisfies between return":I.controlKeyword,"in instance of and or":I.operatorKeyword,function:I.definitionKeyword,as:I.keyword,"Type/...":I.typeName,Wildcard:I.special(I.variableName),null:I.null,LineComment:I.lineComment,BlockComment:I.blockComment,'VariableName! "?"':I.variableName,"DateTimeConstructor! SpecialFunctionName!":I.function(I.special(I.variableName)),"List Interval":I.list,Context:I.definition(I.literal),"Name!":I.definition(I.variableName),"Key/Name! ContextEntryType/Name!":I.definition(I.propertyName),"PathExpression/VariableName!":I.function(I.propertyName),"FormalParameter/ParameterName!":I.function(I.definition(I.variableName)),"( )":I.paren,"[ ]":I.squareBracket,"{ }":I.brace,".":I.derefOperator,", ;":I.separator,"..":I.punctuation}),L8={__proto__:null,for:10,in:32,return:36,if:40,then:42,else:44,some:48,every:50,satisfies:56,or:60,and:64,between:72,instance:86,of:89,days:101,time:103,duration:105,years:107,months:109,date:111,list:117,context:123,function:130,null:156,true:330,false:330,"?":170,external:186,not:211},Bh=Tu.deserialize({version:14,states:"C|O`QYOOO`QYOOO$sQYOOOOQU'#Ce'#CeO$}QYO'#C`O&WQYO'#FQOOQQ'#Ff'#FfO&bQYO'#FfO`QYO'#DVOOQU'#En'#EnO(UQ^O'#D]OOQU'#D^'#D^OOQU'#D]'#D]OOQO'#Fn'#FnO*RQWO'#DvOOQQ'#D}'#D}OOQQ'#EO'#EOOOQQ'#EP'#EPO*WOWO'#ESO*RQWO'#EQOOQQ'#EQ'#EQOOQQ'#Ft'#FtOOQQ'#Fr'#FrOOQQ'#Fy'#FyOOQQ'#EU'#EUO`QYO'#EWOOQQ'#FS'#FSO*]Q^O'#FSO,SQYO'#EXO,ZQWO'#EYOOQP'#F}'#F}O,`QXO'#EaOOQQ'#Fz'#FzOOQQ'#FR'#FRQOQWOOOOQQ'#FT'#FTOOQQ'#F^'#F^O`QYO'#CoOOQQ'#F_'#F_O$}QYO'#CsO,kQYO'#DwOOQQ'#Fs'#FsO,pQYO'#EROOQO'#ER'#ERO`QYO'#EVO`QYO'#EUOOQO'#F{'#F{Q,xQWOOO,}QYO'#DRO-tQWO'#FbOOQO'#DT'#DTO.PQYO'#FfO.WQWOOO.}QYO'#CdO/[QYO'#FVOOQQ'#Cc'#CcO/aQYO'#FUOOQQ'#Cb'#CbO/iQYO,58zO`QYO,59iOOQQ'#Fc'#FcOOQQ'#Fd'#FdOOQQ'#Fe'#FeO`QYO,59qO`QYO,59qO`QYO,59qOOQQ'#Fl'#FlO/nQYO,5:^OOQQ'#Fm'#FmO`QYO,5:`O`QYO,59eO`QYO,59gO`QYO,59iO1jQYO,59iO1qQYO,59rOOQQ,5:i,5:iO1vQYO,59qOOQU-E8l-E8lO3jQYO'#FoOOQQ,5:b,5:bOOQQ,5:n,5:nOOQQ,5:l,5:lO3qQYO,5:rOOQQ,5;n,5;nO3{QYO,5:qO4YQWO,5:sO4_QYO,5:tOOQP'#Ee'#EeO5UQXO'#EdOOQO'#Ec'#EcO5]QWO'#EbO5bQWO'#GOO5jQWO,5:{O5oQYO,59ZO/[QYO'#FaOOQQ'#Cw'#CwO5vQYO'#F`OOQQ'#Cv'#CvO6OQYO,59_O6TQYO,5:cO6YQYO,5:mO3tQYO,5:qO6_QYO,5:pO`QYO'#EwQ,xQWOOO`QYO'#EmO7UQWO,5;|O`QYOOOOQR'#Cf'#CfOOQQ'#Ej'#EjO8OQYO,59OO`QYO,5;qOOQQ'#FY'#FYO$}QYO'#EkO8`QYO,5;pO`QYO1G.fOOQQ'#F]'#F]O9VQYO1G/TO;|QYO1G/]O<WQYO1G/]O<bQYO1G/]OOQQ1G/x1G/xO>UQYO1G/zO>]QYO1G/PO?fQYO1G/RO@oQYO1G/TO`QYO1G/TOOQQ1G/T1G/TOAVQYO1G/^OAtQ^O'#CdOCWQYO'#FqOOQO'#Dz'#DzOCbQWO'#DyOCgQWO'#FpOOQO'#Dx'#DxOOQO'#D{'#D{OCoQWO,5<ZOOQQ1G0^1G0^O`QYO1G0]O`QYO'#EsOCtQWO,5<]OOQQ1G0_1G0_ODPQWO'#E[OD[QWO'#F|OOQO'#EZ'#EZODdQWO1G0`OOQP'#Eu'#EuODiQXO,5;OO`QYO,5:|ODpQXO'#EvODxQWO,5<jOOQQ1G0g1G0gO`QYO1G.uO`QYO,5;{O$}QYO'#ElOEQQYO,5;zO`QYO1G.yOEYQYO1G/}OOQO1G0X1G0XOOQO,5;c,5;cOOQO-E8u-E8uOOQO,5;X,5;XOOQO-E8k-E8kOE_QWOOOOQQ-E8h-E8hOEdQYO'#CmOOQQ1G1]1G1]OOQQ,5;V,5;VOOQQ-E8i-E8iOEqQYO7+$QOOQQ7+%f7+%fO`QYO7+$oOFhQYO,5:rOFuQWO7+$oOFzQYO'#D[OOQQ'#DZ'#DZOHnQYO'#D_OHsQYO'#D_OHxQYO'#D_OH}Q`O'#DgOISQ`O'#DjOIXQ`O'#DnOOQQ7+$x7+$xO`QYO,5:eO$}QYO'#ErOI^QWO,5<[OOQQ1G1u1G1uOJdQYO7+%wOJqQYO,5;_OOQO-E8q-E8qOAVQYO,5:vO$}QYO'#EtOKOQWO,5<hOKWQYO7+%zOOQP-E8s-E8sOK_QYO1G0hOOQO,5;b,5;bOOQO-E8t-E8tOKiQYO7+$aOKpQYO1G1gOOQQ,5;W,5;WOOQQ-E8j-E8jOKzQYO7+$eOOQO7+%i7+%iO`QYO,59XOLqQYO<<HZOOQQ<<HZ<<HZO/nQYO'#EoOMzQYO,59vO! nQYO,59yO! sQYO,59yO! xQYO,59yO! }QYO,5:RO$}QYO,5:UO!!lQbO,5:YO!!sQYO1G0POOQO,5;^,5;^OOQO-E8p-E8pO!!}QYO<<IcOOQQ<<Ic<<IcOOQO1G0b1G0bOOQO,5;`,5;`OOQO-E8r-E8rO!%|QYO'#E^OOQQ<<If<<IfO`QYO<<IfO`QYO<<G{O!&sQYO1G.sOOQQ,5;Z,5;ZOOQQ-E8m-E8mO!&}QYO1G/eOOQQ1G/e1G/eO!'SQbO'#D]O!'eQ`O'#D[O!'pQ`O1G/mO!'uQWO'#DmO!'zQ`O'#FhOOQO'#Dl'#DlO!(SQ`O1G/pOOQO'#Dq'#DqO!(XQ`O'#FjOOQO'#Dp'#DpO!(aQ`O1G/tOOQQAN?QAN?QO!(fQYOAN=gOOQQ7+%P7+%PO!)]Q`O,59vOOQQ7+%X7+%XO! }QYO,5:XO$}QYO'#EpO!)hQ`O,5<SOOQQ7+%[7+%[O! }QYO'#EqO!)pQ`O,5<UO!)xQ`O7+%`OOQO1G/s1G/sOOQO,5;[,5;[OOQO-E8n-E8nOOQO,5;],5;]OOQO-E8o-E8oOAVQYO<<HzOOQQAN>fAN>fO/nQYO'#EoO! }QYO<<HzO!)}Q`O7+%`O!*SQ`O1G/tO!!lQbO,5:YO!*XQ`O'#Dn",stateData:"!*h~O#rOS#sOSPOSQOS~OTsOZVO[UOdtOhvOivOr}Os}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~OTsO[UOdtOhvOivOr}Os}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~OZ!TO#]!UO~P#SO#nRO#oRO~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO!i!fO#z!dOv$bX~O#l#tX$s#tX~P%VO$i!mOT$YXZ$YX[$YXd$YXh$YXi$YXr$YXs$YXv$YX!T$YX!U$YX!V$YX!X$YX!c$YX!g$YX!i$YX!p$YX!w$YX#S$YX#n$YX#o$YX$Z$YX$j$YX$k$YX$l$YX~O#nRO#oROZ!PX[!PX]!PX^!PX_!PX`!PXn!PXp!PXr!PXs!PXt!PXv!PX{!PX!i!PX#l!PX#p!PX#z!PX$s!PX$O!PXx!PX#}!PX!g!PXe!PXb!PX#R!PXf!PXl!PX~Ov!pO~O$j`O~O#p!uOZ#vX[#vX]#vX^#vX_#vX`#vXn#vXp#vXr#vXs#vXt#vXv#vX{#vX!i#vX#l#vX#z#vX$s#vX$O#vXx#vX#}#vX!g#vXe#vXb#vX#R#vXf#vXl#vX~O!g$eP~P`Ov!xO~O#m!yO$j`O#R$rP~Op#VO~Op#WOv!uX~O$s#ZO~O#luX$OuX$suXxuX#}uX!guXeuXbuX#RuXfuXluX~P%VO$O#]O#l$UXx$UX~O#l#[X~P&bOv#_O~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O$]WX~O`WXxWX$OWX~P.]O`#dO~O$O#eOb#xX~Ob#hO~O#nRO#oRO$ZZO~OTsOZVO[UOdtOhvOivOr}Os}O!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~Ov#rO~P/yO|#tO~O{!lO!i!fO#z!dOZya[ya]ya^ya_ya`yanyapyaryasyatyav$bX#lya$sya$Oyaxya#}ya!gyaeyabya#Ryafyalya~Ox$eP~P`Ox#}O#}$OO~P%VO#}$OO$O$PO!g$eX~P%VO!g$RO~O#nRO#oROx$pP~OZ#`O[#`O]#`O^#`O_#`O#m!yO#z#`O#{#`O~O$]#WX~P4jO$]$YO~O$O$ZO#R$rX~O#R$]O~Oe$^O~P%VO$O$`Ol$SX~Ol$bO~O!W$cO~O!T$dO~O#l!xa$s!xa$O!xax!xa#}!xa!g!xae!xab!xa#R!xaf!xal!xa~P%VO$O#]O#l$Uax$Ua~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O~O`Wa$]WaxWa$OWa~P7aO$O#eOb#xa~OZ!^O[!^O]!_O^!_O_!`O{!lO!i!fO#z!dOv$bX~O`qinqipqirqisqitqi#lqi$sqi$Oqixqi#}qi!gqieqibqi#Rqifqilqi~P8hO_!`O{!lO!i!fO#z!dOZyi[yi`yinyipyiryisyityiv$bX#lyi$syi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O]!_O^!_O~P:`O]yi^yi~P:`O{!lO!i!fO#z!dOZyi[yi]yi^yi_yi`yinyipyiryisyityiv$bX#lyi$syi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O!g$pO~P%VO`!kOp!iOr!]Os!]Ot!jOnmi#lmi$smi$Omixmi#}mi!gmiemibmi#Rmifmilmi~P8hO`!kOr!]Os!]Ot!jOnoipoi#loi$soi$Ooixoi#}oi!goieoiboi#Roifoiloi~P8hO`!kOn!hOp$qOr!]Os!]Ot!jO~P8hO!S$vO!V$wO!X$xO![$yO!_$zO!c${O#nRO#oRO$ZZO~OZ#bX[#bX]#bX^#bX_#bX`#bXn#bXp#bXr#bXs#bXt#bXv#bXx#bX{#bX!i#bX#n#bX#o#bX#p#bX#z#bX$O#bX~P.]O$O$POx$eX~P%VO$]$}O~O$O%OOx$dX~Ox%QO~O$O$PO!g$eax$ea~O$]%UOx#OX$O#OX~O$O%VOx$pX~Ox%XO~O$]#Wa~P4jO#m!yO$j`O~O$O$ZO#R$ra~O$O$`Ol$Sa~O!U%cO~OxrO~O#}%dObaX$OaX~P%VO#lSq$sSq$OSqxSq#}Sq!gSqeSqbSq#RSqfSqlSq~P%VOx#}O#}$OO$OuX~P%VOx%fO~O#z%gOZ!OX[!OX]!OX^!OX_!OX`!OXn!OXp!OXr!OXs!OXt!OXv!OX{!OX!i!OX#l!OX$s!OX$O!OXx!OX#}!OX!g!OXe!OXb!OX#R!OXf!OXl!OX~Op%iO~Op%jO~Op%kO~O!]%lO~O!]%mO~O!]%nO~O$O%OOx$da~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO#z!dOv$bX~Ox%sO!g%sO!i%rO~PIfO!g#ga$O#gax#ga~P%VO$O%VOx$pa~O#P%yO~P`O#R#Ui$O#Ui~P%VOf%zO~P%VOl$Ti$O$Ti~P%VO#lgq$sgq$Ogqxgq#}gq!ggqegqbgq#Rgqfgqlgq~P%VO`qynqypqyrqysqytqy#lqy$sqy$Oqyxqy#}qy!gqyeqybqy#Rqyfqylqy~P8hO#z%gOZ!Oa[!Oa]!Oa^!Oa_!Oa`!Oan!Oap!Oar!Oas!Oat!Oav!Oa{!Oa!i!Oa#l!Oa$s!Oa$O!Oax!Oa#}!Oa!g!Oae!Oab!Oa#R!Oaf!Oal!Oa~O!T&OO~O!W&OO~O!T&PO~O!S$vO!V$wO!X$xO![$yO!_$zO!c&uO#nRO#oRO$ZZO~O!Y$^P~P! }Ox!mi$O!mi~P%VOT$aXZ$aX[$aX]!yy^!yy_!yy`!yyd$aXh$aXi$aXn!yyp!yyr$aXs$aXt!yyv$aX{!yy!T$aX!U$aX!V$aX!X$aX!c$aX!g$aX!i$aX!p$aX!w$aX#S$aX#l!yy#n$aX#o$aX#z!yy$Z$aX$i$aX$j$aX$k$aX$l$aX$s!yy$O!yyx!yy#}!yye!yyb!yy#R!yyf!yyl!yy~O#l#QX$s#QX$O#QXx#QX#}#QX!g#QXe#QXb#QX#R#QXf#QXl#QX~P%VObai$Oai~P%VO!U&_O~O#nRO#oRO!Y!PX#z!PX$O!PX~O#z&pO!Y!OX$O!OX~O!Y&aO~O$]&bO~O$O&cO!Y$[X~O!Y&eO~O$O&fO!Y$^X~O!Y&hO~O#lc!R$sc!R$Oc!Rxc!R#}c!R!gc!Rec!Rbc!R#Rc!Rfc!Rlc!R~P%VO#z&pO!Y!Oa$O!Oa~O$O&cO!Y$[a~O$O&fO!Y$^a~O$_&nO~O$_&qO~O!Y&rO~O!]&tO~O$Z~QP_^$i]#z~",goto:"E|$sPPPP$tP%m%p%v&Y'sPPPPPP'|P$tPPP$tPP(P(SP$tP$tP$tPPP(YP(eP$t$tPP(n)T)`*m)TPPPPPPP)TPP)TP+r+u)TP+{,R$tP$tP$t,Y-R-U-[-RP-d.]-d-d/]0UP$t0}$t1v1v2o2rP2xPP1v3O3U/X3YPP3bP3e3l3r3x4O5Z5e5k5q5w6O6U6[6bPPPPPPPP6h6q8x9q:j:mPP:qPP:w:z;s<l<o<s<x=g>V>vP?oP?rP?v@iA[BTBZB^$tBdBdPPPPC]8xDUD}EQEy!mjOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR![SQ!YSR$m#eS!WS#eS#Qw$`W#w!p!x%O%VT&T%m&c#WXOPQWYilu|}!]!a!b!c!e!g!h!i!j!k#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&Q&b&f&n&p&q&tb!VSw!x#e$`%O%V%m&cU#a!V#b#uR#u!pU#a!V#b#uT$W!z$XR$l#cR#UwQ#SwR%`$`U!RQ#_#rQ#s!kR$g#]QrQQ$i#_R$s#rQ$|#tQ%t%UQ&S%lU&X%n&f&tQ&i&bT&o&n&qc$u#t%U%l%n&b&f&n&q&t!lkOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ#m!eU$t#t%U&nS%|%g&p]&R%l%n&b&f&q&t#V[OPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&b&f&n&p&q&tR&W%mQ&U%mR&j&cQ&[%nR&s&tS&Y%n&tR&l&f!m]OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#|!pQ#y!pR%p%OS#x!p%OT$S!x%V!meOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!leOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!rbT!{o$Z!mcOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mdOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mhOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mpOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$V!xQ$T!xR%u%VQ%x%XR&]%yQ!}oR%[$ZT!|o$ZS!zo$ZT$W!z$XRrQS#b!V#uR$j#bQ#f!YR$n#fQ$a#SR%a$aQ#^!RR$h#^!vYOPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%y%z&nS!oY&Q_&Q%l%n&b&f&p&q&tQ%h$tS%}%h&`R&`&RQ&d&UR&k&dQ&g&YR&m&gQ%P#yR%q%PS$Q!v#vR%T$QQ%W$TR%v%WQ$X!zR%Y$XQ$[!}R%]$[Q#[!PR$f#[QrOQ!PPR$e#ZUTOP#ZW!QQ!k#]#_Q!nWQ!tiQ!vlQ#PuQ#X|Q#Y}Q#i!]Q#j!aQ#k!bQ#l!cQ#n!gQ#o!hQ#p!iQ#q!jQ#v!pQ$k#cQ$o#gQ$r#rQ%R$OQ%S$PQ%Z$YQ%^$^Q%_$_Q%b$bQ%e$qQ%o$}S%w%X%yQ%{%dR&^%z!mqOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mSOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR!ZST!XS#eQ#c!WR$_#QR#g![!muOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mwOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#TwT#Rw$`V!SQ#_#r!X!aT!Q!t!v#P#X#Y#i#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!Z!bT!Q!t!v#P#X#Y#i#j#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!]!cT!Q!t!v#P#X#Y#i#j#k#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!mWOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR&V%mT&Z%n&t!a!eT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!a!gT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!m^OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!q^R!scR#z!pQ!wlR#{!p!mfOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mlOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mmOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$U!x!moOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#Oo",nodeNames:" LineComment BlockComment Expression ForExpression for InExpressions InExpression Name Identifier Identifier ArithOp ArithOp ArithOp ArithOp ArithOp in IterationContext return IfExpression if then else QuantifiedExpression some every InExpressions InExpression satisfies Disjunction or Conjunction and Comparison CompareOp CompareOp between PositiveUnaryTest ( PositiveUnaryTests ) ArithmeticExpression InstanceOfExpression instance of Type QualifiedName VariableName BacktickIdentifier SpecialType days time duration years months date > ListType list < ContextType context ContextEntryTypes ContextEntryType FunctionType function ArgumentTypes ArgumentType PathExpression ] FilterExpression [ FunctionInvocation SpecialFunctionName NamedParameters NamedParameter ParameterName PositionalParameters null NumericLiteral StringLiteral BooleanLiteral DateTimeLiteral DateTimeConstructor AtLiteral ? SimplePositiveUnaryTest Interval ParenthesizedExpression List FunctionDefinition FormalParameters FormalParameter external FunctionBody } { Context ContextEntry Key Name Identifier Expressions UnaryTests Wildcard not",maxTerm:173,context:D8,nodeProps:[["group",-17,4,19,23,29,31,33,41,42,68,70,72,85,86,88,89,90,97,"Expr",47,"Expr Expr",-5,78,79,80,81,82,"Expr Literal"],["closedBy",38,")",71,"]",96,"}"],["openedBy",40,"(",69,"[",95,"{"]],propSources:[P8],skippedNodes:[0,1,2],repeatNodeCount:14,tokenData:".Z~RvXY#iYZ$^Z[#i]^$^pq#iqr$crs$nwx&fxy&kyz&pz{&u{|'S|}'X}!O'^!O!P'k!P!Q(u!Q![*p![!]+X!]!^+^!^!_+c!_!`$i!`!a+r!b!c+|!}#O,R#P#Q,W#Q#R&}#S#T,]#o#p.P#q#r.U$f$g#i#BY#BZ#i$IS$I_#i$I|$I}$^$I}$JO$^$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~#nY#r~XY#iZ[#ipq#i$f$g#i#BY#BZ#i$IS$I_#i$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~$cO#s~~$fP!_!`$i~$nOr~~$sW$j~OY$nZr$nrs%]s#O$n#O#P%b#P;'S$n;'S;=`&`<%lO$n~%bO$j~~%eRO;'S$n;'S;=`%n;=`O$n~%sX$j~OY$nZr$nrs%]s#O$n#O#P%b#P;'S$n;'S;=`&`;=`<%l$n<%lO$n~&cP;=`<%l$n~&kO#{~~&pOv~~&uOx~~&zP^~z{&}~'SO_~~'XO[~~'^O$O~R'cPZP!`!a'fQ'kO$_Q~'pQ#z~!O!P'v!Q!['{~'{O#}~~(QR$i~!Q!['{!g!h(Z#X#Y(Z~(^R{|(g}!O(g!Q![(m~(jP!Q![(m~(rP$i~!Q![(m~(zQ]~z{)Q!P!Q*X~)TTOz)Qz{)d{;'S)Q;'S;=`*R<%lO)Q~)gVOz)Qz{)d{!P)Q!P!Q)|!Q;'S)Q;'S;=`*R<%lO)Q~*ROQ~~*UP;=`<%l)Q~*^SP~OY*XZ;'S*X;'S;=`*j<%lO*X~*mP;=`<%l*X~*uS$i~!O!P+R!Q![*p!g!h(Z#X#Y(Z~+UP!Q!['{~+^O$]~~+cO$s~R+jP!]QsP!_!`+mP+rOsPR+yP!YQsP!_!`+m~,RO$l~~,WO!i~~,]O!g~~,`WOY,]Z#O,]#O#P,x#P#S,]#S#T-t#T;'S,];'S;=`-y<%lO,]~,{RO;'S,];'S;=`-U;=`O,]~-XXOY,]Z#O,]#O#P,x#P#S,]#S#T-t#T;'S,];'S;=`-y;=`<%l,]<%lO,]~-yO$Z~~-|P;=`<%l,]~.UO#S~~.ZO#R~",tokenizers:[k8,x8,S8,0,1],topRules:{Expression:[0,3],Expressions:[1,102],UnaryTests:[2,103]},dialects:{camunda:2544},dynamicPrecedences:{31:-1,68:1,72:-1,74:-1},specialized:[{term:122,get:n=>L8[n]||-1}],tokenPrec:2546});function $8(n){return Object.getPrototypeOf(n)===Object.prototype}function wr(n){return xe.isDateTime(n)}function gi(n){return Ne.isDuration(n)}function yi(n){return Array.isArray(n)}function N8(n){return typeof n=="boolean"}function tn(n){return n==null?"nil":N8(n)?"boolean":ws(n)?"number":Bo(n)?"string":$8(n)?"context":yi(n)?"list":gi(n)?"duration":wr(n)?n.year===1900&&n.month===1&&n.day===1?"time":n.hour===0&&n.minute===0&&n.second===0&&n.millisecond===0&&n.zone===rn.utcInstance?"date":"date time":n instanceof Or?"range":n instanceof Ff?"function":"literal"}function m0(n,e){return tn(n)===e}function F8(n,e){if(wr(n)){if(e==="time")return n.set({year:1900,month:1,day:1});if(e==="date")return n.setZone("utc",{keepLocalTime:!0}).startOf("day");if(e==="date time")return n}return null}let Or=class{constructor(e){Object.assign(this,e)}};function ws(n){return typeof n=="number"}function Bo(n){return typeof n=="string"}function lo(n,e,t=!1){if(n===null&&e!==null||n!==null&&e===null)return!1;yi(n)&&n.length<2&&(n=n[0]),yi(e)&&e.length<2&&(e=e[0]);const r=tn(n),i=tn(e),s=["date time","time","date"];if(s.includes(r))return!s.includes(i)||r==="time"&&i!=="time"||i==="time"&&r!=="time"?null:t||n.zone===ir.instance||e.zone===ir.instance?n.equals(e):n.toUTC().valueOf()===e.toUTC().valueOf();if(r!==i)return null;if(r==="nil")return!0;if(r==="list")return n.length!==e.length?!1:n.every((o,a)=>lo(o,e[a]));if(r==="duration")return Math.abs(n.as("days"))>180?Math.trunc(n.minus(e).as("months"))===0:Math.trunc(n.minus(e).as("seconds"))===0;if(r==="context"){const o=Object.entries(n),a=Object.entries(e);return o.length!==a.length?!1:o.every(([u,f])=>u in e&&lo(f,e[u]))}return r==="range"?[[n.start,e.start],[n.end,e.end],[n["start included"],e["start included"]],[n["end included"],e["end included"]]].every(([o,a])=>o===a):n==e?!0:r===i?!1:null}let Ff=class{constructor(e,t){this.fn=e,this.parameterNames=t}invoke(e){let t;if(yi(e)){if(t=e,t.length>this.parameterNames.length){const r=this.parameterNames[this.parameterNames.length-1];if(!r||!r.startsWith("..."))return null}}else{if(Object.keys(e).some(r=>!this.parameterNames.includes(r)&&!this.parameterNames.includes(`...${r}`)))return null;t=this.parameterNames.reduce((r,i)=>{if(i.startsWith("...")){i=i.slice(3);const s=e[i];return s?[...r,...yi(s)?s:[s]]:r}return[...r,e[i]]},[])}return this.fn.call(null,...t)}};function wv(n){if(Array.isArray(n.$args))return n.$args;const e=n.toString(),t=/^(?:[^(]*\s*)?\(([^)]+)?\)/.exec(e);if(!t)throw new Error("failed to parse params: "+e);const[r,i]=t;return i?i.split(",").map(s=>s.trim()):[]}function fn(n){return new Error(`not implemented: ${n}`)}function B8(n){return/^not implemented/.test(n.message)}function ah(n,e){if(["nil","boolean","number","string"].includes(tn(e)))return;if(n in e)return e[n];const t=ao(n);if(t in e)return e[t];const r=Object.entries(e).find(([i])=>t===ao(i));if(r)return r[1]}function Fx(n){return typeof n=="number"?Ne.fromMillis(n):Ne.fromISO(n)}function Br(n=null,e=null,t=null){if(e){if(n)throw new Error("<str> and <time> provided");return Br(`1900-01-01T${e}`,null)}if(typeof n=="string"){if(n.startsWith("-"))throw fn("negative date");if(!n.includes("T"))return Br(n+"T00:00:00",null,t||rn.utcInstance);if(n.includes("@")){if(t)throw new Error("<zone> already provided");const[r,i]=n.split("@");return Br(r,null,Pa.normalizeZone(i))}return xe.fromISO(n.toUpperCase(),{setZone:!0,zone:t})}return xe.now()}const z8={number:ue(function(n,e,t){if(arguments.length!==3)return null;e&&(n=n.split(e).join("")),t&&t!=="."&&(n=n.split(".").join("#").split(t).join("."));const r=+n;return isNaN(r)?null:r},["string","string?","string?"],["from","grouping separator","decimal separator"]),string:ue(function(n){return n===null?null:_v(n)},["any"]),date:ue(function(n,e,t,r){!r&&!ws(n)&&(r=n,n=null);let i;if(Bo(r)&&(i=Br(r)),wr(r)&&(i=r),n){if(!ws(e)||!ws(t))return null;i=Br().setZone("utc").set({year:n,month:e,day:t})}return i&&Sa(i.setZone("utc").startOf("day"))||null},["any?","number?","number?","any?"]),"date and time":ue(function(n,e,t){let r;if(wr(n)&&wr(e)){const i=n.toLocal();r=e.set({year:i.year,month:i.month,day:i.day})}return Bo(n)&&(t=n,n=null),Bo(t)&&(r=Br(t,null,t.includes("@")?null:ir.instance)),r&&Sa(r)||null},["any?","time?","string?"],["date","time","from"]),time:ue(function(n,e,t,r,i){let s;if(r)throw fn("time(..., offset)");if((Bo(n)||wr(n))&&(i=n,n=null),Bo(i)&&i&&(s=Br(null,i)),wr(i)&&(s=i.set({year:1900,month:1,day:1})),ws(n)){if(!ws(e)||!ws(t))return null;s=Br().set({hour:n,minute:e,second:t}).set({year:1900,month:1,day:1,millisecond:0})}return s&&Sa(s)||null},["any?","number?","number?","any?","any?"]),duration:ue(function(n){return Sa(Fx(n))},["string"]),"years and months duration":ue(function(n,e){return Sa(e.diff(n,["years","months"]))},["date","date"]),"@":ue(function(n){let e;return/^-?P/.test(n)?e=Fx(n):/^[\d]{1,2}:[\d]{1,2}:[\d]{1,2}/.test(n)?e=Br(null,n):e=Br(n),e&&Sa(e)||null},["string"]),now:ue(function(){return Br()},[]),today:ue(function(){return Br().startOf("day")},[]),not:ue(function(n){return m0(n,"boolean")?!n:null},["any"]),substring:ue(function(n,e,t){const r=e<0?n.length+e:e-1,i=Array.from(n);return(typeof t<"u"?i.slice(r,r+t):i.slice(r)).join("")},["string","number","number?"],["string","start position","length"]),"string length":ue(function(n){return W8(n)},["string"]),"upper case":ue(function(n){return n.toUpperCase()},["string"]),"lower case":ue(function(n){return n.toLowerCase()},["string"]),"substring before":ue(function(n,e){const t=n.indexOf(e);return t===-1?"":n.substring(0,t)},["string","string"]),"substring after":ue(function(n,e){const t=n.indexOf(e);return t===-1?"":n.substring(t+e.length)},["string","string"]),replace:ue(function(n,e,t,r){const i=mm(e,r||"","g");return i&&n.replace(i,t.replace(/\$0/g,"$$&"))},["string","string","string","string?"]),contains:ue(function(n,e){return n.includes(e)},["string","string"]),matches:ue(function(n,e,t){const r=mm(e,t||"","");return r&&r.test(n)},["string","string","string?"]),"starts with":ue(function(n,e){return n.startsWith(e)},["string","string"]),"ends with":ue(function(n,e){return n.endsWith(e)},["string","string"]),split:ue(function(n,e){const t=mm(e,"","");return t&&n.split(t)},["string","string"]),"string join":ue(function(n,e){return n.some(t=>!Bo(t)&&t!==null)?null:n.filter(t=>t!==null).join(e||"")},["list","string?"]),"list contains":ue(function(n,e){return n.some(t=>Bx(t,e))},["list","any?"]),"list replace":ue(function(n,e,t,r){const i=e||r;return["number","function"].includes(tn(i))?U8(n,e||r,t):null},["list","any?","any","function?"]),count:ue(function(n){return n.length},["list"]),min:gr(function(...n){return n.reduce((e,t)=>e===null?t:Math.min(e,t),null)},"number"),max:gr(function(...n){return n.reduce((e,t)=>e===null?t:Math.max(e,t),null)},"number"),sum:gr(function(...n){return Hx(n)},"number"),mean:gr(function(...n){const e=Hx(n);return e===null?e:e/n.length},"number"),all:gr(function(...n){let e=!1;for(const t of n){if(t===!1)return!1;typeof t!="boolean"&&(e=!0)}return e?null:!0},"any?"),any:gr(function(...n){let e=!1;for(const t of n){if(t===!0)return!0;typeof t!="boolean"&&(e=!0)}return e?null:!1},"any?"),sublist:ue(function(n,e,t){const r=e<0?n.length+e:e-1;return typeof t<"u"?n.slice(r,r+t):n.slice(r)},["list","number","number?"]),append:ue(function(n,...e){return n.concat(e)},["list","any?"]),concatenate:ue(function(...n){return n.reduce((e,t)=>e.concat(t),[])},["any"]),"insert before":ue(function(n,e,t){return n.slice(0,e-1).concat([t],n.slice(e-1))},["list","number","any?"]),remove:ue(function(n,e){return n.slice(0,e-1).concat(n.slice(e))},["list","number"]),reverse:ue(function(n){return n.slice().reverse()},["list"]),"index of":ue(function(n,e){return n.reduce(function(t,r,i){return Bx(r,e)&&t.push(i+1),t},[])},["list","any"]),union:gr(function(...n){return n.reduce((e,t)=>t.reduce((r,i)=>(r.some(s=>lo(i,s))||r.push(i),r),e),[])},"list"),"distinct values":ue(function(n){return n.reduce((e,t)=>(e.some(r=>lo(t,r))||e.push(t),e),[])},["list"]),flatten:ue(function(n){return v0(n)},["list"]),product:gr(function(...n){return n.length===0?null:n.reduce((e,t)=>e*t,1)},"number"),median:gr(function(...n){return n.length===0?null:Q8(n)},"number"),stddev:gr(function(...n){return n.length<2?null:j8(n)},"number"),mode:gr(function(...n){return Y8(n)},"number"),decimal:ue(function(n,e){if(!e)return qx(n);const t=Math.pow(10,e);return qx(n*t)/t},["number","number"]),floor:ue(function(n,e=0){if(e===null)return null;const t=Math.pow(10,e);return Math.floor(n*t)/t},["number","number?"]),ceiling:ue(function(n,e=0){if(e===null)return null;const t=Math.pow(10,e);return Math.ceil(n*t)/t},["number","number?"]),abs:ue(function(n){return typeof n!="number"?null:Math.abs(n)},["number"]),"round up":ue(function(n,e){throw fn("round up")},["number","number"]),"round down":ue(function(n,e){throw fn("round down")},["number","number"]),"round half up":ue(function(n,e){throw fn("round half up")},["number","number"]),"round half down":ue(function(n,e){throw fn("round half down")},["number","number"]),modulo:ue(function(n,e){if(!e)return null;const t=1e9;return Math.round((n%e+e)%e*t)/t},["number","number"]),sqrt:ue(function(n){return n<0?null:Math.sqrt(n)},["number"]),log:ue(function(n){return n<=0?null:Math.log(n)},["number"]),exp:ue(function(n){return Math.exp(n)},["number"]),odd:ue(function(n){return Math.abs(n)%2===1},["number"]),even:ue(function(n){return Math.abs(n)%2===0},["number"]),is:ue(function(n,e){return typeof n>"u"||typeof e>"u"?!1:lo(n,e,!0)},["any?","any?"]),before:ue(function(n,e){return tf(n,e)},["any","any"]),after:ue(function(n,e){return tf(e,n)},["any","any"]),meets:ue(function(n,e){return zx(n,e)},["range","range"]),"met by":ue(function(n,e){return zx(e,n)},["range","range"]),overlaps:ue(function(n,e){return!tf(n,e)&&!tf(e,n)},["range","range"]),"overlaps before":ue(function(){throw fn("overlaps before")},["any?"]),"overlaps after":ue(function(){throw fn("overlaps after")},["any?"]),finishes:ue(function(){throw fn("finishes")},["any?"]),"finished by":ue(function(){throw fn("finished by")},["any?"]),includes:ue(function(){throw fn("includes")},["any?"]),during:ue(function(){throw fn("during")},["any?"]),starts:ue(function(){throw fn("starts")},["any?"]),"started by":ue(function(){throw fn("started by")},["any?"]),coincides:ue(function(){throw fn("coincides")},["any?"]),"day of year":ue(function(n){return n.ordinal},["date time"]),"day of week":ue(function(n){return n.weekdayLong},["date time"]),"month of year":ue(function(n){return n.monthLong},["date time"]),"week of year":ue(function(n){return n.weekNumber},["date time"]),sort:ue(function(n,e){return Array.from(n).sort((t,r)=>e.invoke([t,r])?-1:1)},["list","function"]),"get value":ue(function(n,e){const t=ah(e,n);return t??null},["context","string"]),"get entries":ue(function(n){return arguments.length!==1||Array.isArray(n)?null:Object.entries(n).map(([e,t])=>({key:e,value:t}))},["context"]),context:gr(function(...n){const e=n.reduce((t,r)=>{if(t===bi||!["key","value"].every(s=>s in r))return bi;const i=r.key;return i===null||i in t?bi:Object.assign(Object.assign({},t),{[r.key]:r.value})},{});return e===bi?null:e},"context"),"context merge":gr(function(...n){return Object.assign({},...n)},"context"),"context put":ue(function(n,e,t,r){return typeof e>"u"&&typeof r>"u"?null:CT(n,e||[r],t)},["context","list?","any","string?"],["context","keys","value","key"])};function CT(n,e,t){const[r,...i]=e;return tn(r)!=="string"||tn(n)==="nil"||i.length&&(t=CT(n[r],i,t),t===null)?null:Object.assign(Object.assign({},n),{[r]:t})}function Bx(n,e){return n===e}const bi={};function TT(n){const e=n.endsWith("?"),t=e?n.substring(0,n.length-1):n;return function(r){const i=Array.isArray(r);if(t==="list")return i||e&&typeof r>"u"?r:r===null?bi:[r];t!=="any"&&i&&r.length===1&&(r=r[0]);const s=tn(r);return t==="any"||t===s?e||typeof r<"u"?r:bi:s==="nil"?e?r:bi:F8(r,t)||bi}}function H8(n){const e=n.map(TT);return function(t){for(;t.length<n.length;)t.push(void 0);return t.reduce((r,i,s)=>{if(r===!1)return r;const o=e[s],a=o?o(i):i;return a===bi?!1:(r.push(a),r)},[])}}function gr(n,e,t=null){const r=TT(e),i=function(...s){return s.length===0||(Array.isArray(s[0])&&s.length===1&&(s=s[0]),!s.every(o=>r(o)!==bi))?null:n(...s)};return i.$args=t||wv(n),i}function ue(n,e,t=null){const r=H8(e);t=t||wv(n);const i=function(...s){const o=r(s);return o?n(...o):null};return i.$args=t,i}function zx(n,e){return[n.end===e.start,n["end included"]===!0,e["start included"]===!0].every(t=>t)}function tf(n,e){return n instanceof Or&&e instanceof Or?n.end<e.start||(!n["end included"]||!e["start included"])&&n.end==e.start:n instanceof Or?n.end<e||!n["end included"]&&n.end===e:e instanceof Or?e.start>n||!e["start included"]&&e.start===n:n<e}function Hx(n){return n.reduce((e,t)=>e===null?t:e+t,null)}function v0([n,...e]){return n!==void 0?[...Array.isArray(n)?v0(n):[n],...v0(e)]:[]}function V8(n){return typeof n=="string"&&/\W/.test(n)?_v(n,!0):n}function Vx(n){return _v(n,!0)}function q8(n){return n.replace(/("|\\)/g,"\\$1")}function _v(n,e=!1){var t,r,i,s;const o=tn(n);if(o==="nil")return"null";if(o==="string")return e?`"${q8(n)}"`:n;if(o==="boolean"||o==="number")return String(n);if(o==="list")return"["+n.map(Vx).join(", ")+"]";if(o==="context")return"{"+Object.entries(n).map(([a,u])=>V8(a)+": "+Vx(u)).join(", ")+"}";if(o==="duration")return n.shiftTo("years","months","days","hours","minutes","seconds").normalize().toISO();if(o==="date time")return n.zone===ir.instance?n.toISO({suppressMilliseconds:!0,includeOffset:!1}):!((t=n.zone)===null||t===void 0)&&t.zoneName?n.toISO({suppressMilliseconds:!0,includeOffset:!1})+"@"+((r=n.zone)===null||r===void 0?void 0:r.zoneName):n.toISO({suppressMilliseconds:!0});if(o==="date")return n.toISODate();if(o==="range")return"<range>";if(o==="time")return n.zone===ir.instance?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1}):!((i=n.zone)===null||i===void 0)&&i.zoneName?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1})+"@"+((s=n.zone)===null||s===void 0?void 0:s.zoneName):n.toISOTime({suppressMilliseconds:!0});if(o==="function")return"<function>";throw fn("string("+o+")")}function W8(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}function qx(n){const e=Math.floor(n);return n-e===.5?e%2===0?e:e+1:Math.round(n)}function j8(n){const e=n.length,t=n.reduce((r,i)=>r+i)/e;return Math.sqrt(n.map(r=>Math.pow(r-t,2)).reduce((r,i)=>r+i)/(e-1))}function U8(n,e,t){return ws(e)?[...n.slice(0,e-1),t,...n.slice(e)]:n.map((r,i)=>e.invoke([r,t])?t:r)}function Q8(n){const e=n.length,t=n.slice().sort(),r=e/2-1,i=Math.ceil(r);return r===i?(t[i]+t[i+1])/2:t[i]}function Y8(n){if(n.length<2)return n;const e={};for(const r of n)e[r]=(e[r]||0)+1;const t=Object.entries(e).sort((r,i)=>i[1]-r[1]);return t.filter(r=>r[1]===t[0][1]).map(r=>+r[0])}function Sa(n){return n.isValid?n:null}function X8(n,e){const t=n.replace(/[smix]/g,"");if(t)throw new Error("illegal flags: "+t);if(/x/.test(n))throw fn("matches <x> flag");return n+e}function mm(n,e,t=""){try{return new RegExp(n,"u"+X8(e,t))}catch(r){if(B8(r))throw r}return null}function ET(n,e={},t){return Bh.configure({top:"Expression",contextTracker:Uu(e),dialect:t}).parse(n)}function AT(n,e={},t){return Bh.configure({top:"UnaryTests",contextTracker:Uu(e),dialect:t}).parse(n)}let G8=class extends Error{constructor(e,t){super(e),Object.assign(this,t)}},Z8=class{_buildExecutionTree(e,t){const r={args:[],nodeInput:t},i=[r];return e.iterate({enter(s){const{isError:o,isSkipped:a}=s.type,{from:u,to:f}=s;if(o){const{from:p,to:g,message:m}=h9(s);throw new G8(m,{input:t.slice(p,g),position:{from:p,to:g}})}if(a)return!1;const h=t.slice(u,f);i.push({nodeInput:h,args:[]})},leave(s){if(s.type.isSkipped)return;const{nodeInput:o,args:a}=i.pop(),u=i[i.length-1],f=e9(s,o,a);u.args.push(f)}}),r.args[r.args.length-1]}evaluate(e,t={},r){const i=ET(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}unaryTest(e,t={},r){const i=AT(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}};const MT=new Z8;function K8(n,e={},t){const r=e["?"]!==void 0?e["?"]:null,{root:i}=MT.unaryTest(n,e,t);return i(e)(r)}function J8(n,e={},t){const{root:r}=MT.evaluate(n,e,t);return r(e)}function e9(n,e,t){switch(n.name){case"ArithOp":return r=>{const i=(s,o=["number"])=>(a,u)=>{const f=a(r),h=u(r);if(yi(f)||yi(h))return null;const p=tn(f),g=tn(h),m=["date","time","date time","duration"];if(m.includes(p)){if(!m.includes(g))return null}else if(p!==g||!o.includes(p))return null;return s(f,h)};switch(e){case"+":return i((s,o)=>{if(gi(s)&&!gi(o)){const a=s;s=o,o=a}return m0(s,"time")&&gi(o)?s.plus(o).set({year:1900,month:1,day:1}):wr(s)&&wr(o)?null:wr(s)&&gi(o)||gi(s)&&gi(o)?s.plus(o):s+o},["string","number","date","time","duration","date time"]);case"-":return i((s,o)=>m0(s,"time")&&gi(o)?s.minus(o).set({year:1900,month:1,day:1}):wr(s)&&wr(o)?s.diff(o):wr(s)&&gi(o)||gi(s)&&gi(o)?s.minus(o):s-o,["number","date","time","duration","date time"]);case"*":return i((s,o)=>s*o);case"/":return i((s,o)=>o?s/o:null);case"**":case"^":return i((s,o)=>Math.pow(s,o))}};case"CompareOp":return Jn(()=>{switch(e){case">":return r=>Io(r,null,!1,!1);case">=":return r=>Io(r,null,!0,!1);case"<":return r=>Io(null,r,!1,!1);case"<=":return r=>Io(null,r,!1,!0);case"=":return r=>i=>lo(i,r);case"!=":return r=>i=>!lo(i,r)}},Po("boolean"));case"BacktickIdentifier":return e.replace(/`/g,"");case"Wildcard":return r=>!0;case"null":return r=>null;case"Disjunction":return Jn(r=>{const i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!0],[!0,null,!0],[!1,!0,!0],[!1,!1,!1],[!1,null,null],[null,!0,!0],[null,!1,null],[null,null,null]],a=typeof i=="boolean"?i:null,u=typeof s=="boolean"?s:null;return o.find(f=>f[0]===a&&f[1]===u)[2]},Po("boolean"));case"Conjunction":return Jn(r=>{const i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!1],[!0,null,null],[!1,!0,!1],[!1,!1,!1],[!1,null,!1],[null,!0,null],[null,!1,!1],[null,null,null]],a=typeof i=="boolean"?i:null,u=typeof s=="boolean"?s:null;return o.find(f=>f[0]===a&&f[1]===u)[2]},Po("boolean"));case"Context":return r=>t.slice(1,-1).reduce((i,s)=>{const[o,a]=s(Object.assign(Object.assign({},r),i));return Object.assign(Object.assign({},i),{[o]:a})},{});case"FunctionBody":return t[0];case"FormalParameters":return t;case"FormalParameter":return t[0];case"ParameterName":return t.join(" ");case"FunctionDefinition":return r=>{const i=t[2],s=t[4];return sf((...o)=>{const a=i.reduce((u,f,h)=>(u[f]=o[h],u),Object.assign({},r));return s(a)},i)};case"ContextEntry":return r=>{const i=typeof t[0]=="function"?t[0](r):t[0],s=t[1](r);return[i,s]};case"Key":return t[0];case"Identifier":return e;case"SpecialFunctionName":return r=>nf(e);case"Name":return e.replace(/\s{2,}/g," ");case"VariableName":return r=>{const i=t.join(" "),s=ah(i,r);return typeof s<"u"?s:nf(i)||null};case"QualifiedName":return r=>t.reduce((i,s)=>s(i),r);case"?":return r=>ah("?",r);case"IterationContext":return r=>{const i=t[0](r),s=t[1]&&t[1](r);return s?Io(i,s):i};case"Type":return t[0];case"InExpressions":return r=>{const i=f=>!(f===null||f.some(h=>tn(h)==="nil")),s=(f,h)=>[].concat(...f.map(p=>{const g=h(Object.assign(Object.assign({},r),p));return i(g)?g.map(m=>Object.assign(Object.assign({},p),m)):null})),o=(f,h,...p)=>i(f)?h?o(s(f,h),...p):f:null,u=(f=>{const[h,...p]=f,g=h(r);return o(g,...p)})(t);return u&&u.map(f=>Object.assign(Object.assign({},r),f))};case"InExpression":return r=>t9(r,t[0],t[2]);case"SpecialType":throw fn("SpecialType");case"InstanceOfExpression":return Jn(r=>{const i=t[0](r),s=t[3](r);return i instanceof s},Po("boolean"));case"every":return Jn(r=>(i,s)=>{const o=i(r);return tn(o)!=="list"?o:o.every(a=>rf(s(a)))},Po("boolean"));case"some":return Jn(r=>(i,s)=>{const o=i(r);return tn(o)!=="list"?o:o.some(a=>rf(s(a)))},Po("boolean"));case"NumericLiteral":return Jn(r=>e.includes(".")?parseFloat(e):parseInt(e),"number");case"BooleanLiteral":return Jn(r=>e==="true","boolean");case"StringLiteral":return Jn(r=>f9(e),"string");case"PositionalParameters":return r=>t.map(i=>i(r));case"NamedParameter":return r=>{const i=t[0],s=t[1](r);return[i,s]};case"NamedParameters":return r=>t.reduce((i,s)=>{const[o,a]=s(r);return i[o]=a,i},{});case"DateTimeConstructor":return r=>nf(e);case"DateTimeLiteral":return r=>{if(t.length===1)return t[0](r);{const i=sf(t[0](r));if(!i)return null;const s=t[2](r);return i.invoke(s)}};case"AtLiteral":return r=>{const i=sf(nf("@"));return i?i.invoke([t[0](r)]):null};case"FunctionInvocation":return r=>{const i=sf(t[0](r));if(!i)return null;const s=t[2](r);return i.invoke(s)};case"IfExpression":return function(){const r=t[1],i=t[3],s=t[5],o=Wx(i,s);return Jn(a=>rf(r(a))?i(a):s?s(a):null,o)}();case"Parameters":return t.length===3?t[1]:r=>[];case"Comparison":return r=>{const i=t[1];if(i==="in")return n9(t[0](r),(t[3]||t[2])(r));if(i==="between"){const u=t[2](r),f=t[4](r);return u===null||f===null?null:Io(u,f).includes(t[0](r))}const s=t[0](r),o=t[2](r),a=i()(o);return y0(a,s)};case"QuantifiedExpression":return r=>{const i=t[0](r),s=t[1],o=t[3];return i(s,o)};case"ForExpression":return r=>{const i=t[t.length-1],s=t[1](r);if(tn(s)!=="list")return s;const o=[];for(const a of s)o.push(i(Object.assign(Object.assign({},a),{partial:o})));return o};case"ArithmeticExpression":return function(){if(t.length===3){const[r,i,s]=t;return Jn(o=>i(o)(r,s),Wx(r,s))}if(t.length===2){const[r,i]=t;return Jn(s=>r(s)(()=>0,i),i.type)}}();case"PositiveUnaryTest":return t[0];case"ParenthesizedExpression":return t[1];case"PathExpression":return r=>{const i=t[0](r),s=t[1];return yi(i)?i.map(s):s(i)};case"FilterExpression":return r=>{const i=t[0](r),s=t[2],o=yi(i)?i:[i];if(i===null)return null;if(typeof s.type>"u")try{const a=s(r);ws(a)&&(s.type="number")}catch{}if(s.type==="number"){const a=s(r),u=o[a<0?o.length+a:a-1];return typeof u>"u"?null:u}if(s.type==="boolean")return s(r)?o:[];if(s.type==="string"){const a=s(r);return o.filter(u=>u===a)}return o.map(a=>{const u=Object.assign(Object.assign(Object.assign({},r),{item:a}),a);let f=s(u);return typeof f=="function"&&(f=f(a)),f instanceof Or&&(f=f.includes(a)),f===!0?a:f}).filter(rf)};case"SimplePositiveUnaryTest":return Jn(r=>t.length===1?t[0](r):t[0](r)(t[1](r)),"test");case"List":return r=>t.slice(1,-1).map(i=>i(r));case"Interval":return Jn(r=>{const i=t[1](r),s=t[2](r),o=i!==null&&t[0]==="[",a=s!==null&&t[3]==="]";return Io(i,s,o,a)},Po("boolean"));case"PositiveUnaryTests":case"Expressions":return r=>t.map(i=>i(r));case"Expression":return r=>t[0](r);case"UnaryTests":return r=>(i=null)=>{const s=t[0]==="not",a=(s?t.slice(2,-1):t).map(u=>u(r)).flat(1).map(u=>yi(u)?u.includes(i):u===null?null:typeof u=="boolean"?u:y0(u,i)).reduce(c9,void 0);return a===null?null:s?!a:a};default:return n.name}}function nf(n,e){return ah(n,z8)}function t9(n,e,t){const r=t(n);return["list","range"].includes(tn(r))?r.map(i=>({[e]:i})):null}function n9(n,e){if(!yi(e)){if(tn(e)==="nil")return null;e=[e]}return e.some(t=>y0(t,n))}function y0(n,e){return typeof n=="function"?n(e):n instanceof Or?n.includes(e):lo(n,e)}const Ul=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function Ca(n,e){return e.some(t=>tn(t)===n)&&e.every(t=>t===null||tn(t)===n)}const r9=new Or({start:null,end:null,"start included":!1,"end included":!1,map(){return[]},includes(){return null}});function Io(n,e,t=!0,r=!0){if(Ca("string",[n,e]))return a9(n,e,t,r);if(Ca("number",[n,e]))return l9(n,e,t,r);if(Ca("duration",[n,e]))return u9(n,e,t,r);if(Ca("time",[n,e])||Ca("date time",[n,e])||Ca("date",[n,e]))return bm(n,e,t,r);if(n===null&&e===null)return r9;throw new Error(`unsupported range: ${n}..${e}`)}function zh(){return()=>{throw new Error("unsupported range operation: map")}}function i9(n){return e=>n.map(e)}function s9(n){return e=>n.includes(e)}function o9(n,e,t,r){const i=n>e?-1:1;return s=>{const o=[];for(let a=n;!(!(a===0&&!t)&&(a===e&&!r||(o.push(s(a)),a===e)));a+=i);return o}}function vm(n,e){return e?t=>n<=t:t=>n<t}function ym(n,e){return e?t=>n>=t:t=>n>t}function Hh(n,e,t,r,i=s=>s){let s=[];return n===null&&e===null?()=>null:(n!==null&&e!==null?n>e?s=[vm(e,r),ym(n,t)]:s=[vm(n,t),ym(e,r)]:e!==null?s=[ym(e,r)]:n!==null&&(s=[vm(n,t)]),o=>o===null?null:s.every(a=>a(i(o))))}function a9(n,e,t=!0,r=!0){if(n!==null&&!Ul.includes(n))throw new Error("illegal range start: "+n);if(e!==null&&!Ul.includes(e))throw new Error("illegal range end: "+e);let i;if(n!==null&&e!==null){let a=Ul.indexOf(n),u=Ul.indexOf(e);const f=a>u?-1:1;t===!1&&(a+=f),r===!1&&(u-=f),i=Ul.slice(a,u+1)}const s=i?i9(i):zh(),o=i?s9(i):Hh(n,e,t,r);return new Or({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function l9(n,e,t,r){const i=n!==null&&e!==null?o9(n,e,t,r):zh(),s=Hh(n,e,t,r);return new Or({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function u9(n,e,t,r){const i=a=>a?Ne.fromDurationLike(a).toMillis():null,s=zh(),o=Hh(i(n),i(e),t,r,i);return new Or({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function bm(n,e,t,r){const i=zh(),s=Hh(n,e,t,r);return new Or({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function Wx(n,e){return!e||n.type===e.type?n.type:"any"}function Jn(n,e){return Object.assign(n,{type:e,toString(){return`TaggedFunction[${e}] ${Function.prototype.toString.call(n)}`}})}function c9(n,e){return n||e}function rf(n){return n!==!1&&n!==null}function Po(n){return`Test<${n}>`}function sf(n,e=null){return n?n instanceof Ff?n:n instanceof Or?new Ff(t=>n.includes(t),["value"]):typeof n!="function"?null:new Ff(n,e||wv(n)):null}function f9(n){return n.startsWith('"')&&(n=n.slice(1)),n.endsWith('"')&&(n=n.slice(0,-1)),n.replace(/(\\")|(\\\\)|(\\n)|(\\r)|(\\t)|(\\u[a-fA-F0-9]{5,6})|((?:\\u[a-fA-F0-9]{1,4})+)/ig,function(e,...t){const[r,i,s,o,a,u,f]=t;if(r)return'"';if(s)return`
`;if(o)return"\r";if(a)return"	";if(i)return"\\";const h=/\\u([a-fA-F0-9]+)/ig;if(u){const p=h.exec(u);return String.fromCodePoint(parseInt(p[1],16))}if(f){const p=[];let g;for(;(g=h.exec(e))!==null;)p.push(parseInt(g[1],16));return String.fromCharCode(...p)}throw new Error("illegal match")})}function h9(n){const e=n.node,t=e.parent;if(e.from!==e.to)return{from:e.from,to:e.to,message:`Unrecognized token in <${t.name}>`};const r=d9(e);if(r)return{from:e.from,to:r.to,message:`Unrecognized token <${r.name}> in <${t.name}>`};{const i=t.enterUnfinishedNodesBefore(n.to);return{from:e.from,to:e.to,message:`Incomplete <${(i||t).name}>`}}}function d9(n){const e=n.node;let t,r=e;do{if(t=r.nextSibling,t)return t;r=r.parent}while(r);return null}function p9(n){return Object.getPrototypeOf(n)===Object.prototype}function _r(n){return xe.isDateTime(n)}function mi(n){return Ne.isDuration(n)}function Vr(n){return Array.isArray(n)}function g9(n){return typeof n=="boolean"}function Xt(n){return n==null?"nil":g9(n)?"boolean":Eu(n)?"number":zo(n)?"string":p9(n)?"context":Vr(n)?"list":mi(n)?"duration":_r(n)?n.year===1900&&n.month===1&&n.day===1?"time":n.hour===0&&n.minute===0&&n.second===0&&n.millisecond===0&&n.zone===rn.utcInstance?"date":"date time":n instanceof xr?"range":n instanceof Bf?"function":"literal"}function b0(n,e){return Xt(n)===e}function m9(n,e){if(_r(n)){if(e==="time")return n.set({year:1900,month:1,day:1});if(e==="date")return n.setZone("utc",{keepLocalTime:!0}).startOf("day");if(e==="date time")return n}return null}let xr=class{constructor(e){Object.assign(this,e)}};function Eu(n){return typeof n=="number"}function zo(n){return typeof n=="string"}function uo(n,e,t=!1){if(n===null&&e!==null||n!==null&&e===null)return!1;Vr(n)&&n.length<2&&(n=n[0]),Vr(e)&&e.length<2&&(e=e[0]);const r=Xt(n),i=Xt(e),s=["date time","time","date"];if(s.includes(r))return!s.includes(i)||r==="time"&&i!=="time"||i==="time"&&r!=="time"?null:t||n.zone===ir.instance||e.zone===ir.instance?n.equals(e):n.toUTC().valueOf()===e.toUTC().valueOf();if(r!==i)return null;if(r==="nil")return!0;if(r==="list")return n.length!==e.length?!1:n.every((o,a)=>uo(o,e[a]));if(r==="duration")return Math.abs(n.as("days"))>180?Math.trunc(n.minus(e).as("months"))===0:Math.trunc(n.minus(e).as("seconds"))===0;if(r==="context"){const o=Object.entries(n),a=Object.entries(e);return o.length!==a.length?!1:o.every(([u,f])=>u in e&&uo(f,e[u]))}return r==="range"?[[n.start,e.start],[n.end,e.end],[n["start included"],e["start included"]],[n["end included"],e["end included"]]].every(([o,a])=>o===a):n==e?!0:r===i?!1:null}class Bf{constructor(e,t){this.fn=e,this.parameterNames=t}invoke(e){let t;if(Vr(e)){if(t=e,t.length>this.parameterNames.length){const r=this.parameterNames[this.parameterNames.length-1];if(!r||!r.startsWith("..."))return null}}else{if(Object.keys(e).some(r=>!this.parameterNames.includes(r)&&!this.parameterNames.includes(`...${r}`)))return null;t=this.parameterNames.reduce((r,i)=>{if(i.startsWith("...")){i=i.slice(3);const s=e[i];return s?[...r,...Vr(s)?s:[s]]:r}return[...r,e[i]]},[])}return this.fn.call(null,...t)}}function Ov(n){if(Array.isArray(n.$args))return n.$args;const e=n.toString(),t=/^(?:[^(]*\s*)?\(([^)]+)?\)/.exec(e);if(!t)throw new Error("failed to parse params: "+e);const[r,i]=t;return i?i.split(",").map(s=>s.trim()):[]}function cn(n){return new Error(`not implemented: ${n}`)}function lh(n,e){if(["nil","boolean","number","string"].includes(Xt(e)))return;if(n in e)return e[n];const t=ao(n);if(t in e)return e[t];const r=Object.entries(e).find(([i])=>t===ao(i));if(r)return r[1]}function jx(n){return typeof n=="number"?Ne.fromMillis(n):Ne.fromISO(n)}function zr(n=null,e=null,t=null){if(e){if(n)throw new Error("<str> and <time> provided");return zr(`1900-01-01T${e}`,null)}if(typeof n=="string"){if(n.startsWith("-"))throw cn("negative date");if(!n.includes("T"))return zr(n+"T00:00:00",null,t||rn.utcInstance);if(n.includes("@")){if(t)throw new Error("<zone> already provided");const[r,i]=n.split("@");return zr(r,null,Pa.normalizeZone(i))}return xe.fromISO(n.toUpperCase(),{setZone:!0,zone:t})}return xe.now()}const v9={number:ce(function(n,e,t){if(arguments.length!==3)return null;e&&(n=n.split(e).join("")),t&&t!=="."&&(n=n.split(".").join("#").split(t).join("."));const r=+n;return isNaN(r)?null:r},["string","string?","string?"],["from","grouping separator","decimal separator"]),string:ce(function(n){return n===null?null:xv(n)},["any"]),date:ce(function(n,e,t,r){!r&&!Eu(n)&&(r=n,n=null);let i;return zo(r)&&(i=zr(r)),_r(r)&&(i=r),n&&(i=zr().setZone("utc").set({year:n,month:e,day:t})),i&&Ta(i.setZone("utc").startOf("day"))||null},["any?","number?","number?","any?"]),"date and time":ce(function(n,e,t){let r;if(_r(n)&&_r(e)){const i=n.toLocal();r=e.set({year:i.year,month:i.month,day:i.day})}return zo(n)&&(t=n,n=null),zo(t)&&(r=zr(t,null,t.includes("@")?null:ir.instance)),r&&Ta(r)||null},["any?","time?","string?"],["date","time","from"]),time:ce(function(n,e,t,r,i){let s;if(r)throw cn("time(..., offset)");return(zo(n)||_r(n))&&(i=n,n=null),zo(i)&&(s=zr(null,i)),_r(i)&&(s=i.set({year:1900,month:1,day:1})),Eu(n)&&(s=zr().set({hour:n,minute:e,second:t}).set({year:1900,month:1,day:1,millisecond:0})),s&&Ta(s)||null},["any?","number?","number?","any?","any?"]),duration:ce(function(n){return Ta(jx(n))},["string"]),"years and months duration":ce(function(n,e){return Ta(e.diff(n,["years","months"]))},["date","date"]),"@":ce(function(n){let e;return/^-?P/.test(n)?e=jx(n):/^[\d]{1,2}:[\d]{1,2}:[\d]{1,2}/.test(n)?e=zr(null,n):e=zr(n),e&&Ta(e)||null},["string"]),now:ce(function(){return zr()},[]),today:ce(function(){return zr().startOf("day")},[]),not:ce(function(n){return b0(n,"boolean")?!n:null},["any"]),substring:ce(function(n,e,t){const r=e<0?n.length+e:e-1,i=Array.from(n);return(typeof t<"u"?i.slice(r,r+t):i.slice(r)).join("")},["string","number","number?"],["string","start position","length"]),"string length":ce(function(n){return _9(n)},["string"]),"upper case":ce(function(n){return n.toUpperCase()},["string"]),"lower case":ce(function(n){return n.toLowerCase()},["string"]),"substring before":ce(function(n,e){const t=n.indexOf(e);return t===-1?"":n.substring(0,t)},["string","string"]),"substring after":ce(function(n,e){const t=n.indexOf(e);return t===-1?"":n.substring(t+e.length)},["string","string"]),replace:ce(function(n,e,t,r){return n.replace(new RegExp(e,"ug"+(r||"").replace(/[x]/g,"")),t.replace(/\$0/g,"$$&"))},["string","string","string","string?"]),contains:ce(function(n,e){return n.includes(e)},["string","string"]),matches:ce(function(n,e,t){throw cn("matches")},["string","string","string?"]),"starts with":ce(function(n,e){return n.startsWith(e)},["string","string"]),"ends with":ce(function(n,e){return n.endsWith(e)},["string","string"]),split:ce(function(n,e){return n.split(new RegExp(e,"u"))},["string","string"]),"string join":ce(function(n,e){return n.some(t=>!zo(t)&&t!==null)?null:n.filter(t=>t!==null).join(e||"")},["list","string?"]),"list contains":ce(function(n,e){return n.some(t=>Ux(t,e))},["list","any?"]),"list replace":ce(function(n,e,t,r){const i=e||r;return["number","function"].includes(Xt(i))?x9(n,e||r,t):null},["list","any?","any","function?"]),count:ce(function(n){return n.length},["list"]),min:mr(function(...n){return n.reduce((e,t)=>e===null?t:Math.min(e,t),null)},"number"),max:mr(function(...n){return n.reduce((e,t)=>e===null?t:Math.max(e,t),null)},"number"),sum:mr(function(...n){return Yx(n)},"number"),mean:mr(function(...n){const e=Yx(n);return e===null?e:e/n.length},"number"),all:mr(function(...n){let e=!1;for(const t of n){if(t===!1)return!1;typeof t!="boolean"&&(e=!0)}return e?null:!0},"any?"),any:mr(function(...n){let e=!1;for(const t of n){if(t===!0)return!0;typeof t!="boolean"&&(e=!0)}return e?null:!1},"any?"),sublist:ce(function(n,e,t){const r=e<0?n.length+e:e-1;return typeof t<"u"?n.slice(r,r+t):n.slice(r)},["list","number","number?"]),append:ce(function(n,...e){return n.concat(e)},["list","any?"]),concatenate:ce(function(...n){return n.reduce((e,t)=>e.concat(t),[])},["any"]),"insert before":ce(function(n,e,t){return n.slice(0,e-1).concat([t],n.slice(e-1))},["list","number","any?"]),remove:ce(function(n,e){return n.slice(0,e-1).concat(n.slice(e))},["list","number"]),reverse:ce(function(n){return n.slice().reverse()},["list"]),"index of":ce(function(n,e){return n.reduce(function(t,r,i){return Ux(r,e)&&t.push(i+1),t},[])},["list","any"]),union:mr(function(...n){return n.reduce((e,t)=>t.reduce((r,i)=>(r.some(s=>uo(i,s))||r.push(i),r),e),[])},"list"),"distinct values":ce(function(n){return n.reduce((e,t)=>(e.some(r=>uo(t,r))||e.push(t),e),[])},["list"]),flatten:ce(function(n){return w0(n)},["list"]),product:mr(function(...n){return n.length===0?null:n.reduce((e,t)=>e*t,1)},"number"),median:mr(function(...n){return n.length===0?null:k9(n)},"number"),stddev:mr(function(...n){return n.length<2?null:O9(n)},"number"),mode:mr(function(...n){return S9(n)},"number"),decimal:ce(function(n,e){if(!e)return Gx(n);const t=Math.pow(10,e);return Gx(n*t)/t},["number","number"]),floor:ce(function(n,e=0){if(e===null)return null;const t=Math.pow(10,e);return Math.floor(n*t)/t},["number","number?"]),ceiling:ce(function(n,e=0){if(e===null)return null;const t=Math.pow(10,e);return Math.ceil(n*t)/t},["number","number?"]),abs:ce(function(n){return typeof n!="number"?null:Math.abs(n)},["number"]),"round up":ce(function(n,e){throw cn("round up")},["number","number"]),"round down":ce(function(n,e){throw cn("round down")},["number","number"]),"round half up":ce(function(n,e){throw cn("round half up")},["number","number"]),"round half down":ce(function(n,e){throw cn("round half down")},["number","number"]),modulo:ce(function(n,e){if(!e)return null;const t=1e9;return Math.round((n%e+e)%e*t)/t},["number","number"]),sqrt:ce(function(n){return n<0?null:Math.sqrt(n)},["number"]),log:ce(function(n){return n<=0?null:Math.log(n)},["number"]),exp:ce(function(n){return Math.exp(n)},["number"]),odd:ce(function(n){return Math.abs(n)%2===1},["number"]),even:ce(function(n){return Math.abs(n)%2===0},["number"]),is:ce(function(n,e){return typeof n>"u"||typeof e>"u"?!1:uo(n,e,!0)},["any?","any?"]),before:ce(function(n,e){return of(n,e)},["any","any"]),after:ce(function(n,e){return of(e,n)},["any","any"]),meets:ce(function(n,e){return Qx(n,e)},["range","range"]),"met by":ce(function(n,e){return Qx(e,n)},["range","range"]),overlaps:ce(function(n,e){return!of(n,e)&&!of(e,n)},["range","range"]),"overlaps before":ce(function(){throw cn("overlaps before")},["any?"]),"overlaps after":ce(function(){throw cn("overlaps after")},["any?"]),finishes:ce(function(){throw cn("finishes")},["any?"]),"finished by":ce(function(){throw cn("finished by")},["any?"]),includes:ce(function(){throw cn("includes")},["any?"]),during:ce(function(){throw cn("during")},["any?"]),starts:ce(function(){throw cn("starts")},["any?"]),"started by":ce(function(){throw cn("started by")},["any?"]),coincides:ce(function(){throw cn("coincides")},["any?"]),"day of year":ce(function(n){return n.ordinal},["date time"]),"day of week":ce(function(n){return n.weekdayLong},["date time"]),"month of year":ce(function(n){return n.monthLong},["date time"]),"week of year":ce(function(n){return n.weekNumber},["date time"]),sort:ce(function(n,e){return Array.from(n).sort((t,r)=>e.invoke([t,r])?-1:1)},["list","function"]),"get value":ce(function(n,e){const t=lh(e,n);return t??null},["context","string"]),"get entries":ce(function(n){return arguments.length!==1||Array.isArray(n)?null:Object.entries(n).map(([e,t])=>({key:e,value:t}))},["context"]),context:mr(function(...n){const e=n.reduce((t,r)=>{if(t===wi||!["key","value"].every(s=>s in r))return wi;const i=r.key;return i===null||i in t?wi:Object.assign(Object.assign({},t),{[r.key]:r.value})},{});return e===wi?null:e},"context"),"context merge":mr(function(...n){return Object.assign({},...n)},"context"),"context put":ce(function(n,e,t,r){return typeof e>"u"&&typeof r>"u"?null:DT(n,e||[r],t)},["context","list?","any","string?"],["context","keys","value","key"])};function DT(n,e,t){const[r,...i]=e;return Xt(r)!=="string"||Xt(n)==="nil"||i.length&&(t=DT(n[r],i,t),t===null)?null:Object.assign(Object.assign({},n),{[r]:t})}function Ux(n,e){return n===e}const wi={};function RT(n){const e=n.endsWith("?"),t=e?n.substring(0,n.length-1):n;return function(r){const i=Array.isArray(r);if(t==="list")return i||e&&typeof r>"u"?r:r===null?wi:[r];t!=="any"&&i&&r.length===1&&(r=r[0]);const s=Xt(r);return t==="any"||t===s?e||typeof r<"u"?r:wi:s==="nil"?e?r:wi:m9(r,t)||wi}}function y9(n){const e=n.map(RT);return function(t){for(;t.length<n.length;)t.push(void 0);return t.reduce((r,i,s)=>{if(r===!1)return r;const o=e[s],a=o?o(i):i;return a===wi?!1:(r.push(a),r)},[])}}function mr(n,e,t=null){const r=RT(e),i=function(...s){return s.length===0||(Array.isArray(s[0])&&s.length===1&&(s=s[0]),!s.every(o=>r(o)!==wi))?null:n(...s)};return i.$args=t||Ov(n),i}function ce(n,e,t=null){const r=y9(e);t=t||Ov(n);const i=function(...s){const o=r(s);return o?n(...o):null};return i.$args=t,i}function Qx(n,e){return[n.end===e.start,n["end included"]===!0,e["start included"]===!0].every(t=>t)}function of(n,e){return n instanceof xr&&e instanceof xr?n.end<e.start||(!n["end included"]||!e["start included"])&&n.end==e.start:n instanceof xr?n.end<e||!n["end included"]&&n.end===e:e instanceof xr?e.start>n||!e["start included"]&&e.start===n:n<e}function Yx(n){return n.reduce((e,t)=>e===null?t:e+t,null)}function w0([n,...e]){return n!==void 0?[...Array.isArray(n)?w0(n):[n],...w0(e)]:[]}function b9(n){return typeof n=="string"&&/\W/.test(n)?xv(n,!0):n}function Xx(n){return xv(n,!0)}function w9(n){return n.replace(/("|\\)/g,"\\$1")}function xv(n,e=!1){var t,r,i,s;const o=Xt(n);if(o==="nil")return"null";if(o==="string")return e?`"${w9(n)}"`:n;if(o==="boolean"||o==="number")return String(n);if(o==="list")return"["+n.map(Xx).join(", ")+"]";if(o==="context")return"{"+Object.entries(n).map(([a,u])=>b9(a)+": "+Xx(u)).join(", ")+"}";if(o==="duration")return n.shiftTo("years","months","days","hours","minutes","seconds").normalize().toISO();if(o==="date time")return n.zone===ir.instance?n.toISO({suppressMilliseconds:!0,includeOffset:!1}):!((t=n.zone)===null||t===void 0)&&t.zoneName?n.toISO({suppressMilliseconds:!0,includeOffset:!1})+"@"+((r=n.zone)===null||r===void 0?void 0:r.zoneName):n.toISO({suppressMilliseconds:!0});if(o==="date")return n.toISODate();if(o==="range")return"<range>";if(o==="time")return n.zone===ir.instance?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1}):!((i=n.zone)===null||i===void 0)&&i.zoneName?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1})+"@"+((s=n.zone)===null||s===void 0?void 0:s.zoneName):n.toISOTime({suppressMilliseconds:!0});if(o==="function")return"<function>";throw cn("string("+o+")")}function _9(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}function Gx(n){const e=Math.floor(n);return n-e===.5?e%2===0?e:e+1:Math.round(n)}function O9(n){const e=n.length,t=n.reduce((r,i)=>r+i)/e;return Math.sqrt(n.map(r=>Math.pow(r-t,2)).reduce((r,i)=>r+i)/(e-1))}function x9(n,e,t){return Eu(e)?[...n.slice(0,e-1),t,...n.slice(e)]:n.map((r,i)=>e.invoke([r,t])?t:r)}function k9(n){const e=n.length,t=n.slice().sort(),r=e/2-1,i=Math.ceil(r);return r===i?(t[i]+t[i+1])/2:t[i]}function S9(n){if(n.length<2)return n;const e={};for(const r of n)e[r]=(e[r]||0)+1;const t=Object.entries(e).sort((r,i)=>i[1]-r[1]);return t.filter(r=>r[1]===t[0][1]).map(r=>+r[0])}function Ta(n){return n.isValid?n:null}function C9(n,e={},t){return Bh.configure({top:"Expression",contextTracker:Uu(e),dialect:t}).parse(n)}function T9(n,e={},t){return Bh.configure({top:"UnaryTests",contextTracker:Uu(e),dialect:t}).parse(n)}let E9=class extends Error{constructor(e,t){super(e),Object.assign(this,t)}};class A9{_buildExecutionTree(e,t){const r={args:[],nodeInput:t},i=[r];return e.iterate({enter(s){const{isError:o,isSkipped:a}=s.type,{from:u,to:f}=s;if(o){const{from:p,to:g,message:m}=W9(s);throw new E9(m,{input:t.slice(p,g),position:{from:p,to:g}})}if(a)return!1;const h=t.slice(u,f);i.push({nodeInput:h,args:[]})},leave(s){if(s.type.isSkipped)return;const{nodeInput:o,args:a}=i.pop(),u=i[i.length-1],f=D9(s,o,a);u.args.push(f)}}),r.args[r.args.length-1]}evaluate(e,t={},r){const i=C9(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}unaryTest(e,t={},r){const i=T9(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}}const M9=new A9;function af(n,e={},t){const{root:r}=M9.evaluate(n,e,t);return r(e)}function D9(n,e,t){switch(n.name){case"ArithOp":return r=>{const i=(s,o=["number"])=>(a,u)=>{const f=a(r),h=u(r);if(Vr(f)||Vr(h))return null;const p=Xt(f),g=Xt(h),m=["date","time","date time","duration"];if(m.includes(p)){if(!m.includes(g))return null}else if(p!==g||!o.includes(p))return null;return s(f,h)};switch(e){case"+":return i((s,o)=>{if(mi(s)&&!mi(o)){const a=s;s=o,o=a}return b0(s,"time")&&mi(o)?s.plus(o).set({year:1900,month:1,day:1}):_r(s)&&_r(o)?null:_r(s)&&mi(o)||mi(s)&&mi(o)?s.plus(o):s+o},["string","number","date","time","duration","date time"]);case"-":return i((s,o)=>b0(s,"time")&&mi(o)?s.minus(o).set({year:1900,month:1,day:1}):_r(s)&&_r(o)?s.diff(o):_r(s)&&mi(o)||mi(s)&&mi(o)?s.minus(o):s-o,["number","date","time","duration","date time"]);case"*":return i((s,o)=>s*o);case"/":return i((s,o)=>o?s/o:null);case"**":case"^":return i((s,o)=>Math.pow(s,o))}};case"CompareOp":return er(()=>{switch(e){case">":return r=>Lo(r,null,!1,!1);case">=":return r=>Lo(r,null,!0,!1);case"<":return r=>Lo(null,r,!1,!1);case"<=":return r=>Lo(null,r,!1,!0);case"=":return r=>i=>uo(i,r);case"!=":return r=>i=>!uo(i,r)}},$o("boolean"));case"BacktickIdentifier":return e.replace(/`/g,"");case"Wildcard":return r=>!0;case"null":return r=>null;case"Disjunction":return er(r=>{const i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!0],[!0,null,!0],[!1,!0,!0],[!1,!1,!1],[!1,null,null],[null,!0,!0],[null,!1,null],[null,null,null]],a=typeof i=="boolean"?i:null,u=typeof s=="boolean"?s:null;return o.find(f=>f[0]===a&&f[1]===u)[2]},$o("boolean"));case"Conjunction":return er(r=>{const i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!1],[!0,null,null],[!1,!0,!1],[!1,!1,!1],[!1,null,!1],[null,!0,null],[null,!1,!1],[null,null,null]],a=typeof i=="boolean"?i:null,u=typeof s=="boolean"?s:null;return o.find(f=>f[0]===a&&f[1]===u)[2]},$o("boolean"));case"Context":return r=>t.slice(1,-1).reduce((i,s)=>{const[o,a]=s(Object.assign(Object.assign({},r),i));return Object.assign(Object.assign({},i),{[o]:a})},{});case"FunctionBody":return t[0];case"FormalParameters":return t;case"FormalParameter":return t[0];case"ParameterName":return t.join(" ");case"FunctionDefinition":return r=>{const i=t[2],s=t[4];return cf((...o)=>{const a=i.reduce((u,f,h)=>(u[f]=o[h],u),Object.assign({},r));return s(a)},i)};case"ContextEntry":return r=>{const i=typeof t[0]=="function"?t[0](r):t[0],s=t[1](r);return[i,s]};case"Key":return t[0];case"Identifier":return e;case"SpecialFunctionName":return r=>lf(e);case"Name":return e.replace(/\s{2,}/g," ");case"VariableName":return r=>{const i=t.join(" "),s=lh(i,r);return typeof s<"u"?s:lf(i)||null};case"QualifiedName":return r=>t.reduce((i,s)=>s(i),r);case"?":return r=>lh("?",r);case"IterationContext":return r=>{const i=t[0](r),s=t[1]&&t[1](r);return s?Lo(i,s):i};case"Type":return t[0];case"InExpressions":return r=>{const i=t.map(s=>s(r));return i.some(s=>Xt(s)!=="list")?null:H9(i).map(s=>(Vr(s)||(s=[s]),Object.assign({},r,...s)))};case"InExpression":return r=>R9(r,t[0],t[2]);case"SpecialType":throw cn("SpecialType");case"InstanceOfExpression":return er(r=>{const i=t[0](r),s=t[3](r);return i instanceof s},$o("boolean"));case"every":return er(r=>(i,s)=>{const o=i(r);return Xt(o)!=="list"?o:o.every(a=>uf(s(a)))},$o("boolean"));case"some":return er(r=>(i,s)=>{const o=i(r);return Xt(o)!=="list"?o:o.some(a=>uf(s(a)))},$o("boolean"));case"NumericLiteral":return er(r=>e.includes(".")?parseFloat(e):parseInt(e),"number");case"BooleanLiteral":return er(r=>e==="true","boolean");case"StringLiteral":return er(r=>q9(e),"string");case"PositionalParameters":return r=>t.map(i=>i(r));case"NamedParameter":return r=>{const i=t[0],s=t[1](r);return[i,s]};case"NamedParameters":return r=>t.reduce((i,s)=>{const[o,a]=s(r);return i[o]=a,i},{});case"DateTimeConstructor":return r=>lf(e);case"DateTimeLiteral":return r=>{if(t.length===1)return t[0](r);{const i=cf(t[0](r));if(!i)return null;const s=t[2](r);return i.invoke(s)}};case"AtLiteral":return r=>{const i=cf(lf("@"));return i?i.invoke([t[0](r)]):null};case"FunctionInvocation":return r=>{const i=cf(t[0](r));if(!i)return null;const s=t[2](r);return i.invoke(s)};case"IfExpression":return function(){const r=t[1],i=t[3],s=t[5],o=Zx(i,s);return er(a=>uf(r(a))?i(a):s?s(a):null,o)}();case"Parameters":return t.length===3?t[1]:r=>[];case"Comparison":return r=>{const i=t[1];if(i==="in")return I9(t[0](r),(t[3]||t[2])(r));if(i==="between"){const u=t[2](r),f=t[4](r);return u===null||f===null?null:Lo(u,f).includes(t[0](r))}const s=t[0](r),o=t[2](r),a=i()(o);return _0(a,s)};case"QuantifiedExpression":return r=>{const i=t[0](r),s=t[1],o=t[3];return i(s,o)};case"ForExpression":return r=>{const i=t[t.length-1],s=t[1](r);if(Xt(s)!=="list")return s;const o=[];for(const a of s)o.push(i(Object.assign(Object.assign({},a),{partial:o})));return o};case"ArithmeticExpression":return function(){if(t.length===3){const[r,i,s]=t;return er(o=>i(o)(r,s),Zx(r,s))}if(t.length===2){const[r,i]=t;return er(s=>r(s)(()=>0,i),i.type)}}();case"PositiveUnaryTest":return t[0];case"ParenthesizedExpression":return t[1];case"PathExpression":return r=>{const i=t[0](r),s=t[1];return Vr(i)?i.map(s):s(i)};case"FilterExpression":return r=>{const i=t[0](r),s=t[2],o=Vr(i)?i:[i];if(i===null)return null;if(typeof s.type>"u")try{const a=s(r);Eu(a)&&(s.type="number")}catch{}if(s.type==="number"){const a=s(r),u=o[a<0?o.length+a:a-1];return typeof u>"u"?null:u}if(s.type==="boolean")return s(r)?o:[];if(s.type==="string"){const a=s(r);return o.filter(u=>u===a)}return o.map(a=>{const u=Object.assign(Object.assign(Object.assign({},r),{item:a}),a);let f=s(u);return typeof f=="function"&&(f=f(a)),f instanceof xr&&(f=f.includes(a)),f===!0?a:f}).filter(uf)};case"SimplePositiveUnaryTest":return er(r=>t.length===1?t[0](r):t[0](r)(t[1](r)),"test");case"List":return r=>t.slice(1,-1).map(i=>i(r));case"Interval":return er(r=>{const i=t[1](r),s=t[2](r),o=i!==null&&t[0]==="[",a=s!==null&&t[3]==="]";return Lo(i,s,o,a)},$o("boolean"));case"PositiveUnaryTests":case"Expressions":return r=>t.map(i=>i(r));case"Expression":return r=>t[0](r);case"UnaryTests":return r=>(i=null)=>{const s=t[0]==="not",a=(s?t.slice(2,-1):t).map(u=>u(r)).flat(1).map(u=>Vr(u)?u.includes(i):u===null?null:typeof u=="boolean"?u:_0(u,i)).reduce(V9,void 0);return a===null?null:s?!a:a};default:return n.name}}function lf(n,e){return lh(n,v9)}function R9(n,e,t){const r=t(n);return["list","range"].includes(Xt(r))?r.map(i=>({[e]:i})):null}function I9(n,e){if(!Vr(e)){if(Xt(e)==="nil")return null;e=[e]}return e.some(t=>_0(t,n))}function _0(n,e){return typeof n=="function"?n(e):n instanceof xr?n.includes(e):uo(n,e)}const Ql=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function Ea(n,e){return e.some(t=>Xt(t)===n)&&e.every(t=>t===null||Xt(t)===n)}const P9=new xr({start:null,end:null,"start included":!1,"end included":!1,map(){return[]},includes(){return null}});function Lo(n,e,t=!0,r=!0){if(Ea("string",[n,e]))return F9(n,e,t,r);if(Ea("number",[n,e]))return B9(n,e,t,r);if(Ea("duration",[n,e]))return z9(n,e,t,r);if(Ea("time",[n,e])||Ea("date time",[n,e])||Ea("date",[n,e]))return Om(n,e,t,r);if(n===null&&e===null)return P9;throw new Error(`unsupported range: ${n}..${e}`)}function Vh(){return()=>{throw new Error("unsupported range operation: map")}}function L9(n){return e=>n.map(e)}function $9(n){return e=>n.includes(e)}function N9(n,e,t,r){const i=n>e?-1:1;return s=>{const o=[];for(let a=n;!(!(a===0&&!t)&&(a===e&&!r||(o.push(s(a)),a===e)));a+=i);return o}}function wm(n,e){return e?t=>n<=t:t=>n<t}function _m(n,e){return e?t=>n>=t:t=>n>t}function qh(n,e,t,r,i=s=>s){let s=[];return n===null&&e===null?()=>null:(n!==null&&e!==null?n>e?s=[wm(e,r),_m(n,t)]:s=[wm(n,t),_m(e,r)]:e!==null?s=[_m(e,r)]:n!==null&&(s=[wm(n,t)]),o=>o===null?null:s.every(a=>a(i(o))))}function F9(n,e,t=!0,r=!0){if(n!==null&&!Ql.includes(n))throw new Error("illegal range start: "+n);if(e!==null&&!Ql.includes(e))throw new Error("illegal range end: "+e);let i;if(n!==null&&e!==null){let a=Ql.indexOf(n),u=Ql.indexOf(e);const f=a>u?-1:1;t===!1&&(a+=f),r===!1&&(u-=f),i=Ql.slice(a,u+1)}const s=i?L9(i):Vh(),o=i?$9(i):qh(n,e,t,r);return new xr({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function B9(n,e,t,r){const i=n!==null&&e!==null?N9(n,e,t,r):Vh(),s=qh(n,e,t,r);return new xr({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function z9(n,e,t,r){const i=a=>a?Ne.fromDurationLike(a).toMillis():null,s=Vh(),o=qh(i(n),i(e),t,r,i);return new xr({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function Om(n,e,t,r){const i=Vh(),s=qh(n,e,t,r);return new xr({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function H9(n){if(n.some(r=>Xt(r)==="nil"))return null;const e=(r,i)=>[].concat(...r.map(s=>i.map(o=>[].concat(s,o)))),t=(r,i,...s)=>i?t(e(r,i),...s):r||[];return t(...n)}function Zx(n,e){return!e||n.type===e.type?n.type:"any"}function er(n,e){return Object.assign(n,{type:e,toString(){return`TaggedFunction[${e}] ${Function.prototype.toString.call(n)}`}})}function V9(n,e){return n||e}function uf(n){return n!==!1&&n!==null}function $o(n){return`Test<${n}>`}function cf(n,e=null){return n?n instanceof Bf?n:n instanceof xr?new Bf(t=>n.includes(t),["value"]):typeof n!="function"?null:new Bf(n,e||Ov(n)):null}function q9(n){return n.startsWith('"')&&(n=n.slice(1)),n.endsWith('"')&&(n=n.slice(0,-1)),n.replace(/(\\")|(\\\\)|(\\u[a-fA-F0-9]{5,6})|((?:\\u[a-fA-F0-9]{1,4})+)/ig,function(e,...t){const[r,i,s,o]=t;if(r)return'"';if(i)return"\\";const a=/\\u([a-fA-F0-9]+)/ig;if(s){const u=a.exec(s);return String.fromCodePoint(parseInt(u[1],16))}if(o){const u=[];let f;for(;(f=a.exec(e))!==null;)u.push(parseInt(f[1],16));return String.fromCharCode(...u)}throw new Error("illegal match")})}function W9(n){const e=n.node,t=e.parent;if(e.from!==e.to)return{from:e.from,to:e.to,message:`Unrecognized token in <${t.name}>`};const r=j9(e);if(r)return{from:e.from,to:r.to,message:`Unrecognized token <${r.name}> in <${t.name}>`};{const i=t.enterUnfinishedNodesBefore(n.to);return{from:e.from,to:e.to,message:`Incomplete <${(i||t).name}>`}}}function j9(n){const e=n.node;let t,r=e;do{if(t=r.nextSibling,t)return t;r=r.parent}while(r);return null}let O0=[],IT=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?IT:O0).push(t=t+n[e])})();function U9(n){if(n<768)return!1;for(let e=0,t=O0.length;;){let r=e+t>>1;if(n<O0[r])t=r;else if(n>=IT[r])e=r+1;else return!0;if(e==t)return!1}}function Kx(n){return n>=127462&&n<=127487}const Jx=8205;function Q9(n,e,t=!0,r=!0){return(t?PT:Y9)(n,e,r)}function PT(n,e,t){if(e==n.length)return e;e&&LT(n.charCodeAt(e))&&$T(n.charCodeAt(e-1))&&e--;let r=xm(n,e);for(e+=ek(r);e<n.length;){let i=xm(n,e);if(r==Jx||i==Jx||t&&U9(i))e+=ek(i),r=i;else if(Kx(i)){let s=0,o=e-2;for(;o>=0&&Kx(xm(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function Y9(n,e,t){for(;e>0;){let r=PT(n,e-2,t);if(r<e)return r;e--}return 0}function xm(n,e){let t=n.charCodeAt(e);if(!$T(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return LT(r)?(t-55296<<10)+(r-56320)+65536:t}function LT(n){return n>=56320&&n<57344}function $T(n){return n>=55296&&n<56320}function ek(n){return n<65536?1:2}let ct=class NT{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Qa(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Gi.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Qa(this,e,t);let r=[];return this.decompose(e,t,r,0),Gi.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new mu(this),s=new mu(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new mu(this,e)}iterRange(e,t=this.length){return new FT(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new BT(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?NT.empty:e.length<=32?new qt(e):Gi.from(qt.split(e,[]))}};class qt extends ct{constructor(e,t=X9(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new G9(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new qt(tk(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=zf(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new qt(a,o.length+s.length));else{let u=a.length>>1;r.push(new qt(a.slice(0,u)),new qt(a.slice(u)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof qt))return super.replace(e,t,r);[e,t]=Qa(this,e,t);let i=zf(this.text,zf(r.text,tk(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new qt(i,s):Gi.from(qt.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=Qa(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],u=s+a.length;s>e&&o&&(i+=r),e<u&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new qt(r,i)),r=[],i=-1);return i>-1&&t.push(new qt(r,i)),t}}class Gi extends ct{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,u=r+o.lines-1;if((t?u:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=u+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],u=o+a.length;if(e<=u&&t>=o){let f=i&((o<=e?1:0)|(u>=t?2:0));o>=e&&u<=t&&!f?r.push(a):a.decompose(e-o,t-o,r,f)}o=u+1}}replace(e,t,r){if([e,t]=Qa(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let u=o.replace(e-s,t-s,r),f=this.lines-o.lines+u.lines;if(u.lines<f>>4&&u.lines>f>>6){let h=this.children.slice();return h[i]=u,new Gi(h,this.length-(t-e)+r.length)}return super.replace(s,a,u)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Qa(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],u=o+a.length;o>e&&s&&(i+=r),e<u&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Gi))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let u=this.children[i],f=e.children[s];if(u!=f)return r+u.scanIdentical(f,t);r+=u.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let m of e)r+=m.lines;if(r<32){let m=[];for(let y of e)y.flatten(m);return new qt(m,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],u=0,f=-1,h=[];function p(m){let y;if(m.lines>s&&m instanceof Gi)for(let b of m.children)p(b);else m.lines>o&&(u>o||!u)?(g(),a.push(m)):m instanceof qt&&u&&(y=h[h.length-1])instanceof qt&&m.lines+y.lines<=32?(u+=m.lines,f+=m.length+1,h[h.length-1]=new qt(y.text.concat(m.text),y.length+1+m.length)):(u+m.lines>i&&g(),u+=m.lines,f+=m.length+1,h.push(m))}function g(){u!=0&&(a.push(h.length==1?h[0]:Gi.from(h,f)),f=-1,u=h.length=0)}for(let m of e)p(m);return g(),a.length==1?a[0]:new Gi(a,t)}}ct.empty=new qt([""],0);function X9(n){let e=-1;for(let t of n)e+=t.length+1;return e}function zf(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],u=i+a.length;u>=t&&(u>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=u+1}return e}function tk(n,e,t){return zf(n,[""],e,t)}class mu{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof qt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof qt?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof qt){let u=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[o+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof qt?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class FT{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new mu(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class BT{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ct.prototype[Symbol.iterator]=function(){return this.iter()},mu.prototype[Symbol.iterator]=FT.prototype[Symbol.iterator]=BT.prototype[Symbol.iterator]=function(){return this});let G9=class{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}};function Qa(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function ks(n,e,t=!0,r=!0){return Q9(n,e,t,r)}const x0=/\r\n?|\n/;var rr=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(rr||(rr={}));class As{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){k0(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new As(e)}composeDesc(e){return this.empty?e:e.empty?this:zT(this,e)}mapDesc(e,t=!1){return e.empty?this:S0(this,e,t)}mapPos(e,t=-1,r=rr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],u=this.sections[o++],f=i+a;if(u<0){if(f>e)return s+(e-i);s+=a}else{if(r!=rr.Simple&&f>=e&&(r==rr.TrackDel&&i<e&&f>e||r==rr.TrackBefore&&i<e||r==rr.TrackAfter&&f>e))return null;if(f>e||f==e&&t<0&&!a)return e==i||t<0?s:s+u;s+=u}i=f}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new As(e)}static create(e){return new As(e)}}class hn extends As{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return k0(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return S0(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let u=i>>1;for(;r.length<u;)r.push(ct.empty);r.push(o?e.slice(s,s+o):ct.empty)}s+=o}return new hn(t,r)}compose(e){return this.empty?e:e.empty?this:zT(this,e,!0)}map(e,t=!1){return e.empty?this:S0(this,e,t,!0)}iterChanges(e,t=!1){k0(this,e,t)}get desc(){return As.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Au(this);e:for(let o=0,a=0;;){let u=o==e.length?1e9:e[o++];for(;a<u||a==u&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,u-a);Dn(i,h,-1);let p=s.ins==-1?-1:s.off==0?s.ins:0;Dn(t,h,p),p>0&&ro(r,t,s.text),s.forward(h),a+=h}let f=e[o++];for(;a<f;){if(s.done)break e;let h=Math.min(s.len,f-a);Dn(t,h,-1),Dn(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),a+=h}}return{changes:new hn(t,r),filtered:As.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function u(h=!1){if(!h&&!i.length)return;o<t&&Dn(i,t-o,-1);let p=new hn(i,s);a=a?a.compose(p.map(a)):p,i=[],s=[],o=0}function f(h){if(Array.isArray(h))for(let p of h)f(p);else if(h instanceof hn){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);u(),a=a?a.compose(h.map(a)):h}else{let{from:p,to:g=p,insert:m}=h;if(p>g||p<0||g>t)throw new RangeError(`Invalid change range ${p} to ${g} (in doc of length ${t})`);let y=m?typeof m=="string"?ct.of(m.split(r||x0)):m:ct.empty,b=y.length;if(p==g&&b==0)return;p<o&&u(),p>o&&Dn(i,p-o,-1),Dn(i,g-p,b),ro(s,i,y),o=g}}return f(e),u(!a),a}static empty(e){return new hn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(ct.empty);r[i]=ct.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new hn(t,r)}static createSet(e,t){return new hn(e,t)}}function Dn(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function ro(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(ct.empty);n.push(t)}}function k0(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],u=n.sections[o++];if(u<0)i+=a,s+=a;else{let f=i,h=s,p=ct.empty;for(;f+=a,h+=u,u&&r&&(p=p.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],u=n.sections[o++];e(i,f,s,h,p),i=f,s=h}}}function S0(n,e,t,r=!1){let i=[],s=r?[]:null,o=new Au(n),a=new Au(e);for(let u=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let f=Math.min(o.len,a.len);Dn(i,f,-1),o.forward(f),a.forward(f)}else if(a.ins>=0&&(o.ins<0||u==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let f=a.len;for(Dn(i,a.ins,-1);f;){let h=Math.min(o.len,f);o.ins>=0&&u<o.i&&o.len<=h&&(Dn(i,0,o.ins),s&&ro(s,i,o.text),u=o.i),o.forward(h),f-=h}a.next()}else if(o.ins>=0){let f=0,h=o.len;for(;h;)if(a.ins==-1){let p=Math.min(h,a.len);f+=p,h-=p,a.forward(p)}else if(a.ins==0&&a.len<h)h-=a.len,a.next();else break;Dn(i,f,u<o.i?o.ins:0),s&&u<o.i&&ro(s,i,o.text),u=o.i,o.forward(o.len-h)}else{if(o.done&&a.done)return s?hn.createSet(i,s):As.create(i);throw new Error("Mismatched change set lengths")}}}function zT(n,e,t=!1){let r=[],i=t?[]:null,s=new Au(n),o=new Au(e);for(let a=!1;;){if(s.done&&o.done)return i?hn.createSet(r,i):As.create(r);if(s.ins==0)Dn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Dn(r,0,o.ins,a),i&&ro(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let u=Math.min(s.len2,o.len),f=r.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;Dn(r,u,h,a),i&&h&&ro(i,r,o.text)}else o.ins==-1?(Dn(r,s.off?0:s.len,u,a),i&&ro(i,r,s.textBit(u))):(Dn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&ro(i,r,o.text));a=(s.ins>u||o.ins>=0&&o.len>u)&&(a||r.length>f),s.forward2(u),o.forward(u)}}}}class Au{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ct.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?ct.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Uo{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Uo(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return _e.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return _e.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return _e.range(e.anchor,e.head)}static create(e,t,r){return new Uo(e,t,r)}}class _e{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:_e.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new _e([this.main],0)}addRange(e,t=!0){return _e.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,_e.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new _e(e.ranges.map(t=>Uo.fromJSON(t)),e.main)}static single(e,t=e){return new _e([_e.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return _e.normalized(e.slice(),t);r=s.to}return new _e(e,t)}static cursor(e,t=0,r,i){return Uo.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Uo.create(t,e,48|s):Uo.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,u=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?_e.range(u,a):_e.range(a,u))}}return new _e(e,t)}}function HT(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let kv=0;class Ae{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=kv++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ae(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:Sv),!!e.static,e.enables)}of(e){return new Hf([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hf(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hf(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function Sv(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Hf{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=kv++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,u=!1,f=!1,h=[];for(let p of this.dependencies)p=="doc"?u=!0:p=="selection"?f=!0:(((t=e[p.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[p.id]);return{create(p){return p.values[o]=r(p),1},update(p,g){if(u&&g.docChanged||f&&(g.docChanged||g.selection)||C0(p,h)){let m=r(p);if(a?!nk(m,p.values[o],i):!i(m,p.values[o]))return p.values[o]=m,1}return 0},reconfigure:(p,g)=>{let m,y=g.config.address[s];if(y!=null){let b=ch(g,y);if(this.dependencies.every(O=>O instanceof Ae?g.facet(O)===p.facet(O):O instanceof Ps?g.field(O,!1)==p.field(O,!1):!0)||(a?nk(m=r(p),b,i):i(m=r(p),b)))return p.values[o]=b,0}else m=r(p);return p.values[o]=m,1}}}}function nk(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function C0(n,e){let t=!1;for(let r of e)vu(n,r)&1&&(t=!0);return t}function Z9(n,e,t){let r=t.map(u=>n[u.id]),i=t.map(u=>u.type),s=r.filter(u=>!(u&1)),o=n[e.id]>>1;function a(u){let f=[];for(let h=0;h<r.length;h++){let p=ch(u,r[h]);if(i[h]==2)for(let g of p)f.push(g);else f.push(p)}return e.combine(f)}return{create(u){for(let f of r)vu(u,f);return u.values[o]=a(u),1},update(u,f){if(!C0(u,s))return 0;let h=a(u);return e.compare(h,u.values[o])?0:(u.values[o]=h,1)},reconfigure(u,f){let h=C0(u,r),p=f.config.facets[e.id],g=f.facet(e);if(p&&!h&&Sv(t,p))return u.values[o]=g,0;let m=a(u);return e.compare(m,g)?(u.values[o]=g,0):(u.values[o]=m,1)}}}const ff=Ae.define({static:!0});class Ps{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Ps(kv++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ff).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(ff),o=i.facet(ff),a;return(a=s.find(u=>u.field==this))&&a!=o.find(u=>u.field==this)?(r.values[t]=a.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,ff.of({field:this,create:e})]}get extension(){return this}}const qo={lowest:4,low:3,default:2,high:1,highest:0};function Yl(n){return e=>new qT(e,n)}const VT={highest:Yl(qo.highest),high:Yl(qo.high),default:Yl(qo.default),low:Yl(qo.low),lowest:Yl(qo.lowest)};class qT{constructor(e,t){this.inner=e,this.prec=t}}class Wh{of(e){return new T0(this,e)}reconfigure(e){return Wh.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class T0{constructor(e,t){this.compartment=e,this.inner=t}}class uh{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let g of K9(e,t,o))g instanceof Ps?i.push(g):(s[g.facet.id]||(s[g.facet.id]=[])).push(g);let a=Object.create(null),u=[],f=[];for(let g of i)a[g.id]=f.length<<1,f.push(m=>g.slot(m));let h=r?.config.facets;for(let g in s){let m=s[g],y=m[0].facet,b=h&&h[g]||[];if(m.every(O=>O.type==0))if(a[y.id]=u.length<<1|1,Sv(b,m))u.push(r.facet(y));else{let O=y.combine(m.map(C=>C.value));u.push(r&&y.compare(O,r.facet(y))?r.facet(y):O)}else{for(let O of m)O.type==0?(a[O.id]=u.length<<1|1,u.push(O.value)):(a[O.id]=f.length<<1,f.push(C=>O.dynamicSlot(C)));a[y.id]=f.length<<1,f.push(O=>Z9(O,y,m))}}let p=f.map(g=>g(a));return new uh(e,o,p,a,u,s)}}function K9(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let u=i.get(o);if(u!=null){if(u<=a)return;let f=r[u].indexOf(o);f>-1&&r[u].splice(f,1),o instanceof T0&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let f of o)s(f,a);else if(o instanceof T0){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(o.compartment)||o.inner;t.set(o.compartment,f),s(f,a)}else if(o instanceof qT)s(o.inner,o.prec);else if(o instanceof Ps)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Hf)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,qo.default);else{let f=o.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(f,a)}}return s(n,qo.default),r.reduce((o,a)=>o.concat(a))}function vu(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function ch(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const WT=Ae.define(),E0=Ae.define({combine:n=>n.some(e=>e),static:!0}),jT=Ae.define({combine:n=>n.length?n[0]:void 0,static:!0}),UT=Ae.define(),QT=Ae.define(),YT=Ae.define(),XT=Ae.define({combine:n=>n.length?n[0]:!1});class pl{constructor(e,t){this.type=e,this.value=t}static define(){return new J9}}class J9{of(e){return new pl(this,e)}}class eB{constructor(e){this.map=e}of(e){return new Tt(this,e)}}class Tt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Tt(this.type,t)}is(e){return this.type==e}static define(e={}){return new eB(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}Tt.reconfigure=Tt.define();Tt.appendConfig=Tt.define();class Pn{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&HT(r,t.newLength),s.some(a=>a.type==Pn.time)||(this.annotations=s.concat(Pn.time.of(Date.now())))}static create(e,t,r,i,s,o){return new Pn(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Pn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Pn.time=pl.define();Pn.userEvent=pl.define();Pn.addToHistory=pl.define();Pn.remote=pl.define();function tB(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function GT(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=hn.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:Tt.mapEffects(n.effects,i).concat(Tt.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function A0(n,e,t){let r=e.selection,i=za(e.annotations);return e.userEvent&&(i=i.concat(Pn.userEvent.of(e.userEvent))),{changes:e.changes instanceof hn?e.changes:hn.of(e.changes||[],t,n.facet(jT)),selection:r&&(r instanceof _e?r:_e.single(r.anchor,r.head)),effects:za(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function ZT(n,e,t){let r=A0(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=GT(r,A0(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=Pn.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return rB(t?nB(i):i)}function nB(n){let e=n.startState,t=!0;for(let i of e.facet(UT)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:tB(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=hn.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Pn.create(e,i,n.selection&&n.selection.map(s),Tt.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(QT);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof Pn?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Pn?n=s[0]:n=ZT(e,za(s),!1)}return n}function rB(n){let e=n.startState,t=e.facet(YT),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=GT(r,A0(e,s,n.changes.newLength),!0))}return r==n?n:Pn.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const iB=[];function za(n){return n==null?iB:Array.isArray(n)?n:[n]}var Ss=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Ss||(Ss={}));const sB=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let M0;try{M0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function oB(n){if(M0)return M0.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||sB.test(t)))return!0}return!1}function aB(n){return e=>{if(!/\S/.test(e))return Ss.Space;if(oB(e))return Ss.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ss.Word;return Ss.Other}}class gt{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)vu(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return vu(this,r),ch(this,r)}update(...e){return ZT(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(Wh.reconfigure)?(t&&(i=new Map,t.compartments.forEach((u,f)=>i.set(f,u)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(Tt.reconfigure)?(t=null,r=a.value):a.is(Tt.appendConfig)&&(t=null,r=za(r).concat(a.value));let s;t?s=e.startState.values.slice():(t=uh.resolve(r,i,this),s=new gt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(u,f)=>f.reconfigure(u,this),null).values);let o=e.startState.facet(E0)?e.newSelection:e.newSelection.asSingle();new gt(t,e.newDoc,o,s,(a,u)=>u.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:_e.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=za(r.effects);for(let a=1;a<t.ranges.length;a++){let u=e(t.ranges[a]),f=this.changes(u.changes),h=f.map(i);for(let g=0;g<a;g++)s[g]=s[g].map(h);let p=i.mapDesc(f,!0);s.push(u.range.map(p)),i=i.compose(h),o=Tt.mapEffects(o,h).concat(Tt.mapEffects(za(u.effects),p))}return{changes:i,selection:_e.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof hn?e:hn.of(e,this.doc.length,this.facet(gt.lineSeparator))}toText(e){return ct.of(e.split(this.facet(gt.lineSeparator)||x0))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(vu(this,t),ch(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Ps&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(u=>o.spec.fromJSON(a,u)))}}return gt.create({doc:e.doc,selection:_e.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=uh.resolve(e.extensions||[],new Map),r=e.doc instanceof ct?e.doc:ct.of((e.doc||"").split(t.staticFacet(gt.lineSeparator)||x0)),i=e.selection?e.selection instanceof _e?e.selection:_e.single(e.selection.anchor,e.selection.head):_e.single(0);return HT(i,r.length),t.staticFacet(E0)||(i=i.asSingle()),new gt(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(gt.tabSize)}get lineBreak(){return this.facet(gt.lineSeparator)||`
`}get readOnly(){return this.facet(XT)}phrase(e,...t){for(let r of this.facet(gt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(WT))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return aB(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let u=ks(t,o,!1);if(s(t.slice(u,o))!=Ss.Word)break;o=u}for(;a<i;){let u=ks(t,a);if(s(t.slice(a,u))!=Ss.Word)break;a=u}return o==a?null:_e.range(o+r,a+r)}}gt.allowMultipleSelections=E0;gt.tabSize=Ae.define({combine:n=>n.length?n[0]:4});gt.lineSeparator=jT;gt.readOnly=XT;gt.phrases=Ae.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});gt.languageData=WT;gt.changeFilter=UT;gt.transactionFilter=QT;gt.transactionExtender=YT;Wh.reconfigure=Tt.define();function lB(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ya{eq(e){return this==e}range(e,t=e){return Mu.create(e,t,this)}}Ya.prototype.startSide=Ya.prototype.endSide=0;Ya.prototype.point=!1;Ya.prototype.mapMode=rr.TrackDel;class Mu{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Mu(e,t,r)}}function D0(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Cv{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let u=o+a>>1,f=s[u]-e||(r?this.value[u].endSide:this.value[u].startSide)-t;if(u==o)return f>=0?o:a;f>=0?a=u:o=u+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let u=0;u<this.value.length;u++){let f=this.value[u],h=this.from[u]+e,p=this.to[u]+e,g,m;if(h==p){let y=t.mapPos(h,f.startSide,f.mapMode);if(y==null||(g=m=y,f.startSide!=f.endSide&&(m=t.mapPos(h,f.endSide),m<g)))continue}else if(g=t.mapPos(h,f.startSide),m=t.mapPos(p,f.endSide),g>m||g==m&&f.startSide>0&&f.endSide<=0)continue;(m-g||f.endSide-f.startSide)<0||(o<0&&(o=g),f.point&&(a=Math.max(a,m-g)),r.push(f),i.push(g-o),s.push(m-o))}return{mapped:r.length?new Cv(i,s,r,a):null,pos:o}}}class Ct{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Ct(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(D0)),this.isEmpty)return t.length?Ct.of(t):this;let a=new KT(this,null,-1).goto(0),u=0,f=[],h=new Xa;for(;a.value||u<t.length;)if(u<t.length&&(a.from-t[u].from||a.startSide-t[u].value.startSide)>=0){let p=t[u++];h.addInner(p.from,p.to,p.value)||f.push(p)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(a.chunkIndex)<t[u].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&h.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(h.addInner(a.from,a.to,a.value)||f.push(Mu.create(a.from,a.to,a.value))),a.next());return h.finishInner(this.nextLayer.isEmpty&&!f.length?Ct.empty:this.nextLayer.update({add:f,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],u=this.chunk[o],f=e.touchesRange(a,a+u.length);if(f===!1)i=Math.max(i,u.maxPoint),t.push(u),r.push(e.mapPos(a));else if(f===!0){let{mapped:h,pos:p}=u.map(a,e);h&&(i=Math.max(i,h.maxPoint),t.push(h),r.push(p))}}let s=this.nextLayer.map(e);return t.length==0?s:new Ct(r,t,s||Ct.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Du.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Du.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),a=t.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),u=rk(o,a,r),f=new Xl(o,u,s),h=new Xl(a,u,s);r.iterGaps((p,g,m)=>ik(f,p,h,g,m,i)),r.empty&&r.length==0&&ik(f,0,h,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),o=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=rk(s,o),u=new Xl(s,a,0).goto(r),f=new Xl(o,a,0).goto(r);for(;;){if(u.to!=f.to||!R0(u.active,f.active)||u.point&&(!f.point||!u.point.eq(f.point)))return!1;if(u.to>i)return!0;u.next(),f.next()}}static spans(e,t,r,i,s=-1){let o=new Xl(e,null,s).goto(t),a=t,u=o.openStart;for(;;){let f=Math.min(o.to,r);if(o.point){let h=o.activeForPoint(o.to),p=o.pointFrom<t?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,u);i.point(a,f,o.point,h,p,o.pointRank),u=Math.min(o.openEnd(f),h.length)}else f>a&&(i.span(a,f,o.active,u),u=o.openEnd(f));if(o.to>r)return u+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new Xa;for(let i of e instanceof Mu?[e]:t?uB(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Ct.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Ct.empty;i=i.nextLayer)t=new Ct(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Ct.empty=new Ct([],[],null,-1);function uB(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(D0(e,r)>0)return n.slice().sort(D0);e=r}return n}Ct.empty.nextLayer=Ct.empty;class Xa{finishChunk(e){this.chunks.push(new Cv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Xa)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Ct.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ct.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function rk(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!t?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class KT{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Du{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new KT(o,t,r,s));return i.length==1?i[0]:new Du(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)km(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)km(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),km(this.heap,0)}}}function km(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Xl{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Du.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){hf(this.active,e),hf(this.activeTo,e),hf(this.activeRank,e),this.minActive=sk(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;df(this.active,t,r),df(this.activeTo,t,i),df(this.activeRank,t,s),e&&df(e,t,this.cursor.from),this.minActive=sk(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&hf(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function ik(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,u=r-e;for(;;){let f=n.to+u-t.to,h=f||n.endSide-t.endSide,p=h<0?n.to+u:t.to,g=Math.min(p,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&R0(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,g,n.point,t.point):g>a&&!R0(n.active,t.active)&&s.compareRange(a,g,n.active,t.active),p>o)break;(f||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(p),a=p,h<=0&&n.next(),h>=0&&t.next()}}function R0(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function hf(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function df(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function sk(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function cB(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=ks(n,i)}return n.length}const I0="",ok=typeof Symbol>"u"?"__"+I0:Symbol.for(I0),P0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class fo{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,u,f){let h=[],p=/^@(\w+)\b/.exec(o[0]),g=p&&p[1]=="keyframes";if(p&&a==null)return u.push(o[0]+";");for(let m in a){let y=a[m];if(/&/.test(m))s(m.split(/,\s*/).map(b=>o.map(O=>b.replace(/&/,O))).reduce((b,O)=>b.concat(O)),y,u);else if(y&&typeof y=="object"){if(!p)throw new RangeError("The value of a property ("+m+") should be a primitive value.");s(i(m),y,h,g)}else y!=null&&h.push(m.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+y+";")}(h.length||g)&&u.push((r&&!p&&!f?o.map(r):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ak[ok]||1;return ak[ok]=e+1,I0+e.toString(36)}static mount(e,t,r){let i=e[P0],s=r&&r.nonce;i?s&&i.setNonce(s):i=new fB(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let lk=new Map;class fB{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=lk.get(r);if(s)return e[P0]=s;this.sheet=new i.CSSStyleSheet,lk.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[P0]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],u=this.modules.indexOf(a);if(u<s&&u>-1&&(this.modules.splice(u,1),s--,u=-1),u==-1){if(this.modules.splice(s++,0,a),r)for(let f=0;f<a.rules.length;f++)r.insertRule(a.rules[f],i++)}else{for(;s<u;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let u=0;u<this.modules.length;u++)o+=this.modules[u].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ga={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},L0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'};for(var _n=0;_n<10;_n++)Ga[48+_n]=Ga[96+_n]=String(_n);for(var _n=1;_n<=24;_n++)Ga[_n+111]="F"+_n;for(var _n=65;_n<=90;_n++)Ga[_n]=String.fromCharCode(_n+32),L0[_n]=String.fromCharCode(_n);for(var Sm in Ga)L0.hasOwnProperty(Sm)||(L0[Sm]=Ga[Sm]);function Ru(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function $0(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Vf(n,e){if(!e.anchorNode)return!1;try{return $0(n,e.anchorNode)}catch{return!1}}function Iu(n){return n.nodeType==3?Go(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function yu(n,e,t,r){return t?uk(n,e,t,r,-1)||uk(n,e,t,r,1):!1}function Xo(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function fh(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function uk(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:is(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Xo(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?is(n):0}else return!1}}function is(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function jh(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function hB(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function JT(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function dB(n,e,t,r,i,s,o,a){let u=n.ownerDocument,f=u.defaultView||window;for(let h=n,p=!1;h&&!p;)if(h.nodeType==1){let g,m=h==u.body,y=1,b=1;if(m)g=hB(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(p=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let M=h.getBoundingClientRect();({scaleX:y,scaleY:b}=JT(h,M)),g={left:M.left,right:M.left+h.clientWidth*y,top:M.top,bottom:M.top+h.clientHeight*b}}let O=0,C=0;if(i=="nearest")e.top<g.top?(C=e.top-(g.top+o),t>0&&e.bottom>g.bottom+C&&(C=e.bottom-g.bottom+o)):e.bottom>g.bottom&&(C=e.bottom-g.bottom+o,t<0&&e.top-C<g.top&&(C=e.top-(g.top+o)));else{let M=e.bottom-e.top,T=g.bottom-g.top;C=(i=="center"&&M<=T?e.top+M/2-T/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-T+o)-g.top}if(r=="nearest"?e.left<g.left?(O=e.left-(g.left+s),t>0&&e.right>g.right+O&&(O=e.right-g.right+s)):e.right>g.right&&(O=e.right-g.right+s,t<0&&e.left<g.left+O&&(O=e.left-(g.left+s))):O=(r=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:r=="start"==a?e.left-s:e.right-(g.right-g.left)+s)-g.left,O||C)if(m)f.scrollBy(O,C);else{let M=0,T=0;if(C){let S=h.scrollTop;h.scrollTop+=C/b,T=(h.scrollTop-S)*b}if(O){let S=h.scrollLeft;h.scrollLeft+=O/y,M=(h.scrollLeft-S)*y}e={left:e.left-M,top:e.top-T,right:e.right-M,bottom:e.bottom-T},M&&Math.abs(M-O)<1&&(r="nearest"),T&&Math.abs(T-C)<1&&(i="nearest")}if(m)break;(e.top<g.top||e.bottom>g.bottom||e.left<g.left||e.right>g.right)&&(e={left:Math.max(e.left,g.left),right:Math.min(e.right,g.right),top:Math.max(e.top,g.top),bottom:Math.min(e.bottom,g.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function pB(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class gB{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?is(t):0),r,Math.min(e.focusOffset,r?is(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let Aa=null;function eE(n){if(n.setActive)return n.setActive();if(Aa)return n.focus(Aa);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Aa==null?{get preventScroll(){return Aa={preventScroll:!0},!0}}:void 0),!Aa){Aa=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let ck;function Go(n,e,t=e){let r=ck||(ck=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Ha(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function mB(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function tE(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function vB(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,is(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=is(t))}else{if(t==n)return!0;r=Xo(t),t=t.parentNode}}function nE(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function rE(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=is(t)}else if(t.parentNode&&!fh(t))r=Xo(t),t=t.parentNode;else return null}}function iE(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!fh(t))r=Xo(t)+1,t=t.parentNode;else return null}}class In{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new In(e.parentNode,Xo(e),t)}static after(e,t){return new In(e.parentNode,Xo(e)+1,t)}}const Tv=[];class yt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=yt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=fk(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=fk(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=is(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!yt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let u=0,f=r,h=r;u<this.children.length;u++){let p=this.children[u],g=f+p.length;if(f<e&&g>t)return p.domBoundsAround(e,t,f);if(g>=e&&i==-1&&(i=u,s=f),f>t&&p.dom.parentNode==this.dom){o=u,a=h;break}h=g,f=g+p.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=Tv){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new sE(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}yt.prototype.breakAfter=0;function fk(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class sE{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function oE(n,e,t,r,i,s,o,a,u){let{children:f}=n,h=f.length?f[e]:null,p=s.length?s[s.length-1]:null,g=p?p.breakAfter:o;if(!(e==r&&h&&!o&&!g&&s.length<2&&h.merge(t,i,s.length?p:null,t==0,a,u))){if(r<f.length){let m=f[r];m&&(i<m.length||m.breakAfter&&p?.breakAfter)?(e==r&&(m=m.split(i),i=0),!g&&p&&m.merge(0,i,p,!0,0,u)?s[s.length-1]=m:((i||m.children.length&&!m.children[0].length)&&m.merge(0,i,null,!1,0,u),s.push(m))):m?.breakAfter&&(p?p.breakAfter=1:o=1),r++}for(h&&(h.breakAfter=o,t>0&&(!o&&s.length&&h.merge(t,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,a,0),e++));e<r&&s.length;)if(f[r-1].become(s[s.length-1]))r--,s.pop(),u=s.length?0:a;else if(f[e].become(s[0]))e++,s.shift(),a=s.length?0:u;else break;!s.length&&e&&r<f.length&&!f[e-1].breakAfter&&f[r].merge(0,0,f[e-1],!1,a,u)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function aE(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:u}=o.findPos(t,1),{i:f,off:h}=o.findPos(e,-1),p=e-t;for(let g of r)p+=g.length;n.length+=p,oE(n,f,h,a,u,r,0,i,s)}let Ur=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},N0=typeof document<"u"?document:{documentElement:{style:{}}};const F0=/Edge\/(\d+)/.exec(Ur.userAgent),lE=/MSIE \d/.test(Ur.userAgent),B0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ur.userAgent),Uh=!!(lE||B0||F0),hk=!Uh&&/gecko\/(\d+)/i.test(Ur.userAgent),Cm=!Uh&&/Chrome\/(\d+)/.exec(Ur.userAgent),yB="webkitFontSmoothing"in N0.documentElement.style,uE=!Uh&&/Apple Computer/.test(Ur.vendor),dk=uE&&(/Mobile\/\w+/.test(Ur.userAgent)||Ur.maxTouchPoints>2);var me={mac:dk||/Mac/.test(Ur.platform),ie:Uh,ie_version:lE?N0.documentMode||6:B0?+B0[1]:F0?+F0[1]:0,gecko:hk,gecko_version:hk?+(/Firefox\/(\d+)/.exec(Ur.userAgent)||[0,0])[1]:0,chrome:!!Cm,chrome_version:Cm?+Cm[1]:0,ios:dk,android:/Android\b/.test(Ur.userAgent),safari:uE,webkit_version:yB?+(/\bAppleWebKit\/(\d+)/.exec(Ur.userAgent)||[0,0])[1]:0,tabSize:N0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const bB=256;class Si extends yt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Si)||this.length-(t-e)+r.length>bB||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Si(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new In(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return wB(this.dom,e,t)}}class Rs extends yt{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(tE(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof Rs&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(aE(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let u=r+a.length;u>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=u,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Rs(this.mark,t,o)}domAtPos(e){return cE(this,e)}coordsAt(e,t){return hE(this,e,t)}}function wB(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?me.chrome||me.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=Go(n,i,s).getClientRects();if(!a.length)return null;let u=a[(o?o<0:t>=0)?0:a.length-1];return me.safari&&!o&&u.width==0&&(u=Array.prototype.find.call(a,f=>f.width)||u),o?jh(u,o<0):u||null}class io extends yt{static create(e,t,r){return new io(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=io.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof io)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof io&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ct.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):ct.empty}domAtPos(e){return(this.length?e==0:this.side>0)?In.before(this.dom):In.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return jh(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Za extends yt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Za&&e.side==this.side}split(){return new Za(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?In.before(this.dom):In.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ct.empty}get isHidden(){return!0}}Si.prototype.children=io.prototype.children=Za.prototype.children=Tv;function cE(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new In(t,0)}function fE(n,e,t){let r,{children:i}=n;t>0&&e instanceof Rs&&i.length&&(r=i[i.length-1])instanceof Rs&&r.mark.eq(e.mark)?fE(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function hE(n,e,t){let r=null,i=-1,s=null,o=-1;function a(f,h){for(let p=0,g=0;p<f.children.length&&g<=h;p++){let m=f.children[p],y=g+m.length;y>=h&&(m.children.length?a(m,h-g):(!s||s.isHidden&&(t>0||OB(s,m)))&&(y>h||g==y&&m.getSide()>0)?(s=m,o=h-g):(g<h||g==y&&m.getSide()<0&&!m.isHidden)&&(r=m,i=h-g)),g=y}}a(n,e);let u=(t<0?r:s)||r||s;return u?u.coordsAt(Math.max(0,u==r?i:o),t):_B(n)}function _B(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Iu(e);return t[t.length-1]||null}function OB(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function z0(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const pk=Object.create(null);function hh(n,e,t){if(n==e)return!0;n||(n=pk),e||(e=pk);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function H0(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function xB(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Qh{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ns=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(ns||(ns={}));class It extends Ya{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Qu(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ho(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=dE(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new ho(e,r,i,t,e.widget||null,!0)}static line(e){return new Yu(e)}static set(e,t=!1){return Ct.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}It.none=Ct.empty;class Qu extends It{constructor(e){let{start:t,end:r}=dE(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof Qu&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&hh(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Qu.prototype.point=!1;class Yu extends It{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Yu&&this.spec.class==e.spec.class&&hh(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Yu.prototype.mapMode=rr.TrackBefore;Yu.prototype.point=!0;class ho extends It{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?rr.TrackBefore:rr.TrackAfter:rr.TrackDel}get type(){return this.startSide!=this.endSide?ns.WidgetRange:this.startSide<=0?ns.WidgetBefore:ns.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ho&&kB(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ho.prototype.point=!0;function dE(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function kB(n,e){return n==e||!!(n&&e&&n.compare(e))}function qf(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Ut extends yt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof Ut))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),aE(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new Ut;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){hh(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){fE(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=z0(t,this.attrs||{})),r&&(this.attrs=z0({class:r},this.attrs||{}))}domAtPos(e){return cE(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(tE(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(H0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&yt.get(i)instanceof Rs;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=yt.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!me.ios||!this.children.some(s=>s instanceof Si))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Si)||/[^ -~]/.test(r.text))return null;let i=Iu(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=hE(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ut&&this.children.length==0&&e.children.length==0&&hh(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof Ut)return s;if(o>t)break}i=o+s.breakAfter}return null}}class Ms extends yt{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof Ms)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?In.before(this.dom):In.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Ms(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Tv}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ct.empty}domBoundsAround(){return null}become(e){return e instanceof Ms&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof V0?null:jh(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class V0 extends Qh{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class bu{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ms&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ut),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(pf(new Za(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ms)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(pf(new Si(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof ho){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof ho)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ms(r.widget||Ka.block,a,r));else{let u=io.create(r.widget||Ka.inline,a,a?0:r.startSide),f=this.atCursorPos&&!u.isEditable&&s<=i.length&&(e<t||r.startSide>0),h=!u.isEditable&&(e<t||s>i.length||r.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!f&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),f&&(p.append(pf(new Za(1),i),s),s=i.length+Math.max(0,s-i.length)),p.append(pf(u,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new bu(e,t,r,s);return o.openEnd=Ct.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function pf(n,e){for(let t of e)n=new Rs(t,[n],n.length);return n}class Ka extends Qh{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ka.inline=new Ka("span");Ka.block=new Ka("div");var sn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(sn||(sn={}));const Zo=sn.LTR,Ev=sn.RTL;function pE(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const SB=pE("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),CB=pE("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),q0=Object.create(null),ji=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);q0[e]=t,q0[t]=-e}function gE(n){return n<=247?SB[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?CB[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const TB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class so{get dir(){return this.level%2?Ev:Zo}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function mE(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!mE(r.inner,i.inner))return!1}return!0}const vt=[];function EB(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:t,u=s?256:i;for(let f=o,h=u,p=u;f<a;f++){let g=gE(n.charCodeAt(f));g==512?g=h:g==8&&p==4&&(g=16),vt[f]=g==4?2:g,g&7&&(p=g),h=g}for(let f=o,h=u,p=u;f<a;f++){let g=vt[f];if(g==128)f<a-1&&h==vt[f+1]&&h&24?g=vt[f]=h:vt[f]=256;else if(g==64){let m=f+1;for(;m<a&&vt[m]==64;)m++;let y=f&&h==8||m<t&&vt[m]==8?p==1?1:8:256;for(let b=f;b<m;b++)vt[b]=y;f=m-1}else g==8&&p==1&&(vt[f]=1);h=g,g&7&&(p=g)}}}function AB(n,e,t,r,i){let s=i==1?2:1;for(let o=0,a=0,u=0;o<=r.length;o++){let f=o?r[o-1].to:e,h=o<r.length?r[o].from:t;for(let p=f,g,m,y;p<h;p++)if(m=q0[g=n.charCodeAt(p)])if(m<0){for(let b=a-3;b>=0;b-=3)if(ji[b+1]==-m){let O=ji[b+2],C=O&2?i:O&4?O&1?s:i:0;C&&(vt[p]=vt[ji[b]]=C),a=b;break}}else{if(ji.length==189)break;ji[a++]=p,ji[a++]=g,ji[a++]=u}else if((y=vt[p])==2||y==1){let b=y==i;u=b?0:1;for(let O=a-3;O>=0;O-=3){let C=ji[O+2];if(C&2)break;if(b)ji[O+2]|=2;else{if(C&4)break;ji[O+2]|=4}}}}}function MB(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let u=o;u<a;){let f=vt[u];if(f==256){let h=u+1;for(;;)if(h==a){if(i==t.length)break;h=t[i++].to,a=i<t.length?t[i].from:e}else if(vt[h]==256)h++;else break;let p=s==1,g=(h<e?vt[h]:r)==1,m=p==g?p?1:2:r;for(let y=h,b=i,O=b?t[b-1].to:n;y>u;)y==O&&(y=t[--b].from,O=b?t[b-1].to:n),vt[--y]=m;u=h}else s=f,u++}}}function W0(n,e,t,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let u=e,f=0;u<t;){let h=!0,p=!1;if(f==s.length||u<s[f].from){let b=vt[u];b!=a&&(h=!1,p=b==16)}let g=!h&&a==1?[]:null,m=h?r:r+1,y=u;e:for(;;)if(f<s.length&&y==s[f].from){if(p)break e;let b=s[f];if(!h)for(let O=b.to,C=f+1;;){if(O==t)break e;if(C<s.length&&s[C].from==O)O=s[C++].to;else{if(vt[O]==a)break e;break}}if(f++,g)g.push(b);else{b.from>u&&o.push(new so(u,b.from,m));let O=b.direction==Zo!=!(m%2);j0(n,O?r+1:r,i,b.inner,b.from,b.to,o),u=b.to}y=b.to}else{if(y==t||(h?vt[y]!=a:vt[y]==a))break;y++}g?W0(n,u,y,r+1,i,g,o):u<y&&o.push(new so(u,y,m)),u=y}else for(let u=t,f=s.length;u>e;){let h=!0,p=!1;if(!f||u>s[f-1].to){let b=vt[u-1];b!=a&&(h=!1,p=b==16)}let g=!h&&a==1?[]:null,m=h?r:r+1,y=u;e:for(;;)if(f&&y==s[f-1].to){if(p)break e;let b=s[--f];if(!h)for(let O=b.from,C=f;;){if(O==e)break e;if(C&&s[C-1].to==O)O=s[--C].from;else{if(vt[O-1]==a)break e;break}}if(g)g.push(b);else{b.to<u&&o.push(new so(b.to,u,m));let O=b.direction==Zo!=!(m%2);j0(n,O?r+1:r,i,b.inner,b.from,b.to,o),u=b.from}y=b.from}else{if(y==e||(h?vt[y-1]!=a:vt[y-1]==a))break;y--}g?W0(n,y,u,r+1,i,g,o):y<u&&o.push(new so(y,u,m)),u=y}}function j0(n,e,t,r,i,s,o){let a=e%2?2:1;EB(n,i,s,r,a),AB(n,i,s,r,a),MB(i,s,r,a),W0(n,i,s,e,t,r,o)}function DB(n,e,t){if(!n)return[new so(0,0,e==Ev?1:0)];if(e==Zo&&!t.length&&!TB.test(n))return vE(n.length);if(t.length)for(;n.length>vt.length;)vt[vt.length]=256;let r=[],i=e==Zo?0:1;return j0(n,i,i,t,0,n.length,r),r}function vE(n){return[new so(0,n,0)]}let yE="";function RB(n,e,t,r,i){var s;let o=r.head-n.from,a=so.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),u=e[a],f=u.side(i,t);if(o==f){let g=a+=i?1:-1;if(g<0||g>=e.length)return null;u=e[a=g],o=u.side(!i,t),f=u.side(i,t)}let h=ks(n.text,o,u.forward(i,t));(h<u.from||h>u.to)&&(h=f),yE=n.text.slice(Math.min(o,h),Math.max(o,h));let p=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return p&&h==f&&p.level+(i?0:1)<u.level?_e.cursor(p.side(!i,t)+n.from,p.forward(i,t)?1:-1,p.level):_e.cursor(h+n.from,u.forward(i,t)?-1:1,u.level)}function IB(n,e,t){for(let r=e;r<t;r++){let i=gE(n.charCodeAt(r));if(i==1)return Zo;if(i==2||i==4)return Ev}return Zo}const bE=Ae.define(),wE=Ae.define(),_E=Ae.define(),OE=Ae.define(),U0=Ae.define(),xE=Ae.define(),kE=Ae.define(),Av=Ae.define(),Mv=Ae.define(),SE=Ae.define({combine:n=>n.some(e=>e)}),PB=Ae.define({combine:n=>n.some(e=>e)}),CE=Ae.define();class Va{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Va(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Va(_e.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const gf=Tt.define({map:(n,e)=>n.map(e)}),TE=Tt.define();function Qr(n,e,t){let r=n.facet(OE);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Os=Ae.define({combine:n=>n.length?n[0]:!0});let LB=0;const lu=Ae.define();class Ci{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new Ci(LB++,e,r,i,a=>{let u=[lu.of(a)];return o&&u.push(Pu.of(f=>{let h=f.plugin(a);return h?o(h):It.none})),s&&u.push(s(a)),u})}static fromClass(e,t){return Ci.define(r=>new e(r),t)}}class Tm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Qr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Qr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Qr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const EE=Ae.define(),Dv=Ae.define(),Pu=Ae.define(),AE=Ae.define(),Rv=Ae.define(),ME=Ae.define();function gk(n,e){let t=n.state.facet(ME);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return Ct.spans(r,e.from,e.to,{point(){},span(s,o,a,u){let f=s-e.from,h=o-e.from,p=i;for(let g=a.length-1;g>=0;g--,u--){let m=a[g].spec.bidiIsolate,y;if(m==null&&(m=IB(e.text,f,h)),u>0&&p.length&&(y=p[p.length-1]).to==f&&y.direction==m)y.to=h,p=y.inner;else{let b={from:f,to:h,direction:m,inner:[]};p.push(b),p=b.inner}}}}),i}const DE=Ae.define();function Iv(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(DE)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const uu=Ae.define();class Zr{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Zr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let u=i==e.length?null:e[i],f=o-a,h=u?u.fromB:1e9;for(;s<t.length&&t[s]<h;){let p=t[s],g=t[s+1],m=Math.max(a,p),y=Math.min(h,g);if(m<=y&&new Zr(m+f,y+f,m,y).addToSet(r),g>h)break;s+=2}if(!u)return r;new Zr(u.fromA,u.toA,u.fromB,u.toB).addToSet(r),o=u.toA,a=u.toB}}}class dh{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=hn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,u)=>i.push(new Zr(s,o,a,u))),this.changedRanges=i}static create(e,t,r){return new dh(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class mk extends yt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=It.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ut],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Zr(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:f,toA:h})=>h<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!VB(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?NB(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:f,to:h}=this.hasComposition;r=new Zr(f,h,e.changes.mapPos(f,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(me.ie||me.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),u=zB(o,a,e.changes);return r=Zr.extendWithRanges(r,u),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=me.chrome||me.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ms&&o.widget instanceof V0&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:u,toA:f,fromB:h,toB:p}=a,g,m,y,b;if(r&&r.range.fromB<p&&r.range.toB>h){let S=bu.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),R=bu.build(this.view.state.doc,r.range.toB,p,this.decorations,this.dynamicDecorationMap);m=S.breakAtStart,y=S.openStart,b=R.openEnd;let $=this.compositionView(r);R.breakAtStart?$.breakAfter=1:R.content.length&&$.merge($.length,$.length,R.content[0],!1,R.openStart,0)&&($.breakAfter=R.content[0].breakAfter,R.content.shift()),S.content.length&&$.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),g=S.content.concat($).concat(R.content)}else({content:g,breakAtStart:m,openStart:y,openEnd:b}=bu.build(this.view.state.doc,h,p,this.decorations,this.dynamicDecorationMap));let{i:O,off:C}=s.findPos(f,1),{i:M,off:T}=s.findPos(u,-1);oE(this,M,T,O,C,g,m,y,b)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(TE)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Si(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Rs(i,[t],t.length);let r=new Ut;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(o);let a=yt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Os)||this.dom.tabIndex>-1)&&Vf(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(a.anchor)),f=a.empty?u:this.moveToLine(this.domAtPos(a.head));if(me.gecko&&a.empty&&!this.hasComposition&&$B(u)){let p=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(p,u.node.childNodes[u.offset]||null)),u=f=new In(p,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!yu(u.node,u.offset,h.anchorNode,h.anchorOffset)||!yu(f.node,f.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,a))&&(this.view.observer.ignore(()=>{me.android&&me.chrome&&this.dom.contains(h.focusNode)&&HB(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=Ru(this.view.root);if(p)if(a.empty){if(me.gecko){let g=FB(u.node,u.offset);if(g&&g!=3){let m=(g==1?rE:iE)(u.node,u.offset);m&&(u=new In(m.node,m.offset))}}p.collapse(u.node,u.offset),a.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=a.bidiLevel)}else if(p.extend){p.collapse(u.node,u.offset);try{p.extend(f.node,f.offset)}catch{}}else{let g=document.createRange();a.anchor>a.head&&([u,f]=[f,u]),g.setEnd(f.node,f.offset),g.setStart(u.node,u.offset),p.removeAllRanges(),p.addRange(g)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(u,f)),this.impreciseAnchor=u.precise?null:new In(h.anchorNode,h.anchorOffset),this.impreciseHead=f.precise?null:new In(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&yu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Ru(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=Ut.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let u=this.coordsAt(t.head,-1),f=this.coordsAt(t.head,1);if(!u||!f||u.bottom>f.top)return;let h=this.domAtPos(t.head+t.assoc);r.collapse(h.node,h.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=yt.get(t.childNodes[i]);s instanceof Ut&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=yt.get(t.childNodes[i]);s instanceof Ut&&(r=s.domAtPos(s.length))}return r?new In(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=yt.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Ut)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],u=s-a.breakAfter,f=u-a.length;if(u<e)break;if(f<=e&&(f<e||a.covers(-1))&&(u>e||a.covers(1))&&(!r||a instanceof Ut&&!(r instanceof Ut&&t>=0)))r=a,i=f;else if(r&&f==e&&u==e&&a instanceof Ms&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=f}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Ut))return null;for(;i.children.length;){let{i:a,off:u}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=u}if(!(i instanceof Si))return null;let s=ks(i.text,r);if(s==r)return null;let o=Go(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let u=o[a];if(a==o.length-1||u.top<u.bottom&&u.left<u.right)return u}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,u=this.view.textDirection==sn.LTR;for(let f=0,h=0;h<this.children.length;h++){let p=this.children[h],g=f+p.length;if(g>i)break;if(f>=r){let m=p.dom.getBoundingClientRect();if(t.push(m.height),o){let y=p.dom.lastChild,b=y?Iu(y):[];if(b.length){let O=b[b.length-1],C=u?O.right-m.left:m.right-O.left;C>a&&(a=C,this.minWidth=s,this.minWidthFrom=f,this.minWidthTo=g)}}}f=g+p.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?sn.RTL:sn.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ut){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Iu(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new sE(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(It.replace({widget:new V0(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return It.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Pu).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(AE).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(Ct.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(CE))try{if(f(this.view,e.range,e))return!0}catch(h){Qr(this.view.state,h,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Iv(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:u}=this.view.scrollDOM;dB(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==sn.LTR)}}function $B(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function RE(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=rE(t.focusNode,t.focusOffset),i=iE(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=yt.get(i.node);if(!a||a instanceof Si&&a.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let u=yt.get(r.node);!u||u instanceof Si&&u.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function NB(n,e,t){let r=RE(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let u=e.invertedDesc,f=new Zr(u.mapPos(s),u.mapPos(o),s,o),h=[];for(let p=i.parentNode;;p=p.parentNode){let g=yt.get(p);if(g instanceof Rs)h.push({node:p,deco:g.mark});else{if(g instanceof Ut||p.nodeName=="DIV"&&p.parentNode==n.contentDOM)return{range:f,text:i,marks:h,line:p};if(p!=n.contentDOM)h.push({node:p,deco:new Qu({inclusive:!0,attributes:xB(p),tagName:p.tagName.toLowerCase()})});else return null}}}function FB(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let BB=class{constructor(){this.changes=[]}compareRange(e,t){qf(e,t,this.changes)}comparePoint(e,t){qf(e,t,this.changes)}boundChange(e){qf(e,e,this.changes)}};function zB(n,e,t){let r=new BB;return Ct.compare(n,e,t,r),r.changes}function HB(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function VB(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function qB(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return _e.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=ks(i.text,s,!1):a=ks(i.text,s);let u=r(i.text.slice(o,a));for(;o>0;){let f=ks(i.text,o,!1);if(r(i.text.slice(f,o))!=u)break;o=f}for(;a<i.length;){let f=ks(i.text,a);if(r(i.text.slice(a,f))!=u)break;a=f}return _e.range(o+i.from,a+i.from)}function WB(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function jB(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Em(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function vk(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function yk(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Q0(n,e,t){let r,i,s,o,a=!1,u,f,h,p;for(let y=n.firstChild;y;y=y.nextSibling){let b=Iu(y);for(let O=0;O<b.length;O++){let C=b[O];i&&Em(i,C)&&(C=vk(yk(C,i.bottom),i.top));let M=WB(e,C),T=jB(t,C);if(M==0&&T==0)return y.nodeType==3?bk(y,e,t):Q0(y,e,t);if(!r||o>T||o==T&&s>M){r=y,i=C,s=M,o=T;let S=T?t<C.top?-1:1:M?e<C.left?-1:1:0;a=!S||(S>0?O<b.length-1:O>0)}M==0?t>C.bottom&&(!h||h.bottom<C.bottom)?(u=y,h=C):t<C.top&&(!p||p.top>C.top)&&(f=y,p=C):h&&Em(h,C)?h=yk(h,C.bottom):p&&Em(p,C)&&(p=vk(p,C.top))}}if(h&&h.bottom>=t?(r=u,i=h):p&&p.top<=t&&(r=f,i=p),!r)return{node:n,offset:0};let g=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return bk(r,g,t);if(a&&r.contentEditable!="false")return Q0(r,g,t);let m=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:m}}function bk(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let u=Go(n,a,a+1).getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(h.top==h.bottom)continue;o||(o=e-h.left);let p=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&p<s){let g=e>=(h.left+h.right)/2,m=g;if((me.chrome||me.gecko)&&Go(n,a).getBoundingClientRect().left==h.right&&(m=!g),p<=0)return{node:n,offset:a+(m?1:0)};i=a+(m?1:0),s=p}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function IE(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,u,{docHeight:f}=n.viewState,{x:h,y:p}=e,g=p-a;if(g<0)return 0;if(g>f)return n.state.doc.length;for(let S=n.viewState.heightOracle.textHeight/2,R=!1;u=n.elementAtHeight(g),u.type!=ns.Text;)for(;g=r>0?u.bottom+S:u.top-S,!(g>=0&&g<=f);){if(R)return t?null:0;R=!0,r=-r}p=a+g;let m=u.from;if(m<n.viewport.from)return n.viewport.from==0?0:t?null:wk(n,o,u,h,p);if(m>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:wk(n,o,u,h,p);let y=n.dom.ownerDocument,b=n.root.elementFromPoint?n.root:y,O=b.elementFromPoint(h,p);O&&!n.contentDOM.contains(O)&&(O=null),O||(h=Math.max(o.left+1,Math.min(o.right-1,h)),O=b.elementFromPoint(h,p),O&&!n.contentDOM.contains(O)&&(O=null));let C,M=-1;if(O&&((i=n.docView.nearest(O))===null||i===void 0?void 0:i.isEditable)!=!1){if(y.caretPositionFromPoint){let S=y.caretPositionFromPoint(h,p);S&&({offsetNode:C,offset:M}=S)}else if(y.caretRangeFromPoint){let S=y.caretRangeFromPoint(h,p);S&&({startContainer:C,startOffset:M}=S,(!n.contentDOM.contains(C)||me.safari&&UB(C,M,h)||me.chrome&&QB(C,M,h))&&(C=void 0))}C&&(M=Math.min(is(C),M))}if(!C||!n.docView.dom.contains(C)){let S=Ut.find(n.docView,m);if(!S)return g>u.top+u.height/2?u.to:u.from;({node:C,offset:M}=Q0(S.dom,h,p))}let T=n.docView.nearest(C);if(!T)return null;if(T.isWidget&&((s=T.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=T.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?T.posAtStart:T.posAtEnd}else return T.localPosFromDOM(C,M)+T.posAtStart}function wk(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,u=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=u*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+cB(o,s,n.state.tabSize)}function UB(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Go(n,r-1,r).getBoundingClientRect().left>t}function QB(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():Go(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function YB(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==ns.Text&&(i.type!=s.type||(t<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function XB(n,e,t,r){let i=YB(n,e.head,e.assoc||-1),s=!r||i.type!=ns.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),u=n.posAtCoords({x:t==(a==sn.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(u!=null)return _e.cursor(u,t?-1:1)}return _e.cursor(t?i.to:i.from,t?-1:1)}function _k(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,u=null;;){let f=RB(i,s,o,a,t),h=yE;if(!f){if(i.number==(t?n.state.doc.lines:1))return a;h=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),f=n.visualLineSide(i,!t)}if(u){if(!u(h))return a}else{if(!r)return f;u=r(h)}a=f}}function GB(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==Ss.Space&&(i=o),i==o}}function ZB(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return _e.cursor(i,e.assoc);let o=e.goalColumn,a,u=n.contentDOM.getBoundingClientRect(),f=n.coordsAtPos(i,e.assoc||-1),h=n.documentTop;if(f)o==null&&(o=f.left-u.left),a=s<0?f.top:f.bottom;else{let m=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(u.right-u.left,n.defaultCharacterWidth*(i-m.from))),a=(s<0?m.top:m.bottom)+h}let p=u.left+o,g=r??n.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let y=a+(g+m)*s,b=IE(n,{x:p,y},!1,s);if(y<u.top||y>u.bottom||(s<0?b<i:b>i)){let O=n.docView.coordsForChar(b),C=!O||y<O.top?-1:1;return _e.cursor(b,C,void 0,o)}}}function Wf(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let u=r||t||(e-s<o-e?-1:1);e=u<0?s:o,r=u}});if(!r)return e}}function Am(n,e,t){let r=Wf(n.state.facet(Rv).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:_e.cursor(r,r<t.from?1:-1)}const cu="";class KB{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(gt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=cu}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=yt.get(i),u=yt.get(o);(a&&u?a.breakAfter:(a?a.breakAfter:fh(i))||fh(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=yt.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(JB(e,r.node,r.offset)?t:0))}}function JB(n,e,t){for(;;){if(!e||t<is(e))return!1;if(e==n)return!0;t=Xo(e)+1,e=e.parentNode}}class Ok{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ez{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:rz(e),u=new KB(a,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=iz(a,this.bounds.from)}else{let a=e.observer.selectionRange,u=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!$0(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),f=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!$0(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),h=e.viewport;if((me.ios||me.chrome)&&e.state.selection.main.empty&&u!=f&&(h.from>0||h.to<e.state.doc.length)){let p=Math.min(u,f),g=Math.max(u,f),m=h.from-p,y=h.to-g;(m==0||m==1||p==0)&&(y==0||y==-1||g==e.state.doc.length)&&(u=0,f=e.state.doc.length)}this.newSel=_e.single(f,u)}}}function PE(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,u=i.from,f=null;(s===8||me.android&&e.text.length<a-o)&&(u=i.to,f="end");let h=nz(n.state.doc.sliceString(o,a,cu),e.text,u-o,f);h&&(me.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==cu+cu&&h.toB--,t={from:o+h.from,to:o+h.toA,insert:ct.of(e.text.slice(h.from,h.toB).split(cu))})}else r&&(!n.hasFocus&&n.state.facet(Os)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(me.mac||me.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=_e.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:ct.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:me.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=_e.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:ct.of([" "])}),t)return Pv(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function Pv(n,e,t,r=-1){if(me.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(me.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ha(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Ha(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Ha(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=tz(n,e,t));return n.state.facet(xE).some(u=>u(n,e.from,e.to,s,a))||n.dispatch(a()),!0}function tz(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let a=i.changes(e),u=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let f=n.state.sliceDoc(e.from,e.to),h,p=t&&RE(n,t.main.head);if(p){let y=e.insert.length-(e.to-e.from);h={from:p.from,to:p.to-y}}else h=n.state.doc.lineAt(s.head);let g=s.to-e.to,m=s.to-s.from;r=i.changeByRange(y=>{if(y.from==s.from&&y.to==s.to)return{changes:a,range:u||y.map(a)};let b=y.to-g,O=b-f.length;if(y.to-y.from!=m||n.state.sliceDoc(O,b)!=f||y.to>=h.from&&y.from<=h.to)return{range:y};let C=i.changes({from:O,to:b,insert:e.insert}),M=y.to-s.to;return{changes:C,range:u?_e.range(Math.max(0,u.anchor+M),Math.max(0,u.head+M)):y.map(C)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function nz(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let u=Math.max(0,s-Math.min(o,a));t-=o+u-s}if(o<s&&n.length<e.length){let u=t<=s&&t>=o?s-t:0;s-=u,a=s+(a-o),o=s}else if(a<s){let u=t<=s&&t>=a?s-t:0;s-=u,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function rz(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new Ok(t,r)),(i!=t||s!=r)&&e.push(new Ok(i,s))),e}function iz(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?_e.single(t+e,r+e):null}class sz{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,me.safari&&e.contentDOM.addEventListener("input",()=>null),me.gecko&&Oz(e.contentDOM.ownerDocument)}handleEvent(e){!pz(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=oz(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&lz.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),me.android&&me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=LE.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||az.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ha(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:me.safari&&!me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function xk(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){Qr(t.state,i)}}}function oz(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&t(s).handlers.push(xk(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&t(s).observers.push(xk(r.value,o))}}for(let r in Ti)t(r).handlers.push(Ti[r]);for(let r in ti)t(r).observers.push(ti[r]);return e}const LE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],az="dthko",lz=[16,17,18,20,91,92,224,225],mf=6;function vf(n){return Math.max(0,n)*.7+8}function uz(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class cz{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=pB(e.contentDOM),this.atoms=e.state.facet(Rv).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(gt.allowMultipleSelections)&&fz(e,t),this.dragging=dz(e,t)&&FE(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&uz(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let u=Iv(this.view);e.clientX-u.left<=i+mf?t=-vf(i-e.clientX):e.clientX+u.right>=o-mf&&(t=vf(e.clientX-o)),e.clientY-u.top<=s+mf?r=-vf(s-e.clientY):e.clientY+u.bottom>=a-mf&&(r=vf(e.clientY-a)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Wf(this.atoms,i.from,0);o!=i.from&&(s=_e.cursor(o,-1))}else{let o=Wf(this.atoms,i.from,-1),a=Wf(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=_e.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?_e.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function fz(n,e){let t=n.state.facet(bE);return t.length?t[0](e):me.mac?e.metaKey:e.ctrlKey}function hz(n,e){let t=n.state.facet(wE);return t.length?t[0](e):me.mac?!e.altKey:!e.ctrlKey}function dz(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Ru(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function pz(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=yt.get(t))&&r.ignoreEvent(e))return!1;return!0}const Ti=Object.create(null),ti=Object.create(null),$E=me.ie&&me.ie_version<15||me.ios&&me.webkit_version<604;function gz(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),NE(n,t.value)},50)}function Yh(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function NE(n,e){e=Yh(n.state,Av,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Y0!=null&&t.selection.ranges.every(u=>u.empty)&&Y0==s.toString()){let u=-1;r=t.changeByRange(f=>{let h=t.doc.lineAt(f.from);if(h.from==u)return{range:f};u=h.from;let p=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:p},range:_e.cursor(f.from+p.length)}})}else o?r=t.changeByRange(u=>{let f=s.line(i++);return{changes:{from:u.from,to:u.to,insert:f.text},range:_e.cursor(u.from+f.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}ti.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ti.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ti.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ti.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ti.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(_E))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=yz(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new cz(n,e,t,r)),r&&n.observer.ignore(()=>{eE(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function kk(n,e,t,r){if(r==1)return _e.cursor(e,t);if(r==2)return qB(n.state,e,t);{let i=Ut.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,_e.range(o,a)}}let Sk=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function mz(n,e,t,r){let i=Ut.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Sk(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&Sk(t,r,a)?1:o&&o.bottom>=r?-1:1}function Ck(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:mz(n,t,e.clientX,e.clientY)}}const vz=me.ie&&me.ie_version<=11;let Tk=null,Ek=0,Ak=0;function FE(n){if(!vz)return n.detail;let e=Tk,t=Ak;return Tk=n,Ak=Date.now(),Ek=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Ek+1)%3:1}function yz(n,e){let t=Ck(n,e),r=FE(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let u=Ck(n,s),f,h=kk(n,u.pos,u.bias,r);if(t.pos!=u.pos&&!o){let p=kk(n,t.pos,t.bias,r),g=Math.min(p.from,h.from),m=Math.max(p.to,h.to);h=g<h.from?_e.range(g,m):_e.range(m,g)}return o?i.replaceRange(i.main.extend(h.from,h.to)):a&&r==1&&i.ranges.length>1&&(f=bz(i,u.pos))?f:a?i.addRange(h):_e.create([h])}}}function bz(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return _e.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Ti.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=_e.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Yh(n.state,Mv,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ti.dragend=n=>(n.inputState.draggedContent=null,!1);function Mk(n,e,t,r){if(t=Yh(n.state,Av,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&hz(n,e)?{from:s.from,to:s.to}:null,a={from:i,insert:t},u=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ti.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&Mk(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Mk(n,e,r,!0),!0}return!1};Ti.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=$E?null:e.clipboardData;return t?(NE(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(gz(n),!1)};function wz(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function _z(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Yh(n,Mv,e.join(n.lineBreak)),ranges:t,linewise:r}}let Y0=null;Ti.copy=Ti.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=_z(n.state);if(!t&&!i)return!1;Y0=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=$E?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(wz(n,t),!1)};const BE=pl.define();function zE(n,e){let t=[];for(let r of n.facet(kE)){let i=r(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:BE.of(!0)}):null}function HE(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=zE(n.state,e);t?n.dispatch(t):n.update([])}},10)}ti.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),HE(n)};ti.blur=n=>{n.observer.clearSelectionRange(),HE(n)};ti.compositionstart=ti.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ti.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,me.chrome&&me.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ti.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ti.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],u=n.posAtDOM(a.startContainer,a.startOffset),f=n.posAtDOM(a.endContainer,a.endOffset);return Pv(n,{from:u,to:f,insert:n.state.toText(s)},null),!0}}let i;if(me.chrome&&me.android&&(i=LE.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return me.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),me.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ti.compositionend(n,e),20),!1};const Dk=new Set;function Oz(n){Dk.has(n)||(Dk.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Rk=["pre-wrap","normal","pre-line","break-spaces"];let Ja=!1;function Ik(){Ja=!1}class xz{constructor(e){this.lineWrapping=e,this.doc=ct.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Rk.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=Rk.indexOf(e)>-1,u=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,u){this.heightSamples={};for(let f=0;f<o.length;f++){let h=o[f];h<0?f++:this.heightSamples[Math.floor(h*10)]=!0}}return u}}class kz{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Zi{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?ns.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ho?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Zi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var St=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(St||(St={}));const jf=.001;class Wn{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>jf&&(Ja=!0),this.height=e)}replace(e,t,r){return Wn.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:u,toA:f,fromB:h,toB:p}=i[a],g=s.lineAt(u,St.ByPosNoHeight,r.setDoc(t),0,0),m=g.to>=f?g:s.lineAt(f,St.ByPosNoHeight,r,0,0);for(p+=m.to-f,f=m.to;a>0&&g.from<=i[a-1].toA;)u=i[a-1].fromA,h=i[a-1].fromB,a--,u<g.from&&(g=s.lineAt(u,St.ByPosNoHeight,r,0,0));h+=g.from-u,u=g.from;let y=Lv.build(r.setDoc(o),e,h,p);s=ph(s,s.replace(u,f,y))}return s.updateHeight(r,0)}static empty(){return new yr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new Sz(Wn.of(e.slice(0,t)),o,Wn.of(e.slice(r)))}}function ph(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ja=!0),e)}Wn.prototype.size=1;class VE extends Wn{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Zi(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class yr extends VE{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Zi(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof yr||i instanceof wn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof wn?i=new yr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Wn.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class wn extends Wn{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*s);o=u/s,this.length>s+1&&(a=(this.height-u)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:u}=this.heightMetrics(t,i);if(t.lineWrapping){let f=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=t.doc.lineAt(f),p=a+h.length*u,g=Math.max(r,e-p/2);return new Zi(h.from,h.length,g,p,0)}else{let f=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:h,length:p}=t.doc.line(s+f);return new Zi(h,p,r+a*f,a,0)}}lineAt(e,t,r,i,s){if(t==St.ByHeight)return this.blockAt(e,r,i,s);if(t==St.ByPosNoHeight){let{from:m,to:y}=r.doc.lineAt(e);return new Zi(m,y-m,0,0,0)}let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s),f=r.doc.lineAt(e),h=a+f.length*u,p=f.number-o,g=i+a*p+u*(f.from-s-p);return new Zi(f.from,f.length,Math.max(i,Math.min(g,i+this.height-h)),h,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:u,perChar:f}=this.heightMetrics(r,s);for(let h=e,p=i;h<=t;){let g=r.doc.lineAt(h);if(h==e){let y=g.number-a;p+=u*y+f*(e-s-y)}let m=u+f*g.length;o(new Zi(g.from,g.length,p,m,0)),p+=m,h=g.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof wn?r[r.length-1]=new wn(s.length+i):r.push(null,new wn(i-1))}if(e>0){let s=r[0];s instanceof wn?r[0]=new wn(e+s.length):r.unshift(new wn(e-1),null)}return Wn.of(r)}decomposeLeft(e,t){t.push(new wn(e-1),null)}decomposeRight(e,t){t.push(null,new wn(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),u=-1;for(i.from>t&&o.push(new wn(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let h=e.doc.lineAt(a).length;o.length&&o.push(null);let p=i.heights[i.index++];u==-1?u=p:Math.abs(p-u)>=jf&&(u=-2);let g=new yr(h,p);g.outdated=!1,o.push(g),a+=h+1}a<=s&&o.push(null,new wn(s-a).updateHeight(e,a));let f=Wn.of(o);return(u<0||Math.abs(f.height-this.height)>=jf||Math.abs(u-this.heightMetrics(e,t).perLine)>=jf)&&(Ja=!0),ph(this,f)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Sz extends Wn{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,u=t==St.ByHeight?e<o:e<a,f=u?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(u?f.to<a:f.from>a))return f;let h=t==St.ByPosNoHeight?St.ByPosNoHeight:St.ByPos;return u?f.join(this.right.lineAt(a,h,r,o,a)):this.left.lineAt(a,h,r,i,s).join(f)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,u=s+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,r,i,s,o),t>=u&&this.right.forEachLine(e,t,r,a,u,o);else{let f=this.lineAt(u,St.ByPos,r,i,s);e<f.from&&this.left.forEachLine(e,f.from-1,r,i,s,o),f.to>=e&&f.from<=t&&o(f),t>f.to&&this.right.forEachLine(f.to+1,t,r,a,u,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&Pk(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),Pk(s,a)}return Wn.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Wn.of(this.break?[e,null,t]:[e,t]):(this.left=ph(this.left,e),this.right=ph(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,u=null;return i&&i.from<=t+s.length&&i.more?u=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?u=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),u?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Pk(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof wn&&(r=n[e+1])instanceof wn&&n.splice(e-1,3,new wn(t.length+1+r.length))}const Cz=5;class Lv{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof yr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new yr(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new VE(o,i,r)):(o||s||i>=Cz)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new yr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new wn(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof yr)return e;let t=new yr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof yr)&&!this.isCovered?this.nodes.push(new yr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof yr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new Lv(r,e);return Ct.spans(t,r,i,s,0),s.finish(r)}}function Tz(n,e,t){let r=new Ez;return Ct.compare(n,e,t,r,0),r.changes}class Ez{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&qf(e,t,this.changes,5)}}function Az(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),u=Math.min(i.innerHeight,t.bottom);for(let f=n.parentNode;f&&f!=r.body;)if(f.nodeType==1){let h=f,p=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&p.overflow!="visible"){let g=h.getBoundingClientRect();s=Math.max(s,g.left),o=Math.min(o,g.right),a=Math.max(a,g.top),u=Math.min(f==n.parentNode?i.innerHeight:u,g.bottom)}f=p.position=="absolute"||p.position=="fixed"?h.offsetParent:h.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,u)-(t.top+e)}}function Mz(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Dz(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Mm{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return It.replace({widget:new Rz(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Rz extends Qh{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Lk{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=$k,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=sn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Dv).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new xz(t),this.stateDeco=e.facet(Pu).filter(r=>typeof r!="function"),this.heightMap=Wn.empty().applyChanges(this.stateDeco,ct.empty,this.heightOracle.setDoc(e.doc),[new Zr(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=It.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new yf(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?$k:new $v(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(fu(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Pu).filter(h=>typeof h!="function");let i=e.changedRanges,s=Zr.extendWithRanges(i,Tz(r,this.stateDeco,e?e.changes:hn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ik(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Ja)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let u=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let f=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(PB)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?sn.RTL:sn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),u=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let f=0,h=0;if(a.width&&a.height){let{scaleX:S,scaleY:R}=JT(t,a);(S>.005&&Math.abs(this.scaleX-S)>.005||R>.005&&Math.abs(this.scaleY-R)>.005)&&(this.scaleX=S,this.scaleY=R,f|=16,o=u=!0)}let p=(parseInt(r.paddingTop)||0)*this.scaleY,g=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=g)&&(this.paddingTop=p,this.paddingBottom=g,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=nE(e.scrollDOM);let y=(this.printing?Dz:Az)(t,this.paddingTop),b=y.top-this.pixelViewport.top,O=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(u=!0)),!this.inView&&!this.scrollTarget&&!Mz(e.dom))return 0;let M=a.width;if((this.contentDOMWidth!=M||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),u){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(o=!0),o||i.lineWrapping&&Math.abs(M-this.contentDOMWidth)>i.charWidth){let{lineHeight:R,charWidth:$,textHeight:L}=e.docView.measureTextSize();o=R>0&&i.refresh(s,R,$,L,M/$,S),o&&(e.docView.minWidth=0,f|=16)}b>0&&O>0?h=Math.max(b,O):b<0&&O<0&&(h=Math.min(b,O)),Ik();for(let R of this.viewports){let $=R.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(R);this.heightMap=(o?Wn.empty().applyChanges(this.stateDeco,ct.empty,this.heightOracle,[new Zr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new kz(R.from,$))}Ja&&(f|=2)}let T=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),f|=this.updateForViewport()),(f&2||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,u=new yf(i.lineAt(o-r*1e3,St.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,St.ByHeight,s,0,0).to);if(t){let{head:f}=t.range;if(f<u.from||f>u.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=i.lineAt(f,St.ByPos,s,0,0),g;t.y=="center"?g=(p.top+p.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&f<u.from?g=p.top:g=p.bottom-h,u=new yf(i.lineAt(g-1e3/2,St.ByHeight,s,0,0).from,i.lineAt(g+h+1e3/2,St.ByHeight,s,0,0).to)}}return u}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new yf(this.heightMap.lineAt(r,St.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,St.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,St.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,St.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Mm(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=sn.LTR&&!r)return[];let a=[],u=(h,p,g,m)=>{if(p-h<s)return;let y=this.state.selection.main,b=[y.from];y.empty||b.push(y.to);for(let C of b)if(C>h&&C<p){u(h,C-10,g,m),u(C+10,p,g,m);return}let O=Pz(e,C=>C.from>=g.from&&C.to<=g.to&&Math.abs(C.from-h)<s&&Math.abs(C.to-p)<s&&!b.some(M=>C.from<M&&C.to>M));if(!O){if(p<g.to&&t&&r&&t.visibleRanges.some(T=>T.from<=p&&T.to>=p)){let T=t.moveToLineBoundary(_e.cursor(p),!1,!0).head;T>h&&(p=T)}let C=this.gapSize(g,h,p,m),M=r||C<2e6?C:2e6;O=new Mm(h,p,C,M)}a.push(O)},f=h=>{if(h.length<o||h.type!=ns.Text)return;let p=Iz(h.from,h.to,this.stateDeco);if(p.total<o)return;let g=this.scrollTarget?this.scrollTarget.range.head:null,m,y;if(r){let b=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,O,C;if(g!=null){let M=wf(p,g),T=((this.visibleBottom-this.visibleTop)/2+b)/h.height;O=M-T,C=M+T}else O=(this.visibleTop-h.top-b)/h.height,C=(this.visibleBottom-h.top+b)/h.height;m=bf(p,O),y=bf(p,C)}else{let b=p.total*this.heightOracle.charWidth,O=i*this.heightOracle.charWidth,C=0;if(b>2e6)for(let $ of e)$.from>=h.from&&$.from<h.to&&$.size!=$.displaySize&&$.from*this.heightOracle.charWidth+C<this.pixelViewport.left&&(C=$.size-$.displaySize);let M=this.pixelViewport.left+C,T=this.pixelViewport.right+C,S,R;if(g!=null){let $=wf(p,g),L=((T-M)/2+O)/b;S=$-L,R=$+L}else S=(M-O)/b,R=(T+O)/b;m=bf(p,S),y=bf(p,R)}m>h.from&&u(h.from,m,h,p),y<h.to&&u(y,h.to,h,p)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(f):f(h);return a}gapSize(e,t,r,i){let s=wf(i,r)-wf(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Mm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=It.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Ct.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||fu(this.heightMap.lineAt(e,St.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||fu(this.heightMap.lineAt(this.scaler.fromDOM(e),St.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return fu(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class yf{constructor(e,t){this.from=e,this.to=t}}function Iz(n,e,t){let r=[],i=n,s=0;return Ct.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function bf({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function wf(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function Pz(n,e){for(let t of n)if(e(t))return t}const $k={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class $v{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:u})=>{let f=t.lineAt(a,St.ByPos,e,0,0).top,h=t.lineAt(u,St.ByPos,e,0,0).bottom;return i+=h-f,{from:a,to:u,top:f,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof $v?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function fu(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Zi(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>fu(i,e)):n._content)}const _f=Ae.define({combine:n=>n.join(" ")}),X0=Ae.define({combine:n=>n.indexOf(!0)>-1}),G0=fo.newName(),qE=fo.newName(),WE=fo.newName(),jE={"&light":"."+qE,"&dark":"."+WE};function Z0(n,e,t){return new fo(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const Lz=Z0("."+G0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},jE),$z={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Dm=me.ie&&me.ie_version<=11;class Nz{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new gB,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(me.ie&&me.ie_version<=11||me.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(me.chrome&&me.chrome_version<126)&&(this.editContext=new Bz(e),e.state.facet(Os)&&(e.contentDOM.editContext=this.editContext.editContext)),Dm&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Os)?r.root.activeElement!=this.dom:!Vf(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(me.ie&&me.ie_version<=11||me.android&&me.chrome)&&!r.state.selection.main.empty&&i.focusNode&&yu(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Ru(e.root);if(!t)return!1;let r=me.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Fz(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=Vf(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&vB(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,$z),Dm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Dm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ha(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Vf(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new ez(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=PE(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=Nk(t,e.previousSibling||e.target.previousSibling,-1),i=Nk(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Os)!=e.state.facet(Os)&&(e.view.contentDOM.editContext=e.state.facet(Os)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Nk(n,e,t){for(;e;){let r=yt.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function Fk(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return yu(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function Fz(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Fk(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?Fk(n,t):null}class Bz{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),u=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let f={from:a,to:u,insert:ct.of(r.text.split(`
`))};if(f.from==this.from&&s<this.from?f.from=s:f.to==this.to&&s>this.to&&(f.to=s),f.from==f.to&&!f.insert.length){let h=_e.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((me.mac||me.android)&&f.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:a,to:u,insert:ct.of([r.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);Pv(e,f,_e.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let u=e.coordsForChar(o);s=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let u=this.toEditorPos(s.rangeStart),f=this.toEditorPos(s.rangeEnd);if(u<f){let h=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(It.mark({attributes:{style:h}}).range(u,f))}}}e.dispatch({effects:TE.of(It.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Ru(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,u,f)=>{if(r)return;let h=f.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(f)){i=this.pendingContextChange=null,t+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+f.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),f.toString()),this.to+=h}t+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class He{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||mB(e.parent)||document,this.viewState=new Lk(e.state||gt.create(e)),e.scrollTo&&e.scrollTo.is(gf)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(lu).map(i=>new Tm(i));for(let i of this.plugins)i.update(this);this.observer=new Nz(this),this.inputState=new sz(this),this.inputState.ensureHandlers(this.plugins),this.docView=new mk(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Pn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let g of e){if(g.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=g.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,u=null;e.some(g=>g.annotation(BE))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,u=zE(s,o),u||(a=1));let f=this.observer.delayedAndroidKey,h=null;if(f?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(gt.phrases)!=this.state.facet(gt.phrases))return this.setState(s);i=dh.create(this,s,e),i.flags|=a;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let g of e){if(p&&(p=p.map(g.changes)),g.scrollIntoView){let{main:m}=g.state.selection;p=new Va(m.empty?m:_e.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of g.effects)m.is(gf)&&(p=m.value.clip(this.state))}this.viewState.update(i,p),this.bidiCache=gh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(uu)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(_f)!=i.state.facet(_f)&&(this.viewState.mustMeasureContent=!0),(t||r||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let g of this.state.facet(U0))try{g(i)}catch(m){Qr(this.state,m,"update listener")}(u||h)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),h&&!PE(this,h)&&f.force&&Ha(this.contentDOM,f.key,f.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Lk(e),this.plugins=e.facet(lu).map(r=>new Tm(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new mk(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(lu),r=e.state.facet(lu);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new Tm(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Qr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(nE(r))s=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(i);s=m.from,o=m.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];u&4||([this.measureRequests,f]=[f,this.measureRequests]);let h=f.map(m=>{try{return m.read(this)}catch(y){return Qr(this.state,y),Bk}}),p=dh.create(this,this.state,[]),g=!1;p.flags|=u,t?t.flags|=u:t=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),g=this.docView.update(p),g&&this.docViewUpdate());for(let m=0;m<f.length;m++)if(h[m]!=Bk)try{let y=f[m];y.write&&y.write(h[m],this)}catch(y){Qr(this.state,y)}if(g&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let y=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(y>1||y<-1){i=i+y,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(U0))a(t)}get themeClasses(){return G0+" "+(this.state.facet(X0)?WE:qE)+" "+this.state.facet(_f)}updateAttrs(){let e=zk(this,EE,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Os)?"true":"false",class:"cm-content",style:`${me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),zk(this,Dv,t);let r=this.observer.ignore(()=>{let i=H0(this.contentDOM,this.contentAttrs,t),s=H0(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(He.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(uu);let e=this.state.facet(He.cspNonce);fo.mount(this.root,this.styleModules.concat(Lz).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Am(this,e,_k(this,e,t,r))}moveByGroup(e,t){return Am(this,e,_k(this,e,t,r=>GB(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return _e.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return XB(this,e,t,r)}moveVertically(e,t,r){return Am(this,e,ZB(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),IE(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[so.find(s,e-i.from,-1,t)];return jh(r,o.dir==sn.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(SE)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>zz)return vE(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||mE(s.isolates,r=gk(this,e))))return s.order;r||(r=gk(this,e));let i=DB(e.text,t,r);return this.bidiCache.push(new gh(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{eE(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return gf.of(new Va(typeof e=="number"?_e.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return gf.of(new Va(_e.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ci.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ci.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=fo.newName(),i=[_f.of(r),uu.of(Z0(`.${r}`,e))];return t&&t.dark&&i.push(X0.of(!0)),i}static baseTheme(e){return VT.lowest(uu.of(Z0("."+G0,e,jE)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&yt.get(r)||yt.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}}He.styleModule=uu;He.inputHandler=xE;He.clipboardInputFilter=Av;He.clipboardOutputFilter=Mv;He.scrollHandler=CE;He.focusChangeEffect=kE;He.perLineTextDirection=SE;He.exceptionSink=OE;He.updateListener=U0;He.editable=Os;He.mouseSelectionStyle=_E;He.dragMovesSelection=wE;He.clickAddsSelectionRange=bE;He.decorations=Pu;He.outerDecorations=AE;He.atomicRanges=Rv;He.bidiIsolatedRanges=ME;He.scrollMargins=DE;He.darkTheme=X0;He.cspNonce=Ae.define({combine:n=>n.length?n[0]:""});He.contentAttributes=Dv;He.editorAttributes=EE;He.lineWrapping=He.contentAttributes.of({class:"cm-lineWrapping"});He.announce=Tt.define();const zz=4096,Bk={};class gh{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:sn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new gh(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function zk(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&z0(o,t)}return t}const Gl="-10000px";class UE{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(u=>u);if(i===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let o=[],a=t?[]:null;for(let u=0;u<s.length;u++){let f=s[u],h=-1;if(f){for(let p=0;p<this.tooltips.length;p++){let g=this.tooltips[p];g&&g.create==f.create&&(h=p)}if(h<0)o[u]=this.createTooltipView(f,u?o[u-1]:null),a&&(a[u]=!!f.above);else{let p=o[u]=this.tooltipViews[h];a&&(a[u]=t[h]),p.update&&p.update(e)}}}for(let u of this.tooltipViews)o.indexOf(u)<0&&(this.removeTooltipView(u),(r=u.destroy)===null||r===void 0||r.call(u));return t&&(a.forEach((u,f)=>t[f]=u),t.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function Hz(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Rm=Ae.define({combine:n=>{var e,t,r;return{position:me.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Hz}}}),Hk=new WeakMap,QE=Ci.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Rm);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new UE(n,YE,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Rm);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Gl,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(me.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Gl&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=Iv(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Rm).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let u=this.manager.tooltips[a],f=this.manager.tooltipViews[a],{dom:h}=f,p=n.pos[a],g=n.size[a];if(!p||u.clip!==!1&&(p.bottom<=Math.max(t.top,r.top)||p.top>=Math.min(t.bottom,r.bottom)||p.right<Math.max(t.left,r.left)-.1||p.left>Math.min(t.right,r.right)+.1)){h.style.top=Gl;continue}let m=u.arrow?f.dom.querySelector(".cm-tooltip-arrow"):null,y=m?7:0,b=g.right-g.left,O=(e=Hk.get(f))!==null&&e!==void 0?e:g.bottom-g.top,C=f.offset||qz,M=this.view.textDirection==sn.LTR,T=g.width>r.right-r.left?M?r.left:r.right-g.width:M?Math.max(r.left,Math.min(p.left-(m?14:0)+C.x,r.right-b)):Math.min(Math.max(r.left,p.left-b+(m?14:0)-C.x),r.right-b),S=this.above[a];!u.strictSide&&(S?p.top-O-y-C.y<r.top:p.bottom+O+y+C.y>r.bottom)&&S==r.bottom-p.bottom>p.top-r.top&&(S=this.above[a]=!S);let R=(S?p.top-r.top:r.bottom-p.bottom)-y;if(R<O&&f.resize!==!1){if(R<this.view.defaultLineHeight){h.style.top=Gl;continue}Hk.set(f,O),h.style.height=(O=R)/s+"px"}else h.style.height&&(h.style.height="");let $=S?p.top-O-y-C.y:p.bottom+y+C.y,L=T+b;if(f.overlap!==!0)for(let V of o)V.left<L&&V.right>T&&V.top<$+O&&V.bottom>$&&($=S?V.top-O-2-y:V.bottom+y+2);if(this.position=="absolute"?(h.style.top=($-n.parent.top)/s+"px",Vk(h,(T-n.parent.left)/i)):(h.style.top=$/s+"px",Vk(h,T/i)),m){let V=p.left+(M?C.x:-C.x)-(T+14-7);m.style.left=V/i+"px"}f.overlap!==!0&&o.push({left:T,top:$,right:L,bottom:$+O}),h.classList.toggle("cm-tooltip-above",S),h.classList.toggle("cm-tooltip-below",!S),f.positioned&&f.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Gl}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Vk(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const Vz=He.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),qz={x:0,y:0},YE=Ae.define({enables:[QE,Vz]}),mh=Ae.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Xh{static create(e){return new Xh(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new UE(e,mh,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Wz=YE.compute([mh],n=>{let e=n.facet(mh);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:Xh.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class jz{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof io)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(i)).find(h=>h.from<=i&&h.to>=i),f=u&&u.dir==sn.RTL?-1:1;s=t.x<a.left?-f:f}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(u=>{this.pending==a&&(this.pending=null,u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])}))},u=>Qr(e.state,u,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(QE),t=e?e.manager.tooltips.findIndex(r=>r.create==Xh.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!Uz(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Qz(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Of=4;function Uz(n,e){let{left:t,right:r,top:i,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=t-Of&&e.clientX<=r+Of&&e.clientY>=i-Of&&e.clientY<=s+Of}function Qz(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let u=n.posAtCoords({x:r,y:i},!1);return u>=e&&u<=t}function Yz(n,e={}){let t=Tt.define(),r=Ps.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let u=s.changes.mapPos(a.pos,-1,rr.TrackDel);if(u!=null){let f=Object.assign(Object.create(null),a);f.pos=u,f.end!=null&&(f.end=s.changes.mapPos(f.end)),o.push(f)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(Xz)&&(i=[]);return i},provide:i=>mh.from(i)});return{active:r,extension:[r,Ci.define(i=>new jz(i,n,r,t,e.hoverTime||300)),Wz]}}const Xz=Tt.define(),qk=Ae.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}}),Gz=Ci.fromClass(class{constructor(n){this.input=n.state.facet(K0),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(qk);this.top=new xf(n,!0,e.topContainer),this.bottom=new xf(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(qk);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new xf(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new xf(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(K0);if(t!=this.input){let r=t.filter(u=>u),i=[],s=[],o=[],a=[];for(let u of r){let f=this.specs.indexOf(u),h;f<0?(h=u(n.view),a.push(h)):(h=this.panels[f],h.update&&h.update(n)),i.push(h),(h.top?s:o).push(h)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let u of a)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>He.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class xf{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Wk(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Wk(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Wk(n){let e=n.nextSibling;return n.remove(),e}const K0=Ae.define({enables:Gz});class el extends Ya{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}el.prototype.elementClass="";el.prototype.toDOM=void 0;el.prototype.mapMode=rr.TrackBefore;el.prototype.startSide=el.prototype.endSide=-1;el.prototype.point=!0;var Im;const hu=new Ke,Zz=new Ke;class Ji{constructor(e,t,r=[],i=""){this.data=e,this.name=i,gt.prototype.hasOwnProperty("tree")||Object.defineProperty(gt.prototype,"tree",{get(){return Ko(this)}}),this.parser=t,this.extension=[nl.of(this),gt.languageData.of((s,o,a)=>{let u=jk(s,o,a),f=u.type.prop(hu);if(!f)return[];let h=s.facet(f),p=u.type.prop(Zz);if(p){let g=u.resolve(o-u.from,a);for(let m of p)if(m.test(g,s)){let y=s.facet(m.facet);return m.type=="replace"?y:y.concat(h)}}return h})].concat(r)}isActiveAt(e,t,r=-1){return jk(e,t,r).type.prop(hu)==this.data}findRegions(e){let t=e.facet(nl);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(hu)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Ke.mounted);if(a){if(a.tree.prop(hu)==this.data){if(a.overlay)for(let u of a.overlay)r.push({from:u.from+o,to:u.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let u=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>u)return}}for(let u=0;u<s.children.length;u++){let f=s.children[u];f instanceof bt&&i(f,s.positions[u]+o)}};return i(Ko(e),0),r}get allowsNesting(){return!0}}Ji.setState=Tt.define();function jk(n,e,t){let r=n.facet(nl),i=Ko(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,dn.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Ko(n){let e=n.field(Ji.state,!1);return e?e.tree:bt.empty}class Kz{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Zl=null;class vh{constructor(e,t,r=[],i,s,o,a,u){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new vh(e,t,[],bt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Kz(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=bt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Qo.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Qo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Zl;Zl=this;try{return e()}finally{Zl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Uk(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((f,h,p,g)=>u.push({fromA:f,toA:h,fromB:p,toB:g})),r=Qo.applyChanges(r,u),i=bt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let f of this.skipped){let h=e.mapPos(f.from,1),p=e.mapPos(f.to,-1);h<p&&a.push({from:h,to:p})}}}return new vh(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Uk(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends mv{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let u=Zl;if(u){for(let f of i)u.tempSkipped.push(f);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=o,new bt(pn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Zl}}function Uk(n,e,t){return Qo.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class tl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new tl(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=vh.create(e.facet(nl).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new tl(r)}}Ji.state=Ps.define({create:tl.init,update(n,e){for(let t of e.effects)if(t.is(Ji.setState))return t.value;return e.startState.facet(nl)!=e.state.facet(nl)?tl.init(e.state):n.apply(e)}});let XE=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(XE=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Pm=typeof navigator<"u"&&(!((Im=navigator.scheduling)===null||Im===void 0)&&Im.isInputPending)?()=>navigator.scheduling.isInputPending():null,Jz=Ci.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ji.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ji.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=XE(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Ji.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Pm?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,u=s.context.work(()=>Pm&&Pm()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Ji.setState.of(new tl(s.context))})),this.chunkBudget>0&&!(u&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Qr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),nl=Ae.define({combine(n){return n.length?n[0]:null},enables:n=>[Ji.state,Jz,He.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class gl{constructor(e,t){this.specs=e;let r;function i(a){let u=fo.newName();return(r||(r=Object.create(null)))["."+u]=a,u}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Ji?a=>a.prop(hu)==o.data:o?a=>a==o:void 0,this.style=gT(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new fo(r):null,this.themeType=t.themeType}static define(e,t){return new gl(e,t||{})}}const J0=Ae.define(),eH=Ae.define({combine(n){return n.length?[n[0]]:null}});function Lm(n){let e=n.facet(J0);return e.length?e:n.facet(eH)}function Nv(n,e){let t=[nH],r;return n instanceof gl&&(n.module&&t.push(He.styleModule.of(n.module)),r=n.themeType),r?t.push(J0.computeN([He.darkTheme],i=>i.facet(He.darkTheme)==(r=="dark")?[n]:[])):t.push(J0.of(n)),t}class tH{constructor(e){this.markCache=Object.create(null),this.tree=Ko(e.state),this.decorations=this.buildDeco(e,Lm(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ko(e.state),r=Lm(e.state),i=r!=Lm(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return It.none;let r=new Xa;for(let{from:i,to:s}of e.visibleRanges)M7(this.tree,t,(o,a,u)=>{r.add(o,a,this.markCache[u]||(this.markCache[u]=It.mark({class:u})))},i,s);return r.finish()}}const nH=VT.high(Ci.fromClass(tH,{decorations:n=>n.decorations})),rH=Object.create(null),Qk=[pn.none],Yk=[],Xk=Object.create(null),iH=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])iH[n]=sH(rH,e);function $m(n,e){Yk.indexOf(n)>-1||(Yk.push(n),console.warn(e))}function sH(n,e){let t=[];for(let a of e.split(" ")){let u=[];for(let f of a.split(".")){let h=n[f]||I[f];h?typeof h=="function"?u.length?u=u.map(h):$m(f,`Modifier ${f} used at start of tag`):u.length?$m(f,`Tag ${f} used as modifier`):u=Array.isArray(h)?h:[h]:$m(f,`Unknown highlighting tag ${f}`)}for(let f of u)t.push(f)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),s=Xk[i];if(s)return s.id;let o=Xk[i]=pn.define({id:Qk.length,name:r,props:[ju({[r]:t})]});return Qk.push(o),o.id}sn.RTL,sn.LTR;function Ki(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)GE(n,arguments[e]);return n}function GE(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)GE(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}class Gk{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Wo{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=r.facet(es).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((h,p)=>h.from-p.from||h.to-p.to),o=new Xa,a=[],u=0;for(let h=0;;){let p=h==s.length?null:s[h];if(!p&&!a.length)break;let g,m;for(a.length?(g=u,m=a.reduce((b,O)=>Math.min(b,O.to),p&&p.from>g?p.from:1e8)):(g=p.from,m=p.to,a.push(p),h++);h<s.length;){let b=s[h];if(b.from==g&&(b.to>b.from||b.to==g))a.push(b),h++,m=Math.min(b.to,m);else{m=Math.min(b.from,m);break}}let y=bH(a);if(a.some(b=>b.from==b.to||b.from==b.to-1&&r.doc.lineAt(b.from).to==b.from))o.add(g,g,It.widget({widget:new gH(y),diagnostics:a.slice()}));else{let b=a.reduce((O,C)=>C.markClass?O+" "+C.markClass:O,"");o.add(g,m,It.mark({class:"cm-lintRange cm-lintRange-"+y+b,diagnostics:a.slice(),inclusiveEnd:a.some(O=>O.to>m)}))}u=m;for(let b=0;b<a.length;b++)a[b].to<=u&&a.splice(b--,1)}let f=o.finish();return new Wo(f,t,rl(f))}}function rl(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new Gk(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new Gk(r.from,s,r.diagnostic)}}),r}function oH(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(es).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(Fv))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function aH(n,e){return n.field(Oi,!1)?e:e.concat(Tt.appendConfig.of(tA))}function lH(n,e){return{effects:aH(n,[Fv.of(e)])}}const Fv=Tt.define(),ZE=Tt.define(),KE=Tt.define(),Oi=Ps.define({create(){return new Wo(It.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=rl(t,n.selected.diagnostic,s)||rl(t,null,s)}!t.size&&i&&e.state.facet(es).autoPanel&&(i=null),n=new Wo(t,i,r)}for(let t of e.effects)if(t.is(Fv)){let r=e.state.facet(es).autoPanel?t.value.length?yh.open:null:n.panel;n=Wo.init(t.value,r,e.state)}else t.is(ZE)?n=new Wo(n.diagnostics,t.value?yh.open:null,n.selected):t.is(KE)&&(n=new Wo(n.diagnostics,n.panel,t.value));return n},provide:n=>[K0.from(n,e=>e.panel),He.decorations.from(n,e=>e.diagnostics)]}),uH=It.mark({class:"cm-lintRange cm-lintRange-active"});function cH(n,e,t){let{diagnostics:r}=n.state.field(Oi),i,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(u,f,{spec:h})=>{if(e>=u&&e<=f&&(u==f||(e>u||t>0)&&(e<f||t<0)))return i=h.diagnostics,s=u,o=f,!1});let a=n.state.facet(es).tooltipFilter;return i&&a&&(i=a(i,n.state)),i?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:fH(n,i)}}}:null}function fH(n,e){return Ki("ul",{class:"cm-tooltip-lint"},e.map(t=>eA(n,t,!1)))}const Zk=n=>{let e=n.state.field(Oi,!1);return!e||!e.panel?!1:(n.dispatch({effects:ZE.of(!1)}),!0)},hH=Ci.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(es);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(es);t.length&&dH(t.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(lH(this.view.state,r.reduce((i,s)=>i.concat(s))))},r=>{Qr(this.view.state,r)})}}update(n){let e=n.state.facet(es);(n.docChanged||e!=n.startState.facet(es)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function dH(n,e,t){let r=[],i=-1;for(let s of n)s.then(o=>{r.push(o),clearTimeout(i),r.length==n.length?e(r):i=setTimeout(()=>e(r),200)},t)}const es=Ae.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},lB(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function pH(n,e={}){return[es.of({source:n,config:e}),hH,tA]}function JE(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function eA(n,e,t){var r;let i=t?JE(e.actions):[];return Ki("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ki("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,u=g=>{if(g.preventDefault(),a)return;a=!0;let m=rl(n.state.field(Oi).diagnostics,e);m&&s.apply(n,m.from,m.to)},{name:f}=s,h=i[o]?f.indexOf(i[o]):-1,p=h<0?f:[f.slice(0,h),Ki("u",f.slice(h,h+1)),f.slice(h+1)];return Ki("button",{type:"button",class:"cm-diagnosticAction",onclick:u,onmousedown:u,"aria-label":` Action: ${f}${h<0?"":` (access key "${i[o]})"`}.`},p)}),e.source&&Ki("div",{class:"cm-diagnosticSource"},e.source))}class gH extends Qh{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Ki("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Kk{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=eA(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class yh{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Zk(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=JE(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let u=rl(this.view.state.field(Oi).diagnostics,s);u&&s.actions[a].apply(e,u.from,u.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Ki("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=Ki("div",{class:"cm-panel-lint"},this.list,Ki("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Zk(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Oi).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Oi),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,u,{spec:f})=>{for(let h of f.diagnostics){if(o.has(h))continue;o.add(h);let p=-1,g;for(let m=r;m<this.items.length;m++)if(this.items[m].diagnostic==h){p=m;break}p<0?(g=new Kk(this.view,h),this.items.splice(r,0,g),i=!0):(g=this.items[p],p>r&&(this.items.splice(r,p-r),i=!0)),t&&g.diagnostic==t.diagnostic?g.dom.hasAttribute("aria-selected")||(g.dom.setAttribute("aria-selected","true"),s=g):g.dom.hasAttribute("aria-selected")&&g.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Kk(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:u})=>{let f=u.height/this.list.offsetHeight;a.top<u.top?this.list.scrollTop-=(u.top-a.top)/f:a.bottom>u.bottom&&(this.list.scrollTop+=(a.bottom-u.bottom)/f)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Oi),r=rl(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:KE.of(r)})}static open(e){return new yh(e)}}function mH(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function kf(n){return mH(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const vH=He.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:kf("#d11")},".cm-lintRange-warning":{backgroundImage:kf("orange")},".cm-lintRange-info":{backgroundImage:kf("#999")},".cm-lintRange-hint":{backgroundImage:kf("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function yH(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function bH(n){let e="hint",t=1;for(let r of n){let i=yH(r.severity);i>t&&(t=i,e=r.severity)}return e}const tA=[Oi,He.decorations.compute([Oi],n=>{let{selected:e,panel:t}=n.field(Oi);return!e||!t||e.from==e.to?It.none:It.set([uH.range(e.from,e.to)])}),Yz(cH,{hideOn:oH}),vH];class bh{static create(e,t,r,i,s){let o=i+(i<<8)+e+(t<<4)|0;return new bh(e,t,r,o,s,[],[])}constructor(e,t,r,i,s,o,a){this.type=e,this.value=t,this.from=r,this.hash=i,this.end=s,this.children=o,this.positions=a,this.hashProp=[[Ke.contextHash,i]]}addChild(e,t){e.prop(Ke.contextHash)!=this.hash&&(e=new bt(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let r=this.children.length-1;return r>=0&&(t=Math.max(t,this.positions[r]+this.children[r].length+this.from)),new bt(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(i,s,o)=>new bt(pn.none,i,s,o,this.hashProp)})}}var ne;(function(n){n[n.Document=1]="Document",n[n.CodeBlock=2]="CodeBlock",n[n.FencedCode=3]="FencedCode",n[n.Blockquote=4]="Blockquote",n[n.HorizontalRule=5]="HorizontalRule",n[n.BulletList=6]="BulletList",n[n.OrderedList=7]="OrderedList",n[n.ListItem=8]="ListItem",n[n.ATXHeading1=9]="ATXHeading1",n[n.ATXHeading2=10]="ATXHeading2",n[n.ATXHeading3=11]="ATXHeading3",n[n.ATXHeading4=12]="ATXHeading4",n[n.ATXHeading5=13]="ATXHeading5",n[n.ATXHeading6=14]="ATXHeading6",n[n.SetextHeading1=15]="SetextHeading1",n[n.SetextHeading2=16]="SetextHeading2",n[n.HTMLBlock=17]="HTMLBlock",n[n.LinkReference=18]="LinkReference",n[n.Paragraph=19]="Paragraph",n[n.CommentBlock=20]="CommentBlock",n[n.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",n[n.Escape=22]="Escape",n[n.Entity=23]="Entity",n[n.HardBreak=24]="HardBreak",n[n.Emphasis=25]="Emphasis",n[n.StrongEmphasis=26]="StrongEmphasis",n[n.Link=27]="Link",n[n.Image=28]="Image",n[n.InlineCode=29]="InlineCode",n[n.HTMLTag=30]="HTMLTag",n[n.Comment=31]="Comment",n[n.ProcessingInstruction=32]="ProcessingInstruction",n[n.Autolink=33]="Autolink",n[n.HeaderMark=34]="HeaderMark",n[n.QuoteMark=35]="QuoteMark",n[n.ListMark=36]="ListMark",n[n.LinkMark=37]="LinkMark",n[n.EmphasisMark=38]="EmphasisMark",n[n.CodeMark=39]="CodeMark",n[n.CodeText=40]="CodeText",n[n.CodeInfo=41]="CodeInfo",n[n.LinkTitle=42]="LinkTitle",n[n.LinkLabel=43]="LinkLabel",n[n.URL=44]="URL"})(ne||(ne={}));class wH{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class _H{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return wu(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,r=0){for(let i=t;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let t=0;for(let r=0;t<this.text.length&&r<e;t++)r+=this.text.charCodeAt(t)==9?4-r%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function Jk(n,e,t){if(t.pos==t.text.length||n!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let r=(n.type==ne.OrderedList?Hv:zv)(t,e,!1);return r>0&&(n.type!=ne.BulletList||Bv(t,e,!1)<0)&&t.text.charCodeAt(t.pos+r-1)==n.value}const nA={[ne.Blockquote](n,e,t){return t.next!=62?!1:(t.markers.push(Ze(ne.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(Ai(t.text.charCodeAt(t.pos+1))?2:1)),n.end=e.lineStart+t.text.length,!0)},[ne.ListItem](n,e,t){return t.indent<t.baseIndent+n.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+n.value),!0)},[ne.OrderedList]:Jk,[ne.BulletList]:Jk,[ne.Document](){return!0}};function Ai(n){return n==32||n==9||n==10||n==13}function wu(n,e=0){for(;e<n.length&&Ai(n.charCodeAt(e));)e++;return e}function eS(n,e,t){for(;e>t&&Ai(n.charCodeAt(e-1));)e--;return e}function rA(n){if(n.next!=96&&n.next!=126)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;if(e<n.pos+3)return-1;if(n.next==96){for(let t=e;t<n.text.length;t++)if(n.text.charCodeAt(t)==96)return-1}return e}function iA(n){return n.next!=62?-1:n.text.charCodeAt(n.pos+1)==32?2:1}function Bv(n,e,t){if(n.next!=42&&n.next!=45&&n.next!=95)return-1;let r=1;for(let i=n.pos+1;i<n.text.length;i++){let s=n.text.charCodeAt(i);if(s==n.next)r++;else if(!Ai(s))return-1}return t&&n.next==45&&aA(n)>-1&&n.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(fA.SetextHeading)>-1||r<3?-1:1}function sA(n,e){for(let t=n.stack.length-1;t>=0;t--)if(n.stack[t].type==e)return!0;return!1}function zv(n,e,t){return(n.next==45||n.next==43||n.next==42)&&(n.pos==n.text.length-1||Ai(n.text.charCodeAt(n.pos+1)))&&(!t||sA(e,ne.BulletList)||n.skipSpace(n.pos+2)<n.text.length)?1:-1}function Hv(n,e,t){let r=n.pos,i=n.next;for(;i>=48&&i<=57;){r++;if(r==n.text.length)return-1;i=n.text.charCodeAt(r)}return r==n.pos||r>n.pos+9||i!=46&&i!=41||r<n.text.length-1&&!Ai(n.text.charCodeAt(r+1))||t&&!sA(e,ne.OrderedList)&&(n.skipSpace(r+1)==n.text.length||r>n.pos+1||n.next!=49)?-1:r+1-n.pos}function oA(n){if(n.next!=35)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==35;)e++;if(e<n.text.length&&n.text.charCodeAt(e)!=32)return-1;let t=e-n.pos;return t>6?-1:t}function aA(n){if(n.next!=45&&n.next!=61||n.indent>=n.baseIndent+4)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;let t=e;for(;e<n.text.length&&Ai(n.text.charCodeAt(e));)e++;return e==n.text.length?t:-1}const e1=/^[ \t]*$/,lA=/-->/,uA=/\?>/,t1=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,lA],[/^\s*<\?/,uA],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,e1],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,e1]];function cA(n,e,t){if(n.next!=60)return-1;let r=n.text.slice(n.pos);for(let i=0,s=t1.length-(t?1:0);i<s;i++)if(t1[i][0].test(r))return i;return-1}function tS(n,e){let t=n.countIndent(e,n.pos,n.indent),r=n.countIndent(n.skipSpace(e),e,t);return r>=t+5?t+1:r}function No(n,e,t){let r=n.length-1;r>=0&&n[r].to==e&&n[r].type==ne.CodeText?n[r].to=t:n.push(Ze(ne.CodeText,e,t))}const Sf={LinkReference:void 0,IndentedCode(n,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let r=e.findColumn(t),i=n.lineStart+r,s=n.lineStart+e.text.length,o=[],a=[];for(No(o,i,s);n.nextLine()&&e.depth>=n.stack.length;)if(e.pos==e.text.length){No(a,n.lineStart-1,n.lineStart);for(let u of e.markers)a.push(u)}else{if(e.indent<t)break;{if(a.length){for(let f of a)f.type==ne.CodeText?No(o,f.from,f.to):o.push(f);a=[]}No(o,n.lineStart-1,n.lineStart);for(let f of e.markers)o.push(f);s=n.lineStart+e.text.length;let u=n.lineStart+e.findColumn(e.baseIndent+4);u<s&&No(o,u,s)}}return a.length&&(a=a.filter(u=>u.type!=ne.CodeText),a.length&&(e.markers=a.concat(e.markers))),n.addNode(n.buffer.writeElements(o,-i).finish(ne.CodeBlock,s-i),i),!0},FencedCode(n,e){let t=rA(e);if(t<0)return!1;let r=n.lineStart+e.pos,i=e.next,s=t-e.pos,o=e.skipSpace(t),a=eS(e.text,e.text.length,o),u=[Ze(ne.CodeMark,r,r+s)];o<a&&u.push(Ze(ne.CodeInfo,n.lineStart+o,n.lineStart+a));for(let f=!0;n.nextLine()&&e.depth>=n.stack.length;f=!1){let h=e.pos;if(e.indent-e.baseIndent<4)for(;h<e.text.length&&e.text.charCodeAt(h)==i;)h++;if(h-e.pos>=s&&e.skipSpace(h)==e.text.length){for(let p of e.markers)u.push(p);u.push(Ze(ne.CodeMark,n.lineStart+e.pos,n.lineStart+h)),n.nextLine();break}else{f||No(u,n.lineStart-1,n.lineStart);for(let m of e.markers)u.push(m);let p=n.lineStart+e.basePos,g=n.lineStart+e.text.length;p<g&&No(u,p,g)}}return n.addNode(n.buffer.writeElements(u,-r).finish(ne.FencedCode,n.prevLineEnd()-r),r),!0},Blockquote(n,e){let t=iA(e);return t<0?!1:(n.startContext(ne.Blockquote,e.pos),n.addNode(ne.QuoteMark,n.lineStart+e.pos,n.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(n,e){if(Bv(e,n,!1)<0)return!1;let t=n.lineStart+e.pos;return n.nextLine(),n.addNode(ne.HorizontalRule,t),!0},BulletList(n,e){let t=zv(e,n,!1);if(t<0)return!1;n.block.type!=ne.BulletList&&n.startContext(ne.BulletList,e.basePos,e.next);let r=tS(e,e.pos+1);return n.startContext(ne.ListItem,e.basePos,r-e.baseIndent),n.addNode(ne.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},OrderedList(n,e){let t=Hv(e,n,!1);if(t<0)return!1;n.block.type!=ne.OrderedList&&n.startContext(ne.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let r=tS(e,e.pos+t);return n.startContext(ne.ListItem,e.basePos,r-e.baseIndent),n.addNode(ne.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},ATXHeading(n,e){let t=oA(e);if(t<0)return!1;let r=e.pos,i=n.lineStart+r,s=eS(e.text,e.text.length,r),o=s;for(;o>r&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==r||!Ai(e.text.charCodeAt(o-1)))&&(o=e.text.length);let a=n.buffer.write(ne.HeaderMark,0,t).writeElements(n.parser.parseInline(e.text.slice(r+t+1,o),i+t+1),-i);o<e.text.length&&a.write(ne.HeaderMark,o-r,s-r);let u=a.finish(ne.ATXHeading1-1+t,e.text.length-r);return n.nextLine(),n.addNode(u,i),!0},HTMLBlock(n,e){let t=cA(e,n,!1);if(t<0)return!1;let r=n.lineStart+e.pos,i=t1[t][1],s=[],o=i!=e1;for(;!i.test(e.text)&&n.nextLine();){if(e.depth<n.stack.length){o=!1;break}for(let f of e.markers)s.push(f)}o&&n.nextLine();let a=i==lA?ne.CommentBlock:i==uA?ne.ProcessingInstructionBlock:ne.HTMLBlock,u=n.prevLineEnd();return n.addNode(n.buffer.writeElements(s,-r).finish(a,u-r),r),!0},SetextHeading:void 0};class OH{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,r){if(this.stage==-1)return!1;let i=r.content+`
`+t.scrub(),s=this.advance(i);return s>-1&&s<i.length?this.complete(e,r,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&wu(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,r){return e.addLeafElement(t,Ze(ne.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(wA(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(Ze(ne.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(yA(e,wu(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=wu(e,this.pos),r=0;if(t>this.pos){let i=bA(e,t,this.start);if(i){let s=Nm(e,i.to-this.start);s>0&&(this.nextStage(i),r=s)}}return r||(r=Nm(e,this.pos)),r>0&&r<e.length?r:-1}else return Nm(e,this.pos)}}}function Nm(n,e){for(;e<n.length;e++){let t=n.charCodeAt(e);if(t==10)break;if(!Ai(t))return-1}return e}class xH{nextLine(e,t,r){let i=t.depth<e.stack.length?-1:aA(t),s=t.next;if(i<0)return!1;let o=Ze(ne.HeaderMark,e.lineStart+t.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,Ze(s==61?ne.SetextHeading1:ne.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}}const fA={LinkReference(n,e){return e.content.charCodeAt(0)==91?new OH(e):null},SetextHeading(){return new xH}},kH=[(n,e)=>oA(e)>=0,(n,e)=>rA(e)>=0,(n,e)=>iA(e)>=0,(n,e)=>zv(e,n,!0)>=0,(n,e)=>Hv(e,n,!0)>=0,(n,e)=>Bv(e,n,!0)>=0,(n,e)=>cA(e,n,!0)>=0],SH={text:"",end:0};class CH{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.line=new _H,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=bh.create(ne.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new MH(r,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let r=0;;){let i=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;r<e.markers.length&&(!i||e.markers[r].from<i.end);){let s=e.markers[r++];this.addNode(s.type,s.from,s.to)}if(!i)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let t=new wH(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,t);i&&t.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,t))break e}for(let r of t.parsers)if(r.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let r of e.markers)t.marks.push(r)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return t?(this.absoluteLineStart+=t,this.lineStart=_A(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=SH;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<t.end;){i++;let s=this.ranges[i].from,o=this.lineChunkAt(s);t.end=s+o.length,t.text=t.text.slice(0,this.ranges[i-1].to-r)+o,r=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(t);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],s=this.parser.skipContextMarkup[i.type];if(!s)throw new Error("Unhandled block context "+ne[i.type]);if(!s(i,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),r;if(this.input.lineChunks)r=t==`
`?"":t;else{let i=t.indexOf(`
`);r=i<0?t:t.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,r=0){this.block=bh.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,r=0){this.startContext(this.parser.getNodeType(e),t,r)}addNode(e,t,r){typeof e=="number"&&(e=new bt(this.parser.nodeSet.types[e],il,il,(r??this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(s1(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?hA(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let t=s1(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(ne.Paragraph,e.content.length),e.start)}elt(e,t,r,i){return typeof e=="string"?Ze(this.parser.getNodeType(e),t,r,i):new gA(e,t)}get buffer(){return new pA(this.parser.nodeSet)}}function hA(n,e,t,r,i){let s=n[e].to,o=[],a=[],u=t.from+r;function f(h,p){for(;p?h>=s:h>s;){let g=n[e+1].from-s;r+=g,h+=g,e++,s=n[e].to}}for(let h=t.firstChild;h;h=h.nextSibling){f(h.from+r,!0);let p=h.from+r,g,m=i.get(h.tree);m?g=m:h.to+r>s?(g=hA(n,e,h,r,i),f(h.to+r,!1)):g=h.toTree(),o.push(g),a.push(p-u)}return f(t.to+r,!1),new bt(t.type,o,a,t.to+r-u,t.tree?t.tree.propValues:void 0)}class Vv extends mv{constructor(e,t,r,i,s,o,a,u,f){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=a,this.inlineNames=u,this.wrappers=f,this.nodeTypes=Object.create(null);for(let h of e.types)this.nodeTypes[h.name]=h.id}createParse(e,t,r){let i=new CH(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}configure(e){let t=n1(e);if(!t)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),u=this.inlineParsers.slice(),f=this.inlineNames.slice(),h=this.endLeafBlock.slice(),p=this.wrappers;if(Kl(t.defineNodes)){i=Object.assign({},i);let g=r.types.slice(),m;for(let y of t.defineNodes){let{name:b,block:O,composite:C,style:M}=typeof y=="string"?{name:y}:y;if(g.some(R=>R.name==b))continue;C&&(i[g.length]=(R,$,L)=>C($,L,R.value));let T=g.length,S=C?["Block","BlockContext"]:O?T>=ne.ATXHeading1&&T<=ne.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;g.push(pn.define({id:T,name:b,props:S&&[[Ke.group,S]]})),M&&(m||(m={}),Array.isArray(M)||M instanceof br?m[b]=M:Object.assign(m,M))}r=new Wu(g),m&&(r=r.extend(ju(m)))}if(Kl(t.props)&&(r=r.extend(...t.props)),Kl(t.remove))for(let g of t.remove){let m=this.blockNames.indexOf(g),y=this.inlineNames.indexOf(g);m>-1&&(s[m]=o[m]=void 0),y>-1&&(u[y]=void 0)}if(Kl(t.parseBlock))for(let g of t.parseBlock){let m=a.indexOf(g.name);if(m>-1)s[m]=g.parse,o[m]=g.leaf;else{let y=g.before?Cf(a,g.before):g.after?Cf(a,g.after)+1:a.length-1;s.splice(y,0,g.parse),o.splice(y,0,g.leaf),a.splice(y,0,g.name)}g.endLeaf&&h.push(g.endLeaf)}if(Kl(t.parseInline))for(let g of t.parseInline){let m=f.indexOf(g.name);if(m>-1)u[m]=g.parse;else{let y=g.before?Cf(f,g.before):g.after?Cf(f,g.after)+1:f.length-1;u.splice(y,0,g.parse),f.splice(y,0,g.name)}}return t.wrap&&(p=p.concat(t.wrap)),new Vv(r,s,o,a,h,i,u,f,p)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let r=new EH(this,e,t);e:for(let i=t;i<r.end;){let s=r.char(i);for(let o of this.inlineParsers)if(o){let a=o(r,s,i);if(a>=0){i=a;continue e}}i++}return r.resolveMarkers(0)}}function Kl(n){return n!=null&&n.length>0}function n1(n){if(!Array.isArray(n))return n;if(n.length==0)return null;let e=n1(n[0]);if(n.length==1)return e;let t=n1(n.slice(1));if(!t||!e)return e||t;let r=(o,a)=>(o||il).concat(a||il),i=e.wrap,s=t.wrap;return{props:r(e.props,t.props),defineNodes:r(e.defineNodes,t.defineNodes),parseBlock:r(e.parseBlock,t.parseBlock),parseInline:r(e.parseInline,t.parseInline),remove:r(e.remove,t.remove),wrap:i?s?(o,a,u,f)=>i(s(o,a,u,f),a,u,f):i:s}}function Cf(n,e){let t=n.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}let dA=[pn.none];for(let n=1,e;e=ne[n];n++)dA[n]=pn.define({id:n,name:e,props:n>=ne.Escape?[]:[[Ke.group,n in nA?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});const il=[];class pA{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,r,i=0){return this.content.push(e,t,r,4+i*4),this}writeElements(e,t=0){for(let r of e)r.writeTo(this,t);return this}finish(e,t){return bt.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class Lu{constructor(e,t,r,i=il){this.type=e,this.from=t,this.to=r,this.children=i}writeTo(e,t){let r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}toTree(e){return new pA(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class gA{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return il}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function Ze(n,e,t,r){return new Lu(n,e,t,r)}const mA={resolve:"Emphasis",mark:"EmphasisMark"},vA={resolve:"Emphasis",mark:"EmphasisMark"},Ra={},r1={};class Hr{constructor(e,t,r,i){this.type=e,this.from=t,this.to=r,this.side=i}}const nS="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let i1=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{i1=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const Fm={Escape(n,e,t){if(e!=92||t==n.end-1)return-1;let r=n.char(t+1);for(let i=0;i<nS.length;i++)if(nS.charCodeAt(i)==r)return n.append(Ze(ne.Escape,t,t+2));return-1},Entity(n,e,t){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(n.slice(t+1,t+31));return r?n.append(Ze(ne.Entity,t,t+1+r[0].length)):-1},InlineCode(n,e,t){if(e!=96||t&&n.char(t-1)==96)return-1;let r=t+1;for(;r<n.end&&n.char(r)==96;)r++;let i=r-t,s=0;for(;r<n.end;r++)if(n.char(r)==96){if(s++,s==i&&n.char(r+1)!=96)return n.append(Ze(ne.InlineCode,t,r+1,[Ze(ne.CodeMark,t,t+i),Ze(ne.CodeMark,r+1-i,r+1)]))}else s=0;return-1},HTMLTag(n,e,t){if(e!=60||t==n.end-1)return-1;let r=n.slice(t+1,n.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return n.append(Ze(ne.Autolink,t,t+1+i[0].length,[Ze(ne.LinkMark,t,t+1),Ze(ne.URL,t+1,t+i[0].length),Ze(ne.LinkMark,t+i[0].length,t+1+i[0].length)]));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(s)return n.append(Ze(ne.Comment,t,t+1+s[0].length));let o=/^\?[^]*?\?>/.exec(r);if(o)return n.append(Ze(ne.ProcessingInstruction,t,t+1+o[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return a?n.append(Ze(ne.HTMLTag,t,t+1+a[0].length)):-1},Emphasis(n,e,t){if(e!=95&&e!=42)return-1;let r=t+1;for(;n.char(r)==e;)r++;let i=n.slice(t-1,t),s=n.slice(r,r+1),o=i1.test(i),a=i1.test(s),u=/\s|^$/.test(i),f=/\s|^$/.test(s),h=!f&&(!a||u||o),p=!u&&(!o||f||a),g=h&&(e==42||!p||o),m=p&&(e==42||!h||a);return n.append(new Hr(e==95?mA:vA,t,r,(g?1:0)|(m?2:0)))},HardBreak(n,e,t){if(e==92&&n.char(t+1)==10)return n.append(Ze(ne.HardBreak,t,t+2));if(e==32){let r=t+1;for(;n.char(r)==32;)r++;if(n.char(r)==10&&r>=t+2)return n.append(Ze(ne.HardBreak,t,r+1))}return-1},Link(n,e,t){return e==91?n.append(new Hr(Ra,t,t+1,1)):-1},Image(n,e,t){return e==33&&n.char(t+1)==91?n.append(new Hr(r1,t,t+2,1)):-1},LinkEnd(n,e,t){if(e!=93)return-1;for(let r=n.parts.length-1;r>=0;r--){let i=n.parts[r];if(i instanceof Hr&&(i.type==Ra||i.type==r1)){if(!i.side||n.skipSpace(i.to)==t&&!/[(\[]/.test(n.slice(t+1,t+2)))return n.parts[r]=null,-1;let s=n.takeContent(r),o=n.parts[r]=TH(n,s,i.type==Ra?ne.Link:ne.Image,i.from,t+1);if(i.type==Ra)for(let a=0;a<r;a++){let u=n.parts[a];u instanceof Hr&&u.type==Ra&&(u.side=0)}return o.to}}return-1}};function TH(n,e,t,r,i){let{text:s}=n,o=n.char(i),a=i;if(e.unshift(Ze(ne.LinkMark,r,r+(t==ne.Image?2:1))),e.push(Ze(ne.LinkMark,i-1,i)),o==40){let u=n.skipSpace(i+1),f=yA(s,u-n.offset,n.offset),h;f&&(u=n.skipSpace(f.to),u!=f.to&&(h=bA(s,u-n.offset,n.offset),h&&(u=n.skipSpace(h.to)))),n.char(u)==41&&(e.push(Ze(ne.LinkMark,i,i+1)),a=u+1,f&&e.push(f),h&&e.push(h),e.push(Ze(ne.LinkMark,u,a)))}else if(o==91){let u=wA(s,i-n.offset,n.offset,!1);u&&(e.push(u),a=u.to)}return Ze(t,r,a,e)}function yA(n,e,t){if(n.charCodeAt(e)==60){for(let i=e+1;i<n.length;i++){let s=n.charCodeAt(i);if(s==62)return Ze(ne.URL,e+t,i+1+t);if(s==60||s==10)return!1}return null}else{let i=0,s=e;for(let o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(Ai(a))break;if(o)o=!1;else if(a==40)i++;else if(a==41){if(!i)break;i--}else a==92&&(o=!0)}return s>e?Ze(ne.URL,e+t,s+t):s==n.length?null:!1}}function bA(n,e,t){let r=n.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let s=e+1,o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(o)o=!1;else{if(a==i)return Ze(ne.LinkTitle,e+t,s+1+t);a==92&&(o=!0)}}return null}function wA(n,e,t,r){for(let i=!1,s=e+1,o=Math.min(n.length,s+999);s<o;s++){let a=n.charCodeAt(s);if(i)i=!1;else{if(a==93)return r?!1:Ze(ne.LinkLabel,e+t,s+1+t);if(r&&!Ai(a)&&(r=!1),a==91)return!1;a==92&&(i=!0)}}return null}class EH{constructor(e,t,r){this.parser=e,this.text=t,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,r,i,s){return this.append(new Hr(e,t,r,(i?1:0)|(s?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof Hr&&(t.type==Ra||t.type==r1))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof Hr&&i.type.resolve&&i.side&2))continue;let s=i.type==mA||i.type==vA,o=i.to-i.from,a,u=r-1;for(;u>=e;u--){let b=this.parts[u];if(b instanceof Hr&&b.side&1&&b.type==i.type&&!(s&&(i.side&1||b.side&2)&&(b.to-b.from+o)%3==0&&((b.to-b.from)%3||o%3))){a=b;break}}if(!a)continue;let f=i.type.resolve,h=[],p=a.from,g=i.to;if(s){let b=Math.min(2,a.to-a.from,o);p=a.to-b,g=i.from+b,f=b==1?"Emphasis":"StrongEmphasis"}a.type.mark&&h.push(this.elt(a.type.mark,p,a.to));for(let b=u+1;b<r;b++)this.parts[b]instanceof Lu&&h.push(this.parts[b]),this.parts[b]=null;i.type.mark&&h.push(this.elt(i.type.mark,i.from,g));let m=this.elt(f,p,g,h);this.parts[u]=s&&a.from!=p?new Hr(a.type,a.from,p,a.side):null,(this.parts[r]=s&&i.to!=g?new Hr(i.type,g,i.to,i.side):null)?this.parts.splice(r,0,m):this.parts[r]=m}let t=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof Lu&&t.push(i)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let r=this.parts[t];if(r instanceof Hr&&r.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return wu(this.text,e-this.offset)+this.offset}elt(e,t,r,i){return typeof e=="string"?Ze(this.parser.getNodeType(e),t,r,i):new gA(e,t)}}function s1(n,e){if(!e.length)return n;if(!n.length)return e;let t=n.slice(),r=0;for(let i of e){for(;r<t.length&&t[r].to<i.to;)r++;if(r<t.length&&t[r].from<i.from){let s=t[r];s instanceof Lu&&(t[r]=new Lu(s.type,s.from,s.to,s1(s.children,[i])))}else t.splice(r++,0,i)}return t}const AH=[ne.CodeBlock,ne.ListItem,ne.OrderedList,ne.BulletList];class MH{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=t;if(!r.childAfter(i))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(Ke.contextHash)==e}takeNodes(e){let t=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,a=e.block.children.length,u=o,f=a;for(;;){if(t.to-r>i){if(t.type.isAnonymous&&t.firstChild())continue;break}let h=_A(t.from-r,e.ranges);if(t.to-r<=e.ranges[e.rangeI].to)e.addNode(t.tree,h);else{let p=new bt(e.parser.nodeSet.types[ne.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(p,t.tree),e.addNode(p,h)}if(t.type.is("Block")&&(AH.indexOf(t.type.id)<0?(o=t.to-r,a=e.block.children.length):(o=u,a=f,u=t.to-r,f=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>a;)e.block.children.pop(),e.block.positions.pop();return o-s}}function _A(n,e){let t=n;for(let r=1;r<e.length;r++){let i=e[r-1].to,s=e[r].from;i<n&&(t-=s-i)}return t}const DH=ju({"Blockquote/...":I.quote,HorizontalRule:I.contentSeparator,"ATXHeading1/... SetextHeading1/...":I.heading1,"ATXHeading2/... SetextHeading2/...":I.heading2,"ATXHeading3/...":I.heading3,"ATXHeading4/...":I.heading4,"ATXHeading5/...":I.heading5,"ATXHeading6/...":I.heading6,"Comment CommentBlock":I.comment,Escape:I.escape,Entity:I.character,"Emphasis/...":I.emphasis,"StrongEmphasis/...":I.strong,"Link/... Image/...":I.link,"OrderedList/... BulletList/...":I.list,"BlockQuote/...":I.quote,"InlineCode CodeText":I.monospace,"URL Autolink":I.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":I.processingInstruction,"CodeInfo LinkLabel":I.labelName,LinkTitle:I.string,Paragraph:I.content});new Vv(new Wu(dA).extend(DH),Object.keys(Sf).map(n=>Sf[n]),Object.keys(Sf).map(n=>fA[n]),Object.keys(Sf),kH,nA,Object.keys(Fm).map(n=>Fm[n]),Object.keys(Fm),[]);I.special(I.content),I.processingInstruction;I.special(I.content),I.processingInstruction;function RH(n){const e=[];return n.iterate({enter:t=>{const r=t.node;if(!r.type.isError)return;const i=r.parent,s=OA(r),o={from:r.from,to:r.to,severity:"error",type:"Syntax Error"};if(r.from!==r.to)o.message=`Unrecognized token in <${i.name}>`;else if(s)o.message=`Unrecognized token <${s.name}> in <${i.name}>`,o.to=s.to;else{const a=i.enterUnfinishedNodesBefore(r.to);o.message=`Incomplete <${(a||i).name}>`}e.push(o)}}),e}function OA(n){return n?n.nextSibling||OA(n.parent):null}const IH="first-item";var PH={create(n){return{enter(e){if(e.name!=="FilterExpression")return;const t=n.readContent(e.from,e.to);if(rS().test(t)){const{from:r,to:i}=e;n.report({from:r,to:i,message:"First item is accessed via [1]",severity:"warning",type:IH,actions:[{name:"fix",apply(s,o=r,a=i){n.updateContent(o,a,t.replace(rS(),"[1]"))}}]})}}}}};function rS(){return/\[\s*0\s*\]$/}const LH=[PH];function $H(n){const{readContent:e,syntaxTree:t,updateContent:r}=n,i=[],s={readContent:e,report:a=>{i.push(a)},updateContent:r},o=LH.map(a=>a.create(s));return t.iterate({enter:a=>{for(const u of o)u.enter&&u.enter(a)},leave:a=>{for(const u of o)u.leave&&u.leave(a)}}),i}function NH(n){return[...RH(n.syntaxTree),...$H(n)]}const FH=()=>n=>{if(n.state.doc.length===0)return[];const e=Ko(n.state);return NH({syntaxTree:e,readContent:(r,i)=>n.state.sliceDoc(r,i),updateContent:(r,i,s)=>n.dispatch({changes:{from:r,to:i,insert:s}})}).map(r=>({...r,source:r.type}))};Nv(gl.define([{tag:I.strong,fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"}]));He.theme({"& .cm-lintRange":{position:"relative"},"& .cm-lintRange::after":{content:'""',width:"100%",position:"absolute",left:"0px",bottom:"-2px",height:"3px",backgroundRepeat:"repeat-x"},"& .cm-lintRange.cm-lintRange-warning, & .cm-lintRange.cm-lintRange-error":{backgroundImage:"none"},"& .cm-lintPoint::after":{bottom:"-2px"}});const iS=n=>`%23${n.slice(1)}`,Le={black:"#1f2b36",darkGrey:"#2f3d58",grey:"#404a5c",midGrey:"#576071",offWhite:"#d9e0f5",snowWhite:"#eaf1ff",white:"#ffffff",mossGreen:"#7ab6aa",iceBlue:"#6cbfd8",waterBlue:"#065aaa",brightBlue:"#0a56b9",deepBlue:"#355472",red:"#9f1c15",orangeBrown:"#b4502f",yellow:"#debd71",lila:"#9a4890",purple:"#5b2c83"},en={lightBackground:Le.white,darkBackground:Le.snowWhite,selection:Le.snowWhite,tooltipBackground:Le.offWhite,error:Le.red,warning:Le.yellow,invalid:"#b40000"};He.theme({"&":{color:Le.black,backgroundColor:en.lightBackground},".cm-content":{caretColor:Le.darkGrey},".cm-cursor, .cm-dropCursor":{borderLeftColor:Le.darkGrey},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:en.selection},".cm-panels":{backgroundColor:en.darkBackground,color:Le.grey},".cm-panels.cm-panels-top":{borderBottom:`2px solid ${Le.black}`},".cm-panels.cm-panels-bottom":{borderTop:`2px solid ${Le.black}`},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${Le.midGrey}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Le.offWhite},".cm-activeLine":{backgroundColor:en.selection},".cm-selectionMatch":{backgroundColor:Le.offWhite},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Le.grey}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Le.snowWhite},".cm-gutters":{backgroundColor:"#f3f7fe",color:"#52668d",border:"none",padding:"0 5px"},".cm-activeLineGutter":{backgroundColor:en.selection},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:en.tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:en.tooltipBackground,borderBottomColor:en.tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:en.darkBackground,color:Le.midGrey}},"& .cm-lintRange.cm-lintRange-warning::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${iS(en.warning)}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-lintRange.cm-lintRange-error::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${iS(en.error)}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-diagnostic-warning":{border:`1px solid ${en.warning}`,borderLeft:`5px solid ${en.warning}`,background:en.lightBackground},"& .cm-diagnostic-error":{border:`1px solid ${en.error}`,borderLeft:`5px solid ${en.error}`,background:en.lightBackground},"& .cm-diagnostic":{padding:"3px 8px"}},{dark:!1});Nv(gl.define([{tag:[I.macroName,I.variableName],color:Le.waterBlue},{tag:[I.special(I.bracket)],color:Le.waterBlue,fontWeight:"bold"},{tag:[I.color,I.name,I.definition(I.name),I.constant(I.name),I.standard(I.name),I.propertyName],color:Le.deepBlue},{tag:[I.definition(I.variableName),I.function(I.variableName),I.function(I.propertyName)],color:Le.brightBlue},{tag:[I.labelName],color:Le.orangeBrown},{tag:[I.annotation],color:en.invalid},{tag:[I.number,I.changed,I.annotation,I.modifier,I.self,I.namespace,I.atom,I.bool,I.special(I.variableName)],color:Le.red},{tag:[I.typeName,I.className,I.attributeName],color:Le.lila},{tag:[I.operator,I.operatorKeyword,I.tagName,I.keyword],color:Le.purple},{tag:[I.angleBracket,I.squareBracket,I.brace,I.separator,I.punctuation],color:Le.midGrey},{tag:[I.regexp],color:Le.deepBlue},{tag:[I.quote],color:Le.darkGrey},{tag:[I.string,I.character,I.deleted],color:Le.orangeBrown},{tag:I.link,color:Le.mossGreen,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[I.url,I.escape,I.special(I.string)],color:Le.red},{tag:[I.meta],color:Le.iceBlue},{tag:[I.comment],color:Le.midGrey,fontStyle:"italic"},{tag:I.strong,fontWeight:"bold",color:Le.deepBlue},{tag:I.emphasis,fontStyle:"italic",color:Le.deepBlue},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.heading,fontWeight:"bold",color:Le.midGray},{tag:I.special(I.heading1),fontWeight:"bold",color:Le.darkGrey},{tag:[I.heading1,I.heading2,I.heading3,I.heading4],fontWeight:"bold",color:Le.midGrey},{tag:[I.heading5,I.heading6,I.processingInstruction,I.inserted],color:Le.grey},{tag:[I.contentSeparator],color:Le.yellow},{tag:I.invalid,color:Le.midGrey,borderBottom:`1px dotted ${en.invalid}`}]));const BH="#abb2bf",Bm="#f07178",zH="#7d8799",HH="#ffffff",Ma="#fffce1",zm="#ec9e6f",VH="#21252b",Hm="rgba(0, 0, 0, 0.5)",qH="#292d3e",Vm="#353a42",WH="rgba(128, 203, 196, 0.2)",sS="#ffcc00",jH="%23",oS="fff890",aS="red",UH="#281e16",QH="#281616";He.theme({"&":{color:"#ffffff",backgroundColor:qH},".cm-content":{caretColor:sS},"&.cm-focused .cm-cursor":{borderLeftColor:sS},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:WH},".cm-panels":{backgroundColor:VH,color:"#ffffff"},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:Hm},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{background:"#292d3e",color:"#676e95",border:"none",padding:"0 5px"},".cm-activeLineGutter":{backgroundColor:Hm},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Vm},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Vm,borderBottomColor:Vm},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Hm,color:BH}},"& .cm-lintRange.cm-lintRange-warning::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${jH+oS}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-lintRange.cm-lintRange-error::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${aS}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-diagnostic-warning":{borderLeft:`5px solid #${oS}`,background:UH},"& .cm-diagnostic-error":{borderLeft:`5px solid ${aS}`,background:QH},"& .cm-diagnostic":{borderRadius:"2px",padding:"3px 8px"}},{dark:!0});Nv(gl.define([{tag:I.heading1,color:Ma},{tag:I.heading2,color:Ma},{tag:I.heading3,color:Ma},{tag:I.heading4,color:Ma},{tag:I.heading5,color:Ma},{tag:I.heading6,color:Ma},{tag:I.special(I.bracket),color:zm,fontWeight:"bold"},{tag:I.keyword,color:"#c792ea"},{tag:I.operator,color:"#89ddff"},{tag:I.special(I.variableName),color:"#eeffff"},{tag:I.typeName,color:"#f07178"},{tag:I.atom,color:"#f78c6c"},{tag:I.number,color:"#ff5370"},{tag:I.bool,color:"#ff5370"},{tag:I.definition(I.variableName),color:"#82aaff"},{tag:I.string,color:"#c3e88d"},{tag:I.comment,color:zH},{tag:I.tagName,color:"#ff5370"},{tag:I.bracket,color:"#a2a1a4"},{tag:I.meta,color:"#ffcb6b"},{tag:I.special(I.string),color:Bm},{tag:I.propertyName,color:zm},{tag:I.variableName,color:zm},{tag:I.attributeName,color:Bm},{tag:I.className,color:Bm},{tag:I.invalid,color:HH}]));const YH=1,XH=2,GH=3,wh={"{":123,"}":125},ZH=(n,e=0)=>{const t=n.peek(e)===wh["}"],r=n.peek(e+1)===wh["}"];return t&&r||n.peek(e)===-1},KH=new dl((n,e)=>{let t=0;for(;!ZH(n,t);)t++;t>0&&(n.advance(t),n.acceptToken(XH))}),JH=(n,e=0)=>{const t=n.peek(e)===wh["{"],r=n.peek(e+1)===wh["{"];return t&&r||n.peek(e)===-1},eV=new dl((n,e)=>{let t=0;for(;!JH(n,t);)t++;t>0&&(n.advance(t),n.acceptToken(GH))}),tV=new dl((n,e)=>{let t=0;for(;n.peek(t)!==-1;)t++;t>0&&(n.advance(t),n.acceptToken(YH))}),nV=ju({ConditionalSpanner:I.special(I.bracket),ConditionalSpannerClose:I.special(I.bracket),ConditionalSpannerCloseNl:I.special(I.bracket),LoopSpanner:I.special(I.bracket),LoopSpannerClose:I.special(I.bracket),LoopSpannerCloseNl:I.special(I.bracket),EmptyInsert:I.special(I.bracket),Insert:I.special(I.bracket)}),xA=Tu.deserialize({version:14,states:"$bOQOaOOOfOXO'#CbOOO`'#Cm'#CmOqOWO'#CcOvOWO'#CfOOO`'#Cp'#CpOOO`'#Ci'#CiO{OaO'#ClO!jOSOOQOOOOOO!oOPO,58{O!tOXO,58|OOO`,58|,58|O!|OQO,58}O#ROQO,59QOOO`-E6g-E6gOOO`1G.g1G.gO#WOPO1G.gOOO`1G.h1G.hO#]OaO1G.iO#qOaO1G.lOOO`7+$R7+$RO$VOPO7+$TO$_OPO7+$WOOO`<<Go<<GoOOO`<<Gr<<Gr",stateData:"$g~ORUO_WObPOeROgSO^`P~OQYO_ZOc[O~OQ]O~OQ^O~ORUObPOeROgSO^`XW`XX`XZ`X[`X~OPXO~Oc`O~OQaOcbO~OfcO~OfdO~OceO~ORUObPOeROgSOW`PX`P~ORUObPOeROgSOZ`P[`P~OWhOXhO~OZiO[iO~O",goto:"!ZePPPPPfflPPlPPrPPz!TPP!TXQOVcdXTOVcdUVOcdR_VQXOQfcRgdXUOVcd",nodeNames:" Feel FeelBlock SimpleTextBlock Feelers Insert EmptyInsert ConditionalSpanner ConditionalSpannerClose ConditionalSpannerCloseNl LoopSpanner LoopSpannerClose LoopSpannerCloseNl",maxTerm:23,propSources:[nV],skippedNodes:[0],repeatNodeCount:1,tokenData:"%X~RR!_!`[#o#pa#q#r$r~aO_~~dP#o#pg~lQb~str!P!Q!{~uQ#]#^{#`#a!^~!OP#Y#Z!R~!UPpq!X~!^Oe~~!aP#c#d!d~!gP#c#d!j~!mP#d#e!p~!sPpq!v~!{Og~~#OQ#]#^#U#`#a#u~#XP#Y#Z#[~#_P#q#r#b~#eP#q#r#h~#mPW~YZ#p~#uOX~~#xP#c#d#{~$OP#c#d$R~$UP#d#e$X~$[P#q#r$_~$bP#q#r$e~$jPZ~YZ$m~$rO[~R$uP#q#r$xR%PPcPfQYZ%SQ%XOfQ",tokenizers:[0,1,tV,KH,eV],topRules:{Feelers:[0,4]},tokenPrec:0});function kA(n,e){const t=[{children:[]}],r=i=>["SimpleTextBlock","Feel","FeelBlock"].includes(i.type.name);return n.iterate({enter:(i,s,o)=>{const a={name:i.type.name,children:[]};r(i)&&(a.content=e.slice(i.from,i.to)),t.push(a)},leave:(i,s,o)=>{const a=t.pop(),u=t[t.length-1];a.parent=u,u.children.push(a)}}),t[0].children[0]}const rV=(n,e={},t={})=>{const{debug:r=!1,strict:i=!1,buildDebugString:s=h=>`{{ ${h.message.toLowerCase()} }}`,sanitizer:o}=t,a=xA.parse(n),u=kA(a,n);return iV({debug:r,strict:i,buildDebugString:s,sanitizer:o})(u,SA(e,null))},iV=n=>{const{debug:e,strict:t,buildDebugString:r,sanitizer:i}=n,s=u=>{if(e)return r(u);throw u},o=(u,f={})=>{switch(u.name){case"SimpleTextBlock":return u.content;case"Insert":{const h=u.children[0].content;try{const p=af(`string(${h})`,f);return i?i(p):p}catch{return s(new Error(`FEEL expression ${h} couldn't be evaluated`))}}case"EmptyInsert":return"";case"Feel":case"FeelBlock":{const h=u.content;try{const p=af(`string(${h})`,f);return i?i(p):p}catch{return s(new Error(`FEEL expression ${h} couldn't be evaluated`))}}case"Feelers":return u.children.map(h=>a(h,f)).join("");case"ConditionalSpanner":{const h=u.children[0].content;let p;try{p=af(h,f)}catch{return s(new Error(`FEEL expression ${h} couldn't be evaluated`))}if(t&&typeof p!="boolean")return s(new Error(`FEEL expression ${h} expected to evaluate to a boolean`));if(p){const m=u.children.slice(1,u.children.length-1).map(O=>a(O,f)).join(""),b=u.children[u.children.length-1].name.endsWith("Nl")&&!m.endsWith(`
`);return m+(b?`
`:"")}return""}case"LoopSpanner":{const h=u.children[0].content;let p;try{p=af(h,f)}catch{return s(new Error(`FEEL expression ${h} couldn't be evaluated`))}if(!Array.isArray(p)){if(t)return s(new Error(`FEEL expression ${h} expected to evaluate to an array`));p==null?p=[]:p=[p]}const g=u.children.slice(1,u.children.length-1),m=(C,M)=>{const T=SA(C,M);return g.map(S=>a(S,T)).join("")},y=p.map(C=>m(C,f)).join(""),O=u.children[u.children.length-1].name.endsWith("Nl")&&!y.endsWith(`
`);return y+(O?`
`:"")}}},a=(u,f={})=>{try{return o(u,f)}catch(h){return s(h)}};return a},SA=(n,e)=>typeof n=="object"?{this:n,parent:e,...n,_this_:n,_parent_:e}:{this:n,parent:e,_this_:n,_parent_:e};function sV(n){const e=[];return n.iterate({enter:t=>{t.type.name==="EmptyInsert"&&e.push({from:t.from,to:t.to,severity:"warning",message:"this insert is empty and will be ignored",type:"emptyInsert"})}}),e}function oV(n){return[...sV(n)]}function aV(){const n=FH();return e=>{const t=n(e);if(e.state.doc.length===0)return[];const r=Ko(e.state),i=oV(r);return[...t,...i.map(s=>({...s,source:"feelers linter"}))]}}pH(aV());function qv(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ia=qv();function CA(n){ia=n}const _u={exec:()=>null};function lt(n,e=""){let t=typeof n=="string"?n:n.source;const r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(qn.caret,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}const qn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},lV=/^(?:[ \t]*(?:\n|$))+/,uV=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,cV=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Xu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fV=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Wv=/(?:[*+-]|\d{1,9}[.)])/,TA=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,EA=lt(TA).replace(/bull/g,Wv).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),hV=lt(TA).replace(/bull/g,Wv).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),jv=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dV=/^[^\n]+/,Uv=/(?!\s*\])(?:\\.|[^\[\]\\])+/,pV=lt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Uv).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),gV=lt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Wv).getRegex(),Gh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Qv=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,mV=lt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Qv).replace("tag",Gh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),AA=lt(jv).replace("hr",Xu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gh).getRegex(),vV=lt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",AA).getRegex(),Yv={blockquote:vV,code:uV,def:pV,fences:cV,heading:fV,hr:Xu,html:mV,lheading:EA,list:gV,newline:lV,paragraph:AA,table:_u,text:dV},lS=lt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Xu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gh).getRegex(),yV={...Yv,lheading:hV,table:lS,paragraph:lt(jv).replace("hr",Xu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",lS).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gh).getRegex()},bV={...Yv,html:lt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Qv).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_u,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:lt(jv).replace("hr",Xu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",EA).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},wV=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,_V=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,MA=/^( {2,}|\\)\n(?!\s*$)/,OV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Zh=/[\p{P}\p{S}]/u,Xv=/[\s\p{P}\p{S}]/u,DA=/[^\s\p{P}\p{S}]/u,xV=lt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Xv).getRegex(),RA=/(?!~)[\p{P}\p{S}]/u,kV=/(?!~)[\s\p{P}\p{S}]/u,SV=/(?:[^\s\p{P}\p{S}]|~)/u,CV=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,IA=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,TV=lt(IA,"u").replace(/punct/g,Zh).getRegex(),EV=lt(IA,"u").replace(/punct/g,RA).getRegex(),PA="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",AV=lt(PA,"gu").replace(/notPunctSpace/g,DA).replace(/punctSpace/g,Xv).replace(/punct/g,Zh).getRegex(),MV=lt(PA,"gu").replace(/notPunctSpace/g,SV).replace(/punctSpace/g,kV).replace(/punct/g,RA).getRegex(),DV=lt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,DA).replace(/punctSpace/g,Xv).replace(/punct/g,Zh).getRegex(),RV=lt(/\\(punct)/,"gu").replace(/punct/g,Zh).getRegex(),IV=lt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),PV=lt(Qv).replace("(?:-->|$)","-->").getRegex(),LV=lt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",PV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),_h=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$V=lt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",_h).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),LA=lt(/^!?\[(label)\]\[(ref)\]/).replace("label",_h).replace("ref",Uv).getRegex(),$A=lt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Uv).getRegex(),NV=lt("reflink|nolink(?!\\()","g").replace("reflink",LA).replace("nolink",$A).getRegex(),Gv={_backpedal:_u,anyPunctuation:RV,autolink:IV,blockSkip:CV,br:MA,code:_V,del:_u,emStrongLDelim:TV,emStrongRDelimAst:AV,emStrongRDelimUnd:DV,escape:wV,link:$V,nolink:$A,punctuation:xV,reflink:LA,reflinkSearch:NV,tag:LV,text:OV,url:_u},FV={...Gv,link:lt(/^!?\[(label)\]\((.*?)\)/).replace("label",_h).getRegex(),reflink:lt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_h).getRegex()},o1={...Gv,emStrongRDelimAst:MV,emStrongLDelim:EV,url:lt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},BV={...o1,br:lt(MA).replace("{2,}","*").getRegex(),text:lt(o1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Tf={normal:Yv,gfm:yV,pedantic:bV},Jl={normal:Gv,gfm:o1,breaks:BV,pedantic:FV},zV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},uS=n=>zV[n];function Qi(n,e){if(e){if(qn.escapeTest.test(n))return n.replace(qn.escapeReplace,uS)}else if(qn.escapeTestNoEncode.test(n))return n.replace(qn.escapeReplaceNoEncode,uS);return n}function cS(n){try{n=encodeURI(n).replace(qn.percentDecode,"%")}catch{return null}return n}function fS(n,e){const t=n.replace(qn.findPipe,(s,o,a)=>{let u=!1,f=o;for(;--f>=0&&a[f]==="\\";)u=!u;return u?"|":" |"}),r=t.split(qn.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(qn.slashPipe,"|");return r}function eu(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===e;)i++;return n.slice(0,r-i)}function HV(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function hS(n,e,t,r,i){const s=e.href,o=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const u={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,u}function VV(n,e,t){const r=n.match(t.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(s=>{const o=s.match(t.other.beginningSpace);if(o===null)return s;const[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}class Oh{options;rules;lexer;constructor(e){this.options=e||ia}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:eu(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=VV(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){const i=eu(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:eu(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=eu(t[0],`
`).split(`
`),i="",s="";const o=[];for(;r.length>0;){let a=!1;const u=[];let f;for(f=0;f<r.length;f++)if(this.rules.other.blockquoteStart.test(r[f]))u.push(r[f]),a=!0;else if(!a)u.push(r[f]);else break;r=r.slice(f);const h=u.join(`
`),p=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${h}`:h,s=s?`${s}
${p}`:p;const g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,o,!0),this.lexer.state.top=g,r.length===0)break;const m=o.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){const y=m,b=y.raw+`
`+r.join(`
`),O=this.blockquote(b);o[o.length-1]=O,i=i.substring(0,i.length-y.raw.length)+O.raw,s=s.substring(0,s.length-y.text.length)+O.text;break}else if(m?.type==="list"){const y=m,b=y.raw+`
`+r.join(`
`),O=this.list(b);o[o.length-1]=O,i=i.substring(0,i.length-m.raw.length)+O.raw,s=s.substring(0,s.length-y.raw.length)+O.raw,r=b.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let f=!1,h="",p="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;h=t[0],e=e.substring(h.length);let g=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,M=>" ".repeat(3*M.length)),m=e.split(`
`,1)[0],y=!g.trim(),b=0;if(this.options.pedantic?(b=2,p=g.trimStart()):y?b=t[1].length+1:(b=t[2].search(this.rules.other.nonSpaceChar),b=b>4?1:b,p=g.slice(b),b+=t[1].length),y&&this.rules.other.blankLine.test(m)&&(h+=m+`
`,e=e.substring(m.length+1),f=!0),!f){const M=this.rules.other.nextBulletRegex(b),T=this.rules.other.hrRegex(b),S=this.rules.other.fencesBeginRegex(b),R=this.rules.other.headingBeginRegex(b),$=this.rules.other.htmlBeginRegex(b);for(;e;){const L=e.split(`
`,1)[0];let V;if(m=L,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),V=m):V=m.replace(this.rules.other.tabCharGlobal,"    "),S.test(m)||R.test(m)||$.test(m)||M.test(m)||T.test(m))break;if(V.search(this.rules.other.nonSpaceChar)>=b||!m.trim())p+=`
`+V.slice(b);else{if(y||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(g)||R.test(g)||T.test(g))break;p+=`
`+m}!y&&!m.trim()&&(y=!0),h+=L+`
`,e=e.substring(L.length+1),g=V.slice(b)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let O=null,C;this.options.gfm&&(O=this.rules.other.listIsTask.exec(p),O&&(C=O[0]!=="[ ] ",p=p.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!O,checked:C,loose:!1,text:p,tokens:[]}),s.raw+=h}const u=s.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let f=0;f<s.items.length;f++)if(this.lexer.state.top=!1,s.items[f].tokens=this.lexer.blockTokens(s.items[f].text,[]),!s.loose){const h=s.items[f].tokens.filter(g=>g.type==="space"),p=h.length>0&&h.some(g=>this.rules.other.anyLine.test(g.raw));s.loose=p}if(s.loose)for(let f=0;f<s.items.length;f++)s.items[f].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const r=fS(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const a of i)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(const a of s)o.rows.push(fS(a,o.header.length).map((u,f)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:o.align[f]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const o=eu(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=HV(t[2],"()");if(o===-2)return;if(o>-1){const u=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,u).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),hS(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[i.toLowerCase()];if(!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return hS(r,s,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,u,f=o,h=0;const p=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+o);(i=p.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(u=[...a].length,i[3]||i[4]){f+=u;continue}else if((i[5]||i[6])&&o%3&&!((o+u)%3)){h+=u;continue}if(f-=u,f>0)continue;u=Math.min(u,u+f+h);const g=[...i[0]][0].length,m=e.slice(0,o+i.index+g+u);if(Math.min(o,u)%2){const b=m.slice(1,-1);return{type:"em",raw:m,text:b,tokens:this.lexer.inlineTokens(b)}}const y=m.slice(2,-2);return{type:"strong",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}}class Yr{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ia,this.options.tokenizer=this.options.tokenizer||new Oh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:qn,block:Tf.normal,inline:Jl.normal};this.options.pedantic?(t.block=Tf.pedantic,t.inline=Jl.pedantic):this.options.gfm&&(t.block=Tf.gfm,this.options.breaks?t.inline=Jl.breaks:t.inline=Jl.gfm),this.tokenizer.rules=t}static get rules(){return{block:Tf,inline:Jl}}static lex(e,t){return new Yr(t).lex(e)}static lexInline(e,t){return new Yr(t).inlineTokens(e)}lex(e){e=e.replace(qn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(qn.tabCharGlobal,"    ").replace(qn.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(o=>(i=o.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);const o=t.at(-1);i.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);const o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.at(-1).src=o.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);const o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0;const a=e.slice(1);let u;this.options.extensions.startBlock.forEach(f=>{u=f.call({lexer:this},a),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){const o=t.at(-1);r&&o?.type==="paragraph"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);const o=t.at(-1);o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(i);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,i=null;if(this.tokens.links){const a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let a;if(this.options.extensions?.inline?.some(f=>(a=f.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);const f=t.at(-1);a.type==="text"&&f?.type==="text"?(f.raw+=a.raw,f.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,r,o)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let u=e;if(this.options.extensions?.startInline){let f=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},h),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(u=e.substring(0,f+1))}if(a=this.tokenizer.inlineText(u)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),s=!0;const f=t.at(-1);f?.type==="text"?(f.raw+=a.raw,f.text+=a.text):t.push(a);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}}class xh{options;parser;constructor(e){this.options=e||ia}space(e){return""}code({text:e,lang:t,escaped:r}){const i=(t||"").match(qn.notSpaceStart)?.[0],s=e.replace(qn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Qi(i)+'">'+(r?s:Qi(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Qi(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const u=e.items[a];i+=this.listitem(u)}const s=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+Qi(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const o=e.rows[s];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Qi(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),s=cS(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return t&&(o+=' title="'+Qi(t)+'"'),o+=">"+i+"</a>",o}image({href:e,title:t,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));const s=cS(e);if(s===null)return Qi(r);e=s;let o=`<img src="${e}" alt="${r}"`;return t&&(o+=` title="${Qi(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Qi(e.text)}}class Zv{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Xr{options;renderer;textRenderer;constructor(e){this.options=e||ia,this.options.renderer=this.options.renderer||new xh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Zv}static parse(e,t){return new Xr(t).parse(e)}static parseInline(e,t){return new Xr(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions?.renderers?.[s.type]){const a=s,u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=u||"";continue}}const o=s;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,u=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],u+=`
`+this.renderer.text(a);t?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t=this.renderer){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions?.renderers?.[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}const o=s;switch(o.type){case"escape":{r+=t.text(o);break}case"html":{r+=t.html(o);break}case"link":{r+=t.link(o);break}case"image":{r+=t.image(o);break}case"strong":{r+=t.strong(o);break}case"em":{r+=t.em(o);break}case"codespan":{r+=t.codespan(o);break}case"br":{r+=t.br(o);break}case"del":{r+=t.del(o);break}case"text":{r+=t.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}}class Uf{options;block;constructor(e){this.options=e||ia}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Yr.lex:Yr.lexInline}provideParser(){return this.block?Xr.parse:Xr.parseInline}}class qV{defaults=qv();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Xr;Renderer=xh;TextRenderer=Zv;Lexer=Yr;Tokenizer=Oh;Hooks=Uf;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(const i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{const s=i;for(const o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(const o of s.rows)for(const a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{const s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{const s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{const a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let u=s.renderer.apply(this,a);return u===!1&&(u=o.apply(this,a)),u}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new xh(this.defaults);for(const o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,u=r.renderer[a],f=s[a];s[a]=(...h)=>{let p=u.apply(s,h);return p===!1&&(p=f.apply(s,h)),p||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new Oh(this.defaults);for(const o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,u=r.tokenizer[a],f=s[a];s[a]=(...h)=>{let p=u.apply(s,h);return p===!1&&(p=f.apply(s,h)),p}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new Uf;for(const o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,u=r.hooks[a],f=s[a];Uf.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async)return Promise.resolve(u.call(s,h)).then(g=>f.call(s,g));const p=u.call(s,h);return f.call(s,p)}:s[a]=(...h)=>{let p=u.apply(s,h);return p===!1&&(p=f.apply(s,h)),p}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let u=[];return u.push(o.call(this,a)),s&&(u=u.concat(s.call(this,a))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Yr.lex(e,t??this.defaults)}parser(e,t){return Xr.parse(e,t??this.defaults)}parseMarkdown(e){return(r,i)=>{const s={...i},o={...this.defaults,...s},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const u=o.hooks?o.hooks.provideLexer():e?Yr.lex:Yr.lexInline,f=o.hooks?o.hooks.provideParser():e?Xr.parse:Xr.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(h=>u(h,o)).then(h=>o.hooks?o.hooks.processAllTokens(h):h).then(h=>o.walkTokens?Promise.all(this.walkTokens(h,o.walkTokens)).then(()=>h):h).then(h=>f(h,o)).then(h=>o.hooks?o.hooks.postprocess(h):h).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let h=u(r,o);o.hooks&&(h=o.hooks.processAllTokens(h)),o.walkTokens&&this.walkTokens(h,o.walkTokens);let p=f(h,o);return o.hooks&&(p=o.hooks.postprocess(p)),p}catch(h){return a(h)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Qi(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}}const Jo=new qV;function ht(n,e){return Jo.parse(n,e)}ht.options=ht.setOptions=function(n){return Jo.setOptions(n),ht.defaults=Jo.defaults,CA(ht.defaults),ht};ht.getDefaults=qv;ht.defaults=ia;ht.use=function(...n){return Jo.use(...n),ht.defaults=Jo.defaults,CA(ht.defaults),ht};ht.walkTokens=function(n,e){return Jo.walkTokens(n,e)};ht.parseInline=Jo.parseInline;ht.Parser=Xr;ht.parser=Xr.parse;ht.Renderer=xh;ht.TextRenderer=Zv;ht.Lexer=Yr;ht.lexer=Yr.lex;ht.Tokenizer=Oh;ht.Hooks=Uf;ht.parse=ht;ht.options;ht.setOptions;ht.use;ht.walkTokens;ht.parseInline;Xr.parse;Yr.lex;const NA=(n,e="expression",t={})=>{const{depth:r=0,specialDepthAccessors:i={}}=t;if(!["expression","unaryTest"].includes(e))return[];const s=e==="expression"?ET(n):AT(n),o=UV(s,n),a=function u(f){if(f.name==="PathExpression"){const h=Kv(f)[0];return h.name==="Context"?u(h):Object.keys(i).length===0?r===0?[WV(f,0)]:[]:Array.from(jV(f,r,i))}if(r===0&&f.name==="VariableName")return[f.variableName];if(f.children){const h=f.children.reduce((p,g)=>p.concat(u(g)),[]);return f.name==="FilterContext"?h.filter(p=>p!=="item"):h}return[]}(o);return[...new Set(a)]},WV=(n,e)=>Kv(n)[e].variableName||null,jV=(n,e,t)=>{let r=[{previous:null,current:e-1}];const i=new Set,s=Kv(n);for(let o=0;o<s.length;o++){const a=s[o].variableName;a in t?r=t[a].reduce((f,h)=>[...f,...r.map(p=>({previous:p.current,current:p.current+h}))],[]).filter(f=>f.current>=-1):r=r.map(u=>({previous:u.current,current:u.current+1})),r.some(u=>u.previous===-1&&u.current===0)&&i.add(a)}return new Set(i)},Kv=n=>{let e=n,t=[];for(;e.name==="PathExpression";)t.push(e.children[1]),e=e.children[0];return t.push(e),t.reverse()},UV=(n,e)=>{const t=[{children:[]}];return n.iterate({enter:r=>{const i={name:r.type.name,children:[]};r.type.name==="VariableName"&&(i.variableName=e.slice(r.from,r.to)),t.push(i)},leave:()=>{const r=t.pop();t[t.length-1].children.push(r)}}),QV(t[0].children[0])},QV=n=>{const e={name:"Root",children:[n]},t=r=>{if(r.children)for(let i=0;i<r.children.length;i++)if(r.children[i].name==="FilterExpression"){const s=r.children[i].children[0],o=r.children[i].children[2];r.children[i]=s;const a={name:"FilterContext",children:[o]};e.children.push(a),t(o)}else t(r.children[i])};return t(n),e};class FA{constructor(e){this._eventBus=e}isExpression(e){return Jr(e)&&e.startsWith("=")}getVariableNames(e,t={}){const{type:r="expression"}=t;if(!this.isExpression(e))return[];if(!["unaryTest","expression"].includes(r))throw new Error("Unknown expression type: "+r);return NA(e,r)}evaluate(e,t={}){if(!e||!Jr(e)||!e.startsWith("="))return null;try{return J8(e.slice(1),t)}catch(r){return this._eventBus.fire("error",{error:r}),null}}}FA.$inject=["eventBus"];class BA{constructor(){}isTemplate(e){return Jr(e)&&(e.startsWith("=")||/{{.*?}}/.test(e))}getVariableNames(e){if(!this.isTemplate(e))return[];const t=this._extractExpressionsWithDepth(e),r={parent:[-1,1],_parent_:[-1],this:[0,1],_this_:[0]};return t.reduce((i,{expression:s,depth:o})=>i.concat(NA(s,"expression",{depth:o,specialDepthAccessors:r})),[])}evaluate(e,t={},r={}){const{debug:i=!1,strict:s=!1,buildDebugString:o=u=>" {{}} ",sanitizer:a=u=>u}=r;return rV(e,t,{debug:i,strict:s,buildDebugString:o,sanitizer:a})}_extractExpressionsWithDepth(e){const t=xA.parse(e),r=kA(t,e);return function i(s,o=0){if(["Feel","FeelBlock"].includes(s.name))return[{depth:o,expression:s.content}];if(s.name==="LoopSpanner"){const a=s.children[0].content,u=s.children.slice(1).reduce((f,h)=>f.concat(i(h,o+1)),[]);return[{depth:o,expression:a},...u]}return s.children.reduce((a,u)=>a.concat(i(u,o)),[])}(r)}}BA.$inject=[];const _s=60*24,Vn={DATE:"date",TIME:"time",DATETIME:"datetime"},a1={UTC_OFFSET:"utc_offset",UTC_NORMALIZED:"utc_normalized"},YV=["subtype"],XV=["dateLabel"],ys="sandbox",Ef="allow",dS=[{attribute:ys,directive:"allow-scripts",property:"allowScripts",label:"Script execution"},{attribute:ys,directive:"allow-same-origin",property:"allowSameOrigin",label:"Allow same origin"},{attribute:Ef,directive:"fullscreen",property:"fullscreen",label:"Open in fullscreen"},{attribute:Ef,directive:"geolocation",property:"geolocation",label:"Geolocation"},{attribute:Ef,directive:"camera",property:"camera",label:"Camera access"},{attribute:Ef,directive:"microphone",property:"microphone",label:"Microphone access"},{attribute:ys,directive:"allow-forms",property:"allowForms",label:"Forms submission"},{attribute:ys,directive:"allow-modals",property:"allowModals",label:"Open modal windows"},{attribute:ys,directive:"allow-popups",property:"allowPopups",label:"Open popups"},{attribute:ys,directive:"allow-top-navigation",property:"allowTopNavigation",label:"Top level navigation"},{attribute:ys,directive:"allow-storage-access-by-user-activation",property:"allowStorageAccessByUserActivation",label:"Storage access by user"}];function GV(n){const e=new uT(n);return e.init(),e}function ZV(n="fjs"){const e=document.createElement("div");return e.classList.add(`${n}-container`),e}function Wt(n,{errors:e=[],disabled:t=!1,readonly:r=!1}={}){if(!n)throw new Error("type required");return wt("fjs-form-field",`fjs-form-field-${n}`,{"fjs-has-errors":e.length>0,"fjs-disabled":t,"fjs-readonly":r})}function KV(n){const{layout:e={}}=n,{columns:t}=e;return wt("fjs-layout-column",`cds--col${t?"-lg-"+t:""}`,"cds--col-sm-16","cds--col-md-16")}function JV(n){if(typeof n!="string")return null;for(const e of n.split(`
`)){const t=e.trim();if(t!=="")return t}return null}function sl(n,e,t){let r="fjs-form";return e&&(r+=`-${e}`),r+=`-${n}`,Object.values(t||{}).forEach(i=>{r+=`_${i}`}),r}const ml=J1({Empty:n=>null,Hidden:n=>null,Children:n=>A("div",{class:n.class,style:n.style,children:n.children}),Element:n=>A("div",{class:n.class,style:n.style,children:n.children}),Row:n=>A("div",{class:n.class,style:n.style,children:n.children}),Column:n=>n.field.type==="default"?n.children:A("div",{class:n.class,style:n.style,children:n.children}),hoverInfo:{cleanup:()=>{}}}),ss=J1({data:null,this:null,parent:null,i:null});function eq(n,e){}const Gu=J1({getService:eq,formId:null});function ft(n,e){const{getService:t}=xn(Gu);return t(n,e)}function qr(n,e){return JSON.parse(JSON.stringify(n,e))}function tq(n){const e={};for(const[t,r]of Object.entries(n))e[`_${t}_`]=r;return e}function vl(n){const{data:e,...t}=n;return{...t,...e,...tq(t)}}function Jv(n,e,t){return n&&n.isExpression(e)?n.evaluate(e,vl(t)):e}function nq(n){const e=ft("conditionChecker",!1),t=xn(ss);return Be(()=>e?e.check(n,vl(t)):null,[e,n,t])}function zA(n,e){const{valuesExpression:t,valuesKey:r,values:i}=n;return t?null:r?nn(e,[r]):i}function ey(n){return n.filter(HA).map(rq).filter(e=>!go(e))}function Kh(n={}){const e={};return!n.valuesKey&&!n.valuesExpression&&(e.values=[{label:"Value",value:"value"}]),{...e,...n}}function rq(n){if(l1(n))return{value:n,label:`${n}`};if(rs(n)){const e=iq(n.label);if(!e&&l1(n.value))return{value:n.value,label:`${n.value}`};if(e&&HA(n.value))return n}return null}function l1(n){return["number","string","boolean"].includes(typeof n)&&(n||n===0||n===!1)}function iq(n){return n&&Jr(n)}function HA(n){return rs(n)?Object.keys(n).length>0:l1(n)}function Zu(n){const e=ft("expressionLanguage"),t=xn(ss);return Be(()=>Jv(e,n,t),[e,t,n])}function yl(n){const e=Dt();return ll(n,e.current)||(e.current=n),e.current}const Kr={LOADED:"loaded",ERROR:"error"};function Ku(n){const{valuesExpression:e,valuesKey:t,values:r}=n,i=ft("form")._getState().initialData,s=Zu(e),o=yl(s||[]);return Be(()=>{let u=[];if(t!==void 0){const f=(i||{})[t];f&&Array.isArray(f)&&(u=f)}else if(r!==void 0)u=Array.isArray(r)?r:[];else if(e&&o&&Array.isArray(o))u=o;else return sq("No options source defined in the form definition");return oq(ey(u))},[t,r,i,e,o])}const sq=n=>({options:[],error:n,loadState:Kr.ERROR}),oq=n=>({options:n,error:void 0,loadState:Kr.LOADED}),VA=n=>{const{html:e,transform:t=a=>a,sanitize:r=!0,sanitizeStyleTags:i=!0}=n,s=Be(()=>r?Z6.sanitize(e,aq(i)):e,[e,r,i]);return{__html:Be(()=>t(s),[s,t])}},aq=n=>({FORCE_BODY:!0,FORBID_TAGS:n?["style"]:[]});function lq(n){const e=yl(n),t=Be(()=>dS.filter(({attribute:i})=>i===ys).filter(({property:i})=>nn(e,[i],!1)).map(({directive:i})=>i).join(" "),[e]),r=Be(()=>dS.filter(({attribute:i})=>i!==ys).filter(({property:i})=>nn(e,[i],!1)).map(({directive:i})=>i).join("; "),[e]);return[t,r]}function ty(n){const e=Be(()=>Object.assign({},...n.map(t=>({[pS(t.value)]:t.label}))),[n]);return Ye(t=>e[pS(t)],[e])}const pS=n=>rs(n)?JSON.stringify(n):n;function uq(n,e){return n.querySelectorAll("style").forEach(r=>{const s=cq(r.textContent).map(o=>{const{selector:a,styles:u}=fq(o);return`${hq(a,e)} ${u}`}).join(" ");r.textContent=s}),n}function cq(n){let e=0,t=0,r=0;const i=[];for(;e<n.length;)n[e]==="{"&&r++,n[e]==="}"&&(r--,r===0&&(i.push(n.substring(t,e+1)),t=e+1)),e++;return i.map(s=>s.trim())}function fq(n){const e=n.indexOf("{"),t=n.substring(0,e),r=n.substring(e);return{selector:t,styles:r}}function hq(n,e){return n.split(",").map(t=>`${e} ${t.trim()}`).join(", ")}function dq(n){for(;n&&n!==document.body&&n!==document.documentElement;){if(qm(n))return n;n=n.parentElement}return qm(document.body)?document.body:qm(document.documentElement)?document.documentElement:null}function qm(n){const e=window.getComputedStyle(n),t=e.overflowY||e.overflow;return(t==="auto"||t==="scroll")&&n.scrollHeight>n.clientHeight}const pq={},gq=[];function mq(n,e,t,r){const i=t||pq,s=r||gq;dt(()=>{if(bL(s,O=>!O.current)||!n.current)return;for(let O=0;O<s.length;O++)s[O].current=!1;const o=n.current,a=dq(o);if(!a)return;const u=o.getBoundingClientRect(),f=a.getBoundingClientRect(),{align:h="center",offset:p=0,behavior:g="auto",scrollIfVisible:m=!1}=i;if(!(m||!(u.top>=f.top&&u.bottom<=f.bottom)))return;const b=vq(o,a,{align:h,offset:p});a.scroll({top:b,behavior:g})},e)}function vq(n,e,t){const r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return t.align==="top"?r.top-i.top+e.scrollTop-t.offset:t.align==="bottom"?r.bottom-i.top-e.clientHeight+e.scrollTop+t.offset:t.align==="center"?r.top-i.top-e.clientHeight/2+e.scrollTop+r.height/2+t.offset:0}function yq(n){const e=ft("expressionLanguage"),t=xn(ss);return Be(()=>{const r=Jv(e,n,t);return typeof r=="boolean"?r:!1},[e,t,n])}function bq(){const{initialData:n,data:e}=ft("form")._getState(),t=ft("conditionChecker",!1);return Be(()=>{const r=t?t.applyConditions(e,e):e;return{...n,...r}},[t,e,n])}function Wm(n,e,t=window){function r({key:i}){i===n&&e()}dt(()=>(t.addEventListener("keydown",r),()=>{t.removeEventListener("keydown",r)}))}function wq(n,e={}){const t=ft("expressionLanguage"),r=ft("conditionChecker",!1),i=xn(ss),{readonly:s}=n;return e.readOnly?!0:t&&t.isExpression(s)?r?r.check(s,vl(i)):!1:s||!1}function gS(n,e=null){const t=Dt(e);return dt(()=>t.current=n,[n]),t.current}function ny(n){const e=Dt(null),t=Dt(null),r=ft("config",!1),i=r&&r.debounce,s=i!==!1&&i!==0,o=typeof i=="number"?i:300,a=Ye((...f)=>{if(!s){n(...f);return}t.current=f,e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{n(...t.current),t.current=null},o)},[n,o,s]),u=Ye(()=>{e.current&&(clearTimeout(e.current),t.current!==null&&(n(...t.current),t.current=null),e.current=null)},[n]);return[a,u]}function ry(n,e={}){const t=ft("templating"),r=xn(ss);return Be(()=>t&&t.isTemplate(n)?t.evaluate(n,vl(r),e):n,[t,n,r,e])}function Ei(n,e={}){const t=ry(n,e);return Be(()=>t&&t.split(`
`)[0],[t])}const mS=new KeyboardEvent("keydown",{code:"Enter",key:"Enter",charCode:13,keyCode:13,bubbles:!0});function vS(n){if(!n)return;!n.isOpen&&n.open();const e=n.calendarContainer,t=e.querySelector(".flatpickr-day.selected")||e.querySelector(".flatpickr-day.today")||e.querySelector(".flatpickr-day");t&&t.focus()}function jm(n,e){if(e===null)return null;const t=e%(24*60),r=e%60;let i=Math.floor(t/60);if(n)return xi(i)+":"+xi(r);i=i%12||12;const s=t>=12*60;return xi(i)+":"+xi(r)+" "+(s?"PM":"AM")}function yS(n){let e=n.toLowerCase();if(e.includes("am")||e.includes("pm")){const r=e.includes("pm"),i=e.match(/\d+/g),s=parseInt(i&&i[0]),o=parseInt(i&&i[1])||0,a=Ts(s)&&s>=1&&s<=12,u=o>=0&&o<=59;return!a||!u?null:(s%12+(r?12:0))*60+o}else{const r=e.match(/\d+/g),i=parseInt(r&&r[0]),s=parseInt(r&&r[1]),o=Ts(i)&&i>=0&&i<=23,a=Ts(s)&&s>=0&&s<=59;return!o||!a?null:i*60+s}}function qA(n,e,t){if(t===a1.UTC_NORMALIZED){const s=(n+e+_s)%_s;return xi(Math.floor(s/60))+":"+xi(s%60)+"Z"}const r=xi(Math.floor(n/60))+":"+xi(n%60),i=t===a1.UTC_OFFSET;return r+(i?kq(e):"")}function WA(n){if(!n)return null;const e=r=>{const i=r.split(":"),s=parseInt(i[0]),o=i.length>1?parseInt(i[1]):0;return isNaN(s)||s<0||s>24||isNaN(o)||o<0||o>60?null:s*60+o},t=new Date().getTimezoneOffset();if(n.includes("Z")){n=n.replace("Z","");const r=e(n);return r===null?null:(r-t+_s)%_s}else if(n.includes("+")){const[r,i]=n.split("+"),s=e(r);let o=e(i);return s===null||o===null?null:(o=-o,(s+o-t+_s)%_s)}else if(n.includes("-")){const[r,i]=n.split("-"),s=e(r);let o=e(i);return s===null||o===null?null:(s+o-t+_s)%_s}else return e(n)}function jA(n){return xe.fromJSDate(n).toISODate()}function _q(n){if(!n||typeof n!="string")return!1;const e=n.split("T");return!(e.length!=2||e[0].split("-").length!=3)}function Oq(n){return!(!n||typeof n!="string"||n.includes("T")||n.split("-").length!=3)}function xq(n,e,t){const r=new Date;if(r.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setHours(Math.floor(e/60),e%60,0,0),t===a1.UTC_NORMALIZED){const i=r.getTimezoneOffset(),s=e+i<0?-1:e+i>_s?1:0;r.setHours(r.getHours()+s*24)}return jA(r)+"T"+qA(e,r.getTimezoneOffset(),t)}function kq(n){return Sq(n)+":"+xi(Math.abs(n%60))}function bS(n){return isNaN(new Date(Date.parse(n)).getTime())}function wS(){return{date:new Date(Date.parse(null)),time:null}}function tu(n){return n&&!isNaN(n.getTime())}function Af(n){return!isNaN(parseInt(n))}function Sq(n){return n>0?"-"+xi(Math.floor(n/60)):"+"+xi(Math.floor((0-n)/60))}function xi(n){return n.toString().padStart(2,"0")}const Cq=/^(https?|data):.*/i,Tq=/^(https):\/\/*/i;function Eq(n){const{formField:e,value:t}=n,{subtype:r}=e;return typeof t!="string"||r===Vn.DATE&&(bS(t)||!Oq(t))||r===Vn.TIME&&WA(t)===null||r===Vn.DATETIME&&(bS(t)||!_q(t))?null:t}function po(n,e){return Array.isArray(e)?e.some(t=>ll(n,t)):!1}function UA(n){const{formField:e,data:t,value:r}=n,{valuesExpression:i}=e;try{if(i)return r;const s=ey(zA(e,t)).map(o=>o.value);return po(r,s)?r:null}catch{return null}}function QA(n){const{formField:e,data:t,value:r}=n,{valuesExpression:i}=e;try{if(i)return r;const s=ey(zA(e,t)).map(o=>o.value);return r.filter(o=>po(o,s))}catch{return[]}}function Aq(n){return Cq.test(n)?n:""}function Mq(n){return Tq.test(n)?n:""}function Dq(n){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","{":"&#123;","}":"&#125;",":":"&#58;",";":"&#59;"};return n.replace(/[&<>"'{};:]/g,t=>e[t])}function iy(n){const{field:e,options:t,loadState:r,onChange:i,value:s}=n;dt(()=>{if(r!==Kr.LOADED)return;const o=t.map(u=>u.value);s&&!po(s,o)&&i({field:e,value:null})},[e,t,i,s,r])}function YA(n){const{field:e,options:t,loadState:r,onChange:i,values:s}=n,o=yl(s||[]);dt(()=>{if(r!==Kr.LOADED)return;const a=t.map(f=>f.value);o.some(f=>!po(f,a))&&i({field:e,value:o.filter(f=>po(f,a))})},[e,t,i,o,r])}const XA="button";function GA(n){const{disabled:e,onFocus:t,onBlur:r,field:i}=n,{action:s="submit"}=i,o=Ei(i.label||"",{debug:!0});return A("div",{class:Wt(XA),children:A("button",{class:"fjs-button",type:s,disabled:e,onFocus:()=>t&&t(),onBlur:()=>r&&r(),children:o})})}GA.config={type:XA,keyed:!1,name:"Button",group:"action",create:(n={})=>({label:"Button",action:"submit",...n})};function Ls(n){const{description:e,id:t}=n,r=Ei(e||"",{debug:!0});return r?A("div",{id:t,class:"fjs-form-field-description",children:r}):null}function sr(n){const{errors:e,id:t}=n;return e.length?A("div",{class:"fjs-form-field-error","aria-live":"polite",id:t,children:A("ul",{children:e.map((r,i)=>A("li",{children:r},i))})}):null}function gn(n){const{id:e,htmlFor:t,label:r,collapseOnEmpty:i=!0,required:s=!1}=n,o=Ei(r||"",{debug:!0});return A("label",{id:e,htmlFor:t,class:wt("fjs-form-field-label",{"fjs-incollapsible-label":!i},n.class),children:[n.children,o,s&&A("span",{class:"fjs-asterix","aria-hidden":!0,children:"*"})]})}const ZA="checkbox";function KA(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:u=!1}=n,{description:f,label:h,validate:p={}}=o,{required:g}=p,m=({target:O})=>{n.onChange({value:O.checked})},y=`${r}-description`,b=`${r}-error-message`;return A("div",{class:wt(Wt(ZA,{errors:t,disabled:e,readonly:a}),{"fjs-checked":u}),children:[A("div",{class:"fjs-inline-label",children:[A("input",{checked:u,class:"fjs-input",disabled:e,readOnly:a,id:r,type:"checkbox",onChange:m,onBlur:()=>i&&i(),onFocus:()=>s&&s(),required:g,"aria-invalid":t.length>0,"aria-describedby":[y,b].join(" ")}),A(gn,{htmlFor:r,label:h,required:g})]}),A(Ls,{id:y,description:f}),A(sr,{id:b,errors:t})]})}KA.config={type:ZA,keyed:!0,name:"Checkbox",group:"selection",emptyValue:!1,sanitizeValue:({value:n})=>n===!0,create:(n={})=>({label:"Checkbox",...n})};const JA="checklist";function eM(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:u=[]}=n,{description:f,label:h,validate:p={}}=o,g=Dt(),{required:m}=p,y=R=>{const $=po(R,u)?u.filter(L=>!ll(L,R)):[...u,R];n.onChange({value:$})},b=R=>{g.current.contains(R.relatedTarget)||i&&i()},O=R=>{g.current.contains(R.relatedTarget)||s&&s()},{loadState:C,options:M}=Ku(o);YA({field:o,loadState:C,options:M,values:u,onChange:n.onChange});const T=`${r}-description`,S=`${r}-error-message`;return A("div",{class:wt(Wt(JA,{errors:t,disabled:e,readonly:a})),ref:g,children:[A(gn,{label:h,required:m}),C==Kr.LOADED&&M.map((R,$)=>{const L=`${r}-${$}`,V=po(R.value,u);return A("div",{className:wt("fjs-inline-label",{"fjs-checked":V}),children:[A("input",{checked:V,class:"fjs-input",disabled:e,readOnly:a,id:L,type:"checkbox",onClick:()=>y(R.value),onBlur:b,onFocus:O,required:m,"aria-invalid":t.length>0,"aria-describedby":[T,S].join(" ")}),A(gn,{htmlFor:L,label:R.label,required:!1})]},R.value)}),A(Ls,{id:T,description:f}),A(sr,{id:S,errors:t})]})}eM.config={type:JA,keyed:!0,name:"Checkbox group",group:"selection",emptyValue:[],sanitizeValue:QA,create:(n={})=>({label:"Checkbox group",...Kh(n)})};const Um=()=>!1,Rq=new Sr([32,36,1]);function tM(n){const e=Dt(Rq.next()),{field:t,indexes:r,onChange:i}=n,s=ft("formFields"),o=ft("viewerCommands",!1),a=ft("formFieldInstanceRegistry",!1),u=ft("pathRegistry"),f=ft("eventBus"),h=ft("form"),{initialData:p,data:g,errors:m,properties:y}=h._getState(),{Element:b,Hidden:O,Column:C}=xn(ml),{formId:M}=xn(Gu),[T,S]=st(!!o),R=s.get(t.type);if(!R)throw new Error(`cannot render field <${t.type}>`);const $=R.config,L=xn(ss),V=Be(()=>u.getValuePath(t,{indexes:r}),[t,r,u]),X=Be(()=>nn(p,V),[p,V]),K=wq(t,y),H=nn(g,V),Y=!y.readOnly&&(y.disabled||t.disabled||!1),re=nq(t.conditional&&t.conditional.hide||null),ve=Be(()=>a?a.syncInstance(e.current,{id:t.id,expressionContextInfo:L,valuePath:V,value:H,indexes:r,hidden:re}):null,[a,t.id,L,V,H,r,re]),Se=ve?a.get(ve):null;dt(()=>{const Ve=e.current;if(a)return()=>a.cleanupInstance(Ve)},[a]),dt(()=>{if(!o)return;const Ve=()=>{S(!0)};return f.on("import.done",Ve),f.on("reset",Ve),()=>{f.off("import.done",Ve),f.off("reset",Ve)}},[f,o]),dt(()=>{const Ve=X&&!ll(X,[]);T&&Ve&&Se&&(S(!1),o.updateFieldInstanceValidation(Se,X))},[Se,T,X,o]);const be=Ye(()=>{const Ve=nn(g,V);T&&(S(!1),o.updateFieldInstanceValidation(Se,Ve)),f.fire("formField.blur",{formField:t})},[g,f,t,Se,T,V,o]),et=Ye(()=>{f.fire("formField.focus",{formField:t})},[f,t]),_t=Ye(Ve=>{S(!1),i({field:t,indexes:r,fieldInstance:Se,...Ve})},[i,t,Se,r]);if(re)return A(O,{field:t});const xt=`${sl(t.id,M,r)}`,Pt=nn(m,[t.id,...Object.values(r||{})])||[],ke=A(R,{...n,disabled:Y,errors:Pt,domId:xt,onChange:Y||K?Um:_t,onBlur:Y||K?Um:be,onFocus:Y||K?Um:et,readonly:K,value:H,fieldInstance:Se});return $.escapeGridRender?ke:A(C,{field:t,class:KV(t),children:A(b,{class:"fjs-element",field:t,children:ke})})}function sy(n){const{Children:e}=xn(ml),{field:t,Empty:r}=n,{id:i}=t,s=ft("repeatRenderManager",!1),o=s&&s.isFieldRepeating(i),a=s.Repeater,u=s.RepeatFooter;return o?A(Pq,{...n,ChildrenRoot:e,Empty:r,Repeater:a,RepeatFooter:u,repeatRenderManager:s}):A(Iq,{...n,ChildrenRoot:e,Empty:r})}function Iq(n){const{ChildrenRoot:e,Empty:t,field:r}=n,{components:i=[]}=r,s=!i.length;return A(e,{class:"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed",field:r,children:[A(u1,{...n}),s?A(t,{field:r}):null]})}function Pq(n){const{ChildrenRoot:e,repeatRenderManager:t,Empty:r,field:i,...s}=n,{components:o=[]}=i,a=st({isCollapsed:!0}),u=t.Repeater,f=t.RepeatFooter;return A(On,{children:[A(e,{class:"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed",field:i,children:[u?A(u,{...s,useSharedState:a,field:i,RowsRenderer:u1}):A(u1,{...s,field:i}),o.length?null:A(r,{field:i})]}),f?A(f,{...s,useSharedState:a,field:i}):null]})}function u1(n){const{field:e,indexes:t}=n,{id:r,verticalAlignment:i="start"}=e,s=ft("formLayouter"),o=ft("formFieldRegistry"),a=s.getRows(r),{Row:u}=xn(ml);return A(On,{children:[" ",a.map(f=>{const{components:h=[]}=f;return h.length?A(u,{row:f,class:"fjs-layout-row cds--row",style:{alignItems:i},children:h.map(p=>{const g=o.get(p);return g?J(tM,{...n,key:p,field:g,indexes:t}):null})},f.id):null})," "]})}function nM(n){const{Empty:e}=xn(ml),t={...n,Empty:e};return A(sy,{...t})}nM.config={type:"default",keyed:!1,label:null,group:null,create:(n={})=>({components:[],...n}),getSubheading:n=>n.id};var _S;function c1(){return c1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},c1.apply(null,arguments)}var Lq=function(e){return J("svg",c1({xmlns:"http://www.w3.org/2000/svg",width:14,height:15,fill:"none",viewBox:"0 0 28 30"},e),_S||(_S=J("path",{fill:"currentColor",fillRule:"evenodd",d:"M19 2H9V0H7v2H2a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-5V0h-2zM7 7V4H2v5h24V4h-5v3h-2V4H9v3zm-5 4v17h24V11z",clipRule:"evenodd"})))};function rM(n="default"){return new Intl.DateTimeFormat(n).formatToParts(new Date(Date.UTC(2020,5,5))).map(t=>{const r=t.value.length;switch(t.type){case"day":return"d".repeat(r);case"month":return"M".repeat(r);case"year":return"y".repeat(r);default:return t.value}}).join("")}function $q(n){let e=rM(n).toLowerCase();return e.includes("mm")||(e=e.replace("m","mm")),e.includes("dd")||(e=e.replace("d","dd")),e}function Nq(n){return Fq(rM(n))}function Fq(n){const e={day:n.includes("dd"),month:n.includes("MM"),year:n.includes("yyyy")};return n=e.day?n.replace("dd","d"):n.replace("d","j"),n=e.month?n.replace("MM","m"):n.replace("M","n"),n=e.year?n.replace("yyyy","Y"):n.replace("yy","y"),n}function oy(n){const{pre:e,post:t,rootRef:r,inputRef:i,children:s,disabled:o,readonly:a,hasErrors:u}=n,f=()=>i&&i.current&&i.current.focus();return A("div",{class:wt("fjs-input-group",{"fjs-disabled":o,"fjs-readonly":a},{hasErrors:u}),ref:r,children:[e&&A("span",{class:"fjs-input-adornment border-right border-radius-left",onClick:f,children:[" ",Jr(e)?A("span",{class:"fjs-input-adornment-text",children:e}):e," "]}),s,t&&A("span",{class:"fjs-input-adornment border-left border-radius-right",onClick:f,children:[" ",Jr(t)?A("span",{class:"fjs-input-adornment-text",children:t}):t," "]})]})}function Bq(n){const{label:e,domId:t,collapseLabelOnEmpty:r,onDateTimeBlur:i,onDateTimeFocus:s,required:o,disabled:a,disallowPassedDates:u,date:f,readonly:h,setDate:p}=n,g=Dt(),m=Dt(),[y,b]=st(null),[O,C]=st(!1),[M,T]=st(!1),S=yl(f);dt(()=>{!y||!y.config||(y.setDate(S,!0),C(!1))},[y,S]),dt(()=>{M&&(vS(y),T(!1))},[y,M]),dt(()=>{let V={allowInput:!0,dateFormat:Nq(),static:!0,clickOpens:!1,minDate:u?"today":"01/01/1900",errorHandler:()=>{}};const X=Yt(g.current,V);b(X);const K=Y=>{!X.calendarContainer.contains(Y.relatedTarget)&&Y.relatedTarget!=g.current&&X.close()},H=Y=>{Y.target.classList.contains("flatpickr-day")&&C(!1)};X.config.onOpen=[()=>X.calendarContainer.addEventListener("focusout",K),()=>X.calendarContainer.addEventListener("mousedown",H)],X.config.onClose=[()=>X.calendarContainer.removeEventListener("focusout",K),()=>X.calendarContainer.removeEventListener("mousedown",H)]},[u]),dt(()=>{!y||!y.config||(y.config.onChange=[V=>p(new Date(V)),()=>C(!1)])},[y,p]);const R=Ye(V=>{y&&(V.code==="Escape"&&y.close(),V.code==="ArrowDown"&&(O?(g.current.dispatchEvent(mS),C(!1),T(!0)):vS(y),V.preventDefault()),V.code==="Enter"&&C(!1))},[y,O]),$=Ye(V=>{!y||m.current.contains(V.relatedTarget)||h||(y.open(),s(V))},[y,h,s]),L=Ye(V=>{V.relatedTarget&&V.relatedTarget.classList.contains("flatpickr-day")||(O&&(g.current.dispatchEvent(mS),C(!1)),i(V))},[O,i]);return A("div",{class:"fjs-datetime-subsection",children:[A(gn,{htmlFor:t,label:e,collapseOnEmpty:r,required:o}),A(oy,{pre:A(Lq,{}),disabled:a,readonly:h,rootRef:m,inputRef:g,children:A("div",{class:"fjs-datepicker",style:{width:"100%"},children:A("input",{ref:g,type:"text",id:t,class:"fjs-input",disabled:a,readOnly:h,placeholder:$q(),autoComplete:"off",onFocus:$,onBlur:L,onKeyDown:R,onMouseDown:()=>!y.isOpen&&!h&&y.open(),onInput:()=>C(!0),"data-input":!0,"aria-describedby":n["aria-describedby"]})})})]})}var OS,xS;function f1(){return f1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f1.apply(null,arguments)}var zq=function(e){return J("svg",f1({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 28 29"},e),OS||(OS=J("path",{fill:"currentColor",d:"M13 14.41 18.59 20 20 18.59l-5-5.01V5h-2z"})),xS||(xS=J("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.222 25.64A14 14 0 1 0 21.778 2.36 14 14 0 0 0 6.222 25.64M7.333 4.023a12 12 0 1 1 13.334 19.955A12 12 0 0 1 7.333 4.022Z",clipRule:"evenodd"})))};const Hq=n=>n,Vq=()=>{};function Jh(n){const{listenerElement:e=window,values:t=[],getLabel:r=Hq,onValueSelected:i=Vq,height:s=235,emptyListMessage:o="No results",initialFocusIndex:a=0}=n,[u,f]=st(!1),[h,p]=st(a),[g,m]=st(!1),y=Dt(),b=Dt(),O=Be(()=>t.length?t[h]:null,[h,t]),C=Ye(T=>{p(S=>Math.min(Math.max(0,S+T),t.length-1))},[t.length]);dt(()=>{h!==0&&(!h||!t.length?p(0):h>=t.length&&p(t.length-1))},[h,t.length]),Wm("ArrowUp",()=>{t.length&&(C(-1),f(!1))},e),Wm("ArrowDown",()=>{t.length&&(C(1),f(!1))},e),Wm("Enter",()=>{O&&i(O)},e),dt(()=>{const T=y.current.children;if(T.length&&!u){const S=T[h];S&&S.scrollIntoView({block:"nearest",inline:"nearest"})}},[h,u]),dt(()=>{m(!0)},[]);const M=(T,S)=>{(!b.current||b.current.x!==T.screenX&&b.current.y!==T.screenY)&&(b.current={x:T.screenX,y:T.screenY},f(!0),p(S))};return A("div",{ref:y,tabIndex:-1,class:"fjs-dropdownlist",onMouseDown:T=>T.preventDefault(),style:{maxHeight:s,scrollBehavior:g?"smooth":"auto"},children:[t.length>0&&t.map((T,S)=>A("div",{class:wt("fjs-dropdownlist-item",{focused:h===S}),onMouseMove:u?void 0:R=>M(R,S),onMouseEnter:u?()=>p(S):void 0,onMouseDown:R=>i(T),children:r(T)},T.value)),!t.length&&A("div",{class:"fjs-dropdownlist-empty",children:o})]})}function qq(n){const{label:e,collapseLabelOnEmpty:t,onDateTimeBlur:r,onDateTimeFocus:i,domId:s,required:o,disabled:a,readonly:u,use24h:f=!1,timeInterval:h,time:p,setTime:g}=n,m=Be(()=>[1,5,10,15,30,60].includes(h)?h:15,[h]),y=Dt(),[b,O]=st(!1),C=Be(()=>m!==1,[m]),[M,T]=st("");dt(()=>{if(p===null){T("");return}const H=p-p%m;T(jm(f,H)),H!=p&&g(H)},[p,g,f,m]);const S=Ye(H=>{const Y=H||M;if(!Y){g(null);return}const re=yS(Y);if(!Ts(re)){T(""),g(null);return}const ve=re-re%m;T(jm(f,ve)),g(ve)},[M,m,f,g]),R=Be(()=>{const Y=Math.floor(1440/m);return[...Array(Y).keys()].map(re=>jm(f,re*m))},[m,f]),$=Be(()=>{if(!R||!m)return null;if(p)return p/m;const H=yS(M);return H?(H-H%m)/m:Math.floor(R.length/2)},[M,p,m,R]),L=H=>{switch(H.key){case"ArrowUp":H.preventDefault();break;case"ArrowDown":C&&O(!0),H.preventDefault();break;case"Escape":C&&O(!1);break;case"Enter":!b&&S();break}},V=H=>{O(!1),S(),r(H)},X=H=>{i(H),!u&&C&&O(!0)},K=H=>{O(!1),S(H)};return A("div",{class:"fjs-datetime-subsection",children:[A(gn,{htmlFor:s,label:e,collapseOnEmpty:t,required:o}),A(oy,{pre:A(zq,{}),inputRef:y,disabled:a,readonly:u,children:A("div",{class:"fjs-timepicker fjs-timepicker-anchor",children:[A("input",{ref:y,type:"text",id:s,class:"fjs-input",value:M,disabled:a,readOnly:u,placeholder:f?"hh:mm":"hh:mm --",autoComplete:"off",onInput:H=>{T(H.target.value),C&&O(!1)},onBlur:V,onFocus:X,onClick:()=>!u&&C&&O(!0),onKeyDown:L,"data-input":!0,"aria-describedby":n["aria-describedby"]}),b&&A(Jh,{values:R,height:150,onValueSelected:K,listenerElement:y.current,initialFocusIndex:$})]})})]})}const iM="datetime";function sM(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,onChange:a,readonly:u,value:f=""}=n,{description:h,id:p,dateLabel:g,timeLabel:m,validate:y={},subtype:b,use24h:O,disallowPassedDates:C,timeInterval:M,timeSerializingFormat:T}=o,{required:S}=y,{formId:R}=xn(Gu),$=Dt(),[L,V]=st(wS()),[X,K]=st(null),H=Be(()=>b===Vn.DATE||b===Vn.DATETIME,[b]),Y=Be(()=>b===Vn.TIME||b===Vn.DATETIME,[b]),re=Ye(de=>{de.relatedTarget&&$.current.contains(de.relatedTarget)||i&&i()},[i]),ve=Ye(de=>{de.relatedTarget&&$.current.contains(de.relatedTarget)||s&&s()},[s]);dt(()=>{let{date:de,time:pe}=wS();switch(b){case Vn.DATE:{de=typeof f=="string"?xe.fromISO(f).toJSDate():new Date(NaN);break}case Vn.TIME:{pe=WA(f);break}case Vn.DATETIME:{de=new Date(Date.parse(f)),pe=tu(de)?60*de.getHours()+de.getMinutes():null;break}}V({date:de,time:pe})},[b,f]);const Se=Ye(({date:de,time:pe})=>{let te=null;b===Vn.DATE&&tu(de)?te=jA(de):b===Vn.TIME&&Af(pe)?te=qA(pe,new Date().getTimezoneOffset(),T):b===Vn.DATETIME&&tu(de)&&Af(pe)&&(te=xq(de,pe,T)),f!==te&&a({value:te,field:o})},[f,o,a,b,T]);dt(()=>{if(X){if(X.refreshOnly)Se(L);else{const de={...L,...X};V(de),Se(de)}K(null)}},[Se,L,X]),dt(()=>{K({refreshOnly:!0})},[T]);const be=Be(()=>S||b!==Vn.DATETIME?t:tu(L.date)&&!Af(L.time)||!tu(L.date)&&Af(L.time)?["Date and time must both be entered.",...t]:t,[S,b,L,t]),et=Ye(de=>{K(pe=>pe?{...pe,date:de}:{date:de})},[]),_t=Ye(de=>{K(pe=>pe?{...pe,time:de}:{time:de})},[]),xt=be.length===0?void 0:`${sl(p,R)}-error-message`,Pt=`${sl(p,R)}-description`,ke={label:g,collapseLabelOnEmpty:!m,onDateTimeBlur:re,onDateTimeFocus:ve,domId:`${r}-date`,required:S,disabled:e,disallowPassedDates:C,date:L.date,readonly:u,setDate:et,"aria-describedby":[Pt,xt].join(" ")},Ve={label:m,collapseLabelOnEmpty:!g,onDateTimeBlur:re,onDateTimeFocus:ve,domId:`${r}-time`,required:S,disabled:e,readonly:u,use24h:O,timeInterval:M,time:L.time,setTime:_t,"aria-describedby":[Pt,xt].join(" ")};return A("div",{class:Wt(iM,{errors:be,disabled:e,readonly:u}),children:[A("div",{class:wt("fjs-vertical-group"),ref:$,children:[H&&A(Bq,{...ke}),Y&&H&&A("div",{class:"fjs-datetime-separator"}),Y&&A(qq,{...Ve})]}),A(Ls,{id:Pt,description:h}),A(sr,{errors:be,id:xt})]})}sM.config={type:iM,keyed:!0,name:"Date time",group:"basic-input",emptyValue:null,sanitizeValue:Eq,create:(n={},e)=>{const t={};return tr(t,YV,Vn.DATE),e&&tr(t,XV,"Date"),{...t,...n}},getSubheading:n=>n.dateLabel||n.timeLabel};function oM(n){const{field:e,domId:t}=n,{label:r,type:i,showOutline:s}=e,{Empty:o}=xn(ml),a={...n,Empty:o};return A("div",{className:wt(Wt(i),"fjs-form-field-grouplike",{"fjs-outlined":s}),role:"group","aria-labelledby":t,children:[A(gn,{id:t,label:r}),A(sy,{...a})]})}oM.config={type:"group",pathed:!0,name:"Group",group:"container",create:(n={})=>({label:"Group",components:[],showOutline:!0,...n})};const aM="iframe",Wq=300;function lM(n){const{field:e,disabled:t,readonly:r,domId:i}=n,{height:s=Wq,label:o,url:a,security:u={}}=e,f=Ei(a,{debug:!0}),h=Be(()=>Mq(f),[f]),p=Ei(o,{debug:!0}),[g,m]=lq(u),[y,b]=st(0);return dt(()=>{b(O=>O+1)},[g,m]),A("div",{class:Wt(aM,{disabled:t,readonly:r}),children:[A(gn,{htmlFor:i,label:p}),!f&&A(kS,{text:"No content to show."}),f&&h&&A("iframe",{src:h,title:p,height:s,class:"fjs-iframe",id:i,sandbox:g,allow:m},"iframe-"+y),f&&!h&&A(kS,{text:"External content couldn't be loaded."})]})}function kS(n){const{text:e="iFrame"}=n;return A("div",{class:"fjs-iframe-placeholder",children:A("p",{class:"fjs-iframe-placeholder-text",children:e})})}lM.config={type:aM,keyed:!1,name:"iFrame",group:"container",create:(n={})=>({label:"iFrame",security:{allowScripts:!0},...n})};var SS;function h1(){return h1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},h1.apply(null,arguments)}var jq=function(e){return J("svg",h1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),SS||(SS=J("path",{fillRule:"evenodd",d:"M45 17a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V20a3 3 0 0 1 3-3zm-9 8.889H18v2.222h18z"})))},CS;function d1(){return d1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},d1.apply(null,arguments)}var Uq=function(e){return J("svg",d1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),CS||(CS=J("path",{d:"M34 18H20a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V20a2 2 0 0 0-2-2m-9 14-5-5 1.41-1.41L25 29.17l7.59-7.59L34 23z"})))},TS;function p1(){return p1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},p1.apply(null,arguments)}var Qq=function(e){return J("svg",p1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),TS||(TS=J("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.35 24.75H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414M14.35 37.05H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414M14.35 12.45H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414m12.007 14.977a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293m0 12.3a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293m0-24.6a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293",clipRule:"evenodd"})))},ES,AS,MS;function g1(){return g1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},g1.apply(null,arguments)}var Yq=function(e){return J("svg",g1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),ES||(ES=J("path",{fillRule:"evenodd",d:"M37.908 13.418h-5.004v-2.354h-1.766v2.354H21.13v-2.354h-1.766v2.354H14.36a2.07 2.07 0 0 0-2.06 2.06v23.549a2.07 2.07 0 0 0 2.06 2.06h6.77v-1.766h-6.358a.707.707 0 0 1-.706-.706V15.89c0-.39.316-.707.706-.707h4.592v2.355h1.766v-2.355h10.008v2.355h1.766v-2.355h4.592a.71.71 0 0 1 .707.707v6.358h1.765v-6.77c0-1.133-.927-2.06-2.06-2.06"})),AS||(AS=J("path",{d:"m35.13 37.603 1.237-1.237-3.468-3.475v-5.926h-1.754v6.654l3.984 3.984Z"})),MS||(MS=J("path",{fillRule:"evenodd",d:"M23.08 36.962a9.678 9.678 0 1 0 17.883-7.408 9.678 9.678 0 0 0-17.882 7.408Zm4.54-10.292a7.924 7.924 0 1 1 8.805 13.177A7.924 7.924 0 0 1 27.62 26.67"})))},DS,RS;function m1(){return m1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},m1.apply(null,arguments)}var Xq=function(e){return J("svg",m1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),DS||(DS=J("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1"})),RS||(RS=J("path",{d:"M11 22a1 1 0 0 1 1-1h19a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H12a1 1 0 0 1-1-1z"})))},IS,PS,LS;function v1(){return v1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},v1.apply(null,arguments)}var Gq=function(e){return J("svg",v1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54},e),IS||(IS=J("rect",{width:24,height:4,x:15,y:17,rx:1})),PS||(PS=J("rect",{width:24,height:4,x:15,y:25,rx:1})),LS||(LS=J("rect",{width:13,height:4,x:15,y:33,rx:1})))},$S;function y1(){return y1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},y1.apply(null,arguments)}var NS=function(e){return J("svg",y1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),$S||($S=J("path",{fill:"#000",fillRule:"evenodd",d:"M4.05 42.132v1.164c0 .693.604 1.254 1.35 1.254h1.35v-2.507h-2.7v.09Zm0-2.328h2.7v-2.328h-2.7zm0-4.656h2.7V32.82h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656v.09h2.7V9.45H5.4c-.746 0-1.35.561-1.35 1.254zm5.4-2.418v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7v-1.253c0-.693-.604-1.254-1.35-1.254zm2.7 4.746h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656v-.09h-2.7v2.508h1.35c.746 0 1.35-.561 1.35-1.254zm-5.4 2.418v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507z",clipRule:"evenodd"})))},FS;function b1(){return b1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},b1.apply(null,arguments)}var Zq=function(e){return J("svg",b1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),FS||(FS=J("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1M35 28.444h7l-3.5 4zM35 26h7l-3.5-4z"})))},BS;function w1(){return w1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},w1.apply(null,arguments)}var Kq=function(e){return J("svg",w1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),BS||(BS=J("path",{d:"M27 22c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0-5c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10m0 18a8 8 0 1 1 0-16 8 8 0 1 1 0 16"})))},zS;function _1(){return _1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_1.apply(null,arguments)}var Jq=function(e){return J("svg",_1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),zS||(zS=J("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1m-12 7h9l-4.5 6z"})))},HS;function O1(){return O1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},O1.apply(null,arguments)}var eW=function(e){return J("svg",O1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),HS||(HS=J("path",{fill:"currentColor",d:"M26.293 16.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 18.414l-3.293 3.293a1 1 0 0 1-1.414-1.414zM9 26h36v2H9zm13.293 7.707 4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 35.586l-3.293-3.293a1 1 0 0 0-1.414 1.414"})))},VS;function x1(){return x1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},x1.apply(null,arguments)}var tW=function(e){return J("svg",x1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),VS||(VS=J("path",{fill:"currentColor",d:"M9 15v2h36v-2zm0 22v2h36v-2zm17.293-17.707a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 21.414l-3.293 3.293a1 1 0 0 1-1.414-1.414zm-4 11.414 4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 32.586l-3.293-3.293a1 1 0 0 0-1.414 1.414"})))},qS;function k1(){return k1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},k1.apply(null,arguments)}var nW=function(e){return J("svg",k1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),qS||(qS=J("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.7 43.296v1.254c0 .746.604 1.35 1.35 1.35h1.275v-1.795q.074.211.075.445v-1.254h-.075V43.2H4.05c.177 0 .347.034.502.096zm2.7-2.507v-2.507H2.7v2.507zm0-5.014v-2.507H2.7v2.507zm0-5.014v-2.507H2.7v2.507zm0-5.015V23.24H2.7v2.507h2.7Zm0-5.014v-2.507H2.7v2.507zm0-5.014V13.21H2.7v2.507zm-2.7-5.014h1.852a1.4 1.4 0 0 1-.502.096h1.275v-.096H5.4V9.45q0 .235-.075.445V8.1H4.05A1.35 1.35 0 0 0 2.7 9.45zm5.175.096h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1-2.7v1.795a1.4 1.4 0 0 1-.075-.445v1.254h.075v.096h1.275a1.4 1.4 0 0 1-.502-.096H51.3V9.45a1.35 1.35 0 0 0-1.35-1.35zm-.075 5.11v2.508h2.7V13.21zm0 5.015v2.507h2.7v-2.507zm0 5.014v2.507h2.7V23.24zm0 5.015v2.507h2.7v-2.507zm0 5.014v2.507h2.7v-2.507zm0 5.014v2.507h2.7v-2.507zm2.7 5.014h-1.852a1.4 1.4 0 0 1 .502-.096h-1.275v.096H48.6v1.254q0-.235.075-.445V45.9h1.275a1.35 1.35 0 0 0 1.35-1.35zm-5.175-.096h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zM16.2 17.55a4.05 4.05 0 0 1 4.05 4.05v1.35A4.05 4.05 0 0 1 16.2 27h-1.35a4.05 4.05 0 0 1-4.05-4.05V21.6a4.05 4.05 0 0 1 4.05-4.05zm0 2.7h-1.35a1.35 1.35 0 0 0-1.35 1.35v1.35c0 .746.604 1.35 1.35 1.35h1.35a1.35 1.35 0 0 0 1.35-1.35V21.6a1.35 1.35 0 0 0-1.35-1.35m27 1.35a4.05 4.05 0 0 0-4.05-4.05H29.7a4.05 4.05 0 0 0-4.05 4.05v1.35A4.05 4.05 0 0 0 29.7 27h9.45a4.05 4.05 0 0 0 4.05-4.05zm-13.5-1.35h9.45c.746 0 1.35.604 1.35 1.35v1.35a1.35 1.35 0 0 1-1.35 1.35H29.7a1.35 1.35 0 0 1-1.35-1.35V21.6c0-.746.604-1.35 1.35-1.35M43.2 37.8a4.05 4.05 0 0 0-4.05-4.05H29.7a4.05 4.05 0 0 0-4.05 4.05v1.35h2.7V37.8c0-.746.604-1.35 1.35-1.35h9.45c.746 0 1.35.604 1.35 1.35v1.35h2.7zm-27-4.05a4.05 4.05 0 0 1 4.05 4.05v1.35h-2.7V37.8a1.35 1.35 0 0 0-1.35-1.35h-1.35a1.35 1.35 0 0 0-1.35 1.35v1.35h-2.7V37.8a4.05 4.05 0 0 1 4.05-4.05z",clipRule:"evenodd"})))},WS;function S1(){return S1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},S1.apply(null,arguments)}var rW=function(e){return J("svg",S1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),WS||(WS=J("path",{d:"M20.58 33.77h-3l-1.18-3.08H11l-1.1 3.08H7l5.27-13.54h2.89zm-5-5.36-1.86-5-1.83 5zM22 20.23h5.41a15.5 15.5 0 0 1 2.4.14 3.4 3.4 0 0 1 1.41.55 3.5 3.5 0 0 1 1 1.14 3 3 0 0 1 .42 1.58 3.26 3.26 0 0 1-1.91 2.94 3.63 3.63 0 0 1 1.91 1.22 3.28 3.28 0 0 1 .66 2 4 4 0 0 1-.43 1.8 3.6 3.6 0 0 1-1.09 1.4 3.9 3.9 0 0 1-1.83.65q-.69.07-3.3.09H22zm2.73 2.25v3.13h3.8a1.8 1.8 0 0 0 1.1-.49 1.4 1.4 0 0 0 .41-1 1.5 1.5 0 0 0-.35-1 1.54 1.54 0 0 0-1-.48c-.27 0-1.05-.05-2.34-.05zm0 5.39v3.62h2.57a11.5 11.5 0 0 0 1.88-.09 1.65 1.65 0 0 0 1-.54 1.6 1.6 0 0 0 .38-1.14 1.75 1.75 0 0 0-.29-1 1.7 1.7 0 0 0-.86-.62 9.3 9.3 0 0 0-2.41-.23zm19.62.92 2.65.84a5.94 5.94 0 0 1-2 3.29A5.74 5.74 0 0 1 41.38 34a5.87 5.87 0 0 1-4.44-1.84 7.1 7.1 0 0 1-1.73-5A7.43 7.43 0 0 1 37 21.87 6 6 0 0 1 41.54 20a5.64 5.64 0 0 1 4 1.47A5.33 5.33 0 0 1 47 24l-2.7.65a2.8 2.8 0 0 0-2.86-2.27A3.09 3.09 0 0 0 39 23.42a5.3 5.3 0 0 0-.93 3.5 5.62 5.62 0 0 0 .93 3.65 3 3 0 0 0 2.4 1.09 2.72 2.72 0 0 0 1.82-.66 4 4 0 0 0 1.13-2.21"})))},jS;function C1(){return C1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},C1.apply(null,arguments)}var iW=function(e){return J("svg",C1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),jS||(jS=J("path",{fill:"currentColor",fillRule:"evenodd",d:"M47.008 12.15c1.625 0 2.942 1.36 2.942 3.039v23.622c0 1.678-1.317 3.039-2.942 3.039H6.992c-1.625 0-2.942-1.36-2.942-3.039V15.189c0-1.678 1.317-3.039 2.942-3.039zm0 2.026H6.992c-.542 0-.98.454-.98 1.013V16.2h-.004v2.7h.003v19.911c0 .56.44 1.013.98 1.013h40.017c.542 0 .98-.453.98-1.013V18.9h.005v-2.7h-.004v-1.011c0-.56-.44-1.013-.98-1.013M14.934 26.055v-3.78h2.194v9.45h-2.194v-3.78h-3.29v3.78H9.45v-9.45h2.194v3.78zm4.388-1.89h2.194v7.56h2.193v-7.56h2.194v-1.89h-6.581zm14.26-1.89h2.193v9.45h-2.194V25.11l-1.645 3.78-1.645-3.78v6.615h-2.194v-9.45h2.194l1.645 3.78zm4.387 0h2.194v7.56h4.387v1.89h-6.581z",clipRule:"evenodd"})))},US;function T1(){return T1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},T1.apply(null,arguments)}var sW=function(e){return J("svg",T1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),US||(US=J("path",{fill:"currentcolor",fillRule:"evenodd",d:"M12.78 16.2v6.75c0 1.619-.635 3.059-1.618 4.05.983.991 1.618 2.431 1.618 4.05v6.75h3.51v2.7h-3.51c-1.289 0-2.34-1.213-2.34-2.7v-6.75c0-1.487-1.051-2.7-2.34-2.7v-2.7c1.289 0 2.34-1.213 2.34-2.7V16.2c0-1.487 1.051-2.7 2.34-2.7h3.51v2.7zm30.78 0v6.75c0 1.487 1.051 2.7 2.34 2.7v2.7c-1.289 0-2.34 1.213-2.34 2.7v6.75c0 1.487-1.051 2.7-2.34 2.7h-3.51v-2.7h3.51v-6.75c0-1.619.635-3.059 1.618-4.05-.983-.991-1.618-2.431-1.618-4.05V16.2h-3.51v-2.7h3.51c1.289 0 2.34 1.213 2.34 2.7M21.8 34.531q.7-.569.959-1.758l1.788-8.34h1.585l.387-1.828h-1.585l.405-1.878h1.585l.387-1.827H25.69q-1.271 0-1.972.569-.681.569-.94 1.758l-.294 1.378H21.34l-.387 1.827h1.142l-1.898 8.841h-1.585l-.387 1.827h1.622q1.272 0 1.953-.569m7.248-7.686-3.797 4.808h2.599l2.12-3.016h.22l.885 3.016h2.599l-1.677-4.36 3.778-4.688h-2.599l-2.12 2.947h-.22l-.885-2.947h-2.599z",clipRule:"evenodd"})))},QS;function E1(){return E1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},E1.apply(null,arguments)}var oW=function(e){return J("svg",E1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),QS||(QS=J("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1m-32 4v10h-2V22z"})))},YS;function A1(){return A1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},A1.apply(null,arguments)}var aW=function(e){return J("svg",A1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),YS||(YS=J("path",{fillRule:"evenodd",d:"M45 13a3 3 0 0 1 3 3v22a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V16a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V16a1 1 0 0 0-1-1m-1.136 15.5.849.849-6.364 6.364-.849-.849zm.264 3.5.849.849-2.828 2.828-.849-.849zM13 19v10h-2V19z"})))},XS;function M1(){return M1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},M1.apply(null,arguments)}var lW=function(e){return J("svg",M1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),XS||(XS=J("path",{fill:"currentColor",fillRule:"evenodd",d:"M45.658 9.45c1.625 0 2.942 1.36 2.942 3.039V22.95h-1.961v-4.383H7.36V41.51c0 .56.44 1.013.98 1.013H27v2.026H8.342c-1.625 0-2.942-1.36-2.942-3.039V12.489c0-1.678 1.317-3.039 2.942-3.039zm0 2.026H8.342c-.542 0-.98.454-.98 1.013v4.052h39.277v-4.052c0-.56-.44-1.013-.98-1.013ZM31.05 35.775A8.77 8.77 0 0 1 39.825 27a8.77 8.77 0 0 1 8.775 8.775 8.77 8.77 0 0 1-8.775 8.775 8.77 8.77 0 0 1-8.775-8.775m12.388-.516h3.097c-.206-2.581-1.858-4.646-4.026-5.678.62 1.548.93 3.613.93 5.678Zm-5.162 2.065c.207 3.303 1.136 4.955 1.549 5.161.413-.206 1.239-1.858 1.445-5.161zm1.446-8.26c-.31.207-1.342 2.272-1.446 6.195h2.994c-.103-3.923-1.135-5.988-1.548-6.194Zm-3.51 6.195c.103-2.065.31-4.13.929-5.678-2.168 1.032-3.82 3.097-4.026 5.678zm0 2.065h-2.89c.515 2.064 1.96 3.82 3.819 4.645-.516-1.342-.826-2.994-.93-4.645Zm7.226 0q-.155 2.632-.929 4.645c1.858-.826 3.304-2.58 3.923-4.645z",clipRule:"evenodd"})))},GS,ZS;function D1(){return D1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},D1.apply(null,arguments)}var uW=function(e){return J("svg",D1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),GS||(GS=J("path",{fillRule:"evenodd",d:"M34.636 21.91A3.818 3.818 0 1 1 27 21.908a3.818 3.818 0 0 1 7.636 0Zm-2 0A1.818 1.818 0 1 1 29 21.908a1.818 1.818 0 0 1 3.636 0Z",clipRule:"evenodd"})),ZS||(ZS=J("path",{fillRule:"evenodd",d:"M15 13a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V15a2 2 0 0 0-2-2zm24 2H15v12.45l4.71-4.709a1.91 1.91 0 0 1 2.702 0l6.695 6.695 2.656-1.77a1.91 1.91 0 0 1 2.411.239L39 32.73zM15 39v-8.754a1 1 0 0 0 .168-.135l5.893-5.893 6.684 6.685a1.91 1.91 0 0 0 2.41.238l2.657-1.77 6.02 6.02q.078.077.168.135V39z",clipRule:"evenodd"})))},KS;function R1(){return R1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},R1.apply(null,arguments)}var cW=function(e){return J("svg",R1({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 54 54"},e),KS||(KS=J("path",{fill:"currentcolor",fillRule:"evenodd",d:"M42.545 12.273A2.455 2.455 0 0 1 45 14.727v24.546a2.455 2.455 0 0 1-2.455 2.454h-31.09A2.455 2.455 0 0 1 9 39.273V14.727a2.455 2.455 0 0 1 2.455-2.454zM27.818 40.09h14.727a.82.82 0 0 0 .819-.818v-4.91H27.818Zm-1.636-5.727v5.727H11.455a.82.82 0 0 1-.819-.818v-4.91zm1.636-1.637h15.546V27H27.818ZM26.182 27v5.727H10.636V27zm1.636-1.636h15.546v-5.728H27.818Zm-1.636-5.728v5.728H10.636v-5.728z",clipRule:"evenodd"})))},JS;function I1(){return I1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},I1.apply(null,arguments)}var fW=function(e){return J("svg",I1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),JS||(JS=J("path",{fill:"currentcolor",fillRule:"evenodd",d:"M17.55 41.175H27v2.362h-9.45a2.37 2.37 0 0 1-2.363-2.362v-28.35a2.37 2.37 0 0 1 2.363-2.363h11.813a1.07 1.07 0 0 1 .826.355l8.27 8.269a1.07 1.07 0 0 1 .353.826v5.907H36.45v-3.544h-7.088A2.37 2.37 0 0 1 27 19.912v-7.087h-9.45zm18.427-21.263-6.614-6.615v6.615zm4.253 18.664 3.308 3.308-1.654 1.653-3.308-3.307a6.35 6.35 0 0 1-3.307.945c-3.308 0-5.906-2.599-5.906-5.906 0-3.308 2.598-5.907 5.906-5.907s5.906 2.6 5.906 5.907a6.35 6.35 0 0 1-.945 3.307m-4.961-6.851c-2.008 0-3.544 1.536-3.544 3.544s1.536 3.543 3.544 3.543 3.544-1.535 3.544-3.543-1.536-3.544-3.544-3.544",clipRule:"evenodd"})))},e2;function P1(){return P1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},P1.apply(null,arguments)}var hW=function(e){return J("svg",P1({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),e2||(e2=J("path",{fill:"currentcolor",fillRule:"evenodd",d:"M17.55 41.175h6.75v2.363h-6.75a2.37 2.37 0 0 1-2.363-2.363v-28.35a2.37 2.37 0 0 1 2.363-2.362h11.813a1.07 1.07 0 0 1 .826.354l8.27 8.269a1.07 1.07 0 0 1 .353.827v7.256H36.45v-4.894h-7.088A2.37 2.37 0 0 1 27 19.913v-7.088h-9.45zm18.427-21.262-6.614-6.616v6.616zm-2.212 10.564-.015-.001h-.015a8.86 8.86 0 0 0-7.926 5.656l-.003.008a.9.9 0 0 0 0 .62l.003.008a8.85 8.85 0 0 0 7.926 5.655l.015.001h.015a8.86 8.86 0 0 0 7.926-5.656l.003-.008a.9.9 0 0 0 0-.62l-.003-.008a8.85 8.85 0 0 0-7.926-5.655M33.75 40.6c-2.456 0-5.088-1.802-6.107-4.151 1.019-2.349 3.651-4.151 6.107-4.151s5.088 1.802 6.107 4.151c-1.019 2.349-3.65 4.151-6.107 4.151m0-7.593a3.443 3.443 0 1 0 0 6.885 3.443 3.443 0 0 0 0-6.886Zm-.316 1.853a1.62 1.62 0 1 1 .632 3.178 1.62 1.62 0 0 1-.632-3.178",clipRule:"evenodd"})))};const dW=n=>({button:jq,checkbox:Uq,checklist:Qq,columns:NS,datetime:Yq,group:NS,iframe:lW,image:uW,number:Zq,expression:sW,radio:Kq,select:Jq,separator:eW,spacer:tW,dynamiclist:nW,taglist:Xq,text:rW,html:iW,textfield:oW,textarea:aW,table:cW,filepicker:fW,documentPreview:hW,default:Gq})[n],uM="image";function cM(n){const{field:e}=n,{alt:t,id:r,source:i}=e,s=dW(e.type),o=Ei(i,{debug:!0}),a=Be(()=>Aq(o),[o]),u=Ei(t,{debug:!0}),{formId:f}=xn(Gu);return A("div",{class:Wt(uM),children:[a&&A("div",{class:"fjs-image-container",children:A("img",{alt:u,src:a,class:"fjs-image",id:sl(r,f)})}),!a&&A("div",{class:"fjs-image-placeholder",children:A("span",{class:"fjs-image-placeholder-inner",children:A(s,{alt:"This is an image placeholder",width:"32",height:"32",viewBox:"0 0 56 56"})})})]})}cM.config={type:uM,keyed:!1,name:"Image view",group:"presentation",create:(n={})=>n,getSubheading:n=>n.alt};function fM(n){const{pre:e,post:t}=n,r=Ei(e,{debug:!0}),i=Ei(t,{debug:!0});return A(oy,{...n,pre:r,post:i})}var t2;function L1(){return L1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},L1.apply(null,arguments)}var ay=function(e){return J("svg",L1({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),t2||(t2=J("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M7.75 1.336 4 6.125.258 1.335 0 1.54l4 5.125L8 1.54Zm0 0",clipRule:"evenodd"})))},n2;function $1(){return $1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$1.apply(null,arguments)}var ly=function(e){return J("svg",$1({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),n2||(n2=J("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M7.75 6.664 4 1.875.258 6.665 0 6.46l4-5.125L8 6.46Zm0 0",clipRule:"evenodd"})))};function pW(n){const e=Yi(n);return e.toString()===e.toFixed(0)?0:e.toFixed().split(".")[1].length||0}function N1(n){return(typeof n=="number"||typeof n=="string")&&n!==""&&!isNaN(Number(n))}function gW(n,e,t,r,i){if(e==="NaN")return!1;e=e.replace(",",".");const s=!e.includes(".")&&(n==="."||n===","),o=!e.includes("-")&&n==="-"&&t===0,a=/^[0-9]$/i.test(n),u=e===void 0?-1:e.indexOf("."),f=typeof i=="number"&&r===0&&u!==-1&&e.includes(".")&&e.split(".")[1].length>=i&&t>u;return(a||i!==0&&s||o)&&!f}function hM(n){return n==null||n===""}const dM="number";function uy(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,value:a,readonly:u}=n,{description:f,label:h,appearance:p={},validate:g={},decimalDigits:m,increment:y}=o,{prefixAdorner:b,suffixAdorner:O}=p,{required:C}=g,M=Dt(),[T,S]=st(a),[R,$]=st(a),L=Ye(pe=>uy.config.sanitizeValue({value:pe,formField:o}),[o]),[V,X]=ny(n.onChange);gS(a)!==T&&V({field:o,value:T});const H=()=>{X&&X(),i&&i()},Y=()=>{s&&s()},re=Ye(pe=>{if(hM(pe)){$(""),S(null);return}if(pe=pe.replaceAll(",","."),pe==="-"){$("-");return}if(isNaN(Number(pe))){$("NaN"),S(null);return}$(pe),S(L(pe))},[L]),Se=gS(a)!=a,be=L(a)===L(T);Se&&!be&&re(a&&a.toString()||"");const et=Be(()=>Yi(y||(m?`1e-${m}`:"1")),[m,y]),_t=()=>{if(u)return;const pe=N1(T)?Yi(T):Yi(0),te=pe.minus(pe.mod(et));re(te.plus(et).toFixed())},xt=()=>{if(u)return;const pe=N1(T)?Yi(T):Yi(0);if(pe.mod(et).cmp(0)===0)re(pe.minus(et).toFixed());else{const Xe=pe.minus(pe.mod(et));re(Xe.toFixed())}},Pt=pe=>{if(R==="NaN"&&(pe.code==="Backspace"||pe.code==="Delete")){re(""),pe.preventDefault();return}if(pe.code==="ArrowUp"){_t(),pe.preventDefault();return}if(pe.code==="ArrowDown"){xt(),pe.preventDefault();return}},ke=pe=>{const te=M.current.selectionStart,Xe=M.current.selectionStart-M.current.selectionEnd,jt=M.current.value;gW(pe.key,jt,te,Xe,m)||pe.preventDefault()},Ve=`${r}-description`,de=`${r}-error-message`;return A("div",{class:Wt(dM,{errors:t,disabled:e,readonly:u}),children:[A(gn,{htmlFor:r,label:h,required:C}),A(fM,{disabled:e,readonly:u,pre:b,post:O,children:A("div",{class:wt("fjs-vertical-group",{"fjs-disabled":e,"fjs-readonly":u},{hasErrors:t.length}),children:[A("input",{ref:M,class:"fjs-input",disabled:e,readOnly:u,id:r,onKeyDown:Pt,onKeyPress:ke,onBlur:H,onFocus:Y,onInput:pe=>re(pe.target.value,!0),onPaste:pe=>R==="NaN"&&pe.preventDefault(),type:"text",autoComplete:"off",step:et,value:R,"aria-describedby":[Ve,de].join(" "),required:C,"aria-invalid":t.length>0}),A("div",{class:wt("fjs-number-arrow-container",{"fjs-disabled":e,"fjs-readonly":u}),children:[A("button",{type:"button",class:"fjs-number-arrow-up","aria-label":"Increment",onClick:()=>_t(),tabIndex:-1,children:A(ly,{})}),A("div",{class:"fjs-number-arrow-separator"}),A("button",{type:"button",class:"fjs-number-arrow-down","aria-label":"Decrement",onClick:()=>xt(),tabIndex:-1,children:A(ay,{})})]})]})}),A(Ls,{id:Ve,description:f}),A(sr,{id:de,errors:t})]})}uy.config={type:dM,keyed:!0,name:"Number",group:"basic-input",emptyValue:null,sanitizeValue:({value:n,formField:e})=>hM(n)||!N1(n)?null:e.serializeToString?n.toString():Number(n),create:(n={})=>({label:"Number",...n})};const pM="radio";function gM(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:u}=n,{description:f,label:h,validate:p={}}=o,g=Dt(),{required:m}=p,y=R=>{n.onChange({value:R})},b=R=>{g.current.contains(R.relatedTarget)||i&&i()},O=R=>{g.current.contains(R.relatedTarget)||s&&s()},{loadState:C,options:M}=Ku(o);iy({field:o,loadState:C,options:M,value:u,onChange:n.onChange});const T=`${r}-description`,S=`${r}-error-message`;return A("div",{class:Wt(pM,{errors:t,disabled:e,readonly:a}),ref:g,children:[A(gn,{label:h,required:m}),C==Kr.LOADED&&M.map((R,$)=>{const L=`${r}-${$}`,V=ll(R.value,u);return A("div",{className:wt("fjs-inline-label",{"fjs-checked":V}),children:[A("input",{checked:V,class:"fjs-input",disabled:e,readOnly:a,name:r,id:L,type:"radio",onClick:()=>y(R.value),onBlur:b,onFocus:O,"aria-describedby":[T,S].join(" "),required:m,"aria-invalid":t.length>0}),A(gn,{htmlFor:L,label:R.label,class:wt({"fjs-checked":V}),required:!1})]},R.value)}),A(Ls,{id:T,description:f}),A(sr,{id:S,errors:t})]})}gM.config={type:pM,keyed:!0,name:"Radio group",group:"selection",emptyValue:null,sanitizeValue:UA,create:(n={})=>({label:"Radio group",...Kh(n)})};var r2;function F1(){return F1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},F1.apply(null,arguments)}var cy=function(e){return J("svg",F1({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),r2||(r2=J("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M4 3.766 7.43.336l.234.234L4.234 4l3.43 3.43-.234.234L4 4.234.57 7.664.336 7.43 3.766 4 .336.57.57.336Zm0 0",clipRule:"evenodd"})))};function mW(n){const{domId:e,disabled:t,errors:r,onBlur:i,onFocus:s,field:o,readonly:a,value:u}=n,[f,h]=st(""),[p,g]=st(!1),[m,y]=st(!0),[b,O]=st(!1),C=Dt(),M=ft("eventBus"),{loadState:T,options:S}=Ku(o);iy({field:o,loadState:T,options:S,value:u,onChange:n.onChange});const R=ty(S),$=Be(()=>u&&R(u),[u,R]);dt(()=>{h($||"")},[$]);const L=Be(()=>T!==Kr.LOADED?[]:!f||!m?S:S.filter(be=>be.label&&be.value&&be.label.toLowerCase().includes(f.toLowerCase())),[f,T,S,m]),V=Ye(be=>{h(be&&be.label||""),n.onChange({value:be&&be.value||null})},[n]),X=Be(()=>{const be={};return be.componentReady=!t&&!a&&T===Kr.LOADED,be.displayCross=be.componentReady&&u!==null&&u!==void 0,be.displayDropdown=!t&&!a&&p&&!b,be},[t,p,b,T,a,u]),K=Ye(be=>{O(!1),g(!p);const et=C.current;p?et.blur():et.focus(),be.preventDefault()},[p]),H=({target:be})=>{O(!1),g(!0),y(!0),h(be.value||""),M.fire("formField.search",{formField:o,value:be.value||""})},Y=Ye(be=>{switch(be.key){case"ArrowUp":be.preventDefault();break;case"ArrowDown":{p||(g(!0),y(!1)),be.preventDefault();break}case"Escape":O(!0);break;case"Enter":b&&O(!1);break}},[p,b]),re=Ye(()=>{O(!1),g(!0),y(!1)},[]),ve=Ye(()=>{O(!1),g(!0),s&&s()},[s]),Se=Ye(()=>{g(!1),h($||""),i&&i()},[i,$]);return A(On,{children:[A("div",{class:wt("fjs-input-group",{disabled:t,readonly:a},{hasErrors:r.length}),children:[A("input",{disabled:t,readOnly:a,class:"fjs-input",ref:C,id:e,onChange:H,type:"text",value:f,placeholder:"Search",autoComplete:"off",onKeyDown:Y,onMouseDown:re,onFocus:ve,onBlur:Se,"aria-describedby":n["aria-describedby"]}),X.displayCross&&A("span",{class:"fjs-select-cross",onMouseDown:be=>{V(null),be.preventDefault()},children:[A(cy,{})," "]}),A("span",{class:"fjs-select-arrow",onMouseDown:be=>K(be),children:X.displayDropdown?A(ly,{}):A(ay,{})})]}),A("div",{class:"fjs-select-anchor",children:X.displayDropdown&&A(Jh,{values:L,getLabel:be=>be.label,onValueSelected:be=>{V(be),g(!1)},listenerElement:C.current})})]})}function vW(n){const{domId:e,disabled:t,errors:r,onBlur:i,onFocus:s,field:o,readonly:a,value:u}=n,[f,h]=st(!1),p=Dt(),g=Dt(),{loadState:m,options:y}=Ku(o);iy({field:o,loadState:m,options:y,value:u,onChange:n.onChange});const b=ty(y),O=Be(()=>u&&b(u),[u,b]),C=Ye(L=>{n.onChange({value:L&&L.value||null})},[n]),M=Be(()=>{const L={};return L.componentReady=!t&&!a&&m===Kr.LOADED,L.displayCross=L.componentReady&&u!==null&&u!==void 0,L.displayDropdown=!t&&!a&&f,L},[t,f,m,a,u]),T=Ye(L=>{const V=g.current;t||!V||(h(!f),f?V.blur():V.focus(),L.preventDefault())},[t,f]),S=Be(()=>u&&vL(y,L=>L.value===u)||0,[y,u]),R=Ye(()=>{a||(h(!0),s&&s())},[s,a]),$=Ye(()=>{a||(h(!1),i&&i())},[i,a]);return A(On,{children:[A("div",{ref:p,class:wt("fjs-input-group",{disabled:t,readonly:a},{hasErrors:r.length}),onFocus:R,onBlur:$,onMouseDown:T,children:[A("div",{class:wt("fjs-select-display",{"fjs-select-placeholder":!u}),id:`${e}-display`,children:O||"Select"}),!t&&A("input",{ref:g,id:e,class:"fjs-select-hidden-input",value:O,onFocus:R,onBlur:$,"aria-describedby":n["aria-describedby"]}),M.displayCross&&A("span",{class:"fjs-select-cross",onMouseDown:L=>{C(null),L.stopPropagation()},children:A(cy,{})}),A("span",{class:"fjs-select-arrow",children:M.displayDropdown?A(ly,{}):A(ay,{})})]}),A("div",{class:"fjs-select-anchor",children:M.displayDropdown&&A(Jh,{values:y,getLabel:L=>L.label,initialFocusIndex:S,onValueSelected:L=>{C(L),h(!1)},listenerElement:p.current})})]})}const mM="select";function vM(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,onChange:a,readonly:u,value:f}=n,{description:h,label:p,searchable:g=!1,validate:m={}}=o,{required:y}=m,b=`${r}-description`,O=`${r}-error-message`,C={domId:r,disabled:e,errors:t,onBlur:i,onFocus:s,field:o,value:f,onChange:a,readonly:u,required:y,"aria-invalid":t.length>0,"aria-describedby":[b,O].join(" ")};return A("div",{class:Wt(mM,{errors:t,disabled:e,readonly:u}),onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),M.stopPropagation())},children:[A(gn,{htmlFor:r,label:p,required:y}),g?A(mW,{...C}):A(vW,{...C}),A(Ls,{id:b,description:h}),A(sr,{id:O,errors:t})]})}vM.config={type:mM,keyed:!0,name:"Select",group:"selection",emptyValue:null,sanitizeValue:UA,create:(n={})=>({label:"Select",...Kh(n)})};const yM="separator";function bM(){return A("div",{class:Wt(yM),children:A("hr",{})})}bM.config={type:yM,keyed:!1,name:"Separator",group:"presentation",create:(n={})=>({...n})};const wM="spacer";function _M(n){const{field:e}=n,{height:t=60}=e;return A("div",{class:Wt(wM),style:{height:t}})}_M.config={type:wM,keyed:!1,name:"Spacer",group:"presentation",create:(n={})=>({height:60,...n})};function OM(n){const{field:e,domId:t,readonly:r}=n,{label:i,type:s,showOutline:o}=e,{Empty:a}=xn(ml),u={...n,Empty:a};return A("div",{className:wt(Wt(s,{readonly:r}),"fjs-form-field-grouplike",{"fjs-outlined":o}),role:"group","aria-labelledby":t,children:[A(gn,{id:t,label:i}),A(sy,{...u})]})}OM.config={type:"dynamiclist",pathed:!0,repeatable:!0,name:"Dynamic list",group:"container",create:(n={})=>({label:"Dynamic list",components:[],showOutline:!0,isRepeating:!0,allowAddRemove:!0,defaultRepetitions:1,...n})};function yW(n){const{className:e,label:t,onSkip:r}=n,i=Ye(s=>{s.key==="Enter"&&(s.preventDefault(),s.stopPropagation(),r())},[r]);return A("a",{href:"#",class:wt("fjs-skip-link",e),onKeyDown:i,children:t})}const xM="taglist";function kM(n){const{disabled:e,errors:t=[],onFocus:r,domId:i,onBlur:s,field:o,readonly:a,value:u}=n,{description:f,label:h,validate:p={}}=o,{required:g}=p,[m,y]=st(""),[b,O]=st(!1),[C,M]=st(!1),T=Dt(),S=Dt(),R=ft("eventBus"),{loadState:$,options:L}=Ku(o),V=yl(u||[]);YA({field:o,loadState:$,options:L,values:V,onChange:n.onChange});const X=ty(L),K=Be(()=>L.length>V.length,[L.length,V.length]),H=Be(()=>{if($!==Kr.LOADED)return[];const te=Xe=>Xe.label.toLowerCase().includes(m.toLowerCase())&&!po(Xe.value,V);return L.filter(te)},[m,L,V,$]),Y=te=>{y(""),V.at(-1)!==te&&n.onChange({value:[...V,te]})},re=te=>{const Xe=V.filter(jt=>!ll(jt,te));n.onChange({value:Xe})},ve=({target:te})=>{M(!1),y(te.value||""),R.fire("formField.search",{formField:o,value:te.value||""})},Se=te=>{switch(te.key){case"ArrowUp":case"ArrowDown":te.preventDefault();break;case"Backspace":!m&&V.length&&re(V[V.length-1]);break;case"Escape":M(!0);break;case"Enter":C&&M(!1);break}},be=te=>{T.current.contains(te.relatedTarget)||s&&s()},et=te=>{T.current.contains(te.relatedTarget)||r&&r()},_t=te=>{a||(O(!1),y("")),be(te)},xt=te=>{a||O(!0),et(te)},Pt=(te,Xe)=>{const{target:jt}=te;re(Xe),jt.closest(".fjs-taglist-tag").nextSibling||S.current.focus()},ke=()=>{S.current.focus()},Ve=Be(()=>!e&&$===Kr.LOADED&&b&&!C,[e,b,C,$]),de=`${i}-description`,pe=`${i}-error-message`;return A("div",{ref:T,class:Wt(xM,{errors:t,disabled:e,readonly:a}),onKeyDown:te=>{te.key==="Enter"&&(te.stopPropagation(),te.preventDefault())},children:[A(gn,{label:h,required:g,htmlFor:i}),!e&&!a&&!!V.length&&A(yW,{className:"fjs-taglist-skip-link",label:"Skip to search",onSkip:ke}),A("div",{class:wt("fjs-taglist",{"fjs-disabled":e,"fjs-readonly":a}),children:[$===Kr.LOADED&&A("div",{class:"fjs-taglist-tags",children:V.map(te=>A("div",{class:wt("fjs-taglist-tag",{"fjs-disabled":e,"fjs-readonly":a}),onMouseDown:Xe=>Xe.preventDefault(),children:[A("span",{class:"fjs-taglist-tag-label",children:X(te)}),!e&&!a&&A("button",{type:"button",title:"Remove tag",class:"fjs-taglist-tag-remove",onFocus:et,onBlur:be,onClick:Xe=>Pt(Xe,te),children:A(cy,{})})]},te))}),A("input",{disabled:e,readOnly:a,class:"fjs-taglist-input",ref:S,id:i,onChange:ve,type:"text",value:m,placeholder:e||a?void 0:"Search",autoComplete:"off",onKeyDown:Se,onMouseDown:()=>M(!1),onFocus:xt,onBlur:_t,"aria-describedby":[de,pe].join(" "),required:g,"aria-invalid":t.length>0})]}),A("div",{class:"fjs-taglist-anchor",children:Ve&&A(Jh,{values:H,getLabel:te=>te.label,onValueSelected:te=>Y(te.value),emptyListMessage:K?"No results":"All values selected",listenerElement:S.current})}),A(Ls,{id:de,description:f}),A(sr,{id:pe,errors:t})]})}kM.config={type:xM,keyed:!0,name:"Tag list",group:"selection",emptyValue:[],sanitizeValue:QA,create:(n={})=>({label:"Tag list",...Kh(n)})};const bW=3,wW=1,_W=["h1","h2","h3","h4","h5","h6","span","em","a","p","div","ul","ol","li","hr","blockquote","img","pre","code","br","strong","table","thead","tbody","tr","th","td"],OW=["align","alt","class","href","id","name","rel","target","src"],xW=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,kW=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,SW=document.createElement("form");function CW(n){const e=new DOMParser().parseFromString(`<!DOCTYPE html>
<html><body><div>${n}`,"text/html");e.normalize();const t=e.body.firstChild;return t?(SM(t),t.innerHTML):""}function SM(n){if(n.nodeType===bW)return;if(n.nodeType!==wW)return n.remove();const e=n.tagName.toLowerCase();if(!_W.includes(e))return n.remove();const t=n.attributes;for(let r=t.length;r--;){const i=t[r],s=i.name,o=s.toLowerCase(),a=i.value.trim();n.removeAttribute(s),TW(e,o,a)&&n.setAttribute(s,a)}e==="a"&&n.getAttribute("target")==="_blank"&&n.getAttribute("rel")!=="noopener"&&n.setAttribute("rel","noopener");for(let r=n.childNodes.length;r--;)SM(n.childNodes[r])}function TW(n,e,t){return!(!OW.includes(e)||(e==="id"||e==="name")&&(t in document||t in SW)||e==="target"&&t!=="_blank"||e==="href"&&!xW.test(t.replace(kW,"")))}const CM="text";function TM(n){const e=ft("form"),{textLinkTarget:t}=e._getState().properties,{field:r,disableLinks:i}=n,{text:s="",strict:o=!1}=r,a=ft("markdownRenderer"),u=ry(s,{debug:!0,strict:o}),f=Be(()=>a.render(u),[a,u]),h=Ye(g=>{const m=CW(g),y=document.createElement("div");return y.innerHTML=m,y.querySelectorAll("a").forEach(O=>{i&&(O.setAttribute("class","fjs-disabled-link"),O.setAttribute("tabIndex","-1")),t&&O.setAttribute("target",t)}),y.innerHTML},[i,t]),p=VA({html:f,transform:h,sanitize:!1,sanitizeStyleTags:!1});return A("div",{class:Wt(CM),dangerouslySetInnerHTML:p})}TM.config={type:CM,keyed:!1,name:"Text view",group:"presentation",create:(n={})=>({text:"# Text",...n}),getSubheading:n=>{JV(n.text)}};const EM="html";function AM(n){const e=ft("form"),{textLinkTarget:t}=e._getState().properties,{field:r,disableLinks:i,domId:s}=n,{content:o="",strict:a=!1}=r,u=`${s}-style-scope`,f=ry(o,{debug:!0,strict:a,sanitizer:Dq}),h=Ye(g=>{const m=document.createElement("div");return m.innerHTML=g,m.querySelectorAll("a").forEach(b=>{i&&(b.setAttribute("class","fjs-disabled-link"),b.setAttribute("tabIndex","-1")),t&&b.setAttribute("target",t)}),uq(m,`.${u}`),m.innerHTML},[i,u,t]),p=VA({html:f,transform:h,sanitize:!0,sanitizeStyleTags:!1});return A("div",{class:wt(Wt(EM),u),dangerouslySetInnerHTML:p})}AM.config={type:EM,keyed:!1,name:"HTML view",group:"presentation",create:(n={})=>({content:"",...n})};const EW="expression";function MM(n){const{field:e,onChange:t,value:r}=n,{computeOn:i,expression:s}=e,o=Zu(s),a=yl(o),u=ft("eventBus"),f=ft("expressionLoopPreventer"),h=Ye(()=>{t&&t({field:e,value:a,shouldNotRecompute:!0})},[e,a,t]);return dt(()=>{i!=="change"||e7.isEqual(a,r)||!f.registerExpressionExecution(this)||h()}),dt(()=>{if(i==="presubmit")return u.on("presubmit",h),()=>u.off("presubmit",h)},[i,h,u]),null}MM.config={type:EW,name:"Expression",group:"basic-input",keyed:!0,emptyValue:null,escapeGridRender:!0,create:(n={})=>({computeOn:"change",...n})};const DM="textfield";function RM(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:u=""}=n,{description:f,label:h,appearance:p={},validate:g={}}=o,{prefixAdorner:m,suffixAdorner:y}=p,{required:b}=g,[O,C]=ny(({target:$})=>{n.onChange({value:$.value})}),M=()=>{C&&C(),i&&i()},T=()=>{s&&s()},S=`${r}-description`,R=`${r}-error-message`;return A("div",{class:Wt(DM,{errors:t,disabled:e,readonly:a}),children:[A(gn,{htmlFor:r,label:h,required:b}),A(fM,{disabled:e,readonly:a,pre:m,post:y,children:A("input",{class:"fjs-input",disabled:e,readOnly:a,id:r,onInput:O,onBlur:M,onFocus:T,type:"text",value:u,"aria-describedby":[S,R].join(" "),required:b,"aria-invalid":t.length>0})}),A(Ls,{id:S,description:f}),A(sr,{id:R,errors:t})]})}RM.config={type:DM,keyed:!0,name:"Text field",group:"basic-input",emptyValue:"",sanitizeValue:({value:n})=>mo(n)||rs(n)||go(n)?"":typeof n=="string"?n.replace(/[\r\n\t]/g," "):String(n),create:(n={})=>({label:"Text field",...n})};const IM="textarea";function PM(n){const{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:u=""}=n,{description:f,label:h,validate:p={}}=o,{required:g}=p,m=Dt(),[y,b]=ny(({target:R})=>{n.onChange({value:R.value})}),O=()=>{b&&b(),i&&i()},C=()=>{s&&s()},M=R=>{y({target:R.target}),Qm(m.current)};WL(()=>{Qm(m.current)},[u]),dt(()=>{Qm(m.current)},[]);const T=`${r}-description`,S=`${r}-error-message`;return A("div",{class:Wt(IM,{errors:t,disabled:e,readonly:a}),children:[A(gn,{htmlFor:r,label:h,required:g}),A("textarea",{class:"fjs-textarea",disabled:e,readOnly:a,id:r,onInput:M,onBlur:O,onFocus:C,value:u,ref:m,"aria-describedby":[T,S].join(" "),required:g,"aria-invalid":t.length>0}),A(Ls,{id:T,description:f}),A(sr,{id:S,errors:t})]})}PM.config={type:IM,keyed:!0,name:"Text area",group:"basic-input",emptyValue:"",sanitizeValue:({value:n})=>mo(n)||rs(n)||go(n)?"":String(n),create:(n={})=>({label:"Text area",...n})};const Qm=n=>{n.style.height="0px";const e=window.getComputedStyle(n),t=()=>{const a=parseInt(e.getPropertyValue("line-height").replace("px",""))||0;return(n.value?n.value.toString().split(`
`).length:0)*a},r=parseInt(e.getPropertyValue("border-top-width"))+parseInt(e.getPropertyValue("padding-top"))+(n.scrollHeight||t())+parseInt(e.getPropertyValue("padding-bottom"))+parseInt(e.getPropertyValue("border-bottom-width")),i=75,s=350,o=Math.max(Math.min(r||0,s),i);n.style.height=`${o}px`,n.style.overflow=r>s?"visible":"hidden"};var i2;function B1(){return B1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},B1.apply(null,arguments)}var AW=function(e){return J("svg",B1({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),i2||(i2=J("path",{fill:"currentcolor",d:"M24.59 16.59 17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10 10-10z"})))},s2;function z1(){return z1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},z1.apply(null,arguments)}var MW=function(e){return J("svg",z1({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),s2||(s2=J("path",{fill:"currentcolor",d:"M16 4 6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14z"})))},o2;function H1(){return H1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},H1.apply(null,arguments)}var DW=function(e){return J("svg",H1({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 32 32"},e),o2||(o2=J("path",{fill:"currentcolor",d:"m20 24-10-8 10-8z"})))},a2;function V1(){return V1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},V1.apply(null,arguments)}var RW=function(e){return J("svg",V1({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 32 32"},e),a2||(a2=J("path",{fill:"currentcolor",d:"m12 8 10 8-10 8z"})))};const LM="table";function $M(n){const{field:e}=n,{columns:t=[],columnsExpression:r,dataSource:i="",rowCount:s,id:o,label:a}=e,[u,f]=st(null),h=IW(r||"",t),p=h.map(({key:S})=>S),g=Zu(i),m=Array.isArray(g)?g.filter(S=>!go(S)||typeof S!="object"):[],y=u===null?m:LW(m,u.key,u.direction),b=Ts(s)?PW(y,s):[y],[O,C]=st(0),M=b[O]||[];dt(()=>{C(0)},[s,u]);function T(S){f(R=>R===null||R.key!==S?{key:S,direction:"asc"}:R.direction==="desc"?null:{key:S,direction:"desc"})}return A("div",{class:Wt(LM),children:[A(gn,{htmlFor:sl(o),label:a}),A("div",{class:wt("fjs-table-middle-container",{"fjs-table-empty":h.length===0}),children:[h.length===0?"Nothing to show.":A("div",{class:"fjs-table-inner-container",children:A("table",{class:"fjs-table",id:sl(o),children:[A("thead",{class:"fjs-table-head",children:A("tr",{class:"fjs-table-tr",children:h.map(({key:S,label:R})=>{const $=R||S;return A("th",{tabIndex:0,class:"fjs-table-th",onClick:()=>{T(S)},onKeyDown:L=>{["Enter","Space"].includes(L.code)&&T(S)},"aria-label":$W(u,S,$),children:A("span",{class:"fjs-table-th-label",children:[$,u!==null&&u.key===S?A(On,{children:u.direction==="asc"?A(MW,{class:"fjs-table-sort-icon-asc"}):A(AW,{class:"fjs-table-sort-icon-desc"})}):null]})},S)})})}),M.length===0?A("tbody",{class:"fjs-table-body",children:A("tr",{class:"fjs-table-tr",children:A("td",{class:"fjs-table-td",colSpan:h.length,children:"Nothing to show."})})}):A("tbody",{class:"fjs-table-body",children:M.map((S,R)=>A("tr",{class:"fjs-table-tr",children:p.map($=>A("td",{class:"fjs-table-td",children:NW(S[$])},$))},R))})]})}),Ts(s)&&b.length>1&&h.length>0?A("nav",{class:"fjs-table-nav",children:[A("span",{class:"fjs-table-nav-label",children:[O+1," of ",b.length]}),A("button",{type:"button",class:"fjs-table-nav-button",onClick:()=>{C(S=>Math.max(S-1,0))},disabled:O===0,"aria-label":"Previous page",children:A(DW,{})}),A("button",{type:"button",class:"fjs-table-nav-button",onClick:()=>{C(S=>Math.min(S+1,b.length-1))},disabled:O>=b.length-1,"aria-label":"Next page",children:A(RW,{})})]}):null]})]})}$M.config={type:LM,keyed:!1,name:"Table",group:"presentation",create:(n={})=>{const{id:e,columnsExpression:t,columns:r,rowCount:i,...s}=n;return y2(e)&&Ts(i)&&(s.rowCount=i),Jr(t)?{...s,id:e,columnsExpression:t}:Array.isArray(r)&&r.every(NM)?{...s,id:e,columns:r}:{...s,label:"Table",rowCount:10,columns:[{label:"ID",key:"id"},{label:"Name",key:"name"},{label:"Date",key:"date"}]}},generateInitialDemoData:n=>{const e=[{id:1,name:"John Doe",date:"31.01.2023"},{id:2,name:"Erika Muller",date:"20.02.2023"},{id:3,name:"Dominic Leaf",date:"11.03.2023"}],t=Object.keys(e[0]),{columns:r,id:i,dataSource:s}=n;if(!(!Array.isArray(r)||r.length===0||s!==`=${i}`)&&r.map(({key:o})=>o).every(o=>t.includes(o)))return e}};function IW(n,e){const t=Zu(n||"");return Array.isArray(t)&&t.every(NM)?t:e}function NM(n){return rs(n)&&Jr(n.label)&&Jr(n.key)}function PW(n,e){return n.reduce((t,r,i)=>(i%e===0?t.push([r]):t[t.length-1].push(r),t),[])}function LW(n,e,t){return[...n].sort((r,i)=>!rs(r)||!rs(i)?0:t==="asc"?r[e]>i[e]?1:-1:r[e]<i[e]?1:-1)}function $W(n,e,t){return n===null||n.key!==e?`Click to sort by ${t} descending`:n.direction==="asc"?"Click to remove sorting":`Click to sort by ${t} ascending`}function NW(n){return n!==null&&typeof n=="object"?JSON.stringify(n):`${n||""}`}const FM="files::",FW="filepicker",BW=new Sr,zW=[];function BM(n){const e=Dt(null),t=ft("fileRegistry",!1),{field:r,onChange:i,domId:s,errors:o=[],disabled:a,readonly:u,value:f=""}=n,{label:h,multiple:p=!1,accept:g="",validate:m={}}=r,y=Ei(g,{debug:!0}),b=yq(p),O=`${s}-error-message`,C=t===null?zW:t.getFiles(f);dt(()=>{f&&t!==null&&!t.hasKey(f)&&i({value:null})},[t,f,i,C.length]),dt(()=>{const S=new DataTransfer;C.forEach(R=>S.items.add(R)),e.current.files=S.files},[C]);const M=S=>{const R=S.target;if((R.files===null||R.files.length===0)&&f!==""){t.deleteFiles(f),i({value:null});return}const $=Array.from(R.files),L=f||BW.nextPrefixed(FM);t.setFiles(L,$),i({value:L})},T=a||u||t===null;return A("div",{className:Wt(FW,{errors:o,disabled:a,readonly:u}),children:[A(gn,{htmlFor:s,label:h,required:m.required}),A("input",{type:"file",className:"fjs-hidden",ref:e,id:s,name:s,disabled:T,multiple:b||void 0,accept:y||void 0,onChange:M,required:m.required}),A("div",{className:"fjs-filepicker-container",children:[A("button",{type:"button",disabled:T,readOnly:u,className:"fjs-button fjs-filepicker-button",onClick:()=>{e.current.click()},children:"Browse"}),A("span",{className:"fjs-form-field-label",children:HW(C)})]}),A(sr,{id:O,errors:o})]})}BM.config={type:"filepicker",keyed:!0,label:"File picker",group:"basic-input",emptyValue:null,create:(n={})=>({...n})};function HW(n){return n.length===0?"No files selected":n.length===1?n[0].name:`${n.length} files selected`}var l2;function q1(){return q1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},q1.apply(null,arguments)}var VW=function(e){return J("svg",q1({xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),l2||(l2=J("path",{fill:"currentColor",d:"M13 12v2H3v-2H2v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2zm0-5-.705-.705-3.795 3.79V1h-1v9.085l-3.795-3.79L3 7l5 5z"})),J("path",{d:"M0 0h16v16H0z",style:{fill:"none"}}))};const Cs="documentPreview";function zM(n){const e=ft("documentEndpointBuilder",!1),{field:t,domId:r}=n,{dataSource:i,maxHeight:s,label:o}=t,a=`${r}-error-message`,u=UW(i||""),f=Ei(o,{debug:!0});return A("div",{class:Wt(Cs),children:[A(gn,{htmlFor:r,label:f}),A("div",{class:`fjs-${Cs}-document-container`,id:r,children:u.map((h,p)=>{const g=GW(()=>e?.buildUrl(h))??h.endpoint;return WW(g)?A(YW,{documentMetadata:h,endpoint:g,maxHeight:s,domId:`${r}-${p}`},h.documentId):null})}),A(sr,{id:a,errors:qW({dataSource:i})})]})}zM.config={type:Cs,keyed:!1,group:"presentation",name:"Document preview",create:(n={})=>({label:"Document preview",...n})};function qW(n){const{dataSource:e}=n;let t=[];return(!Jr(e)||e.length<1)&&t.push("Document reference is not defined."),t}function WW(n){return typeof n=="string"&&URL.canParse(n)}function jW(n){return typeof n=="object"&&n!==null&&"documentId"in n&&"metadata"in n&&typeof n.metadata=="object"&&"fileName"in n.metadata}function UW(n){const e=Zu(n);return Array.isArray(e)?e.filter(jW):[]}function QW(n){const{url:e,onError:t,errorMessageId:r}=n,[i,s]=st(null),[o,a]=st(!1);return dt(()=>{let u=null;return(async()=>{try{const h=await fetch(e);if(!h.ok){a(!0),t();return}const p=await h.blob();u=URL.createObjectURL(p),s(u)}catch{a(!0),t()}})(),()=>{u&&URL.revokeObjectURL(u)}},[e,t]),A(On,{children:[i!==null?A("embed",{src:i,type:"application/pdf",class:`fjs-${Cs}-pdf-viewer`}):null,o?A(sr,{id:r,errors:["Unable to download document"]}):null]})}function YW(n){const{documentMetadata:e,endpoint:t,maxHeight:r,domId:i}=n,{metadata:s}=e,[o,a]=st(!1),u=Dt(null),f=XW(u),h=`fjs-${Cs}-single-document-container`,p=`${i}-error-message`,g="Unable to download document",m=typeof s.contentType=="string";return m&&s.contentType.toLowerCase().startsWith("image/")&&f?A("div",{class:h,style:{maxHeight:r},"aria-describedby":o?p:void 0,children:[A("img",{src:t,alt:s.fileName,class:`fjs-${Cs}-image`}),A(u2,{endpoint:t,fileName:s.fileName,onDownloadError:()=>{a(!0)}}),o?A(sr,{id:p,errors:[g]}):null]}):m&&s.contentType.toLowerCase()==="application/pdf"&&f?A("div",{class:h,style:{maxHeight:r},"aria-describedby":o?p:void 0,children:A(QW,{url:t,fileName:s.fileName,onError:()=>a(!0),errorMessageId:p})}):A("div",{class:wt(`fjs-${Cs}-non-preview-item`,`fjs-${Cs}-single-document-container`),ref:u,"aria-describedby":o?p:void 0,children:[A("div",{children:[A("div",{class:"fjs-document-preview-title",children:s.fileName}),o?A(sr,{id:p,errors:[g]}):null]}),A(u2,{endpoint:t,fileName:s.fileName,onDownloadError:()=>{a(!0)}})]})}function u2(n){const{endpoint:e,fileName:t,onDownloadError:r}=n;return A("button",{type:"button",onClick:async()=>{try{const s=await fetch(e);if(!s.ok){r();return}const o=await s.blob(),a=window.URL.createObjectURL(o),u=document.createElement("a");u.href=a,u.download=t,u.click(),window.URL.revokeObjectURL(a)}catch{r()}},class:wt(`fjs-${Cs}-download-button`),"aria-label":`Download ${t}`,children:A(VW,{})})}function XW(n){const[e,t]=st(!1);return dt(()=>{const r=n.current;if(!r)return;const i=new IntersectionObserver(([s])=>{s.isIntersecting&&t(!0)},{threshold:0});return i.observe(r),()=>{r&&i.unobserve(r)}},[n]),e}const GW=n=>{try{return n()}catch(e){return console.error(e),null}};function HM(){return A("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14.02 5.57",width:"53",height:"21",style:"vertical-align:middle",children:[A("path",{fill:"currentColor",d:"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"}),A("path",{fill:"currentColor",d:"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"})]})}function ZW(n){const{open:e}=n;return e?A("div",{class:"fjs-powered-by-lightbox",style:"z-index: 100; position: fixed; top: 0; left: 0;right: 0; bottom: 0",children:[A("div",{class:"backdrop",style:"width: 100%; height: 100%; background: rgba(40 40 40 / 20%)",onClick:n.onBackdropClick}),A("div",{class:"notice",style:"position: absolute; left: 50%; top: 40%; transform: translate(-50%); width: 260px; padding: 10px; background: white; box-shadow: 0  1px 4px rgba(0 0 0 / 30%); font-family: Helvetica, Arial, sans-serif; font-size: 14px; display: flex; line-height: 1.3",children:[A("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener noreferrer",style:"margin: 15px 20px 15px 10px; align-self: center; color: var(--cds-icon-primary, #404040)",children:A(HM,{})}),A("span",{children:["Web-based tooling for BPMN, DMN, and forms powered by"," ",A("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener noreferrer",children:"bpmn.io"}),"."]})]})]}):null}function KW(n){return A("div",{class:"fjs-powered-by fjs-form-field",style:"text-align: right",children:A("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener noreferrer",class:"fjs-powered-by-link",title:"Powered by bpmn.io",style:"color: var(--cds-text-primary, #404040)",onClick:n.onClick,children:A(HM,{})})})}function JW(n){const[e,t]=st(!1);function r(i){return s=>{s.preventDefault(),t(i)}}return A(On,{children:[b6(A(ZW,{open:e,onBackdropClick:r(!1)}),document.body),A(KW,{onClick:r(!0)})]})}const Ym=()=>{};function ej(n){const e=ft("form"),{schema:t,properties:r}=e._getState(),{ariaLabel:i}=r,{onSubmit:s=Ym,onReset:o=Ym,onChange:a=Ym}=n,u=g=>{g.preventDefault(),s()},f=g=>{g.preventDefault(),o()},h=bq(),p=Be(()=>({data:h,parent:null,this:h,i:[]}),[h]);return A("form",{class:"fjs-form",onSubmit:u,onReset:f,"aria-label":i,noValidate:!0,children:[A(ss.Provider,{value:p,children:A(tM,{field:t,onChange:a})}),A(JW,{})]})}const tj=[RM,PM,uy,sM,MM,BM,KA,eM,gM,vM,kM,TM,cM,$M,AM,zM,_M,bM,oM,OM,lM,GA,nM];class nj{constructor(){this._formFields={},tj.forEach(e=>{this.register(e.config.type,e)})}register(e,t){this._formFields[e]=t}get(e){return this._formFields[e]}}const Qf=(n,e)=>{const t=[];let r=e.get(n);for(;r;)t.push(r.id),r=e.get(r._parent);return t};class VM{constructor(e,t,r){this._formFieldRegistry=e,this._pathRegistry=t,this._eventBus=r}applyConditions(e,t={},r={}){const i=qr(e),{getFilterPath:s=(u,f)=>this._pathRegistry.getValuePath(u,{indexes:f})}=r,o=(u,f,h=!1)=>{const{indexes:p={},expressionIndexes:g=[],scopeData:m=t,parentScopeData:y=null}=f;this._pathRegistry.executeRecursivelyOnFields(u,({field:b,isClosed:O,isRepeatable:C,context:M})=>{const{conditional:T,components:S,id:R}=b,$=vl({this:m,data:t,i:g,parent:y});if(M.isHidden=h||M.isHidden||T&&this._checkHideCondition(T,$),C&&!M.isHidden){M.preventRecursion=!0;const L=this._pathRegistry.getValuePath(b,{indexes:p}),V=nn(t,L);if(!Array.isArray(V)||!V.length||!Array.isArray(S)||!S.length)return;for(let X=0;X<V.length;X++){const K={indexes:{...p,[R]:X},expressionIndexes:[...g,X+1],scopeData:V[X],parentScopeData:m};S.forEach(H=>{o(H,K,M.isHidden)})}}M.isHidden&&C&&(M.preventRecursion=!0,this._eventBus.fire("conditionChecker.remove",{item:{[b.key]:nn(i,s(b,p))}}),this._cleanlyClearDataAtPath(s(b,p),i)),M.isHidden&&O&&(this._eventBus.fire("conditionChecker.remove",{item:{[b.key]:nn(i,s(b,p))}}),this._cleanlyClearDataAtPath(s(b,p),i))})},a=this._formFieldRegistry.getForm();if(!a)throw new Error("form field registry has no form");return o(a,{scopeData:t}),i}check(e,t={}){if(!e||!Jr(e)||!e.startsWith("="))return null;try{return K8(e.slice(1),t)}catch(r){return this._eventBus.fire("error",{error:r}),null}}_checkHideCondition(e,t){return e.hide?this.check(e.hide,t)===!0:!1}_cleanlyClearDataAtPath(e,t){const r=[...e];let i=!1;do{tr(t,r,void 0),r.pop();const s=nn(t,r);i=!!r.length&&(this._isEmptyObject(s)||this._isEmptyArray(s))}while(i)}_isEmptyObject(e){return rs(e)&&!wL(e).length}_isEmptyArray(e){return Array.isArray(e)&&(!e.length||e.every(t=>t===void 0))}}VM.$inject=["formFieldRegistry","pathRegistry","eventBus"];const rj={__init__:["expressionLanguage","templating","conditionChecker"],expressionLanguage:["type",FA],templating:["type",BA],conditionChecker:["type",VM]};class qM{constructor(e){this._computedExpressions=[],e.on("field.updated",({shouldNotRecompute:t})=>{t||this.reset()}),e.on("import.done",this.reset.bind(this)),e.on("reset",this.reset.bind(this))}registerExpressionExecution(e){return this._computedExpressions.includes(e)?!1:(this._computedExpressions.push(e),!0)}reset(){this._computedExpressions=[]}}qM.$inject=["eventBus"];const ij={__init__:["expressionLoopPreventer"],expressionLoopPreventer:["type",qM]};class WM{render(e){return ht.parse(e,{gfm:!0,breaks:!0})}}WM.$inject=[];const sj={__init__:["markdownRenderer"],markdownRenderer:["type",WM]};function Et(n,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=n,this._uid=1,n.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Et.$inject=["eventBus","injector"];Et.prototype.execute=function(n,e){if(!n)throw new Error("command required");this._currentExecution.trigger="execute";const t={command:n,context:e};this._pushAction(t),this._internalExecute(t),this._popAction()};Et.prototype.canExecute=function(n,e){const t={command:n,context:e},r=this._getHandler(n);let i=this._fire(n,"canExecute",t);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(e))}return i};Et.prototype.clear=function(n){this._stack.length=0,this._stackIdx=-1,n!==!1&&this._fire("changed",{trigger:"clear"})};Et.prototype.undo=function(){let n=this._getUndoAction(),e;if(n){for(this._currentExecution.trigger="undo",this._pushAction(n);n&&(this._internalUndo(n),e=this._getUndoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}};Et.prototype.redo=function(){let n=this._getRedoAction(),e;if(n){for(this._currentExecution.trigger="redo",this._pushAction(n);n&&(this._internalExecute(n,!0),e=this._getRedoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}};Et.prototype.register=function(n,e){this._setHandler(n,e)};Et.prototype.registerHandler=function(n,e){if(!n||!e)throw new Error("command and handlerCls must be defined");const t=this._injector.instantiate(e);this.register(n,t)};Et.prototype.canUndo=function(){return!!this._getUndoAction()};Et.prototype.canRedo=function(){return!!this._getRedoAction()};Et.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Et.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Et.prototype._internalUndo=function(n){const e=n.command,t=n.context,r=this._getHandler(e);this._atomicDo(()=>{this._fire(e,"revert",n),r.revert&&this._markDirty(r.revert(t)),this._revertedAction(n),this._fire(e,"reverted",n)})};Et.prototype._fire=function(n,e,t){arguments.length<3&&(t=e,e=null);const r=e?[n+"."+e,e]:[n];let i;t=this._eventBus.createEvent(t);for(const s of r)if(i=this._eventBus.fire("commandStack."+s,t),t.cancelBubble)break;return i};Et.prototype._createId=function(){return this._uid++};Et.prototype._atomicDo=function(n){const e=this._currentExecution;e.atomic=!0;try{n()}finally{e.atomic=!1}};Et.prototype._internalExecute=function(n,e){const t=n.command,r=n.context,i=this._getHandler(t);if(!i)throw new Error("no command handler registered for <"+t+">");this._pushAction(n),e||(this._fire(t,"preExecute",n),i.preExecute&&i.preExecute(r),this._fire(t,"preExecuted",n)),this._atomicDo(()=>{this._fire(t,"execute",n),i.execute&&this._markDirty(i.execute(r)),this._executedAction(n,e),this._fire(t,"executed",n)}),e||(this._fire(t,"postExecute",n),i.postExecute&&i.postExecute(r),this._fire(t,"postExecuted",n)),this._popAction()};Et.prototype._pushAction=function(n){const e=this._currentExecution,t=e.actions,r=t[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+n.command+")");n.id||(n.id=r&&r.id||this._createId()),t.push(n)};Et.prototype._popAction=function(){const n=this._currentExecution,e=n.trigger,t=n.actions,r=n.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:_L("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:e}),n.trigger=null)};Et.prototype._markDirty=function(n){const e=this._currentExecution;n&&(n=mo(n)?n:[n],e.dirty=e.dirty.concat(n))};Et.prototype._executedAction=function(n,e){const t=++this._stackIdx;e||this._stack.splice(t,this._stack.length,n)};Et.prototype._revertedAction=function(n){this._stackIdx--};Et.prototype._getHandler=function(n){return this._handlerMap[n]};Et.prototype._setHandler=function(n,e){if(!n||!e)throw new Error("command and handler required");if(this._handlerMap[n])throw new Error("overriding handler for command <"+n+">");this._handlerMap[n]=e};var oj={commandStack:["type",Et]};class jM{constructor(e,t){this._form=e,this._validator=t}execute(e){const{field:t,value:r,indexes:i}=e,{errors:s}=this._form._getState();e.oldErrors=qr(s);const o=this._validator.validateField(t,r),a=tr(s,[t.id,...Object.values(i||{})],o.length?o:void 0);this._form._setState({errors:a})}revert(e){this._form._setState({errors:e.oldErrors})}}jM.$inject=["form","validator"];class UM{constructor(e,t){this._form=e,this._validator=t}execute(e){const{fieldInstance:t,value:r}=e,{id:i,indexes:s}=t,{errors:o}=this._form._getState();e.oldErrors=qr(o);const a=this._validator.validateFieldInstance(t,r),u=tr(o,[i,...Object.values(s||{})],a.length?a:void 0);this._form._setState({errors:u})}revert(e){this._form._setState({errors:e.oldErrors})}}UM.$inject=["form","validator"];class QM{constructor(e,t){this._commandStack=e,t.on("form.init",()=>{this.registerHandlers()})}registerHandlers(){Object.entries(this.getHandlers()).forEach(([e,t])=>{this._commandStack.registerHandler(e,t)})}getHandlers(){return{"formField.validation.update":jM,"formFieldInstance.validation.update":UM}}updateFieldValidation(e,t,r){const i={field:e,value:t,indexes:r};this._commandStack.execute("formField.validation.update",i)}updateFieldInstanceValidation(e,t){const r={fieldInstance:e,value:t};this._commandStack.execute("formFieldInstance.validation.update",r)}}QM.$inject=["commandStack","eventBus"];const aj={__depends__:[oj],__init__:["viewerCommands"],viewerCommands:["type",QM]};var c2;function W1(){return W1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},W1.apply(null,arguments)}var lj=function(e){return J("svg",W1({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),c2||(c2=J("path",{fill:"currentColor",d:"M2 9h5.5v3.086l-1.293-1.293-.707.707L8 14l2.5-2.5-.707-.707L8.5 12.086V9H14V8H2zm11-7H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1m0 3H3V3h10z"})))},f2;function j1(){return j1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},j1.apply(null,arguments)}var uj=function(e){return J("svg",j1({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),f2||(f2=J("path",{fill:"currentColor",d:"M13 10H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1m0 3H3v-2h10zM8.5 3.914l1.293 1.293.707-.707L8 2 5.5 4.5l.707.707L7.5 3.914V7H2v1h12V7H8.5z"})))},h2,d2;function U1(){return U1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},U1.apply(null,arguments)}var cj=function(e){return J("svg",U1({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),h2||(h2=J("path",{fill:"currentColor",d:"M8 2c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6m0-1C4.15 1 1 4.15 1 8s3.15 7 7 7 7-3.15 7-7-3.15-7-7-7"})),d2||(d2=J("path",{fill:"currentColor",d:"M12 7.5H8.5V4h-1v3.5H4v1h3.5V12h1V8.5H12z"})))},p2;function Q1(){return Q1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Q1.apply(null,arguments)}var fj=function(e){return J("svg",Q1({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),p2||(p2=J("path",{fill:"currentColor",d:"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"})))};class YM{constructor(e,t,r,i,s){this._form=e,this._formFields=t,this._formFieldRegistry=r,this._pathRegistry=i,this._eventBus=s,this.Repeater=this.Repeater.bind(this),this.RepeatFooter=this.RepeatFooter.bind(this)}isFieldRepeating(e){if(!e)return!1;const t=this._formFieldRegistry.get(e);return this._formFields.get(t.type).config.repeatable&&t.isRepeating}Repeater(e){const{RowsRenderer:t,indexes:r,useSharedState:i,...s}=e,[o]=i,{data:a}=this._form._getState(),u=e.field,f=this._pathRegistry.getValuePath(u,{indexes:r}),h=nn(a,f)||[],p=this._getNonCollapsedItems(u),m=!u.disableCollapse&&h.length>p&&o.isCollapsed,y=u.components&&u.components.length>0,b=u.allowAddRemove&&y,O=M=>{const T=h.slice(),S=T.splice(M,1)[0];this._eventBus.fire("repeatRenderManager.remove",{dataPath:f,index:M,item:S}),e.onChange({field:u,value:T,indexes:r})},C=xn(ss);return A(On,{children:h.map((M,T)=>A("div",{class:wt({"fjs-repeat-row-collapsed":m?T>=p:!1}),children:A(hj,{itemIndex:T,itemValue:M,parentExpressionContextInfo:C,repeaterField:u,RowsRenderer:t,indexes:r,onDeleteItem:O,showRemove:b,...s})},T))})}RepeatFooter(e){const t=Dt(null),{useSharedState:r,indexes:i,field:s,readonly:o,disabled:a}=e,[u,f]=r,{data:h}=this._form._getState(),p=this._pathRegistry.getValuePath(s,{indexes:i}),g=nn(h,p)||[],m=this._getNonCollapsedItems(s),y=!s.disableCollapse&&g.length>m,b=y&&u.isCollapsed,O=s.components&&s.components.length>0,C=s.allowAddRemove&&O,M=()=>{f(R=>({...R,isCollapsed:!b}))},T=Dt(!1),S=()=>{const R=g.slice(),$=this._form._getInitializedFieldData(this._form._getState().data,{container:s,indexes:{...i,[s.id]:R.length}});R.push($),T.current=!0,this._eventBus.fire("repeatRenderManager.add",{dataPath:p,index:R.length-1,item:$}),e.onChange({value:R}),f(L=>({...L,isCollapsed:!1}))};return mq(t,[g.length],{align:"bottom",behavior:"auto",offset:20},[T]),A("div",{className:wt("fjs-repeat-render-footer",{"fjs-remove-allowed":s.allowAddRemove}),children:[C?A("button",{type:"button",readOnly:o,disabled:a||o,class:"fjs-repeat-render-add",ref:t,onClick:S,children:A(On,{children:[A(cj,{})," ","Add new"]})}):null,y?A("button",{type:"button",class:"fjs-repeat-render-collapse",onClick:M,children:b?A(On,{children:[A(lj,{})," ",`Expand all (${g.length-1})`]}):A(On,{children:[A(uj,{})," ","Collapse"]})}):null]})}_getNonCollapsedItems(e){const{nonCollapsedItems:r}=e;return r||5}}const hj=n=>{const{itemIndex:e,itemValue:t,parentExpressionContextInfo:r,repeaterField:i,RowsRenderer:s,indexes:o,onDeleteItem:a,showRemove:u,...f}=n,h=Be(()=>({...f,indexes:{...o||{},[i.id]:e}}),[e,o,i.id,f]),p=Be(()=>({data:r.data,this:t,parent:vl({...r,data:r.this}),i:[...r.i,e+1]}),[e,r,t]);return u?A("div",{class:"fjs-repeat-row-container",children:[A("div",{class:"fjs-repeat-row-rows",children:A(ss.Provider,{value:p,children:A(s,{...h})})}),A("button",{type:"button",class:"fjs-repeat-row-remove","aria-label":`Remove list item ${e+1}`,onClick:()=>a(e),children:A("div",{class:"fjs-repeat-row-remove-icon-container",children:A(fj,{})})})]}):A(ss.Provider,{value:p,children:A(s,{...h})})};YM.$inject=["form","formFields","formFieldRegistry","pathRegistry","eventBus"];const dj={__init__:["repeatRenderManager"],repeatRenderManager:["type",YM]};var kh="__fn",XM=1e3,pj=Array.prototype.slice;function or(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}or.prototype.on=function(n,e,t,r){if(n=mo(n)?n:[n],Sh(e)&&(r=t,t=e,e=XM),!Ts(e))throw new Error("priority must be a number");var i=t;r&&(i=kL(t,r),i[kh]=t[kh]||t);var s=this;n.forEach(function(o){s._addListener(o,{priority:e,callback:i,next:null})})};or.prototype.once=function(n,e,t,r){var i=this;if(Sh(e)&&(r=t,t=e,e=XM),!Ts(e))throw new Error("priority must be a number");function s(){s.__isTomb=!0;var o=t.apply(r,arguments);return i.off(n,s),o}s[kh]=t,this.on(n,e,s)};or.prototype.off=function(n,e){n=mo(n)?n:[n];var t=this;n.forEach(function(r){t._removeListener(r,e)})};or.prototype.createEvent=function(n){var e=new Ju;return e.init(n),e};or.prototype.fire=function(n,e){var t,r,i,s;if(s=pj.call(arguments),typeof n=="object"&&(e=n,n=e.type),!n)throw new Error("no event type specified");if(r=this._listeners[n],!!r){e instanceof Ju?t=e:t=this.createEvent(e),s[0]=t;var o=t.type;n!==o&&(t.type=n);try{i=this._invokeListeners(t,s,r)}finally{n!==o&&(t.type=o)}return i===void 0&&t.defaultPrevented&&(i=!1),i}};or.prototype.handleError=function(n){return this.fire("error",{error:n})===!1};or.prototype._destroy=function(){this._listeners={}};or.prototype._invokeListeners=function(n,e,t){for(var r;t&&!n.cancelBubble;)r=this._invokeListener(n,e,t),t=t.next;return r};or.prototype._invokeListener=function(n,e,t){var r;if(t.callback.__isTomb)return r;try{r=gj(t.callback,e),r!==void 0&&(n.returnValue=r,n.stopPropagation()),r===!1&&n.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};or.prototype._addListener=function(n,e){var t=this._getListeners(n),r;if(!t){this._setListeners(n,e);return}for(;t;){if(t.priority<e.priority){e.next=t,r?r.next=e:this._setListeners(n,e);return}r=t,t=t.next}r.next=e};or.prototype._getListeners=function(n){return this._listeners[n]};or.prototype._setListeners=function(n,e){this._listeners[n]=e};or.prototype._removeListener=function(n,e){var t=this._getListeners(n),r,i,s;if(!e){this._setListeners(n,null);return}for(;t;)r=t.next,s=t.callback,(s===e||s[kh]===e)&&(i?i.next=r:this._setListeners(n,r)),i=t,t=r};function Ju(){}Ju.prototype.stopPropagation=function(){this.cancelBubble=!0};Ju.prototype.preventDefault=function(){this.defaultPrevented=!0};Ju.prototype.init=function(n){SL(this,n||{})};function gj(n,e){return n.apply(null,e)}const mj=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,vj=/(\+|00)(297|93|244|1264|358|355|376|971|54|374|1684|1268|61|43|994|257|32|229|226|880|359|973|1242|387|590|375|501|1441|591|55|1246|673|975|267|236|1|61|41|56|86|225|237|243|242|682|57|269|238|506|53|5999|61|1345|357|420|49|253|1767|45|1809|1829|1849|213|593|20|291|212|34|372|251|358|679|500|33|298|691|241|44|995|44|233|350|224|590|220|245|240|30|1473|299|502|594|1671|592|852|504|385|509|36|62|44|91|246|353|98|964|354|972|39|1876|44|962|81|76|77|254|996|855|686|1869|82|383|965|856|961|231|218|1758|423|94|266|370|352|371|853|590|212|377|373|261|960|52|692|389|223|356|95|382|976|1670|258|222|1664|596|230|265|60|262|264|687|227|672|234|505|683|31|47|977|674|64|968|92|507|64|51|63|680|675|48|1787|1939|850|351|595|970|689|974|262|40|7|250|966|249|221|65|500|4779|677|232|503|378|252|508|381|211|239|597|421|386|46|268|1721|248|963|1649|235|228|66|992|690|993|670|676|1868|216|90|688|886|255|256|380|598|1|998|3906698|379|1784|58|1284|1340|84|678|681|685|967|27|260|263)(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{4,20}$/,GM=["min","max","minLength","maxLength"];class ZM{constructor(e,t,r,i){this._expressionLanguage=e,this._conditionChecker=t,this._form=r,this._formFieldRegistry=i}validateField(e,t){const{type:r,validate:i}=e;let s=[];if(r==="number"&&(s=[...s,...g2(e,t)]),!i)return s;const o=bj(i,this._expressionLanguage,this._conditionChecker,this._form);return s=[...s,...m2(e,o,t)],s}validateFieldInstance(e,t){const{id:r,expressionContextInfo:i}=e,s=this._formFieldRegistry.get(r);if(!s)return[];const{type:o,validate:a}=s;let u=[];if(o==="number"&&(u=[...u,...g2(s,t)]),!a)return u;const f=yj(a,this._expressionLanguage,i);return u=[...u,...m2(s,f,t)],u}}ZM.$inject=["expressionLanguage","conditionChecker","form","formFieldRegistry"];function g2(n,e){const{decimalDigits:t,increment:r}=n,i=[];if(e==="NaN")i.push("Value is not a number.");else if(e&&(t>=0&&pW(e)>t&&i.push("Value is expected to "+(t===0?"be an integer":`have at most ${t} decimal digit${t>1?"s":""}`)+"."),r)){const s=Yi(e),o=Yi(r),a=s.mod(o);if(a.cmp(0)!==0){const u=s.minus(a),f=u.plus(o);i.push(`Please select a valid value, the two nearest valid values are ${u} and ${f}.`)}}return i}function m2(n,e,t){const r=[];if(e.pattern&&t&&!new RegExp(e.pattern).test(t)&&r.push(`Field must match pattern ${e.pattern}.`),e.required){const i=n.type==="checkbox"&&t===!1,s=go(t)||t==="",o=Array.isArray(t)&&t.length===0;(i||s||o)&&r.push("Field is required.")}return"min"in e&&(t||t===0)&&t<e.min&&r.push(`Field must have minimum value of ${e.min}.`),"max"in e&&(t||t===0)&&t>e.max&&r.push(`Field must have maximum value of ${e.max}.`),"minLength"in e&&t&&t.trim().length<e.minLength&&r.push(`Field must have minimum length of ${e.minLength}.`),"maxLength"in e&&t&&t.trim().length>e.maxLength&&r.push(`Field must have maximum length of ${e.maxLength}.`),"validationType"in e&&t&&e.validationType==="phone"&&!vj.test(t)&&r.push("Field must be a valid  international phone number. (e.g. +4930664040900)"),"validationType"in e&&t&&e.validationType==="email"&&!mj.test(t)&&r.push("Field must be a valid email."),r}function yj(n,e,t){const r={...n};return GM.forEach(i=>{const s=i.split("."),o=nn(r,s),a=Jv(e,o,t);tr(r,s,a===null?void 0:a)}),r}function bj(n,e,t,r){const i={...n};return GM.forEach(s=>{const o=s.split("."),a=nn(i,o);if(!e||!e.isExpression(a))return a;const{initialData:u,data:f}=r._getState(),h=t?t.applyConditions(f,f):f,p={...u,...h},g=e.evaluate(a,p);g&&tr(i,o,g)}),i}class KM{constructor(e,t,r,i){this._formFieldRegistry=e,this._pathRegistry=t,this._fieldFactory=r,this._formLayouter=i}importSchema(e){const t=[];try{this._cleanup();const r=this.importFormField(qr(e));return this._formLayouter.calculateLayout(qr(r)),{schema:r,warnings:t}}catch(r){throw this._cleanup(),r.warnings=t,r}}_cleanup(){this._formLayouter.clear(),this._formFieldRegistry.clear(),this._pathRegistry.clear()}importFormField(e,t,r){const{components:i}=e;let s,o;t&&(s=this._formFieldRegistry.get(t)),o=s?[...s._path,"components",r]:[];const a=this._fieldFactory.create({...e,_path:o,_parent:t},!1);return this._formFieldRegistry.add(a),i&&(a.components=this.importFormFields(i,a.id)),a}importFormFields(e,t){return e.map((r,i)=>this.importFormField(r,t,i))}}KM.$inject=["formFieldRegistry","pathRegistry","fieldFactory","formLayouter"];class JM{constructor(e,t,r){this._formFieldRegistry=e,this._pathRegistry=t,this._formFields=r}create(e,t=!0){const{id:r,type:i,key:s,path:o,_parent:a}=e,u=this._formFields.get(i);if(!u)throw new Error(`form field of type <${i}> not supported`);const{config:f}=u;if(!f)throw new Error(`form field of type <${i}> has no config`);if(r&&this._formFieldRegistry._ids.assigned(r))throw new Error(`form field with id <${r}> already exists`);const h=a&&this._formFieldRegistry.get(a),p=h&&this._pathRegistry.getValuePath(h)||[],g=Qf(a,this._formFieldRegistry);if(f.keyed&&s&&!this._pathRegistry.canClaimPath([...p,...s.split(".")],{isClosed:!0,knownAncestorIds:g}))throw new Error(`binding path '${[...p,s].join(".")}' is already claimed`);if(f.pathed&&o&&!this._pathRegistry.canClaimPath([...p,...o.split(".")],{isRepeatable:f.repeatable,knownAncestorIds:g}))throw new Error(`binding path '${[...p,...o.split(".")].join(".")}' is already claimed`);const m=f.create({...f.label?{label:f.label}:{},...e},t);return this._ensureId(m),f.keyed&&(this._ensureKey(m),this._pathRegistry.claimPath(this._pathRegistry.getValuePath(m),{isClosed:!0,claimerId:m.id,knownAncestorIds:Qf(a,this._formFieldRegistry)})),f.pathed&&(f.repeatable&&this._enforceDefaultPath(m),this._pathRegistry.claimPath(this._pathRegistry.getValuePath(m),{isRepeatable:f.repeatable,claimerId:m.id,knownAncestorIds:Qf(a,this._formFieldRegistry)})),m}_ensureId(e){if(e.id){this._formFieldRegistry._ids.claim(e.id,e);return}let t="Field";e.type==="default"&&(t="Form"),e.id=this._formFieldRegistry._ids.nextPrefixed(`${t}_`,e)}_ensureKey(e){e.key||(e.key=this._getUniqueKeyPath(e))}_enforceDefaultPath(e){e.path||(e.path=this._getUniqueKeyPath(e))}_getUniqueKeyPath(e){let t;const r=this._formFieldRegistry.get(e._parent);do t=Math.random().toString(36).substring(7);while(r&&r.components.some(i=>i.key===t));return`${e.type}_${t}`}}JM.$inject=["formFieldRegistry","pathRegistry","formFields"];class eD{constructor(e,t,r){this._formFieldRegistry=e,this._formFields=t,this._injector=r,this._dataPaths=[]}canClaimPath(e,t={}){const{isClosed:r=!1,isRepeatable:i=!1,skipAncestryCheck:s=!1,claimerId:o=null,knownAncestorIds:a=[]}=t;let u={children:this._dataPaths};for(const f of e){if(u=Mf(u,f),!u)return!0;if(u.isRepeatable&&!s){if(!(o||a.length))throw new Error("cannot claim a path that contains a repeater without specifying a claimerId or knownAncestorIds");if(!(a.includes(u.repeaterId)||o&&Qf(o,this._formFieldRegistry).includes(u.repeaterId)))return!1}if(u.children===null)return!1}return!(r||i)}claimPath(e,t={}){const{isClosed:r=!1,isRepeatable:i=!1,claimerId:s=null,knownAncestorIds:o=[]}=t;if(!this.canClaimPath(e,{isClosed:r,isRepeatable:i,claimerId:s,knownAncestorIds:o}))throw new Error(`cannot claim path '${e.join(".")}'`);let a={children:this._dataPaths};for(const u of e){let f=Mf(a,u);f?f.claimCount++:(f={segment:u,claimCount:1,children:[]},a.children.push(f)),a=f}r&&(a.children=null),i&&(a.isRepeatable=!0,a.repeaterId=s)}unclaimPath(e){let t={children:this._dataPaths};for(const r of e){const i=Mf(t,r);if(!i)throw new Error(`no open path found for '${e.join(".")}'`);t=i}t={children:this._dataPaths};for(const r of e){const i=Mf(t,r);if(i.claimCount--,i.claimCount===0){t.children.splice(t.children.indexOf(i),1);break}t=i}}executeRecursivelyOnFields(e,t,r={}){let i=!0;const s=this._formFields.get(e.type).config;if(s.keyed){const o=t({field:e,isClosed:!0,isRepeatable:!1,context:r});return i&&o}else if(s.pathed){const o=t({field:e,isClosed:!1,isRepeatable:s.repeatable,context:r});i=i&&o}if(i===!1||r.preventRecursion)return i;if(Array.isArray(e.components))for(const o of e.components){const a=this.executeRecursivelyOnFields(o,t,qr(r));if(i=i&&a,i===!1)return i}return i}getValuePath(e,t={}){const{replacements:r={},indexes:i=null,cutoffNode:s=null}=t;let o=[];const a=Object.prototype.hasOwnProperty.call(r,e.id),u=this._formFields.get(e.type).config;if(a){const f=r[e.id];if(f==null||f==="")o=[];else if(typeof f=="string")o=f.split(".");else if(Array.isArray(f))o=f;else throw new Error(`replacements for field ${e.id} must be a string, array or null/undefined`)}else u.keyed?o=e.key.split("."):u.pathed&&e.path&&(o=e.path.split("."));if(i&&(o=this._addIndexes(o,e,i)),e._parent&&e._parent!==s){const f=this._formFieldRegistry.get(e._parent);return[...this.getValuePath(f,t)||[],...o]}return o}clear(){this._dataPaths=[]}_addIndexes(e,t,r){const i=this._injector.get("repeatRenderManager",!1);return i&&i.isFieldRepeating(t._parent)?[r[t._parent],...e]:e}}const Mf=(n,e)=>mo(n.children)&&n.children.find(t=>t.segment===e)||null;eD.$inject=["formFieldRegistry","formFields","injector"];class tD{constructor(e){this._rows=[],this._ids=new Sr([32,36,1]),this._eventBus=e}addRow(e,t){let r=this._rows.find(i=>i.formFieldId===e);r||(r={formFieldId:e,rows:[]},this._rows.push(r)),r.rows.push(t)}getRow(e){return v2(this._rows).find(r=>r.id===e)}getRowForField(e){return v2(this._rows).find(t=>{const{components:r}=t;return r.includes(e.id)})}getRows(e){const t=this._rows.find(r=>e===r.formFieldId);return t?t.rows:[]}nextRowId(){return this._ids.nextPrefixed("Row_")}calculateLayout(e){const{type:t,components:r}=e;if(!["default","group","dynamiclist"].includes(t)||!r)return;const i=wj(r,this._ids);Object.entries(i).forEach(([s,o])=>{this.addRow(e.id,{id:s,components:o.map(a=>a.id)})}),r.forEach(s=>this.calculateLayout(s)),this._eventBus.fire("form.layoutCalculated",{rows:this._rows})}clear(){this._rows=[],this._ids.clear(),this._eventBus.fire("form.layoutCleared")}}tD.$inject=["eventBus"];function wj(n,e){return _2(n,t=>{const{layout:r}=t;return!r||!r.row?e.nextPrefixed("Row_"):r.row})}function v2(n){return n.map(e=>e.rows).flat()}class nD{constructor(e){this._eventBus=e,this._formFields={},e.on("form.clear",()=>this.clear()),this._ids=new Sr([32,36,1])}add(e){const{id:t}=e;if(this._formFields[t])throw new Error(`form field with ID ${t} already exists`);this._eventBus.fire("formField.add",{formField:e}),this._formFields[t]=e}remove(e){const{id:t}=e;this._formFields[t]&&(this._eventBus.fire("formField.remove",{formField:e}),delete this._formFields[t])}get(e){return this._formFields[e]}getAll(){return Object.values(this._formFields)}getForm(){return this.getAll().find(e=>e.type==="default")}forEach(e){this.getAll().forEach(t=>e(t))}clear(){this._formFields={},this._ids.clear()}}nD.$inject=["eventBus"];class rD{constructor(e,t,r){this._eventBus=e,this._formFieldRegistry=t,this._formFields=r,this._formFieldInstances={},e.on("form.clear",()=>this.clear())}syncInstance(e,t){const{hidden:r,...i}=t,s=!r,o=this._formFieldInstances[e];return s&&!o?(this._formFieldInstances[e]={instanceId:e,...i},this._eventBus.fire("formFieldInstance.added",{instanceId:e})):!s&&o?(delete this._formFieldInstances[e],this._eventBus.fire("formFieldInstance.removed",{instanceId:e})):s&&o&&Object.keys(i).some(u=>this._formFieldInstances[e][u]!==i[u])&&(this._formFieldInstances[e]={instanceId:e,...i},this._eventBus.fire("formFieldInstance.changed",{instanceId:e})),e}cleanupInstance(e){this._formFieldInstances[e]&&(delete this._formFieldInstances[e],this._eventBus.fire("formFieldInstance.removed",{instanceId:e}))}get(e){return this._formFieldInstances[e]}getAll(){return Object.values(this._formFieldInstances)}getAllKeyed(){return this.getAll().filter(({id:e})=>{const t=this._formFieldRegistry.get(e);if(!t)return!1;const{type:r}=t,{config:i}=this._formFields.get(r);return i.keyed})}clear(){this._formFieldInstances={}}}rD.$inject=["eventBus","formFieldRegistry","formFields"];function iD(n,e,t,r){const i=()=>{const[o,a]=st(t._getState()),u={getService(b,O=!0){return r.get(b,O)},formId:t._id};e.on("changed",b=>{a(b)});const f=Ye(b=>t._update(b),[]),{properties:h}=o,{readOnly:p}=h,g=Ye(()=>{p||t.submit()},[p]),m=Ye(()=>t.reset(),[]),{schema:y}=o;return y?A(Gu.Provider,{value:u,children:A(ej,{onChange:f,onSubmit:g,onReset:m})}):null},{container:s}=n;e.on("form.init",()=>{Gf(A(i,{}),s)}),e.on("form.destroy",()=>{Gf(null,s)})}iD.$inject=["config.renderer","eventBus","form","injector"];const Y1=n=>{const e=[];return n===null||Object.values(n).forEach(t=>{t!==null&&(typeof t=="object"?e.push(...Y1(t)):Array.isArray(t)?e.push(...t.map(Y1).flat()):typeof t=="string"&&t.startsWith(FM)&&e.push(t))}),e},Gs=Symbol("fileRegistry"),_j=Symbol("eventBus"),Oj=Symbol("formFieldRegistry"),xj=Symbol("formFieldInstanceRegistry"),kj=[];class sD{constructor(e,t,r){this[Gs]=new Map,this[_j]=e,this[Oj]=t,this[xj]=r;const i=({item:s})=>{Y1(s).forEach(a=>{this.deleteFiles(a)})};e.on("form.clear",()=>this.clear()),e.on("conditionChecker.remove",i),e.on("repeatRenderManager.remove",i)}setFiles(e,t){this[Gs].set(e,t)}getFiles(e){return this[Gs].get(e)||kj}getKeys(){return Array.from(this[Gs].keys())}hasKey(e){return this[Gs].has(e)}deleteFiles(e){this[Gs].delete(e)}getAllFiles(){return new Map(this[Gs])}clear(){this[Gs].clear()}}sD.$inject=["eventBus","formFieldRegistry","formFieldInstanceRegistry"];const Sj={__init__:["formFields","renderer"],formFields:["type",nj],renderer:["type",iD],fileRegistry:["type",sD]},Cj={__depends__:[Sj],eventBus:["type",or],importer:["type",KM],fieldFactory:["type",JM],formFieldRegistry:["type",nD],formFieldInstanceRegistry:["type",rD],pathRegistry:["type",eD],formLayouter:["type",tD],validator:["type",ZM]},Tj=new Sr([32,36,1]);class Ej{constructor(e={}){this.on=this._onEvent,this._id=Tj.next(),this._container=ZV();const{container:t,injector:r=this._createInjector(e,this._container),properties:i={}}=e;this._state={initialData:null,data:null,properties:i,errors:{},schema:null},this.get=r.get,this.invoke=r.invoke,this.get("eventBus").fire("form.init"),t&&this.attachTo(t)}clear(){this._emit("diagram.clear"),this._emit("form.clear")}destroy(){this.get("eventBus").fire("form.destroy"),this.get("eventBus").fire("diagram.destroy"),this._detach(!1)}importSchema(e,t={}){return new Promise((r,i)=>{try{this.clear();const{schema:s,warnings:o}=this.get("importer").importSchema(e),a=this._getInitializedFieldData(qr(t));return this._setState({data:a,errors:{},schema:s,initialData:qr(a)}),this._emit("import.done",{warnings:o}),r({warnings:o})}catch(s){return this._emit("import.done",{error:s,warnings:s.warnings||[]}),i(s)}})}submit(){const{properties:e}=this._getState();if(e.readOnly||e.disabled)throw new Error("form is read-only");this._emit("presubmit");const t=this._getSubmitData(),r=this.validate(),i=this.get("fileRegistry").getAllFiles(),s={data:t,errors:r,files:i};return this._emit("submit",s),s}reset(){this._emit("reset"),this._setState({data:qr(this._state.initialData),errors:{}})}validate(){const e=this.get("formFieldRegistry"),t=this.get("formFieldInstanceRegistry"),r=this.get("validator"),{data:i}=this._getState(),s={},o=(a,u)=>[a,...Object.values(u||{})];return t.getAllKeyed().forEach(a=>{const{id:u,valuePath:f,indexes:h}=a,p=e.get(u);if(p.disabled)return;const g=nn(i,f),m=r.validateFieldInstance(a,g);m.length&&tr(s,o(p.id,h),m)}),this._setState({errors:s}),s}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),Jr(e)&&(e=document.querySelector(e));const t=this._container;e.appendChild(t),this._emit("attach")}detach(){this._detach()}_detach(e=!0){const t=this._container,r=t.parentNode;r&&(e&&this._emit("detach"),r.removeChild(t))}setProperty(e,t){const r=tr(this._getState().properties,[e],t);this._setState({properties:r})}off(e,t){this.get("eventBus").off(e,t)}_createInjector(e,t){const{modules:r=this._getModules(),additionalModules:i=[],...s}=e,o={...s,renderer:{container:t}};return GV([{config:["value",o]},{form:["value",this]},Cj,...r,...i])}_emit(e,t){this.get("eventBus").fire(e,t)}_update(e){const{fieldInstance:t,value:r}=e,{id:i,valuePath:s,indexes:o}=t,{data:a,errors:u}=this._getState(),h=this.get("validator").validateFieldInstance(t,r);tr(a,s,r),tr(u,[i,...Object.values(o||{})],h.length?h:void 0),this._emit("field.updated",e),this._setState({data:qr(a),errors:qr(u)})}_getState(){return this._state}_setState(e){this._state={...this._state,...e},this._emit("changed",this._getState())}_getModules(){return[rj,ij,sj,aj,dj]}_onEvent(e,t,r){this.get("eventBus").on(e,t,r)}_getSubmitData(){const e=this.get("formFieldRegistry"),t=this.get("formFieldInstanceRegistry"),r=this._getState().data,i={};return t.getAllKeyed().forEach(s=>{const{id:o,valuePath:a}=s,{disabled:u}=e.get(o);if(u)return;const f=nn(r,a);tr(i,a,f)}),i}_getInitializedFieldData(e,t={}){const r=this.get("formFieldRegistry"),i=this.get("formFields"),s=this.get("pathRegistry");function o(g,m,y){const{defaultValue:b,type:O,isRepeating:C}=m,{config:M}=i.get(O),T=s.getValuePath(m,{indexes:y});let S=nn(e,T);if(M.keyed){!Xi(S)&&M.sanitizeValue&&(S=M.sanitizeValue({formField:m,data:e,value:S}));const R=Xi(S)?Xi(b)?M.emptyValue:b:S;tr(g,T,R)}if(Array.isArray(m.components)){if(M.repeatable&&C){if((!S||!Array.isArray(S))&&(S=new Array(Xi(m.defaultRepetitions)?1:m.defaultRepetitions).fill().map(R=>({}))||[]),S=S.map(R=>rs(R)?R:{}),tr(g,T,S),!Xi(y[m.id])){m.components.forEach(R=>o(g,R,{...y}));return}S.forEach((R,$)=>{m.components.forEach(L=>o(g,L,{...y,[m.id]:$}))});return}m.components.forEach(R=>o(g,R,y))}}const a=t.container||r.getForm(),u=t.indexes||{},f=s.getValuePath(a,{indexes:u})||[],h=Xi(u[a.id])?f:[...f,u[a.id]],p=qr(e);return o(p,a,u),nn(p,h,{})}}const Aj=[{text:`# File an Invoice

Add your invoice details below.`,type:"text",id:"Field_19q2vlz"},{label:"Creditor",key:"creditor",type:"textfield",validate:{required:!0},id:"Field_0yjcd0o"},{label:"Invoice Number",description:"An invoice number in the format: C-123.",key:"invoiceNumber",type:"textfield",validate:{pattern:"^C-[0-9]+$"},id:"Field_1od31by"},{label:"Submit",action:"submit",key:"submit",type:"button",id:"Field_0rswq3h"}],Mj=18,Dj={name:"form-js (https://demo.bpmn.io)",version:"1.15.0"},Rj="default",Ij="Form_1j8qlhb",oD={components:Aj,schemaVersion:Mj,exporter:Dj,type:Rj,id:Ij},aD=document.getElementById("form-container");aD||console.error("  !");const Pj={},lD=new Ej({container:aD,schema:oD});lD.on("submit",n=>{console.log(n.data,n.errors)});try{await lD.importSchema(oD,Pj)}catch(n){console.error("failed to import form",n)}console.log("Styles loaded:",Array.from(document.styleSheets).some(n=>n.href?.includes("form-js.css")));
